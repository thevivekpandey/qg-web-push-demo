/*!
 * AIQUA SDK: aiqua v3.18.1 staging | (c) Appier
 * 
 */
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ({

/***/ "../../node_modules/asap/browser-raw.js":
/*!**************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/asap/browser-raw.js ***!
  \**************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {

// Use the fastest means possible to execute a task in its own turn, with
// priority over other events including IO, animation, reflow, and redraw
// events in browsers.
//
// An exception thrown by a task will permanently interrupt the processing of
// subsequent tasks. The higher level `asap` function ensures that if an
// exception is thrown by a task, that the task queue will continue flushing as
// soon as possible, but if you use `rawAsap` directly, you are responsible to
// either ensure that no exceptions are thrown from your task, or to manually
// call `rawAsap.requestFlush` if an exception is thrown.
module.exports = rawAsap;
function rawAsap(task) {
    if (!queue.length) {
        requestFlush();
        flushing = true;
    }
    // Equivalent to push, but avoids a function call.
    queue[queue.length] = task;
}

var queue = [];
// Once a flush has been requested, no further calls to `requestFlush` are
// necessary until the next `flush` completes.
var flushing = false;
// `requestFlush` is an implementation-specific method that attempts to kick
// off a `flush` event as quickly as possible. `flush` will attempt to exhaust
// the event queue before yielding to the browser's own event loop.
var requestFlush;
// The position of the next task to execute in the task queue. This is
// preserved between calls to `flush` so that it can be resumed if
// a task throws an exception.
var index = 0;
// If a task schedules additional tasks recursively, the task queue can grow
// unbounded. To prevent memory exhaustion, the task queue will periodically
// truncate already-completed tasks.
var capacity = 1024;

// The flush function processes all tasks that have been scheduled with
// `rawAsap` unless and until one of those tasks throws an exception.
// If a task throws an exception, `flush` ensures that its state will remain
// consistent and will resume where it left off when called again.
// However, `flush` does not make any arrangements to be called again if an
// exception is thrown.
function flush() {
    while (index < queue.length) {
        var currentIndex = index;
        // Advance the index before calling the task. This ensures that we will
        // begin flushing on the next task the task throws an error.
        index = index + 1;
        queue[currentIndex].call();
        // Prevent leaking memory for long chains of recursive calls to `asap`.
        // If we call `asap` within tasks scheduled by `asap`, the queue will
        // grow, but to avoid an O(n) walk for every task we execute, we don't
        // shift tasks off the queue after they have been executed.
        // Instead, we periodically shift 1024 tasks off the queue.
        if (index > capacity) {
            // Manually shift all values starting at the index back to the
            // beginning of the queue.
            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {
                queue[scan] = queue[scan + index];
            }
            queue.length -= index;
            index = 0;
        }
    }
    queue.length = 0;
    index = 0;
    flushing = false;
}

// `requestFlush` is implemented using a strategy based on data collected from
// every available SauceLabs Selenium web driver worker at time of writing.
// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593

// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that
// have WebKitMutationObserver but not un-prefixed MutationObserver.
// Must use `global` or `self` instead of `window` to work in both frames and web
// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.

/* globals self */
var scope = typeof global !== "undefined" ? global : self;
var BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;

// MutationObservers are desirable because they have high priority and work
// reliably everywhere they are implemented.
// They are implemented in all modern browsers.
//
// - Android 4-4.3
// - Chrome 26-34
// - Firefox 14-29
// - Internet Explorer 11
// - iPad Safari 6-7.1
// - iPhone Safari 7-7.1
// - Safari 6-7
if (typeof BrowserMutationObserver === "function") {
    requestFlush = makeRequestCallFromMutationObserver(flush);

// MessageChannels are desirable because they give direct access to the HTML
// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera
// 11-12, and in web workers in many engines.
// Although message channels yield to any queued rendering and IO tasks, they
// would be better than imposing the 4ms delay of timers.
// However, they do not work reliably in Internet Explorer or Safari.

// Internet Explorer 10 is the only browser that has setImmediate but does
// not have MutationObservers.
// Although setImmediate yields to the browser's renderer, it would be
// preferrable to falling back to setTimeout since it does not have
// the minimum 4ms penalty.
// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and
// Desktop to a lesser extent) that renders both setImmediate and
// MessageChannel useless for the purposes of ASAP.
// https://github.com/kriskowal/q/issues/396

// Timers are implemented universally.
// We fall back to timers in workers in most engines, and in foreground
// contexts in the following browsers.
// However, note that even this simple case requires nuances to operate in a
// broad spectrum of browsers.
//
// - Firefox 3-13
// - Internet Explorer 6-9
// - iPad Safari 4.3
// - Lynx 2.8.7
} else {
    requestFlush = makeRequestCallFromTimer(flush);
}

// `requestFlush` requests that the high priority event queue be flushed as
// soon as possible.
// This is useful to prevent an error thrown in a task from stalling the event
// queue if the exception handled by Node.jsâ€™s
// `process.on("uncaughtException")` or by a domain.
rawAsap.requestFlush = requestFlush;

// To request a high priority event, we induce a mutation observer by toggling
// the text of a text node between "1" and "-1".
function makeRequestCallFromMutationObserver(callback) {
    var toggle = 1;
    var observer = new BrowserMutationObserver(callback);
    var node = document.createTextNode("");
    observer.observe(node, {characterData: true});
    return function requestCall() {
        toggle = -toggle;
        node.data = toggle;
    };
}

// The message channel technique was discovered by Malte Ubl and was the
// original foundation for this library.
// http://www.nonblocking.io/2011/06/windownexttick.html

// Safari 6.0.5 (at least) intermittently fails to create message ports on a
// page's first load. Thankfully, this version of Safari supports
// MutationObservers, so we don't need to fall back in that case.

// function makeRequestCallFromMessageChannel(callback) {
//     var channel = new MessageChannel();
//     channel.port1.onmessage = callback;
//     return function requestCall() {
//         channel.port2.postMessage(0);
//     };
// }

// For reasons explained above, we are also unable to use `setImmediate`
// under any circumstances.
// Even if we were, there is another bug in Internet Explorer 10.
// It is not sufficient to assign `setImmediate` to `requestFlush` because
// `setImmediate` must be called *by name* and therefore must be wrapped in a
// closure.
// Never forget.

// function makeRequestCallFromSetImmediate(callback) {
//     return function requestCall() {
//         setImmediate(callback);
//     };
// }

// Safari 6.0 has a problem where timers will get lost while the user is
// scrolling. This problem does not impact ASAP because Safari 6.0 supports
// mutation observers, so that implementation is used instead.
// However, if we ever elect to use timers in Safari, the prevalent work-around
// is to add a scroll event listener that calls for a flush.

// `setTimeout` does not call the passed callback if the delay is less than
// approximately 7 in web workers in Firefox 8 through 18, and sometimes not
// even then.

function makeRequestCallFromTimer(callback) {
    return function requestCall() {
        // We dispatch a timeout with a specified delay of 0 for engines that
        // can reliably accommodate that request. This will usually be snapped
        // to a 4 milisecond delay, but once we're flushing, there's no delay
        // between events.
        var timeoutHandle = setTimeout(handleTimer, 0);
        // However, since this timer gets frequently dropped in Firefox
        // workers, we enlist an interval handle that will try to fire
        // an event 20 times per second until it succeeds.
        var intervalHandle = setInterval(handleTimer, 50);

        function handleTimer() {
            // Whichever timer succeeds will cancel both timers and
            // execute the callback.
            clearTimeout(timeoutHandle);
            clearInterval(intervalHandle);
            callback();
        }
    };
}

// This is for `asap.js` only.
// Its name will be periodically randomized to break any code that depends on
// its existence.
rawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;

// ASAP was originally a nextTick shim included in Q. This was factored out
// into this ASAP package. It was later adapted to RSVP which made further
// amendments. These decisions, particularly to marginalize MessageChannel and
// to capture the MutationObserver implementation in a closure, were integrated
// back into ASAP proper.
// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../packages/web-sdk/node_modules/webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js":
/*!***************************************************************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js ***!
  \***************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _arrayWithHoles; });
function _arrayWithHoles(arr) {
  if (Array.isArray(arr)) return arr;
}

/***/ }),

/***/ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js":
/*!******************************************************************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js ***!
  \******************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _arrayWithoutHoles; });
function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) {
    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {
      arr2[i] = arr[i];
    }

    return arr2;
  }
}

/***/ }),

/***/ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js":
/*!*****************************************************************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js ***!
  \*****************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _asyncToGenerator; });
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}

/***/ }),

/***/ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js":
/*!***************************************************************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js ***!
  \***************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _defineProperty; });
function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

/***/ }),

/***/ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js":
/*!****************************************************************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js ***!
  \****************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _iterableToArray; });
function _iterableToArray(iter) {
  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter);
}

/***/ }),

/***/ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js":
/*!****************************************************************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js ***!
  \****************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _nonIterableRest; });
function _nonIterableRest() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance");
}

/***/ }),

/***/ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js":
/*!******************************************************************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js ***!
  \******************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _nonIterableSpread; });
function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance");
}

/***/ }),

/***/ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread.js":
/*!*************************************************************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread.js ***!
  \*************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _objectSpread; });
/* harmony import */ var _defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./defineProperty */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js");

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};
    var ownKeys = Object.keys(source);

    if (typeof Object.getOwnPropertySymbols === 'function') {
      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {
        return Object.getOwnPropertyDescriptor(source, sym).enumerable;
      }));
    }

    ownKeys.forEach(function (key) {
      Object(_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(target, key, source[key]);
    });
  }

  return target;
}

/***/ }),

/***/ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js":
/*!************************************************************************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js ***!
  \************************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _objectWithoutProperties; });
/* harmony import */ var _objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./objectWithoutPropertiesLoose */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js");

function _objectWithoutProperties(source, excluded) {
  if (source == null) return {};
  var target = Object(_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(source, excluded);
  var key, i;

  if (Object.getOwnPropertySymbols) {
    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);

    for (i = 0; i < sourceSymbolKeys.length; i++) {
      key = sourceSymbolKeys[i];
      if (excluded.indexOf(key) >= 0) continue;
      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;
      target[key] = source[key];
    }
  }

  return target;
}

/***/ }),

/***/ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js":
/*!*****************************************************************************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js ***!
  \*****************************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _objectWithoutPropertiesLoose; });
function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;

  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }

  return target;
}

/***/ }),

/***/ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toArray.js":
/*!********************************************************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toArray.js ***!
  \********************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _toArray; });
/* harmony import */ var _arrayWithHoles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./arrayWithHoles */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js");
/* harmony import */ var _iterableToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./iterableToArray */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js");
/* harmony import */ var _nonIterableRest__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./nonIterableRest */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js");



function _toArray(arr) {
  return Object(_arrayWithHoles__WEBPACK_IMPORTED_MODULE_0__["default"])(arr) || Object(_iterableToArray__WEBPACK_IMPORTED_MODULE_1__["default"])(arr) || Object(_nonIterableRest__WEBPACK_IMPORTED_MODULE_2__["default"])();
}

/***/ }),

/***/ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js":
/*!******************************************************************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js ***!
  \******************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _toConsumableArray; });
/* harmony import */ var _arrayWithoutHoles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./arrayWithoutHoles */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js");
/* harmony import */ var _iterableToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./iterableToArray */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js");
/* harmony import */ var _nonIterableSpread__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./nonIterableSpread */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js");



function _toConsumableArray(arr) {
  return Object(_arrayWithoutHoles__WEBPACK_IMPORTED_MODULE_0__["default"])(arr) || Object(_iterableToArray__WEBPACK_IMPORTED_MODULE_1__["default"])(arr) || Object(_nonIterableSpread__WEBPACK_IMPORTED_MODULE_2__["default"])();
}

/***/ }),

/***/ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js":
/*!******************************************************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js ***!
  \******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! regenerator-runtime */ "../../node_modules/babel-preset-react-app/node_modules/regenerator-runtime/runtime.js");


/***/ }),

/***/ "../../node_modules/babel-preset-react-app/node_modules/regenerator-runtime/runtime.js":
/*!*************************************************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/regenerator-runtime/runtime.js ***!
  \*************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/**
 * Copyright (c) 2014-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

var runtime = (function (exports) {
  "use strict";

  var Op = Object.prototype;
  var hasOwn = Op.hasOwnProperty;
  var undefined; // More compressible than void 0.
  var $Symbol = typeof Symbol === "function" ? Symbol : {};
  var iteratorSymbol = $Symbol.iterator || "@@iterator";
  var asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator";
  var toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";

  function wrap(innerFn, outerFn, self, tryLocsList) {
    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.
    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;
    var generator = Object.create(protoGenerator.prototype);
    var context = new Context(tryLocsList || []);

    // The ._invoke method unifies the implementations of the .next,
    // .throw, and .return methods.
    generator._invoke = makeInvokeMethod(innerFn, self, context);

    return generator;
  }
  exports.wrap = wrap;

  // Try/catch helper to minimize deoptimizations. Returns a completion
  // record like context.tryEntries[i].completion. This interface could
  // have been (and was previously) designed to take a closure to be
  // invoked without arguments, but in all the cases we care about we
  // already have an existing method we want to call, so there's no need
  // to create a new function object. We can even get away with assuming
  // the method takes exactly one argument, since that happens to be true
  // in every case, so we don't have to touch the arguments object. The
  // only additional allocation required is the completion record, which
  // has a stable shape and so hopefully should be cheap to allocate.
  function tryCatch(fn, obj, arg) {
    try {
      return { type: "normal", arg: fn.call(obj, arg) };
    } catch (err) {
      return { type: "throw", arg: err };
    }
  }

  var GenStateSuspendedStart = "suspendedStart";
  var GenStateSuspendedYield = "suspendedYield";
  var GenStateExecuting = "executing";
  var GenStateCompleted = "completed";

  // Returning this object from the innerFn has the same effect as
  // breaking out of the dispatch switch statement.
  var ContinueSentinel = {};

  // Dummy constructor functions that we use as the .constructor and
  // .constructor.prototype properties for functions that return Generator
  // objects. For full spec compliance, you may wish to configure your
  // minifier not to mangle the names of these two functions.
  function Generator() {}
  function GeneratorFunction() {}
  function GeneratorFunctionPrototype() {}

  // This is a polyfill for %IteratorPrototype% for environments that
  // don't natively support it.
  var IteratorPrototype = {};
  IteratorPrototype[iteratorSymbol] = function () {
    return this;
  };

  var getProto = Object.getPrototypeOf;
  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));
  if (NativeIteratorPrototype &&
      NativeIteratorPrototype !== Op &&
      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {
    // This environment has a native %IteratorPrototype%; use it instead
    // of the polyfill.
    IteratorPrototype = NativeIteratorPrototype;
  }

  var Gp = GeneratorFunctionPrototype.prototype =
    Generator.prototype = Object.create(IteratorPrototype);
  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;
  GeneratorFunctionPrototype.constructor = GeneratorFunction;
  GeneratorFunctionPrototype[toStringTagSymbol] =
    GeneratorFunction.displayName = "GeneratorFunction";

  // Helper for defining the .next, .throw, and .return methods of the
  // Iterator interface in terms of a single ._invoke method.
  function defineIteratorMethods(prototype) {
    ["next", "throw", "return"].forEach(function(method) {
      prototype[method] = function(arg) {
        return this._invoke(method, arg);
      };
    });
  }

  exports.isGeneratorFunction = function(genFun) {
    var ctor = typeof genFun === "function" && genFun.constructor;
    return ctor
      ? ctor === GeneratorFunction ||
        // For the native GeneratorFunction constructor, the best we can
        // do is to check its .name property.
        (ctor.displayName || ctor.name) === "GeneratorFunction"
      : false;
  };

  exports.mark = function(genFun) {
    if (Object.setPrototypeOf) {
      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);
    } else {
      genFun.__proto__ = GeneratorFunctionPrototype;
      if (!(toStringTagSymbol in genFun)) {
        genFun[toStringTagSymbol] = "GeneratorFunction";
      }
    }
    genFun.prototype = Object.create(Gp);
    return genFun;
  };

  // Within the body of any async function, `await x` is transformed to
  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test
  // `hasOwn.call(value, "__await")` to determine if the yielded value is
  // meant to be awaited.
  exports.awrap = function(arg) {
    return { __await: arg };
  };

  function AsyncIterator(generator) {
    function invoke(method, arg, resolve, reject) {
      var record = tryCatch(generator[method], generator, arg);
      if (record.type === "throw") {
        reject(record.arg);
      } else {
        var result = record.arg;
        var value = result.value;
        if (value &&
            typeof value === "object" &&
            hasOwn.call(value, "__await")) {
          return Promise.resolve(value.__await).then(function(value) {
            invoke("next", value, resolve, reject);
          }, function(err) {
            invoke("throw", err, resolve, reject);
          });
        }

        return Promise.resolve(value).then(function(unwrapped) {
          // When a yielded Promise is resolved, its final value becomes
          // the .value of the Promise<{value,done}> result for the
          // current iteration.
          result.value = unwrapped;
          resolve(result);
        }, function(error) {
          // If a rejected Promise was yielded, throw the rejection back
          // into the async generator function so it can be handled there.
          return invoke("throw", error, resolve, reject);
        });
      }
    }

    var previousPromise;

    function enqueue(method, arg) {
      function callInvokeWithMethodAndArg() {
        return new Promise(function(resolve, reject) {
          invoke(method, arg, resolve, reject);
        });
      }

      return previousPromise =
        // If enqueue has been called before, then we want to wait until
        // all previous Promises have been resolved before calling invoke,
        // so that results are always delivered in the correct order. If
        // enqueue has not been called before, then it is important to
        // call invoke immediately, without waiting on a callback to fire,
        // so that the async generator function has the opportunity to do
        // any necessary setup in a predictable way. This predictability
        // is why the Promise constructor synchronously invokes its
        // executor callback, and why async functions synchronously
        // execute code before the first await. Since we implement simple
        // async functions in terms of async generators, it is especially
        // important to get this right, even though it requires care.
        previousPromise ? previousPromise.then(
          callInvokeWithMethodAndArg,
          // Avoid propagating failures to Promises returned by later
          // invocations of the iterator.
          callInvokeWithMethodAndArg
        ) : callInvokeWithMethodAndArg();
    }

    // Define the unified helper method that is used to implement .next,
    // .throw, and .return (see defineIteratorMethods).
    this._invoke = enqueue;
  }

  defineIteratorMethods(AsyncIterator.prototype);
  AsyncIterator.prototype[asyncIteratorSymbol] = function () {
    return this;
  };
  exports.AsyncIterator = AsyncIterator;

  // Note that simple async functions are implemented on top of
  // AsyncIterator objects; they just return a Promise for the value of
  // the final result produced by the iterator.
  exports.async = function(innerFn, outerFn, self, tryLocsList) {
    var iter = new AsyncIterator(
      wrap(innerFn, outerFn, self, tryLocsList)
    );

    return exports.isGeneratorFunction(outerFn)
      ? iter // If outerFn is a generator, return the full iterator.
      : iter.next().then(function(result) {
          return result.done ? result.value : iter.next();
        });
  };

  function makeInvokeMethod(innerFn, self, context) {
    var state = GenStateSuspendedStart;

    return function invoke(method, arg) {
      if (state === GenStateExecuting) {
        throw new Error("Generator is already running");
      }

      if (state === GenStateCompleted) {
        if (method === "throw") {
          throw arg;
        }

        // Be forgiving, per 25.3.3.3.3 of the spec:
        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume
        return doneResult();
      }

      context.method = method;
      context.arg = arg;

      while (true) {
        var delegate = context.delegate;
        if (delegate) {
          var delegateResult = maybeInvokeDelegate(delegate, context);
          if (delegateResult) {
            if (delegateResult === ContinueSentinel) continue;
            return delegateResult;
          }
        }

        if (context.method === "next") {
          // Setting context._sent for legacy support of Babel's
          // function.sent implementation.
          context.sent = context._sent = context.arg;

        } else if (context.method === "throw") {
          if (state === GenStateSuspendedStart) {
            state = GenStateCompleted;
            throw context.arg;
          }

          context.dispatchException(context.arg);

        } else if (context.method === "return") {
          context.abrupt("return", context.arg);
        }

        state = GenStateExecuting;

        var record = tryCatch(innerFn, self, context);
        if (record.type === "normal") {
          // If an exception is thrown from innerFn, we leave state ===
          // GenStateExecuting and loop back for another invocation.
          state = context.done
            ? GenStateCompleted
            : GenStateSuspendedYield;

          if (record.arg === ContinueSentinel) {
            continue;
          }

          return {
            value: record.arg,
            done: context.done
          };

        } else if (record.type === "throw") {
          state = GenStateCompleted;
          // Dispatch the exception by looping back around to the
          // context.dispatchException(context.arg) call above.
          context.method = "throw";
          context.arg = record.arg;
        }
      }
    };
  }

  // Call delegate.iterator[context.method](context.arg) and handle the
  // result, either by returning a { value, done } result from the
  // delegate iterator, or by modifying context.method and context.arg,
  // setting context.delegate to null, and returning the ContinueSentinel.
  function maybeInvokeDelegate(delegate, context) {
    var method = delegate.iterator[context.method];
    if (method === undefined) {
      // A .throw or .return when the delegate iterator has no .throw
      // method always terminates the yield* loop.
      context.delegate = null;

      if (context.method === "throw") {
        // Note: ["return"] must be used for ES3 parsing compatibility.
        if (delegate.iterator["return"]) {
          // If the delegate iterator has a return method, give it a
          // chance to clean up.
          context.method = "return";
          context.arg = undefined;
          maybeInvokeDelegate(delegate, context);

          if (context.method === "throw") {
            // If maybeInvokeDelegate(context) changed context.method from
            // "return" to "throw", let that override the TypeError below.
            return ContinueSentinel;
          }
        }

        context.method = "throw";
        context.arg = new TypeError(
          "The iterator does not provide a 'throw' method");
      }

      return ContinueSentinel;
    }

    var record = tryCatch(method, delegate.iterator, context.arg);

    if (record.type === "throw") {
      context.method = "throw";
      context.arg = record.arg;
      context.delegate = null;
      return ContinueSentinel;
    }

    var info = record.arg;

    if (! info) {
      context.method = "throw";
      context.arg = new TypeError("iterator result is not an object");
      context.delegate = null;
      return ContinueSentinel;
    }

    if (info.done) {
      // Assign the result of the finished delegate to the temporary
      // variable specified by delegate.resultName (see delegateYield).
      context[delegate.resultName] = info.value;

      // Resume execution at the desired location (see delegateYield).
      context.next = delegate.nextLoc;

      // If context.method was "throw" but the delegate handled the
      // exception, let the outer generator proceed normally. If
      // context.method was "next", forget context.arg since it has been
      // "consumed" by the delegate iterator. If context.method was
      // "return", allow the original .return call to continue in the
      // outer generator.
      if (context.method !== "return") {
        context.method = "next";
        context.arg = undefined;
      }

    } else {
      // Re-yield the result returned by the delegate method.
      return info;
    }

    // The delegate iterator is finished, so forget it and continue with
    // the outer generator.
    context.delegate = null;
    return ContinueSentinel;
  }

  // Define Generator.prototype.{next,throw,return} in terms of the
  // unified ._invoke helper method.
  defineIteratorMethods(Gp);

  Gp[toStringTagSymbol] = "Generator";

  // A Generator should always return itself as the iterator object when the
  // @@iterator function is called on it. Some browsers' implementations of the
  // iterator prototype chain incorrectly implement this, causing the Generator
  // object to not be returned from this call. This ensures that doesn't happen.
  // See https://github.com/facebook/regenerator/issues/274 for more details.
  Gp[iteratorSymbol] = function() {
    return this;
  };

  Gp.toString = function() {
    return "[object Generator]";
  };

  function pushTryEntry(locs) {
    var entry = { tryLoc: locs[0] };

    if (1 in locs) {
      entry.catchLoc = locs[1];
    }

    if (2 in locs) {
      entry.finallyLoc = locs[2];
      entry.afterLoc = locs[3];
    }

    this.tryEntries.push(entry);
  }

  function resetTryEntry(entry) {
    var record = entry.completion || {};
    record.type = "normal";
    delete record.arg;
    entry.completion = record;
  }

  function Context(tryLocsList) {
    // The root entry object (effectively a try statement without a catch
    // or a finally block) gives us a place to store values thrown from
    // locations where there is no enclosing try statement.
    this.tryEntries = [{ tryLoc: "root" }];
    tryLocsList.forEach(pushTryEntry, this);
    this.reset(true);
  }

  exports.keys = function(object) {
    var keys = [];
    for (var key in object) {
      keys.push(key);
    }
    keys.reverse();

    // Rather than returning an object with a next method, we keep
    // things simple and return the next function itself.
    return function next() {
      while (keys.length) {
        var key = keys.pop();
        if (key in object) {
          next.value = key;
          next.done = false;
          return next;
        }
      }

      // To avoid creating an additional object, we just hang the .value
      // and .done properties off the next function object itself. This
      // also ensures that the minifier will not anonymize the function.
      next.done = true;
      return next;
    };
  };

  function values(iterable) {
    if (iterable) {
      var iteratorMethod = iterable[iteratorSymbol];
      if (iteratorMethod) {
        return iteratorMethod.call(iterable);
      }

      if (typeof iterable.next === "function") {
        return iterable;
      }

      if (!isNaN(iterable.length)) {
        var i = -1, next = function next() {
          while (++i < iterable.length) {
            if (hasOwn.call(iterable, i)) {
              next.value = iterable[i];
              next.done = false;
              return next;
            }
          }

          next.value = undefined;
          next.done = true;

          return next;
        };

        return next.next = next;
      }
    }

    // Return an iterator with no values.
    return { next: doneResult };
  }
  exports.values = values;

  function doneResult() {
    return { value: undefined, done: true };
  }

  Context.prototype = {
    constructor: Context,

    reset: function(skipTempReset) {
      this.prev = 0;
      this.next = 0;
      // Resetting context._sent for legacy support of Babel's
      // function.sent implementation.
      this.sent = this._sent = undefined;
      this.done = false;
      this.delegate = null;

      this.method = "next";
      this.arg = undefined;

      this.tryEntries.forEach(resetTryEntry);

      if (!skipTempReset) {
        for (var name in this) {
          // Not sure about the optimal order of these conditions:
          if (name.charAt(0) === "t" &&
              hasOwn.call(this, name) &&
              !isNaN(+name.slice(1))) {
            this[name] = undefined;
          }
        }
      }
    },

    stop: function() {
      this.done = true;

      var rootEntry = this.tryEntries[0];
      var rootRecord = rootEntry.completion;
      if (rootRecord.type === "throw") {
        throw rootRecord.arg;
      }

      return this.rval;
    },

    dispatchException: function(exception) {
      if (this.done) {
        throw exception;
      }

      var context = this;
      function handle(loc, caught) {
        record.type = "throw";
        record.arg = exception;
        context.next = loc;

        if (caught) {
          // If the dispatched exception was caught by a catch block,
          // then let that catch block handle the exception normally.
          context.method = "next";
          context.arg = undefined;
        }

        return !! caught;
      }

      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        var record = entry.completion;

        if (entry.tryLoc === "root") {
          // Exception thrown outside of any try block that could handle
          // it, so set the completion value of the entire function to
          // throw the exception.
          return handle("end");
        }

        if (entry.tryLoc <= this.prev) {
          var hasCatch = hasOwn.call(entry, "catchLoc");
          var hasFinally = hasOwn.call(entry, "finallyLoc");

          if (hasCatch && hasFinally) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            } else if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else if (hasCatch) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            }

          } else if (hasFinally) {
            if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else {
            throw new Error("try statement without catch or finally");
          }
        }
      }
    },

    abrupt: function(type, arg) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc <= this.prev &&
            hasOwn.call(entry, "finallyLoc") &&
            this.prev < entry.finallyLoc) {
          var finallyEntry = entry;
          break;
        }
      }

      if (finallyEntry &&
          (type === "break" ||
           type === "continue") &&
          finallyEntry.tryLoc <= arg &&
          arg <= finallyEntry.finallyLoc) {
        // Ignore the finally entry if control is not jumping to a
        // location outside the try/catch block.
        finallyEntry = null;
      }

      var record = finallyEntry ? finallyEntry.completion : {};
      record.type = type;
      record.arg = arg;

      if (finallyEntry) {
        this.method = "next";
        this.next = finallyEntry.finallyLoc;
        return ContinueSentinel;
      }

      return this.complete(record);
    },

    complete: function(record, afterLoc) {
      if (record.type === "throw") {
        throw record.arg;
      }

      if (record.type === "break" ||
          record.type === "continue") {
        this.next = record.arg;
      } else if (record.type === "return") {
        this.rval = this.arg = record.arg;
        this.method = "return";
        this.next = "end";
      } else if (record.type === "normal" && afterLoc) {
        this.next = afterLoc;
      }

      return ContinueSentinel;
    },

    finish: function(finallyLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.finallyLoc === finallyLoc) {
          this.complete(entry.completion, entry.afterLoc);
          resetTryEntry(entry);
          return ContinueSentinel;
        }
      }
    },

    "catch": function(tryLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc === tryLoc) {
          var record = entry.completion;
          if (record.type === "throw") {
            var thrown = record.arg;
            resetTryEntry(entry);
          }
          return thrown;
        }
      }

      // The context.catch method must only be called with a location
      // argument that corresponds to a known catch block.
      throw new Error("illegal catch attempt");
    },

    delegateYield: function(iterable, resultName, nextLoc) {
      this.delegate = {
        iterator: values(iterable),
        resultName: resultName,
        nextLoc: nextLoc
      };

      if (this.method === "next") {
        // Deliberately forget the last sent value so that we don't
        // accidentally pass it on to the delegate.
        this.arg = undefined;
      }

      return ContinueSentinel;
    }
  };

  // Regardless of whether this script is executing as a CommonJS module
  // or not, return the runtime object so that we can declare the variable
  // regeneratorRuntime in the outer scope, which allows this module to be
  // injected easily by `bin/regenerator --include-runtime script.js`.
  return exports;

}(
  // If this script is executing as a CommonJS module, use module.exports
  // as the regeneratorRuntime namespace. Otherwise create a new empty
  // object. Either way, the resulting object will be used to initialize
  // the regeneratorRuntime variable at the top of this file.
   true ? module.exports : undefined
));

try {
  regeneratorRuntime = runtime;
} catch (accidentalStrictMode) {
  // This module should not be running in strict mode, so the above
  // assignment should always work unless something is misconfigured. Just
  // in case runtime.js accidentally runs in strict mode, we can escape
  // strict mode using a global Function call. This could conceivably fail
  // if a Content Security Policy forbids using Function, but in that case
  // the proper solution is to fix the accidental strict mode problem. If
  // you've misconfigured your bundler to force strict mode and applied a
  // CSP to forbid Function, and you're not willing to fix either of those
  // problems, please detail your unique predicament in a GitHub issue.
  Function("r", "regeneratorRuntime = r")(runtime);
}


/***/ }),

/***/ "../../node_modules/compare-versions/index.js":
/*!********************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/compare-versions/index.js ***!
  \********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* global define */
(function (root, factory) {
  /* istanbul ignore next */
  if (true) {
    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
  } else {}
}(this, function () {

  var semver = /^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;

  function indexOrEnd(str, q) {
    return str.indexOf(q) === -1 ? str.length : str.indexOf(q);
  }

  function split(v) {
    var c = v.replace(/^v/, '').replace(/\+.*$/, '');
    var patchIndex = indexOrEnd(c, '-');
    var arr = c.substring(0, patchIndex).split('.');
    arr.push(c.substring(patchIndex + 1));
    return arr;
  }

  function tryParse(v) {
    return isNaN(Number(v)) ? v : Number(v);
  }

  function validate(version) {
    if (typeof version !== 'string') {
      throw new TypeError('Invalid argument expected string');
    }
    if (!semver.test(version)) {
      throw new Error('Invalid argument not valid semver (\''+version+'\' received)');
    }
  }

  return function compareVersions(v1, v2) {
    [v1, v2].forEach(validate);

    var s1 = split(v1);
    var s2 = split(v2);

    for (var i = 0; i < Math.max(s1.length - 1, s2.length - 1); i++) {
      var n1 = parseInt(s1[i] || 0, 10);
      var n2 = parseInt(s2[i] || 0, 10);

      if (n1 > n2) return 1;
      if (n2 > n1) return -1;
    }

    var sp1 = s1[s1.length - 1];
    var sp2 = s2[s2.length - 1];

    if (sp1 && sp2) {
      var p1 = sp1.split('.').map(tryParse);
      var p2 = sp2.split('.').map(tryParse);

      for (i = 0; i < Math.max(p1.length, p2.length); i++) {
        if (p1[i] === undefined || typeof p2[i] === 'string' && typeof p1[i] === 'number') return -1;
        if (p2[i] === undefined || typeof p1[i] === 'string' && typeof p2[i] === 'number') return 1;

        if (p1[i] > p2[i]) return 1;
        if (p2[i] > p1[i]) return -1;
      }
    } else if (sp1 || sp2) {
      return sp1 ? -1 : 1;
    }

    return 0;
  };

}));


/***/ }),

/***/ "../../node_modules/component-emitter/index.js":
/*!*********************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/component-emitter/index.js ***!
  \*********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {


/**
 * Expose `Emitter`.
 */

if (true) {
  module.exports = Emitter;
}

/**
 * Initialize a new `Emitter`.
 *
 * @api public
 */

function Emitter(obj) {
  if (obj) return mixin(obj);
};

/**
 * Mixin the emitter properties.
 *
 * @param {Object} obj
 * @return {Object}
 * @api private
 */

function mixin(obj) {
  for (var key in Emitter.prototype) {
    obj[key] = Emitter.prototype[key];
  }
  return obj;
}

/**
 * Listen on the given `event` with `fn`.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */

Emitter.prototype.on =
Emitter.prototype.addEventListener = function(event, fn){
  this._callbacks = this._callbacks || {};
  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])
    .push(fn);
  return this;
};

/**
 * Adds an `event` listener that will be invoked a single
 * time then automatically removed.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */

Emitter.prototype.once = function(event, fn){
  function on() {
    this.off(event, on);
    fn.apply(this, arguments);
  }

  on.fn = fn;
  this.on(event, on);
  return this;
};

/**
 * Remove the given callback for `event` or all
 * registered callbacks.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */

Emitter.prototype.off =
Emitter.prototype.removeListener =
Emitter.prototype.removeAllListeners =
Emitter.prototype.removeEventListener = function(event, fn){
  this._callbacks = this._callbacks || {};

  // all
  if (0 == arguments.length) {
    this._callbacks = {};
    return this;
  }

  // specific event
  var callbacks = this._callbacks['$' + event];
  if (!callbacks) return this;

  // remove all handlers
  if (1 == arguments.length) {
    delete this._callbacks['$' + event];
    return this;
  }

  // remove specific handler
  var cb;
  for (var i = 0; i < callbacks.length; i++) {
    cb = callbacks[i];
    if (cb === fn || cb.fn === fn) {
      callbacks.splice(i, 1);
      break;
    }
  }

  // Remove event specific arrays for event types that no
  // one is subscribed for to avoid memory leak.
  if (callbacks.length === 0) {
    delete this._callbacks['$' + event];
  }

  return this;
};

/**
 * Emit `event` with the given args.
 *
 * @param {String} event
 * @param {Mixed} ...
 * @return {Emitter}
 */

Emitter.prototype.emit = function(event){
  this._callbacks = this._callbacks || {};
  var args = [].slice.call(arguments, 1)
    , callbacks = this._callbacks['$' + event];

  if (callbacks) {
    callbacks = callbacks.slice(0);
    for (var i = 0, len = callbacks.length; i < len; ++i) {
      callbacks[i].apply(this, args);
    }
  }

  return this;
};

/**
 * Return array of callbacks for `event`.
 *
 * @param {String} event
 * @return {Array}
 * @api public
 */

Emitter.prototype.listeners = function(event){
  this._callbacks = this._callbacks || {};
  return this._callbacks['$' + event] || [];
};

/**
 * Check if this emitter has `event` handlers.
 *
 * @param {String} event
 * @return {Boolean}
 * @api public
 */

Emitter.prototype.hasListeners = function(event){
  return !! this.listeners(event).length;
};


/***/ }),

/***/ "../../node_modules/core-js/fn/array/from.js":
/*!*******************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/fn/array/from.js ***!
  \*******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! ../../modules/es6.string.iterator */ "../../node_modules/core-js/modules/es6.string.iterator.js");
__webpack_require__(/*! ../../modules/es6.array.from */ "../../node_modules/core-js/modules/es6.array.from.js");
module.exports = __webpack_require__(/*! ../../modules/_core */ "../../node_modules/core-js/modules/_core.js").Array.from;


/***/ }),

/***/ "../../node_modules/core-js/fn/array/includes.js":
/*!***********************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/fn/array/includes.js ***!
  \***********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! ../../modules/es7.array.includes */ "../../node_modules/core-js/modules/es7.array.includes.js");
module.exports = __webpack_require__(/*! ../../modules/_core */ "../../node_modules/core-js/modules/_core.js").Array.includes;


/***/ }),

/***/ "../../node_modules/core-js/fn/object/assign.js":
/*!**********************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/fn/object/assign.js ***!
  \**********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! ../../modules/es6.object.assign */ "../../node_modules/core-js/modules/es6.object.assign.js");
module.exports = __webpack_require__(/*! ../../modules/_core */ "../../node_modules/core-js/modules/_core.js").Object.assign;


/***/ }),

/***/ "../../node_modules/core-js/fn/string/includes.js":
/*!************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/fn/string/includes.js ***!
  \************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! ../../modules/es6.string.includes */ "../../node_modules/core-js/modules/es6.string.includes.js");
module.exports = __webpack_require__(/*! ../../modules/_core */ "../../node_modules/core-js/modules/_core.js").String.includes;


/***/ }),

/***/ "../../node_modules/core-js/modules/_a-function.js":
/*!*************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_a-function.js ***!
  \*************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function (it) {
  if (typeof it != 'function') throw TypeError(it + ' is not a function!');
  return it;
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_add-to-unscopables.js":
/*!*********************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_add-to-unscopables.js ***!
  \*********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// 22.1.3.31 Array.prototype[@@unscopables]
var UNSCOPABLES = __webpack_require__(/*! ./_wks */ "../../node_modules/core-js/modules/_wks.js")('unscopables');
var ArrayProto = Array.prototype;
if (ArrayProto[UNSCOPABLES] == undefined) __webpack_require__(/*! ./_hide */ "../../node_modules/core-js/modules/_hide.js")(ArrayProto, UNSCOPABLES, {});
module.exports = function (key) {
  ArrayProto[UNSCOPABLES][key] = true;
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_an-object.js":
/*!************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_an-object.js ***!
  \************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(/*! ./_is-object */ "../../node_modules/core-js/modules/_is-object.js");
module.exports = function (it) {
  if (!isObject(it)) throw TypeError(it + ' is not an object!');
  return it;
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_array-includes.js":
/*!*****************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_array-includes.js ***!
  \*****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// false -> Array#indexOf
// true  -> Array#includes
var toIObject = __webpack_require__(/*! ./_to-iobject */ "../../node_modules/core-js/modules/_to-iobject.js");
var toLength = __webpack_require__(/*! ./_to-length */ "../../node_modules/core-js/modules/_to-length.js");
var toAbsoluteIndex = __webpack_require__(/*! ./_to-absolute-index */ "../../node_modules/core-js/modules/_to-absolute-index.js");
module.exports = function (IS_INCLUDES) {
  return function ($this, el, fromIndex) {
    var O = toIObject($this);
    var length = toLength(O.length);
    var index = toAbsoluteIndex(fromIndex, length);
    var value;
    // Array#includes uses SameValueZero equality algorithm
    // eslint-disable-next-line no-self-compare
    if (IS_INCLUDES && el != el) while (length > index) {
      value = O[index++];
      // eslint-disable-next-line no-self-compare
      if (value != value) return true;
    // Array#indexOf ignores holes, Array#includes - not
    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {
      if (O[index] === el) return IS_INCLUDES || index || 0;
    } return !IS_INCLUDES && -1;
  };
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_classof.js":
/*!**********************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_classof.js ***!
  \**********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// getting tag from 19.1.3.6 Object.prototype.toString()
var cof = __webpack_require__(/*! ./_cof */ "../../node_modules/core-js/modules/_cof.js");
var TAG = __webpack_require__(/*! ./_wks */ "../../node_modules/core-js/modules/_wks.js")('toStringTag');
// ES3 wrong here
var ARG = cof(function () { return arguments; }()) == 'Arguments';

// fallback for IE11 Script Access Denied error
var tryGet = function (it, key) {
  try {
    return it[key];
  } catch (e) { /* empty */ }
};

module.exports = function (it) {
  var O, T, B;
  return it === undefined ? 'Undefined' : it === null ? 'Null'
    // @@toStringTag case
    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T
    // builtinTag case
    : ARG ? cof(O)
    // ES3 arguments fallback
    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_cof.js":
/*!******************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_cof.js ***!
  \******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var toString = {}.toString;

module.exports = function (it) {
  return toString.call(it).slice(8, -1);
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_core.js":
/*!*******************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_core.js ***!
  \*******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var core = module.exports = { version: '2.5.7' };
if (typeof __e == 'number') __e = core; // eslint-disable-line no-undef


/***/ }),

/***/ "../../node_modules/core-js/modules/_create-property.js":
/*!******************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_create-property.js ***!
  \******************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $defineProperty = __webpack_require__(/*! ./_object-dp */ "../../node_modules/core-js/modules/_object-dp.js");
var createDesc = __webpack_require__(/*! ./_property-desc */ "../../node_modules/core-js/modules/_property-desc.js");

module.exports = function (object, index, value) {
  if (index in object) $defineProperty.f(object, index, createDesc(0, value));
  else object[index] = value;
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_ctx.js":
/*!******************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_ctx.js ***!
  \******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// optional / simple context binding
var aFunction = __webpack_require__(/*! ./_a-function */ "../../node_modules/core-js/modules/_a-function.js");
module.exports = function (fn, that, length) {
  aFunction(fn);
  if (that === undefined) return fn;
  switch (length) {
    case 1: return function (a) {
      return fn.call(that, a);
    };
    case 2: return function (a, b) {
      return fn.call(that, a, b);
    };
    case 3: return function (a, b, c) {
      return fn.call(that, a, b, c);
    };
  }
  return function (/* ...args */) {
    return fn.apply(that, arguments);
  };
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_defined.js":
/*!**********************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_defined.js ***!
  \**********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// 7.2.1 RequireObjectCoercible(argument)
module.exports = function (it) {
  if (it == undefined) throw TypeError("Can't call method on  " + it);
  return it;
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_descriptors.js":
/*!**************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_descriptors.js ***!
  \**************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Thank's IE8 for his funny defineProperty
module.exports = !__webpack_require__(/*! ./_fails */ "../../node_modules/core-js/modules/_fails.js")(function () {
  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;
});


/***/ }),

/***/ "../../node_modules/core-js/modules/_dom-create.js":
/*!*************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_dom-create.js ***!
  \*************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(/*! ./_is-object */ "../../node_modules/core-js/modules/_is-object.js");
var document = __webpack_require__(/*! ./_global */ "../../node_modules/core-js/modules/_global.js").document;
// typeof document.createElement is 'object' in old IE
var is = isObject(document) && isObject(document.createElement);
module.exports = function (it) {
  return is ? document.createElement(it) : {};
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_enum-bug-keys.js":
/*!****************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_enum-bug-keys.js ***!
  \****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// IE 8- don't enum bug keys
module.exports = (
  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'
).split(',');


/***/ }),

/***/ "../../node_modules/core-js/modules/_export.js":
/*!*********************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_export.js ***!
  \*********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ./_global */ "../../node_modules/core-js/modules/_global.js");
var core = __webpack_require__(/*! ./_core */ "../../node_modules/core-js/modules/_core.js");
var hide = __webpack_require__(/*! ./_hide */ "../../node_modules/core-js/modules/_hide.js");
var redefine = __webpack_require__(/*! ./_redefine */ "../../node_modules/core-js/modules/_redefine.js");
var ctx = __webpack_require__(/*! ./_ctx */ "../../node_modules/core-js/modules/_ctx.js");
var PROTOTYPE = 'prototype';

var $export = function (type, name, source) {
  var IS_FORCED = type & $export.F;
  var IS_GLOBAL = type & $export.G;
  var IS_STATIC = type & $export.S;
  var IS_PROTO = type & $export.P;
  var IS_BIND = type & $export.B;
  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE];
  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});
  var expProto = exports[PROTOTYPE] || (exports[PROTOTYPE] = {});
  var key, own, out, exp;
  if (IS_GLOBAL) source = name;
  for (key in source) {
    // contains in native
    own = !IS_FORCED && target && target[key] !== undefined;
    // export native or passed
    out = (own ? target : source)[key];
    // bind timers to global for call from export context
    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;
    // extend global
    if (target) redefine(target, key, out, type & $export.U);
    // export
    if (exports[key] != out) hide(exports, key, exp);
    if (IS_PROTO && expProto[key] != out) expProto[key] = out;
  }
};
global.core = core;
// type bitmap
$export.F = 1;   // forced
$export.G = 2;   // global
$export.S = 4;   // static
$export.P = 8;   // proto
$export.B = 16;  // bind
$export.W = 32;  // wrap
$export.U = 64;  // safe
$export.R = 128; // real proto method for `library`
module.exports = $export;


/***/ }),

/***/ "../../node_modules/core-js/modules/_fails-is-regexp.js":
/*!******************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_fails-is-regexp.js ***!
  \******************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var MATCH = __webpack_require__(/*! ./_wks */ "../../node_modules/core-js/modules/_wks.js")('match');
module.exports = function (KEY) {
  var re = /./;
  try {
    '/./'[KEY](re);
  } catch (e) {
    try {
      re[MATCH] = false;
      return !'/./'[KEY](re);
    } catch (f) { /* empty */ }
  } return true;
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_fails.js":
/*!********************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_fails.js ***!
  \********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function (exec) {
  try {
    return !!exec();
  } catch (e) {
    return true;
  }
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_global.js":
/*!*********************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_global.js ***!
  \*********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
var global = module.exports = typeof window != 'undefined' && window.Math == Math
  ? window : typeof self != 'undefined' && self.Math == Math ? self
  // eslint-disable-next-line no-new-func
  : Function('return this')();
if (typeof __g == 'number') __g = global; // eslint-disable-line no-undef


/***/ }),

/***/ "../../node_modules/core-js/modules/_has.js":
/*!******************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_has.js ***!
  \******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var hasOwnProperty = {}.hasOwnProperty;
module.exports = function (it, key) {
  return hasOwnProperty.call(it, key);
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_hide.js":
/*!*******************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_hide.js ***!
  \*******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var dP = __webpack_require__(/*! ./_object-dp */ "../../node_modules/core-js/modules/_object-dp.js");
var createDesc = __webpack_require__(/*! ./_property-desc */ "../../node_modules/core-js/modules/_property-desc.js");
module.exports = __webpack_require__(/*! ./_descriptors */ "../../node_modules/core-js/modules/_descriptors.js") ? function (object, key, value) {
  return dP.f(object, key, createDesc(1, value));
} : function (object, key, value) {
  object[key] = value;
  return object;
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_html.js":
/*!*******************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_html.js ***!
  \*******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var document = __webpack_require__(/*! ./_global */ "../../node_modules/core-js/modules/_global.js").document;
module.exports = document && document.documentElement;


/***/ }),

/***/ "../../node_modules/core-js/modules/_ie8-dom-define.js":
/*!*****************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_ie8-dom-define.js ***!
  \*****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = !__webpack_require__(/*! ./_descriptors */ "../../node_modules/core-js/modules/_descriptors.js") && !__webpack_require__(/*! ./_fails */ "../../node_modules/core-js/modules/_fails.js")(function () {
  return Object.defineProperty(__webpack_require__(/*! ./_dom-create */ "../../node_modules/core-js/modules/_dom-create.js")('div'), 'a', { get: function () { return 7; } }).a != 7;
});


/***/ }),

/***/ "../../node_modules/core-js/modules/_iobject.js":
/*!**********************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_iobject.js ***!
  \**********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// fallback for non-array-like ES3 and non-enumerable old V8 strings
var cof = __webpack_require__(/*! ./_cof */ "../../node_modules/core-js/modules/_cof.js");
// eslint-disable-next-line no-prototype-builtins
module.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {
  return cof(it) == 'String' ? it.split('') : Object(it);
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_is-array-iter.js":
/*!****************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_is-array-iter.js ***!
  \****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// check on default Array iterator
var Iterators = __webpack_require__(/*! ./_iterators */ "../../node_modules/core-js/modules/_iterators.js");
var ITERATOR = __webpack_require__(/*! ./_wks */ "../../node_modules/core-js/modules/_wks.js")('iterator');
var ArrayProto = Array.prototype;

module.exports = function (it) {
  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_is-object.js":
/*!************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_is-object.js ***!
  \************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function (it) {
  return typeof it === 'object' ? it !== null : typeof it === 'function';
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_is-regexp.js":
/*!************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_is-regexp.js ***!
  \************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// 7.2.8 IsRegExp(argument)
var isObject = __webpack_require__(/*! ./_is-object */ "../../node_modules/core-js/modules/_is-object.js");
var cof = __webpack_require__(/*! ./_cof */ "../../node_modules/core-js/modules/_cof.js");
var MATCH = __webpack_require__(/*! ./_wks */ "../../node_modules/core-js/modules/_wks.js")('match');
module.exports = function (it) {
  var isRegExp;
  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_iter-call.js":
/*!************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_iter-call.js ***!
  \************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// call something on iterator step with safe closing on error
var anObject = __webpack_require__(/*! ./_an-object */ "../../node_modules/core-js/modules/_an-object.js");
module.exports = function (iterator, fn, value, entries) {
  try {
    return entries ? fn(anObject(value)[0], value[1]) : fn(value);
  // 7.4.6 IteratorClose(iterator, completion)
  } catch (e) {
    var ret = iterator['return'];
    if (ret !== undefined) anObject(ret.call(iterator));
    throw e;
  }
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_iter-create.js":
/*!**************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_iter-create.js ***!
  \**************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var create = __webpack_require__(/*! ./_object-create */ "../../node_modules/core-js/modules/_object-create.js");
var descriptor = __webpack_require__(/*! ./_property-desc */ "../../node_modules/core-js/modules/_property-desc.js");
var setToStringTag = __webpack_require__(/*! ./_set-to-string-tag */ "../../node_modules/core-js/modules/_set-to-string-tag.js");
var IteratorPrototype = {};

// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()
__webpack_require__(/*! ./_hide */ "../../node_modules/core-js/modules/_hide.js")(IteratorPrototype, __webpack_require__(/*! ./_wks */ "../../node_modules/core-js/modules/_wks.js")('iterator'), function () { return this; });

module.exports = function (Constructor, NAME, next) {
  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });
  setToStringTag(Constructor, NAME + ' Iterator');
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_iter-define.js":
/*!**************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_iter-define.js ***!
  \**************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var LIBRARY = __webpack_require__(/*! ./_library */ "../../node_modules/core-js/modules/_library.js");
var $export = __webpack_require__(/*! ./_export */ "../../node_modules/core-js/modules/_export.js");
var redefine = __webpack_require__(/*! ./_redefine */ "../../node_modules/core-js/modules/_redefine.js");
var hide = __webpack_require__(/*! ./_hide */ "../../node_modules/core-js/modules/_hide.js");
var Iterators = __webpack_require__(/*! ./_iterators */ "../../node_modules/core-js/modules/_iterators.js");
var $iterCreate = __webpack_require__(/*! ./_iter-create */ "../../node_modules/core-js/modules/_iter-create.js");
var setToStringTag = __webpack_require__(/*! ./_set-to-string-tag */ "../../node_modules/core-js/modules/_set-to-string-tag.js");
var getPrototypeOf = __webpack_require__(/*! ./_object-gpo */ "../../node_modules/core-js/modules/_object-gpo.js");
var ITERATOR = __webpack_require__(/*! ./_wks */ "../../node_modules/core-js/modules/_wks.js")('iterator');
var BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`
var FF_ITERATOR = '@@iterator';
var KEYS = 'keys';
var VALUES = 'values';

var returnThis = function () { return this; };

module.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {
  $iterCreate(Constructor, NAME, next);
  var getMethod = function (kind) {
    if (!BUGGY && kind in proto) return proto[kind];
    switch (kind) {
      case KEYS: return function keys() { return new Constructor(this, kind); };
      case VALUES: return function values() { return new Constructor(this, kind); };
    } return function entries() { return new Constructor(this, kind); };
  };
  var TAG = NAME + ' Iterator';
  var DEF_VALUES = DEFAULT == VALUES;
  var VALUES_BUG = false;
  var proto = Base.prototype;
  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];
  var $default = $native || getMethod(DEFAULT);
  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;
  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;
  var methods, key, IteratorPrototype;
  // Fix native
  if ($anyNative) {
    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));
    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {
      // Set @@toStringTag to native iterators
      setToStringTag(IteratorPrototype, TAG, true);
      // fix for some old engines
      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);
    }
  }
  // fix Array#{values, @@iterator}.name in V8 / FF
  if (DEF_VALUES && $native && $native.name !== VALUES) {
    VALUES_BUG = true;
    $default = function values() { return $native.call(this); };
  }
  // Define iterator
  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {
    hide(proto, ITERATOR, $default);
  }
  // Plug for library
  Iterators[NAME] = $default;
  Iterators[TAG] = returnThis;
  if (DEFAULT) {
    methods = {
      values: DEF_VALUES ? $default : getMethod(VALUES),
      keys: IS_SET ? $default : getMethod(KEYS),
      entries: $entries
    };
    if (FORCED) for (key in methods) {
      if (!(key in proto)) redefine(proto, key, methods[key]);
    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);
  }
  return methods;
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_iter-detect.js":
/*!**************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_iter-detect.js ***!
  \**************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var ITERATOR = __webpack_require__(/*! ./_wks */ "../../node_modules/core-js/modules/_wks.js")('iterator');
var SAFE_CLOSING = false;

try {
  var riter = [7][ITERATOR]();
  riter['return'] = function () { SAFE_CLOSING = true; };
  // eslint-disable-next-line no-throw-literal
  Array.from(riter, function () { throw 2; });
} catch (e) { /* empty */ }

module.exports = function (exec, skipClosing) {
  if (!skipClosing && !SAFE_CLOSING) return false;
  var safe = false;
  try {
    var arr = [7];
    var iter = arr[ITERATOR]();
    iter.next = function () { return { done: safe = true }; };
    arr[ITERATOR] = function () { return iter; };
    exec(arr);
  } catch (e) { /* empty */ }
  return safe;
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_iterators.js":
/*!************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_iterators.js ***!
  \************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = {};


/***/ }),

/***/ "../../node_modules/core-js/modules/_library.js":
/*!**********************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_library.js ***!
  \**********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = false;


/***/ }),

/***/ "../../node_modules/core-js/modules/_object-assign.js":
/*!****************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_object-assign.js ***!
  \****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// 19.1.2.1 Object.assign(target, source, ...)
var getKeys = __webpack_require__(/*! ./_object-keys */ "../../node_modules/core-js/modules/_object-keys.js");
var gOPS = __webpack_require__(/*! ./_object-gops */ "../../node_modules/core-js/modules/_object-gops.js");
var pIE = __webpack_require__(/*! ./_object-pie */ "../../node_modules/core-js/modules/_object-pie.js");
var toObject = __webpack_require__(/*! ./_to-object */ "../../node_modules/core-js/modules/_to-object.js");
var IObject = __webpack_require__(/*! ./_iobject */ "../../node_modules/core-js/modules/_iobject.js");
var $assign = Object.assign;

// should work with symbols and should have deterministic property order (V8 bug)
module.exports = !$assign || __webpack_require__(/*! ./_fails */ "../../node_modules/core-js/modules/_fails.js")(function () {
  var A = {};
  var B = {};
  // eslint-disable-next-line no-undef
  var S = Symbol();
  var K = 'abcdefghijklmnopqrst';
  A[S] = 7;
  K.split('').forEach(function (k) { B[k] = k; });
  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;
}) ? function assign(target, source) { // eslint-disable-line no-unused-vars
  var T = toObject(target);
  var aLen = arguments.length;
  var index = 1;
  var getSymbols = gOPS.f;
  var isEnum = pIE.f;
  while (aLen > index) {
    var S = IObject(arguments[index++]);
    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);
    var length = keys.length;
    var j = 0;
    var key;
    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];
  } return T;
} : $assign;


/***/ }),

/***/ "../../node_modules/core-js/modules/_object-create.js":
/*!****************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_object-create.js ***!
  \****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])
var anObject = __webpack_require__(/*! ./_an-object */ "../../node_modules/core-js/modules/_an-object.js");
var dPs = __webpack_require__(/*! ./_object-dps */ "../../node_modules/core-js/modules/_object-dps.js");
var enumBugKeys = __webpack_require__(/*! ./_enum-bug-keys */ "../../node_modules/core-js/modules/_enum-bug-keys.js");
var IE_PROTO = __webpack_require__(/*! ./_shared-key */ "../../node_modules/core-js/modules/_shared-key.js")('IE_PROTO');
var Empty = function () { /* empty */ };
var PROTOTYPE = 'prototype';

// Create object with fake `null` prototype: use iframe Object with cleared prototype
var createDict = function () {
  // Thrash, waste and sodomy: IE GC bug
  var iframe = __webpack_require__(/*! ./_dom-create */ "../../node_modules/core-js/modules/_dom-create.js")('iframe');
  var i = enumBugKeys.length;
  var lt = '<';
  var gt = '>';
  var iframeDocument;
  iframe.style.display = 'none';
  __webpack_require__(/*! ./_html */ "../../node_modules/core-js/modules/_html.js").appendChild(iframe);
  iframe.src = 'javascript:'; // eslint-disable-line no-script-url
  // createDict = iframe.contentWindow.Object;
  // html.removeChild(iframe);
  iframeDocument = iframe.contentWindow.document;
  iframeDocument.open();
  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);
  iframeDocument.close();
  createDict = iframeDocument.F;
  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];
  return createDict();
};

module.exports = Object.create || function create(O, Properties) {
  var result;
  if (O !== null) {
    Empty[PROTOTYPE] = anObject(O);
    result = new Empty();
    Empty[PROTOTYPE] = null;
    // add "__proto__" for Object.getPrototypeOf polyfill
    result[IE_PROTO] = O;
  } else result = createDict();
  return Properties === undefined ? result : dPs(result, Properties);
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_object-dp.js":
/*!************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_object-dp.js ***!
  \************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var anObject = __webpack_require__(/*! ./_an-object */ "../../node_modules/core-js/modules/_an-object.js");
var IE8_DOM_DEFINE = __webpack_require__(/*! ./_ie8-dom-define */ "../../node_modules/core-js/modules/_ie8-dom-define.js");
var toPrimitive = __webpack_require__(/*! ./_to-primitive */ "../../node_modules/core-js/modules/_to-primitive.js");
var dP = Object.defineProperty;

exports.f = __webpack_require__(/*! ./_descriptors */ "../../node_modules/core-js/modules/_descriptors.js") ? Object.defineProperty : function defineProperty(O, P, Attributes) {
  anObject(O);
  P = toPrimitive(P, true);
  anObject(Attributes);
  if (IE8_DOM_DEFINE) try {
    return dP(O, P, Attributes);
  } catch (e) { /* empty */ }
  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');
  if ('value' in Attributes) O[P] = Attributes.value;
  return O;
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_object-dps.js":
/*!*************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_object-dps.js ***!
  \*************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var dP = __webpack_require__(/*! ./_object-dp */ "../../node_modules/core-js/modules/_object-dp.js");
var anObject = __webpack_require__(/*! ./_an-object */ "../../node_modules/core-js/modules/_an-object.js");
var getKeys = __webpack_require__(/*! ./_object-keys */ "../../node_modules/core-js/modules/_object-keys.js");

module.exports = __webpack_require__(/*! ./_descriptors */ "../../node_modules/core-js/modules/_descriptors.js") ? Object.defineProperties : function defineProperties(O, Properties) {
  anObject(O);
  var keys = getKeys(Properties);
  var length = keys.length;
  var i = 0;
  var P;
  while (length > i) dP.f(O, P = keys[i++], Properties[P]);
  return O;
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_object-gops.js":
/*!**************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_object-gops.js ***!
  \**************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

exports.f = Object.getOwnPropertySymbols;


/***/ }),

/***/ "../../node_modules/core-js/modules/_object-gpo.js":
/*!*************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_object-gpo.js ***!
  \*************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)
var has = __webpack_require__(/*! ./_has */ "../../node_modules/core-js/modules/_has.js");
var toObject = __webpack_require__(/*! ./_to-object */ "../../node_modules/core-js/modules/_to-object.js");
var IE_PROTO = __webpack_require__(/*! ./_shared-key */ "../../node_modules/core-js/modules/_shared-key.js")('IE_PROTO');
var ObjectProto = Object.prototype;

module.exports = Object.getPrototypeOf || function (O) {
  O = toObject(O);
  if (has(O, IE_PROTO)) return O[IE_PROTO];
  if (typeof O.constructor == 'function' && O instanceof O.constructor) {
    return O.constructor.prototype;
  } return O instanceof Object ? ObjectProto : null;
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_object-keys-internal.js":
/*!***********************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_object-keys-internal.js ***!
  \***********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var has = __webpack_require__(/*! ./_has */ "../../node_modules/core-js/modules/_has.js");
var toIObject = __webpack_require__(/*! ./_to-iobject */ "../../node_modules/core-js/modules/_to-iobject.js");
var arrayIndexOf = __webpack_require__(/*! ./_array-includes */ "../../node_modules/core-js/modules/_array-includes.js")(false);
var IE_PROTO = __webpack_require__(/*! ./_shared-key */ "../../node_modules/core-js/modules/_shared-key.js")('IE_PROTO');

module.exports = function (object, names) {
  var O = toIObject(object);
  var i = 0;
  var result = [];
  var key;
  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);
  // Don't enum bug & hidden keys
  while (names.length > i) if (has(O, key = names[i++])) {
    ~arrayIndexOf(result, key) || result.push(key);
  }
  return result;
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_object-keys.js":
/*!**************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_object-keys.js ***!
  \**************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.14 / 15.2.3.14 Object.keys(O)
var $keys = __webpack_require__(/*! ./_object-keys-internal */ "../../node_modules/core-js/modules/_object-keys-internal.js");
var enumBugKeys = __webpack_require__(/*! ./_enum-bug-keys */ "../../node_modules/core-js/modules/_enum-bug-keys.js");

module.exports = Object.keys || function keys(O) {
  return $keys(O, enumBugKeys);
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_object-pie.js":
/*!*************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_object-pie.js ***!
  \*************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

exports.f = {}.propertyIsEnumerable;


/***/ }),

/***/ "../../node_modules/core-js/modules/_property-desc.js":
/*!****************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_property-desc.js ***!
  \****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function (bitmap, value) {
  return {
    enumerable: !(bitmap & 1),
    configurable: !(bitmap & 2),
    writable: !(bitmap & 4),
    value: value
  };
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_redefine.js":
/*!***********************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_redefine.js ***!
  \***********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ./_global */ "../../node_modules/core-js/modules/_global.js");
var hide = __webpack_require__(/*! ./_hide */ "../../node_modules/core-js/modules/_hide.js");
var has = __webpack_require__(/*! ./_has */ "../../node_modules/core-js/modules/_has.js");
var SRC = __webpack_require__(/*! ./_uid */ "../../node_modules/core-js/modules/_uid.js")('src');
var TO_STRING = 'toString';
var $toString = Function[TO_STRING];
var TPL = ('' + $toString).split(TO_STRING);

__webpack_require__(/*! ./_core */ "../../node_modules/core-js/modules/_core.js").inspectSource = function (it) {
  return $toString.call(it);
};

(module.exports = function (O, key, val, safe) {
  var isFunction = typeof val == 'function';
  if (isFunction) has(val, 'name') || hide(val, 'name', key);
  if (O[key] === val) return;
  if (isFunction) has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));
  if (O === global) {
    O[key] = val;
  } else if (!safe) {
    delete O[key];
    hide(O, key, val);
  } else if (O[key]) {
    O[key] = val;
  } else {
    hide(O, key, val);
  }
// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative
})(Function.prototype, TO_STRING, function toString() {
  return typeof this == 'function' && this[SRC] || $toString.call(this);
});


/***/ }),

/***/ "../../node_modules/core-js/modules/_set-to-string-tag.js":
/*!********************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_set-to-string-tag.js ***!
  \********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var def = __webpack_require__(/*! ./_object-dp */ "../../node_modules/core-js/modules/_object-dp.js").f;
var has = __webpack_require__(/*! ./_has */ "../../node_modules/core-js/modules/_has.js");
var TAG = __webpack_require__(/*! ./_wks */ "../../node_modules/core-js/modules/_wks.js")('toStringTag');

module.exports = function (it, tag, stat) {
  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_shared-key.js":
/*!*************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_shared-key.js ***!
  \*************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var shared = __webpack_require__(/*! ./_shared */ "../../node_modules/core-js/modules/_shared.js")('keys');
var uid = __webpack_require__(/*! ./_uid */ "../../node_modules/core-js/modules/_uid.js");
module.exports = function (key) {
  return shared[key] || (shared[key] = uid(key));
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_shared.js":
/*!*********************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_shared.js ***!
  \*********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var core = __webpack_require__(/*! ./_core */ "../../node_modules/core-js/modules/_core.js");
var global = __webpack_require__(/*! ./_global */ "../../node_modules/core-js/modules/_global.js");
var SHARED = '__core-js_shared__';
var store = global[SHARED] || (global[SHARED] = {});

(module.exports = function (key, value) {
  return store[key] || (store[key] = value !== undefined ? value : {});
})('versions', []).push({
  version: core.version,
  mode: __webpack_require__(/*! ./_library */ "../../node_modules/core-js/modules/_library.js") ? 'pure' : 'global',
  copyright: 'Â© 2018 Denis Pushkarev (zloirock.ru)'
});


/***/ }),

/***/ "../../node_modules/core-js/modules/_string-at.js":
/*!************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_string-at.js ***!
  \************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var toInteger = __webpack_require__(/*! ./_to-integer */ "../../node_modules/core-js/modules/_to-integer.js");
var defined = __webpack_require__(/*! ./_defined */ "../../node_modules/core-js/modules/_defined.js");
// true  -> String#at
// false -> String#codePointAt
module.exports = function (TO_STRING) {
  return function (that, pos) {
    var s = String(defined(that));
    var i = toInteger(pos);
    var l = s.length;
    var a, b;
    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;
    a = s.charCodeAt(i);
    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff
      ? TO_STRING ? s.charAt(i) : a
      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;
  };
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_string-context.js":
/*!*****************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_string-context.js ***!
  \*****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// helper for String#{startsWith, endsWith, includes}
var isRegExp = __webpack_require__(/*! ./_is-regexp */ "../../node_modules/core-js/modules/_is-regexp.js");
var defined = __webpack_require__(/*! ./_defined */ "../../node_modules/core-js/modules/_defined.js");

module.exports = function (that, searchString, NAME) {
  if (isRegExp(searchString)) throw TypeError('String#' + NAME + " doesn't accept regex!");
  return String(defined(that));
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_to-absolute-index.js":
/*!********************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_to-absolute-index.js ***!
  \********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var toInteger = __webpack_require__(/*! ./_to-integer */ "../../node_modules/core-js/modules/_to-integer.js");
var max = Math.max;
var min = Math.min;
module.exports = function (index, length) {
  index = toInteger(index);
  return index < 0 ? max(index + length, 0) : min(index, length);
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_to-integer.js":
/*!*************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_to-integer.js ***!
  \*************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// 7.1.4 ToInteger
var ceil = Math.ceil;
var floor = Math.floor;
module.exports = function (it) {
  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_to-iobject.js":
/*!*************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_to-iobject.js ***!
  \*************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// to indexed object, toObject with fallback for non-array-like ES3 strings
var IObject = __webpack_require__(/*! ./_iobject */ "../../node_modules/core-js/modules/_iobject.js");
var defined = __webpack_require__(/*! ./_defined */ "../../node_modules/core-js/modules/_defined.js");
module.exports = function (it) {
  return IObject(defined(it));
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_to-length.js":
/*!************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_to-length.js ***!
  \************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// 7.1.15 ToLength
var toInteger = __webpack_require__(/*! ./_to-integer */ "../../node_modules/core-js/modules/_to-integer.js");
var min = Math.min;
module.exports = function (it) {
  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_to-object.js":
/*!************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_to-object.js ***!
  \************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// 7.1.13 ToObject(argument)
var defined = __webpack_require__(/*! ./_defined */ "../../node_modules/core-js/modules/_defined.js");
module.exports = function (it) {
  return Object(defined(it));
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_to-primitive.js":
/*!***************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_to-primitive.js ***!
  \***************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// 7.1.1 ToPrimitive(input [, PreferredType])
var isObject = __webpack_require__(/*! ./_is-object */ "../../node_modules/core-js/modules/_is-object.js");
// instead of the ES6 spec version, we didn't implement @@toPrimitive case
// and the second argument - flag - preferred type is a string
module.exports = function (it, S) {
  if (!isObject(it)) return it;
  var fn, val;
  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;
  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;
  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;
  throw TypeError("Can't convert object to primitive value");
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_uid.js":
/*!******************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_uid.js ***!
  \******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var id = 0;
var px = Math.random();
module.exports = function (key) {
  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));
};


/***/ }),

/***/ "../../node_modules/core-js/modules/_wks.js":
/*!******************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/_wks.js ***!
  \******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var store = __webpack_require__(/*! ./_shared */ "../../node_modules/core-js/modules/_shared.js")('wks');
var uid = __webpack_require__(/*! ./_uid */ "../../node_modules/core-js/modules/_uid.js");
var Symbol = __webpack_require__(/*! ./_global */ "../../node_modules/core-js/modules/_global.js").Symbol;
var USE_SYMBOL = typeof Symbol == 'function';

var $exports = module.exports = function (name) {
  return store[name] || (store[name] =
    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));
};

$exports.store = store;


/***/ }),

/***/ "../../node_modules/core-js/modules/core.get-iterator-method.js":
/*!**************************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/core.get-iterator-method.js ***!
  \**************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var classof = __webpack_require__(/*! ./_classof */ "../../node_modules/core-js/modules/_classof.js");
var ITERATOR = __webpack_require__(/*! ./_wks */ "../../node_modules/core-js/modules/_wks.js")('iterator');
var Iterators = __webpack_require__(/*! ./_iterators */ "../../node_modules/core-js/modules/_iterators.js");
module.exports = __webpack_require__(/*! ./_core */ "../../node_modules/core-js/modules/_core.js").getIteratorMethod = function (it) {
  if (it != undefined) return it[ITERATOR]
    || it['@@iterator']
    || Iterators[classof(it)];
};


/***/ }),

/***/ "../../node_modules/core-js/modules/es6.array.from.js":
/*!****************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/es6.array.from.js ***!
  \****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ctx = __webpack_require__(/*! ./_ctx */ "../../node_modules/core-js/modules/_ctx.js");
var $export = __webpack_require__(/*! ./_export */ "../../node_modules/core-js/modules/_export.js");
var toObject = __webpack_require__(/*! ./_to-object */ "../../node_modules/core-js/modules/_to-object.js");
var call = __webpack_require__(/*! ./_iter-call */ "../../node_modules/core-js/modules/_iter-call.js");
var isArrayIter = __webpack_require__(/*! ./_is-array-iter */ "../../node_modules/core-js/modules/_is-array-iter.js");
var toLength = __webpack_require__(/*! ./_to-length */ "../../node_modules/core-js/modules/_to-length.js");
var createProperty = __webpack_require__(/*! ./_create-property */ "../../node_modules/core-js/modules/_create-property.js");
var getIterFn = __webpack_require__(/*! ./core.get-iterator-method */ "../../node_modules/core-js/modules/core.get-iterator-method.js");

$export($export.S + $export.F * !__webpack_require__(/*! ./_iter-detect */ "../../node_modules/core-js/modules/_iter-detect.js")(function (iter) { Array.from(iter); }), 'Array', {
  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)
  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {
    var O = toObject(arrayLike);
    var C = typeof this == 'function' ? this : Array;
    var aLen = arguments.length;
    var mapfn = aLen > 1 ? arguments[1] : undefined;
    var mapping = mapfn !== undefined;
    var index = 0;
    var iterFn = getIterFn(O);
    var length, result, step, iterator;
    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);
    // if object isn't iterable or it's array with default iterator - use simple case
    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {
      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {
        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);
      }
    } else {
      length = toLength(O.length);
      for (result = new C(length); length > index; index++) {
        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);
      }
    }
    result.length = index;
    return result;
  }
});


/***/ }),

/***/ "../../node_modules/core-js/modules/es6.object.assign.js":
/*!*******************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/es6.object.assign.js ***!
  \*******************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.3.1 Object.assign(target, source)
var $export = __webpack_require__(/*! ./_export */ "../../node_modules/core-js/modules/_export.js");

$export($export.S + $export.F, 'Object', { assign: __webpack_require__(/*! ./_object-assign */ "../../node_modules/core-js/modules/_object-assign.js") });


/***/ }),

/***/ "../../node_modules/core-js/modules/es6.string.includes.js":
/*!*********************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/es6.string.includes.js ***!
  \*********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// 21.1.3.7 String.prototype.includes(searchString, position = 0)

var $export = __webpack_require__(/*! ./_export */ "../../node_modules/core-js/modules/_export.js");
var context = __webpack_require__(/*! ./_string-context */ "../../node_modules/core-js/modules/_string-context.js");
var INCLUDES = 'includes';

$export($export.P + $export.F * __webpack_require__(/*! ./_fails-is-regexp */ "../../node_modules/core-js/modules/_fails-is-regexp.js")(INCLUDES), 'String', {
  includes: function includes(searchString /* , position = 0 */) {
    return !!~context(this, searchString, INCLUDES)
      .indexOf(searchString, arguments.length > 1 ? arguments[1] : undefined);
  }
});


/***/ }),

/***/ "../../node_modules/core-js/modules/es6.string.iterator.js":
/*!*********************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/es6.string.iterator.js ***!
  \*********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $at = __webpack_require__(/*! ./_string-at */ "../../node_modules/core-js/modules/_string-at.js")(true);

// 21.1.3.27 String.prototype[@@iterator]()
__webpack_require__(/*! ./_iter-define */ "../../node_modules/core-js/modules/_iter-define.js")(String, 'String', function (iterated) {
  this._t = String(iterated); // target
  this._i = 0;                // next index
// 21.1.5.2.1 %StringIteratorPrototype%.next()
}, function () {
  var O = this._t;
  var index = this._i;
  var point;
  if (index >= O.length) return { value: undefined, done: true };
  point = $at(O, index);
  this._i += point.length;
  return { value: point, done: false };
});


/***/ }),

/***/ "../../node_modules/core-js/modules/es7.array.includes.js":
/*!********************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/core-js/modules/es7.array.includes.js ***!
  \********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://github.com/tc39/Array.prototype.includes
var $export = __webpack_require__(/*! ./_export */ "../../node_modules/core-js/modules/_export.js");
var $includes = __webpack_require__(/*! ./_array-includes */ "../../node_modules/core-js/modules/_array-includes.js")(true);

$export($export.P, 'Array', {
  includes: function includes(el /* , fromIndex = 0 */) {
    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);
  }
});

__webpack_require__(/*! ./_add-to-unscopables */ "../../node_modules/core-js/modules/_add-to-unscopables.js")('includes');


/***/ }),

/***/ "../../node_modules/css-loader/index.js?!../../node_modules/postcss-loader/src/index.js?!./lib/in_web/inweb_html_popup/inweb_html_popup.css":
/*!*********************************************************************************************************************************************************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/css-loader??ref--6-1!/Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/postcss-loader/src??postcss!./lib/in_web/inweb_html_popup/inweb_html_popup.css ***!
  \*********************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../../../../node_modules/css-loader/lib/css-base.js */ "../../node_modules/css-loader/lib/css-base.js")(false);
// imports


// module
exports.push([module.i, ".aiq-popup-3j0wj{position:fixed;top:0;bottom:0;left:0;right:0;z-index:999999;text-align:center;white-space:nowrap;-webkit-animation-name:aiq-onPopupFadeIn-2-RxQ;animation-name:aiq-onPopupFadeIn-2-RxQ;-webkit-animation-duration:.3s;animation-duration:.3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.aiq-popup-3j0wj,.aiq-popup-scroll-2WIIK{-webkit-box-sizing:border-box;box-sizing:border-box}.aiq-popup-scroll-2WIIK{width:100%;height:100%;padding:30px 10px;overflow-y:auto;-webkit-overflow-scrolling:touch}.aiq-popup-scroll-2WIIK:before{content:\"\";display:inline-block;height:100%;vertical-align:middle;margin-right:-.25em}.aiq-overlay-6hRJt{position:fixed;left:0;top:0;right:0;bottom:0;background:rgba(0,0,0,.7);z-index:-1;pointer-events:none}.aiq-close-button-3UAWN{position:absolute;top:10px;right:10px;width:24px;height:24px;background-color:#fff;color:#000;border-radius:50%;cursor:pointer}.aiq-close-button-3UAWN:before{top:6px;-webkit-transform:rotate(45deg);transform:rotate(45deg);-webkit-transform-origin:left;transform-origin:left}.aiq-close-button-3UAWN:after,.aiq-close-button-3UAWN:before{content:\"\";position:absolute;left:7px;width:60%;height:2px;background:currentColor}.aiq-close-button-3UAWN:after{bottom:6px;-webkit-transform:rotate(315deg);transform:rotate(315deg);-webkit-transform-origin:left;transform-origin:left}.aiq-container-1w3uo{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;max-width:100%;text-align:start;position:relative}@-webkit-keyframes aiq-onPopupFadeIn-2-RxQ{0%{opacity:0}to{opacity:1}}@keyframes aiq-onPopupFadeIn-2-RxQ{0%{opacity:0}to{opacity:1}}", ""]);

// exports
exports.locals = {
	"popup": "aiq-popup-3j0wj",
	"onPopupFadeIn": "aiq-onPopupFadeIn-2-RxQ",
	"popup-scroll": "aiq-popup-scroll-2WIIK",
	"overlay": "aiq-overlay-6hRJt",
	"close-button": "aiq-close-button-3UAWN",
	"container": "aiq-container-1w3uo"
};

/***/ }),

/***/ "../../node_modules/css-loader/index.js?!../../node_modules/postcss-loader/src/index.js?!./lib/in_web/inweb_lead_popup/inweb_lead_popup.css":
/*!*********************************************************************************************************************************************************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/css-loader??ref--6-1!/Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/postcss-loader/src??postcss!./lib/in_web/inweb_lead_popup/inweb_lead_popup.css ***!
  \*********************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../../../../node_modules/css-loader/lib/css-base.js */ "../../node_modules/css-loader/lib/css-base.js")(false);
// imports


// module
exports.push([module.i, ".aiq-popup-2n2jl{position:fixed;top:0;bottom:0;left:0;right:0;z-index:999999;text-align:center;white-space:nowrap;-webkit-animation-name:aiq-onPopupFadeIn-3fI0f;animation-name:aiq-onPopupFadeIn-3fI0f;-webkit-animation-duration:.3s;animation-duration:.3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.aiq-popup-2n2jl,.aiq-popup-scroll-6FzW5{-webkit-box-sizing:border-box;box-sizing:border-box}.aiq-popup-scroll-6FzW5{width:100%;height:100%;padding:30px 5px;overflow-y:auto;-webkit-overflow-scrolling:touch}.aiq-popup-scroll-6FzW5:before{content:\"\";display:inline-block;height:100%;vertical-align:middle;margin-right:-.25em}.aiq-overlay-3VVYS{position:fixed;left:0;top:0;right:0;bottom:0;background:rgba(0,0,0,.7);z-index:-1;pointer-events:none}.aiq-banner-2Wjw_{height:190px;background-position:50% 50%;background-size:cover}.aiq-close-button-1cA2q{position:absolute;top:10px;right:10px;width:24px;height:24px;background-color:#fff;color:#000;border-radius:50%;cursor:pointer}.aiq-close-button-1cA2q:before{top:6px;-webkit-transform:rotate(45deg);transform:rotate(45deg);-webkit-transform-origin:left;transform-origin:left}.aiq-close-button-1cA2q:after,.aiq-close-button-1cA2q:before{content:\"\";position:absolute;left:7px;width:60%;height:2px;background:currentColor}.aiq-close-button-1cA2q:after{bottom:6px;-webkit-transform:rotate(315deg);transform:rotate(315deg);-webkit-transform-origin:left;transform-origin:left}.aiq-container-1nwWc{display:inline-block;vertical-align:middle;width:100%;max-width:340px;text-align:start;position:relative;border-radius:6px;-webkit-box-shadow:0 2px 12px 0 rgba(0,0,0,.5);box-shadow:0 2px 12px 0 rgba(0,0,0,.5);background-color:#fff;overflow:hidden}@-webkit-keyframes aiq-onPopupFadeIn-3fI0f{0%{opacity:0}to{opacity:1}}@keyframes aiq-onPopupFadeIn-3fI0f{0%{opacity:0}to{opacity:1}}.aiq-title-de_v-{font-size:20px;font-weight:600;margin:30px 20px 10px}.aiq-message-17hNz,.aiq-title-de_v-{font-family:OpenSans;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;text-align:center;color:#000;white-space:normal}.aiq-message-17hNz{font-size:14px;font-weight:400;margin:10px 20px 30px}.aiq-input-block-1LgH-{height:70px;margin:0 20px;position:relative}.aiq-input-4GWxu{display:block;width:100%;height:40px;line-height:40px;border-radius:5px;border:1px solid #979797;background-color:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 20px;font-family:OpenSans;font-size:14px;font-weight:400;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:rgba(0,0,0,.6)}.aiq-input-error-3DiEs{border-color:#ff5656}.aiq-input-error-3DiEs~.aiq-error-LhLVl{display:block}.aiq-select-1KDzB{-webkit-appearance:none;-moz-appearance:none;appearance:none}.aiq-input-block-1LgH-.aiq-select-block-9hWdm:after{content:\"\";display:inline-block;width:0;height:0;border-color:rgba(0,0,0,.6) transparent transparent;border-style:solid;border-width:5px 5px 0;position:absolute;top:18px;right:18px}.aiq-error-LhLVl,option:disabled{display:none}.aiq-error-LhLVl{font-family:OpenSans;font-size:10px;font-weight:400;font-style:italic;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#ff5656;margin:5px 0 0;white-space:normal}.aiq-error--show-2ujTS{display:block}.aiq-agreement-15pex{margin:0 20px 10px;min-height:57px;position:relative;padding-left:35px}.aiq-agreement-15pex label{display:inline-block;width:25px;height:25px;position:absolute;left:0;cursor:pointer}.aiq-agreement-15pex input[type=checkbox]{position:absolute;opacity:0}.aiq-agreement-15pex i{position:absolute;top:0;left:0;width:22px;height:22px;border-radius:2px;border:1px solid #979797;background-color:#fff}.aiq-agreement-15pex i:before{content:\"\";position:absolute;display:none;left:7px;top:2px;width:7px;height:12px;border:solid #000;border-width:0 3px 3px 0;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.aiq-agreement-15pex input[type=checkbox]:checked~i:before{display:block}.aiq-agreement-15pex a{color:#0090ff;text-decoration:none}.aiq-agreement-15pex .aiq-text-f3jRC,.aiq-agreement-15pex a{display:inline-block;white-space:normal;font-family:OpenSans;font-size:12px;font-weight:400;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal}.aiq-agreement-15pex .aiq-text-f3jRC{color:#000}.aiq-submit-button-3872x{font-family:OpenSans;font-size:14px;font-weight:600;font-style:normal;font-stretch:normal;letter-spacing:normal;text-align:center;color:#fff;line-height:40px;border-radius:5px;background-color:#0090ff;cursor:pointer;margin:30px 20px}", ""]);

// exports
exports.locals = {
	"popup": "aiq-popup-2n2jl",
	"onPopupFadeIn": "aiq-onPopupFadeIn-3fI0f",
	"popup-scroll": "aiq-popup-scroll-6FzW5",
	"overlay": "aiq-overlay-3VVYS",
	"banner": "aiq-banner-2Wjw_",
	"close-button": "aiq-close-button-1cA2q",
	"container": "aiq-container-1nwWc",
	"title": "aiq-title-de_v-",
	"message": "aiq-message-17hNz",
	"input-block": "aiq-input-block-1LgH-",
	"input": "aiq-input-4GWxu",
	"input-error": "aiq-input-error-3DiEs",
	"error": "aiq-error-LhLVl",
	"select": "aiq-select-1KDzB",
	"select-block": "aiq-select-block-9hWdm",
	"error--show": "aiq-error--show-2ujTS",
	"agreement": "aiq-agreement-15pex",
	"text": "aiq-text-f3jRC",
	"submit-button": "aiq-submit-button-3872x"
};

/***/ }),

/***/ "../../node_modules/css-loader/index.js?!../../node_modules/postcss-loader/src/index.js?!./lib/push_prompts/cym_prompt/cym_prompt.css":
/*!***************************************************************************************************************************************************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/css-loader??ref--6-1!/Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/postcss-loader/src??postcss!./lib/push_prompts/cym_prompt/cym_prompt.css ***!
  \***************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../../../../node_modules/css-loader/lib/css-base.js */ "../../node_modules/css-loader/lib/css-base.js")(false);
// imports


// module
exports.push([module.i, ".aiq-cymp-13-Vd{position:fixed;top:0;left:0;height:100%;z-index:2147484000}.aiq-cymp-13-Vd,.aiq-cymp-13-Vd *{-webkit-box-sizing:border-box;box-sizing:border-box}.aiq-overlay-1Ei8F{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.7);-webkit-transition:opacity .3s ease;transition:opacity .3s ease;-webkit-animation:aiq-cymPromptOverlayFadeIn-24AGH .3s ease;animation:aiq-cymPromptOverlayFadeIn-24AGH .3s ease;z-index:-1;pointer-events:none}.aiq-cymp-13-Vd.aiq-is-closing-3NpKp .aiq-overlay-1Ei8F{opacity:0}.aiq-container-3Nsn0{position:absolute;top:13px;left:76px;width:354px;padding:13px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;color:#000;background-color:#fff;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.3);box-shadow:0 1px 3px rgba(0,0,0,.3);border-radius:3px;-webkit-transition:-webkit-transform .5s ease;transition:-webkit-transform .5s ease;transition:transform .5s ease;transition:transform .5s ease,-webkit-transform .5s ease;-webkit-animation:aiq-cymPromptSlideInDown-JyuLr .5s ease;animation:aiq-cymPromptSlideInDown-JyuLr .5s ease}.aiq-cymp-13-Vd.aiq-is-closing-3NpKp .aiq-container-3Nsn0{-webkit-transform:translateY(-200%);transform:translateY(-200%);pointer-events:none}.aiq-caret-3Yi04{position:absolute;bottom:100%;left:42px;width:0;height:0;color:#fff;border-color:transparent transparent currentcolor;border-style:solid;border-width:0 9px 9px}.aiq-message-10fpp{-webkit-box-flex:1;-ms-flex:1;flex:1;padding-right:10px;font-size:14px;line-height:1.42;text-align:start;font-family:Helvetica,Arial,sans-serif}.aiq-close-button-2PgJA{position:relative;width:14px;height:14px;margin-top:2px;cursor:pointer;overflow:hidden;color:currentColor;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:none;border:none;border-radius:0}.aiq-close-button-2PgJA:after,.aiq-close-button-2PgJA:before{content:\"\";position:absolute;top:0;left:50%;margin-left:-1px;height:100%;width:2px;-webkit-transform:rotate(45deg);transform:rotate(45deg);background:currentColor}.aiq-close-button-2PgJA:after{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}@-webkit-keyframes aiq-cymPromptSlideInDown-JyuLr{0%{-webkit-transform:translateY(-100px);transform:translateY(-100px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes aiq-cymPromptSlideInDown-JyuLr{0%{-webkit-transform:translateY(-100px);transform:translateY(-100px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes aiq-cymPromptSlideInUp-3457s{0%{-webkit-transform:translateY(100px);transform:translateY(100px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes aiq-cymPromptSlideInUp-3457s{0%{-webkit-transform:translateY(100px);transform:translateY(100px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes aiq-cymPromptOverlayFadeIn-24AGH{0%{opacity:0}to{opacity:1}}@keyframes aiq-cymPromptOverlayFadeIn-24AGH{0%{opacity:0}to{opacity:1}}@media screen and (max-width:520px){.aiq-caret-3Yi04,.aiq-overlay-1Ei8F{display:none}.aiq-container-3Nsn0{top:auto;bottom:0;left:0;width:100vw;-webkit-box-shadow:0 -3px 6px #c5c2c2;box-shadow:0 -3px 6px #c5c2c2;-webkit-animation-name:aiq-cymPromptSlideInUp-3457s;animation-name:aiq-cymPromptSlideInUp-3457s}.aiq-cymp-13-Vd.aiq-is-closing-3NpKp .aiq-container-3Nsn0{-webkit-transform:translateY(200%);transform:translateY(200%)}}", ""]);

// exports
exports.locals = {
	"cymp": "aiq-cymp-13-Vd",
	"overlay": "aiq-overlay-1Ei8F",
	"cymPromptOverlayFadeIn": "aiq-cymPromptOverlayFadeIn-24AGH",
	"is-closing": "aiq-is-closing-3NpKp",
	"container": "aiq-container-3Nsn0",
	"cymPromptSlideInDown": "aiq-cymPromptSlideInDown-JyuLr",
	"caret": "aiq-caret-3Yi04",
	"message": "aiq-message-10fpp",
	"close-button": "aiq-close-button-2PgJA",
	"cymPromptSlideInUp": "aiq-cymPromptSlideInUp-3457s"
};

/***/ }),

/***/ "../../node_modules/css-loader/index.js?!../../node_modules/postcss-loader/src/index.js?!./lib/push_prompts/fake_prompt/fake_prompt.css":
/*!*****************************************************************************************************************************************************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/css-loader??ref--6-1!/Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/postcss-loader/src??postcss!./lib/push_prompts/fake_prompt/fake_prompt.css ***!
  \*****************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../../../../node_modules/css-loader/lib/css-base.js */ "../../node_modules/css-loader/lib/css-base.js")(false);
// imports


// module
exports.push([module.i, ".aiq-fake-prompt-19xM1{position:fixed;top:0;left:0;height:100%;z-index:2147483000}.aiq-fake-prompt-19xM1,.aiq-fake-prompt-19xM1 *{-webkit-box-sizing:border-box;box-sizing:border-box}.aiq-overlay-2h1_g{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.7);-webkit-transition:opacity .3s ease;transition:opacity .3s ease;-webkit-animation:aiq-fakePromptOverlayFadeIn-1qYSZ .3s ease;animation:aiq-fakePromptOverlayFadeIn-1qYSZ .3s ease;z-index:-1;pointer-events:none}.aiq-fake-prompt-19xM1.aiq-is-closing-3uhtC .aiq-overlay-2h1_g{opacity:0}.aiq-container-2qr4t{position:absolute;top:0;left:76px;width:354px;color:#000;background-color:#fff;-webkit-box-shadow:0 4px 6px #a9a1a1;box-shadow:0 4px 6px #a9a1a1;font-size:16px;line-height:1;text-align:start;font-family:Helvetica,Arial,sans-serif;-webkit-transition:-webkit-transform .5s ease;transition:-webkit-transform .5s ease;transition:transform .5s ease;transition:transform .5s ease,-webkit-transform .5s ease;-webkit-animation:aiq-fakePromptSlideInDown-2NSDt .5s ease;animation:aiq-fakePromptSlideInDown-2NSDt .5s ease}.aiq-fake-prompt-19xM1.aiq-is-middle-1PRoZ .aiq-container-2qr4t{left:50vw;margin-left:-177px}.aiq-fake-prompt-19xM1.aiq-is-closing-3uhtC .aiq-container-2qr4t{-webkit-transform:translateY(-200%);transform:translateY(-200%);pointer-events:none}.aiq-content-wrapper-1kB1O{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;padding:16px 16px 0}.aiq-fake-prompt-19xM1 .aiq-icon-1xo3a{width:32px;height:32px;margin-right:14px}.aiq-content-2C1uR{-webkit-box-flex:1;-ms-flex:1;flex:1;max-width:87%}.aiq-content-2C1uR h3{margin:0 0 1px;font-size:16px;line-height:24px;color:inherit}.aiq-content-2C1uR h3,.aiq-content-2C1uR p{font-weight:400;text-align:start;word-break:break-all}.aiq-content-2C1uR p{margin:0;font-size:14px;line-height:20px;color:rgba(0,0,0,.6)}.aiq-action-buttons-1y2Pa{margin-top:14px;padding:0 16px 16px;overflow:auto;text-align:right;white-space:nowrap}.aiq-action-buttons-1y2Pa button{display:inline-block;padding:8px 16px;font-size:14px;line-height:1;font-weight:700;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:none;border:none;outline:none;border-radius:0;margin:0;min-width:0}.aiq-action-buttons-1y2Pa .aiq-close-button-2z4-6{margin-right:16px;color:rgba(0,0,0,.4)}.aiq-action-buttons-1y2Pa .aiq-confirm-button-3LchN{color:#fff;background-color:#006df0;border-radius:3px}@-webkit-keyframes aiq-fakePromptSlideInDown-2NSDt{0%{-webkit-transform:translateY(-100px);transform:translateY(-100px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes aiq-fakePromptSlideInDown-2NSDt{0%{-webkit-transform:translateY(-100px);transform:translateY(-100px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes aiq-fakePromptSlideInUp-guVQx{0%{-webkit-transform:translateY(100px);transform:translateY(100px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes aiq-fakePromptSlideInUp-guVQx{0%{-webkit-transform:translateY(100px);transform:translateY(100px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes aiq-fakePromptOverlayFadeIn-1qYSZ{0%{opacity:0}to{opacity:1}}@keyframes aiq-fakePromptOverlayFadeIn-1qYSZ{0%{opacity:0}to{opacity:1}}@media screen and (max-width:520px){.aiq-overlay-2h1_g{display:none}.aiq-container-2qr4t{top:auto;bottom:0;left:0;width:100vw;-webkit-box-shadow:0 -3px 6px #c5c2c2;box-shadow:0 -3px 6px #c5c2c2;-webkit-animation-name:aiq-fakePromptSlideInUp-guVQx;animation-name:aiq-fakePromptSlideInUp-guVQx}.aiq-fake-prompt-19xM1.aiq-is-middle-1PRoZ .aiq-container-2qr4t{left:0;margin-left:0}.aiq-fake-prompt-19xM1.aiq-is-closing-3uhtC .aiq-container-2qr4t{-webkit-transform:translateY(200%);transform:translateY(200%)}}", ""]);

// exports
exports.locals = {
	"fake-prompt": "aiq-fake-prompt-19xM1",
	"overlay": "aiq-overlay-2h1_g",
	"fakePromptOverlayFadeIn": "aiq-fakePromptOverlayFadeIn-1qYSZ",
	"is-closing": "aiq-is-closing-3uhtC",
	"container": "aiq-container-2qr4t",
	"fakePromptSlideInDown": "aiq-fakePromptSlideInDown-2NSDt",
	"is-middle": "aiq-is-middle-1PRoZ",
	"content-wrapper": "aiq-content-wrapper-1kB1O",
	"icon": "aiq-icon-1xo3a",
	"content": "aiq-content-2C1uR",
	"action-buttons": "aiq-action-buttons-1y2Pa",
	"close-button": "aiq-close-button-2z4-6",
	"confirm-button": "aiq-confirm-button-3LchN",
	"fakePromptSlideInUp": "aiq-fakePromptSlideInUp-guVQx"
};

/***/ }),

/***/ "../../node_modules/css-loader/index.js?!../../node_modules/postcss-loader/src/index.js?!./lib/push_prompts/on_subscribed_popup/on_subscribed_popup.css":
/*!*********************************************************************************************************************************************************************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/css-loader??ref--6-1!/Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/postcss-loader/src??postcss!./lib/push_prompts/on_subscribed_popup/on_subscribed_popup.css ***!
  \*********************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../../../../node_modules/css-loader/lib/css-base.js */ "../../node_modules/css-loader/lib/css-base.js")(false);
// imports


// module
exports.push([module.i, ".aiq-popup-3qzye{position:fixed;top:0;bottom:0;left:0;right:0;z-index:999999;text-align:center;white-space:nowrap;-webkit-animation-name:aiq-onSubscribedPopupFadeIn-2UXLW;animation-name:aiq-onSubscribedPopupFadeIn-2UXLW;-webkit-animation-duration:.3s;animation-duration:.3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.aiq-popup-3qzye,.aiq-popup-scroll-1ztBV{-webkit-box-sizing:border-box;box-sizing:border-box}.aiq-popup-scroll-1ztBV{width:100%;height:100%;padding:30px 10px;overflow-y:auto;-webkit-overflow-scrolling:touch}.aiq-popup-scroll-1ztBV:before{content:\"\";display:inline-block;height:100%;vertical-align:middle;margin-right:-.25em}.aiq-overlay-SNfsc{position:fixed;left:0;top:0;right:0;bottom:0;background:rgba(0,0,0,.7);z-index:-1;pointer-events:none}.aiq-overlay-SNfsc+.aiq-close-button-1KXVO{color:#fff}.aiq-close-button-1KXVO{position:fixed;top:20px;right:20px;width:24px;height:24px;cursor:pointer;overflow:hidden;color:#000;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:none;border:none;border-radius:0;margin:0;min-width:0}.aiq-close-button-1KXVO:before{top:0;-webkit-transform:rotate(45deg);transform:rotate(45deg);-webkit-transform-origin:left;transform-origin:left}.aiq-close-button-1KXVO:after,.aiq-close-button-1KXVO:before{content:\"\";position:absolute;left:0;width:150%;height:2px;background:currentColor}.aiq-close-button-1KXVO:after{bottom:0;-webkit-transform:rotate(315deg);transform:rotate(315deg);-webkit-transform-origin:left;transform-origin:left}.aiq-container-l6fX0{display:inline-block;vertical-align:middle;max-width:100%;text-align:start}@-webkit-keyframes aiq-onSubscribedPopupFadeIn-2UXLW{0%{opacity:0}to{opacity:1}}@keyframes aiq-onSubscribedPopupFadeIn-2UXLW{0%{opacity:0}to{opacity:1}}", ""]);

// exports
exports.locals = {
	"popup": "aiq-popup-3qzye",
	"onSubscribedPopupFadeIn": "aiq-onSubscribedPopupFadeIn-2UXLW",
	"popup-scroll": "aiq-popup-scroll-1ztBV",
	"overlay": "aiq-overlay-SNfsc",
	"close-button": "aiq-close-button-1KXVO",
	"container": "aiq-container-l6fX0"
};

/***/ }),

/***/ "../../node_modules/css-loader/index.js?!../../node_modules/postcss-loader/src/index.js?!./lib/push_prompts/overlay_prompt/overlay_prompt.css":
/*!***********************************************************************************************************************************************************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/css-loader??ref--6-1!/Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/postcss-loader/src??postcss!./lib/push_prompts/overlay_prompt/overlay_prompt.css ***!
  \***********************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../../../../node_modules/css-loader/lib/css-base.js */ "../../node_modules/css-loader/lib/css-base.js")(false);
// imports


// module
exports.push([module.i, ".aiq-overlay-1BT3y{position:fixed;z-index:99999999;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.9);overflow-x:hidden}.aiq-content-VGqtl{position:relative;top:25%;width:100%;max-width:450px;margin:30px auto 0;text-align:center;color:#fff}.aiq-content-VGqtl h6{font-size:14px;font-weight:400}.aiq-content-VGqtl h4{margin:10px 0;font-size:24px}.aiq-close-button-eUPE_{position:fixed;top:20px;right:20px;width:24px;height:24px;cursor:pointer;overflow:hidden;color:#fff;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:none;border:none;border-radius:0}.aiq-close-button-eUPE_:before{top:0;-webkit-transform:rotate(45deg);transform:rotate(45deg);-webkit-transform-origin:left;transform-origin:left}.aiq-close-button-eUPE_:after,.aiq-close-button-eUPE_:before{content:\"\";position:absolute;left:0;width:150%;height:2px;background:currentColor}.aiq-close-button-eUPE_:after{bottom:0;-webkit-transform:rotate(315deg);transform:rotate(315deg);-webkit-transform-origin:left;transform-origin:left}", ""]);

// exports
exports.locals = {
	"overlay": "aiq-overlay-1BT3y",
	"content": "aiq-content-VGqtl",
	"close-button": "aiq-close-button-eUPE_"
};

/***/ }),

/***/ "../../node_modules/css-loader/index.js?!../../node_modules/postcss-loader/src/index.js?!./lib/recommendation/widget.css":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/css-loader??ref--6-1!/Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/postcss-loader/src??postcss!./lib/recommendation/widget.css ***!
  \**************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../../../node_modules/css-loader/lib/css-base.js */ "../../node_modules/css-loader/lib/css-base.js")(false);
// imports


// module
exports.push([module.i, ".aiq-container-GphqG{margin:0 auto;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;min-width:180px;overflow:hidden;font-family:Open Sans}.aiq-container-GphqG .aiq-wrapper-1KT91{-webkit-box-flex:1;-ms-flex:1;flex:1;display:inline-block;font-size:12px;text-decoration:none}.aiq-container-GphqG .aiq-wrapper-1KT91:hover{cursor:pointer;-webkit-transform:scale(1.025);transform:scale(1.025);-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out}.aiq-container-GphqG .aiq-wrapper-1KT91 .aiq-thumbnails-2rton{-ms-flex-preferred-size:100%;flex-basis:100%;margin-bottom:5px;width:100%;background-size:cover;background-repeat:no-repeat;background-position:50%}.aiq-container-GphqG .aiq-wrapper-1KT91 .aiq-text-1rzWe{color:#000}.aiq-container-GphqG .aiq-wrapper-1KT91 .aiq-text-1rzWe+.aiq-text-1rzWe{padding-top:3px}.aiq-container-GphqG .aiq-wrapper-1KT91 .aiq-title-hvjno{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.aiq-container-GphqG .aiq-wrapper-1KT91 .aiq-retailPrice-1vCsZ{text-decoration:line-through}", ""]);

// exports
exports.locals = {
	"container": "aiq-container-GphqG",
	"wrapper": "aiq-wrapper-1KT91",
	"thumbnails": "aiq-thumbnails-2rton",
	"text": "aiq-text-1rzWe",
	"title": "aiq-title-hvjno",
	"retailPrice": "aiq-retailPrice-1vCsZ"
};

/***/ }),

/***/ "../../node_modules/css-loader/lib/css-base.js":
/*!*********************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/css-loader/lib/css-base.js ***!
  \*********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
module.exports = function(useSourceMap) {
	var list = [];

	// return the list of modules as css string
	list.toString = function toString() {
		return this.map(function (item) {
			var content = cssWithMappingToString(item, useSourceMap);
			if(item[2]) {
				return "@media " + item[2] + "{" + content + "}";
			} else {
				return content;
			}
		}).join("");
	};

	// import a list of modules into the list
	list.i = function(modules, mediaQuery) {
		if(typeof modules === "string")
			modules = [[null, modules, ""]];
		var alreadyImportedModules = {};
		for(var i = 0; i < this.length; i++) {
			var id = this[i][0];
			if(typeof id === "number")
				alreadyImportedModules[id] = true;
		}
		for(i = 0; i < modules.length; i++) {
			var item = modules[i];
			// skip already imported module
			// this implementation is not 100% perfect for weird media query combinations
			//  when a module is imported multiple times with different media queries.
			//  I hope this will never occur (Hey this way we have smaller bundles)
			if(typeof item[0] !== "number" || !alreadyImportedModules[item[0]]) {
				if(mediaQuery && !item[2]) {
					item[2] = mediaQuery;
				} else if(mediaQuery) {
					item[2] = "(" + item[2] + ") and (" + mediaQuery + ")";
				}
				list.push(item);
			}
		}
	};
	return list;
};

function cssWithMappingToString(item, useSourceMap) {
	var content = item[1] || '';
	var cssMapping = item[3];
	if (!cssMapping) {
		return content;
	}

	if (useSourceMap && typeof btoa === 'function') {
		var sourceMapping = toComment(cssMapping);
		var sourceURLs = cssMapping.sources.map(function (source) {
			return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'
		});

		return [content].concat(sourceURLs).concat([sourceMapping]).join('\n');
	}

	return [content].join('\n');
}

// Adapted from convert-source-map (MIT)
function toComment(sourceMap) {
	// eslint-disable-next-line no-undef
	var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));
	var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;

	return '/*# ' + data + ' */';
}


/***/ }),

/***/ "../../node_modules/idb-keyval/dist/idb-keyval.mjs":
/*!*************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/idb-keyval/dist/idb-keyval.mjs ***!
  \*************************************************************************************************************/
/*! exports provided: Store, get, set, del, clear, keys */
/***/ (function(__webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Store", function() { return Store; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "get", function() { return get; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "set", function() { return set; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "del", function() { return del; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clear", function() { return clear; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "keys", function() { return keys; });
class Store {
    constructor(dbName = 'keyval-store', storeName = 'keyval') {
        this.storeName = storeName;
        this._dbp = new Promise((resolve, reject) => {
            const openreq = indexedDB.open(dbName, 1);
            openreq.onerror = () => reject(openreq.error);
            openreq.onsuccess = () => resolve(openreq.result);
            // First time setup: create an empty object store
            openreq.onupgradeneeded = () => {
                openreq.result.createObjectStore(storeName);
            };
        });
    }
    _withIDBStore(type, callback) {
        return this._dbp.then(db => new Promise((resolve, reject) => {
            const transaction = db.transaction(this.storeName, type);
            transaction.oncomplete = () => resolve();
            transaction.onabort = transaction.onerror = () => reject(transaction.error);
            callback(transaction.objectStore(this.storeName));
        }));
    }
}
let store;
function getDefaultStore() {
    if (!store)
        store = new Store();
    return store;
}
function get(key, store = getDefaultStore()) {
    let req;
    return store._withIDBStore('readonly', store => {
        req = store.get(key);
    }).then(() => req.result);
}
function set(key, value, store = getDefaultStore()) {
    return store._withIDBStore('readwrite', store => {
        store.put(value, key);
    });
}
function del(key, store = getDefaultStore()) {
    return store._withIDBStore('readwrite', store => {
        store.delete(key);
    });
}
function clear(store = getDefaultStore()) {
    return store._withIDBStore('readwrite', store => {
        store.clear();
    });
}
function keys(store = getDefaultStore()) {
    const keys = [];
    return store._withIDBStore('readonly', store => {
        // This would be store.getAllKeys(), but it isn't supported by Edge or Safari.
        // And openKeyCursor isn't supported by Safari.
        (store.openKeyCursor || store.openCursor).call(store).onsuccess = function () {
            if (!this.result)
                return;
            keys.push(this.result.key);
            this.result.continue();
        };
    }).then(() => keys);
}




/***/ }),

/***/ "../../node_modules/js-cookie/src/js.cookie.js":
/*!*********************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/js-cookie/src/js.cookie.js ***!
  \*********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
;(function (factory) {
	var registeredInModuleLoader = false;
	if (true) {
		!(__WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :
				__WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
		registeredInModuleLoader = true;
	}
	if (true) {
		module.exports = factory();
		registeredInModuleLoader = true;
	}
	if (!registeredInModuleLoader) {
		var OldCookies = window.Cookies;
		var api = window.Cookies = factory();
		api.noConflict = function () {
			window.Cookies = OldCookies;
			return api;
		};
	}
}(function () {
	function extend () {
		var i = 0;
		var result = {};
		for (; i < arguments.length; i++) {
			var attributes = arguments[ i ];
			for (var key in attributes) {
				result[key] = attributes[key];
			}
		}
		return result;
	}

	function init (converter) {
		function api (key, value, attributes) {
			var result;
			if (typeof document === 'undefined') {
				return;
			}

			// Write

			if (arguments.length > 1) {
				attributes = extend({
					path: '/'
				}, api.defaults, attributes);

				if (typeof attributes.expires === 'number') {
					var expires = new Date();
					expires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);
					attributes.expires = expires;
				}

				// We're using "expires" because "max-age" is not supported by IE
				attributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';

				try {
					result = JSON.stringify(value);
					if (/^[\{\[]/.test(result)) {
						value = result;
					}
				} catch (e) {}

				if (!converter.write) {
					value = encodeURIComponent(String(value))
						.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);
				} else {
					value = converter.write(value, key);
				}

				key = encodeURIComponent(String(key));
				key = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);
				key = key.replace(/[\(\)]/g, escape);

				var stringifiedAttributes = '';

				for (var attributeName in attributes) {
					if (!attributes[attributeName]) {
						continue;
					}
					stringifiedAttributes += '; ' + attributeName;
					if (attributes[attributeName] === true) {
						continue;
					}
					stringifiedAttributes += '=' + attributes[attributeName];
				}
				return (document.cookie = key + '=' + value + stringifiedAttributes);
			}

			// Read

			if (!key) {
				result = {};
			}

			// To prevent the for loop in the first place assign an empty array
			// in case there are no cookies at all. Also prevents odd result when
			// calling "get()"
			var cookies = document.cookie ? document.cookie.split('; ') : [];
			var rdecode = /(%[0-9A-Z]{2})+/g;
			var i = 0;

			for (; i < cookies.length; i++) {
				var parts = cookies[i].split('=');
				var cookie = parts.slice(1).join('=');

				if (!this.json && cookie.charAt(0) === '"') {
					cookie = cookie.slice(1, -1);
				}

				try {
					var name = parts[0].replace(rdecode, decodeURIComponent);
					cookie = converter.read ?
						converter.read(cookie, name) : converter(cookie, name) ||
						cookie.replace(rdecode, decodeURIComponent);

					if (this.json) {
						try {
							cookie = JSON.parse(cookie);
						} catch (e) {}
					}

					if (key === name) {
						result = cookie;
						break;
					}

					if (!key) {
						result[name] = cookie;
					}
				} catch (e) {}
			}

			return result;
		}

		api.set = api;
		api.get = function (key) {
			return api.call(api, key);
		};
		api.getJSON = function () {
			return api.apply({
				json: true
			}, [].slice.call(arguments));
		};
		api.defaults = {};

		api.remove = function (key, attributes) {
			api(key, '', extend(attributes, {
				expires: -1
			}));
		};

		api.withConverter = init;

		return api;
	}

	return init(function () {});
}));


/***/ }),

/***/ "../../node_modules/lodash.throttle/index.js":
/*!*******************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/lodash.throttle/index.js ***!
  \*******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

/** Used as the `TypeError` message for "Functions" methods. */
var FUNC_ERROR_TEXT = 'Expected a function';

/** Used as references for various `Number` constants. */
var NAN = 0 / 0;

/** `Object#toString` result references. */
var symbolTag = '[object Symbol]';

/** Used to match leading and trailing whitespace. */
var reTrim = /^\s+|\s+$/g;

/** Used to detect bad signed hexadecimal string values. */
var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;

/** Used to detect binary string values. */
var reIsBinary = /^0b[01]+$/i;

/** Used to detect octal string values. */
var reIsOctal = /^0o[0-7]+$/i;

/** Built-in method references without a dependency on `root`. */
var freeParseInt = parseInt;

/** Detect free variable `global` from Node.js. */
var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;

/** Detect free variable `self`. */
var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

/** Used as a reference to the global object. */
var root = freeGlobal || freeSelf || Function('return this')();

/** Used for built-in method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var objectToString = objectProto.toString;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max,
    nativeMin = Math.min;

/**
 * Gets the timestamp of the number of milliseconds that have elapsed since
 * the Unix epoch (1 January 1970 00:00:00 UTC).
 *
 * @static
 * @memberOf _
 * @since 2.4.0
 * @category Date
 * @returns {number} Returns the timestamp.
 * @example
 *
 * _.defer(function(stamp) {
 *   console.log(_.now() - stamp);
 * }, _.now());
 * // => Logs the number of milliseconds it took for the deferred invocation.
 */
var now = function() {
  return root.Date.now();
};

/**
 * Creates a debounced function that delays invoking `func` until after `wait`
 * milliseconds have elapsed since the last time the debounced function was
 * invoked. The debounced function comes with a `cancel` method to cancel
 * delayed `func` invocations and a `flush` method to immediately invoke them.
 * Provide `options` to indicate whether `func` should be invoked on the
 * leading and/or trailing edge of the `wait` timeout. The `func` is invoked
 * with the last arguments provided to the debounced function. Subsequent
 * calls to the debounced function return the result of the last `func`
 * invocation.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is
 * invoked on the trailing edge of the timeout only if the debounced function
 * is invoked more than once during the `wait` timeout.
 *
 * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
 * until to the next tick, similar to `setTimeout` with a timeout of `0`.
 *
 * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
 * for details over the differences between `_.debounce` and `_.throttle`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to debounce.
 * @param {number} [wait=0] The number of milliseconds to delay.
 * @param {Object} [options={}] The options object.
 * @param {boolean} [options.leading=false]
 *  Specify invoking on the leading edge of the timeout.
 * @param {number} [options.maxWait]
 *  The maximum time `func` is allowed to be delayed before it's invoked.
 * @param {boolean} [options.trailing=true]
 *  Specify invoking on the trailing edge of the timeout.
 * @returns {Function} Returns the new debounced function.
 * @example
 *
 * // Avoid costly calculations while the window size is in flux.
 * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
 *
 * // Invoke `sendMail` when clicked, debouncing subsequent calls.
 * jQuery(element).on('click', _.debounce(sendMail, 300, {
 *   'leading': true,
 *   'trailing': false
 * }));
 *
 * // Ensure `batchLog` is invoked once after 1 second of debounced calls.
 * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });
 * var source = new EventSource('/stream');
 * jQuery(source).on('message', debounced);
 *
 * // Cancel the trailing debounced invocation.
 * jQuery(window).on('popstate', debounced.cancel);
 */
function debounce(func, wait, options) {
  var lastArgs,
      lastThis,
      maxWait,
      result,
      timerId,
      lastCallTime,
      lastInvokeTime = 0,
      leading = false,
      maxing = false,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  wait = toNumber(wait) || 0;
  if (isObject(options)) {
    leading = !!options.leading;
    maxing = 'maxWait' in options;
    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }

  function invokeFunc(time) {
    var args = lastArgs,
        thisArg = lastThis;

    lastArgs = lastThis = undefined;
    lastInvokeTime = time;
    result = func.apply(thisArg, args);
    return result;
  }

  function leadingEdge(time) {
    // Reset any `maxWait` timer.
    lastInvokeTime = time;
    // Start the timer for the trailing edge.
    timerId = setTimeout(timerExpired, wait);
    // Invoke the leading edge.
    return leading ? invokeFunc(time) : result;
  }

  function remainingWait(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime,
        result = wait - timeSinceLastCall;

    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;
  }

  function shouldInvoke(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime;

    // Either this is the first call, activity has stopped and we're at the
    // trailing edge, the system time has gone backwards and we're treating
    // it as the trailing edge, or we've hit the `maxWait` limit.
    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||
      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));
  }

  function timerExpired() {
    var time = now();
    if (shouldInvoke(time)) {
      return trailingEdge(time);
    }
    // Restart the timer.
    timerId = setTimeout(timerExpired, remainingWait(time));
  }

  function trailingEdge(time) {
    timerId = undefined;

    // Only invoke if we have `lastArgs` which means `func` has been
    // debounced at least once.
    if (trailing && lastArgs) {
      return invokeFunc(time);
    }
    lastArgs = lastThis = undefined;
    return result;
  }

  function cancel() {
    if (timerId !== undefined) {
      clearTimeout(timerId);
    }
    lastInvokeTime = 0;
    lastArgs = lastCallTime = lastThis = timerId = undefined;
  }

  function flush() {
    return timerId === undefined ? result : trailingEdge(now());
  }

  function debounced() {
    var time = now(),
        isInvoking = shouldInvoke(time);

    lastArgs = arguments;
    lastThis = this;
    lastCallTime = time;

    if (isInvoking) {
      if (timerId === undefined) {
        return leadingEdge(lastCallTime);
      }
      if (maxing) {
        // Handle invocations in a tight loop.
        timerId = setTimeout(timerExpired, wait);
        return invokeFunc(lastCallTime);
      }
    }
    if (timerId === undefined) {
      timerId = setTimeout(timerExpired, wait);
    }
    return result;
  }
  debounced.cancel = cancel;
  debounced.flush = flush;
  return debounced;
}

/**
 * Creates a throttled function that only invokes `func` at most once per
 * every `wait` milliseconds. The throttled function comes with a `cancel`
 * method to cancel delayed `func` invocations and a `flush` method to
 * immediately invoke them. Provide `options` to indicate whether `func`
 * should be invoked on the leading and/or trailing edge of the `wait`
 * timeout. The `func` is invoked with the last arguments provided to the
 * throttled function. Subsequent calls to the throttled function return the
 * result of the last `func` invocation.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is
 * invoked on the trailing edge of the timeout only if the throttled function
 * is invoked more than once during the `wait` timeout.
 *
 * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
 * until to the next tick, similar to `setTimeout` with a timeout of `0`.
 *
 * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
 * for details over the differences between `_.throttle` and `_.debounce`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to throttle.
 * @param {number} [wait=0] The number of milliseconds to throttle invocations to.
 * @param {Object} [options={}] The options object.
 * @param {boolean} [options.leading=true]
 *  Specify invoking on the leading edge of the timeout.
 * @param {boolean} [options.trailing=true]
 *  Specify invoking on the trailing edge of the timeout.
 * @returns {Function} Returns the new throttled function.
 * @example
 *
 * // Avoid excessively updating the position while scrolling.
 * jQuery(window).on('scroll', _.throttle(updatePosition, 100));
 *
 * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.
 * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });
 * jQuery(element).on('click', throttled);
 *
 * // Cancel the trailing throttled invocation.
 * jQuery(window).on('popstate', throttled.cancel);
 */
function throttle(func, wait, options) {
  var leading = true,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  if (isObject(options)) {
    leading = 'leading' in options ? !!options.leading : leading;
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }
  return debounce(func, wait, {
    'leading': leading,
    'maxWait': wait,
    'trailing': trailing
  });
}

/**
 * Checks if `value` is the
 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
 * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(_.noop);
 * // => true
 *
 * _.isObject(null);
 * // => false
 */
function isObject(value) {
  var type = typeof value;
  return !!value && (type == 'object' || type == 'function');
}

/**
 * Checks if `value` is object-like. A value is object-like if it's not `null`
 * and has a `typeof` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return !!value && typeof value == 'object';
}

/**
 * Checks if `value` is classified as a `Symbol` primitive or object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
 * @example
 *
 * _.isSymbol(Symbol.iterator);
 * // => true
 *
 * _.isSymbol('abc');
 * // => false
 */
function isSymbol(value) {
  return typeof value == 'symbol' ||
    (isObjectLike(value) && objectToString.call(value) == symbolTag);
}

/**
 * Converts `value` to a number.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to process.
 * @returns {number} Returns the number.
 * @example
 *
 * _.toNumber(3.2);
 * // => 3.2
 *
 * _.toNumber(Number.MIN_VALUE);
 * // => 5e-324
 *
 * _.toNumber(Infinity);
 * // => Infinity
 *
 * _.toNumber('3.2');
 * // => 3.2
 */
function toNumber(value) {
  if (typeof value == 'number') {
    return value;
  }
  if (isSymbol(value)) {
    return NAN;
  }
  if (isObject(value)) {
    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;
    value = isObject(other) ? (other + '') : other;
  }
  if (typeof value != 'string') {
    return value === 0 ? value : +value;
  }
  value = value.replace(reTrim, '');
  var isBinary = reIsBinary.test(value);
  return (isBinary || reIsOctal.test(value))
    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)
    : (reIsBadHex.test(value) ? NAN : +value);
}

module.exports = throttle;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../packages/web-sdk/node_modules/webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "../../node_modules/loglevel/lib/loglevel.js":
/*!*******************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/loglevel/lib/loglevel.js ***!
  \*******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*
* loglevel - https://github.com/pimterry/loglevel
*
* Copyright (c) 2013 Tim Perry
* Licensed under the MIT license.
*/
(function (root, definition) {
    "use strict";
    if (true) {
        !(__WEBPACK_AMD_DEFINE_FACTORY__ = (definition),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :
				__WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
    } else {}
}(this, function () {
    "use strict";

    // Slightly dubious tricks to cut down minimized file size
    var noop = function() {};
    var undefinedType = "undefined";

    var logMethods = [
        "trace",
        "debug",
        "info",
        "warn",
        "error"
    ];

    // Cross-browser bind equivalent that works at least back to IE6
    function bindMethod(obj, methodName) {
        var method = obj[methodName];
        if (typeof method.bind === 'function') {
            return method.bind(obj);
        } else {
            try {
                return Function.prototype.bind.call(method, obj);
            } catch (e) {
                // Missing bind shim or IE8 + Modernizr, fallback to wrapping
                return function() {
                    return Function.prototype.apply.apply(method, [obj, arguments]);
                };
            }
        }
    }

    // Build the best logging method possible for this env
    // Wherever possible we want to bind, not wrap, to preserve stack traces
    function realMethod(methodName) {
        if (methodName === 'debug') {
            methodName = 'log';
        }

        if (typeof console === undefinedType) {
            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives
        } else if (console[methodName] !== undefined) {
            return bindMethod(console, methodName);
        } else if (console.log !== undefined) {
            return bindMethod(console, 'log');
        } else {
            return noop;
        }
    }

    // These private functions always need `this` to be set properly

    function replaceLoggingMethods(level, loggerName) {
        /*jshint validthis:true */
        for (var i = 0; i < logMethods.length; i++) {
            var methodName = logMethods[i];
            this[methodName] = (i < level) ?
                noop :
                this.methodFactory(methodName, level, loggerName);
        }

        // Define log.log as an alias for log.debug
        this.log = this.debug;
    }

    // In old IE versions, the console isn't present until you first open it.
    // We build realMethod() replacements here that regenerate logging methods
    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {
        return function () {
            if (typeof console !== undefinedType) {
                replaceLoggingMethods.call(this, level, loggerName);
                this[methodName].apply(this, arguments);
            }
        };
    }

    // By default, we use closely bound real methods wherever possible, and
    // otherwise we wait for a console to appear, and then try again.
    function defaultMethodFactory(methodName, level, loggerName) {
        /*jshint validthis:true */
        return realMethod(methodName) ||
               enableLoggingWhenConsoleArrives.apply(this, arguments);
    }

    function Logger(name, defaultLevel, factory) {
      var self = this;
      var currentLevel;
      var storageKey = "loglevel";
      if (name) {
        storageKey += ":" + name;
      }

      function persistLevelIfPossible(levelNum) {
          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();

          if (typeof window === undefinedType) return;

          // Use localStorage if available
          try {
              window.localStorage[storageKey] = levelName;
              return;
          } catch (ignore) {}

          // Use session cookie as fallback
          try {
              window.document.cookie =
                encodeURIComponent(storageKey) + "=" + levelName + ";";
          } catch (ignore) {}
      }

      function getPersistedLevel() {
          var storedLevel;

          if (typeof window === undefinedType) return;

          try {
              storedLevel = window.localStorage[storageKey];
          } catch (ignore) {}

          // Fallback to cookies if local storage gives us nothing
          if (typeof storedLevel === undefinedType) {
              try {
                  var cookie = window.document.cookie;
                  var location = cookie.indexOf(
                      encodeURIComponent(storageKey) + "=");
                  if (location !== -1) {
                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];
                  }
              } catch (ignore) {}
          }

          // If the stored level is not valid, treat it as if nothing was stored.
          if (self.levels[storedLevel] === undefined) {
              storedLevel = undefined;
          }

          return storedLevel;
      }

      /*
       *
       * Public logger API - see https://github.com/pimterry/loglevel for details
       *
       */

      self.name = name;

      self.levels = { "TRACE": 0, "DEBUG": 1, "INFO": 2, "WARN": 3,
          "ERROR": 4, "SILENT": 5};

      self.methodFactory = factory || defaultMethodFactory;

      self.getLevel = function () {
          return currentLevel;
      };

      self.setLevel = function (level, persist) {
          if (typeof level === "string" && self.levels[level.toUpperCase()] !== undefined) {
              level = self.levels[level.toUpperCase()];
          }
          if (typeof level === "number" && level >= 0 && level <= self.levels.SILENT) {
              currentLevel = level;
              if (persist !== false) {  // defaults to true
                  persistLevelIfPossible(level);
              }
              replaceLoggingMethods.call(self, level, name);
              if (typeof console === undefinedType && level < self.levels.SILENT) {
                  return "No console available for logging";
              }
          } else {
              throw "log.setLevel() called with invalid level: " + level;
          }
      };

      self.setDefaultLevel = function (level) {
          if (!getPersistedLevel()) {
              self.setLevel(level, false);
          }
      };

      self.enableAll = function(persist) {
          self.setLevel(self.levels.TRACE, persist);
      };

      self.disableAll = function(persist) {
          self.setLevel(self.levels.SILENT, persist);
      };

      // Initialize with the right level
      var initialLevel = getPersistedLevel();
      if (initialLevel == null) {
          initialLevel = defaultLevel == null ? "WARN" : defaultLevel;
      }
      self.setLevel(initialLevel, false);
    }

    /*
     *
     * Top-level API
     *
     */

    var defaultLogger = new Logger();

    var _loggersByName = {};
    defaultLogger.getLogger = function getLogger(name) {
        if (typeof name !== "string" || name === "") {
          throw new TypeError("You must supply a name when creating a logger.");
        }

        var logger = _loggersByName[name];
        if (!logger) {
          logger = _loggersByName[name] = new Logger(
            name, defaultLogger.getLevel(), defaultLogger.methodFactory);
        }
        return logger;
    };

    // Grab the current global log variable in case of overwrite
    var _log = (typeof window !== undefinedType) ? window.log : undefined;
    defaultLogger.noConflict = function() {
        if (typeof window !== undefinedType &&
               window.log === defaultLogger) {
            window.log = _log;
        }

        return defaultLogger;
    };

    defaultLogger.getLoggers = function getLoggers() {
        return _loggersByName;
    };

    return defaultLogger;
}));


/***/ }),

/***/ "../../node_modules/promise/lib/core.js":
/*!**************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/promise/lib/core.js ***!
  \**************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var asap = __webpack_require__(/*! asap/raw */ "../../node_modules/asap/browser-raw.js");

function noop() {}

// States:
//
// 0 - pending
// 1 - fulfilled with _value
// 2 - rejected with _value
// 3 - adopted the state of another promise, _value
//
// once the state is no longer pending (0) it is immutable

// All `_` prefixed properties will be reduced to `_{random number}`
// at build time to obfuscate them and discourage their use.
// We don't use symbols or Object.defineProperty to fully hide them
// because the performance isn't good enough.


// to avoid using try/catch inside critical functions, we
// extract them to here.
var LAST_ERROR = null;
var IS_ERROR = {};
function getThen(obj) {
  try {
    return obj.then;
  } catch (ex) {
    LAST_ERROR = ex;
    return IS_ERROR;
  }
}

function tryCallOne(fn, a) {
  try {
    return fn(a);
  } catch (ex) {
    LAST_ERROR = ex;
    return IS_ERROR;
  }
}
function tryCallTwo(fn, a, b) {
  try {
    fn(a, b);
  } catch (ex) {
    LAST_ERROR = ex;
    return IS_ERROR;
  }
}

module.exports = Promise;

function Promise(fn) {
  if (typeof this !== 'object') {
    throw new TypeError('Promises must be constructed via new');
  }
  if (typeof fn !== 'function') {
    throw new TypeError('Promise constructor\'s argument is not a function');
  }
  this._75 = 0;
  this._83 = 0;
  this._18 = null;
  this._38 = null;
  if (fn === noop) return;
  doResolve(fn, this);
}
Promise._47 = null;
Promise._71 = null;
Promise._44 = noop;

Promise.prototype.then = function(onFulfilled, onRejected) {
  if (this.constructor !== Promise) {
    return safeThen(this, onFulfilled, onRejected);
  }
  var res = new Promise(noop);
  handle(this, new Handler(onFulfilled, onRejected, res));
  return res;
};

function safeThen(self, onFulfilled, onRejected) {
  return new self.constructor(function (resolve, reject) {
    var res = new Promise(noop);
    res.then(resolve, reject);
    handle(self, new Handler(onFulfilled, onRejected, res));
  });
}
function handle(self, deferred) {
  while (self._83 === 3) {
    self = self._18;
  }
  if (Promise._47) {
    Promise._47(self);
  }
  if (self._83 === 0) {
    if (self._75 === 0) {
      self._75 = 1;
      self._38 = deferred;
      return;
    }
    if (self._75 === 1) {
      self._75 = 2;
      self._38 = [self._38, deferred];
      return;
    }
    self._38.push(deferred);
    return;
  }
  handleResolved(self, deferred);
}

function handleResolved(self, deferred) {
  asap(function() {
    var cb = self._83 === 1 ? deferred.onFulfilled : deferred.onRejected;
    if (cb === null) {
      if (self._83 === 1) {
        resolve(deferred.promise, self._18);
      } else {
        reject(deferred.promise, self._18);
      }
      return;
    }
    var ret = tryCallOne(cb, self._18);
    if (ret === IS_ERROR) {
      reject(deferred.promise, LAST_ERROR);
    } else {
      resolve(deferred.promise, ret);
    }
  });
}
function resolve(self, newValue) {
  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure
  if (newValue === self) {
    return reject(
      self,
      new TypeError('A promise cannot be resolved with itself.')
    );
  }
  if (
    newValue &&
    (typeof newValue === 'object' || typeof newValue === 'function')
  ) {
    var then = getThen(newValue);
    if (then === IS_ERROR) {
      return reject(self, LAST_ERROR);
    }
    if (
      then === self.then &&
      newValue instanceof Promise
    ) {
      self._83 = 3;
      self._18 = newValue;
      finale(self);
      return;
    } else if (typeof then === 'function') {
      doResolve(then.bind(newValue), self);
      return;
    }
  }
  self._83 = 1;
  self._18 = newValue;
  finale(self);
}

function reject(self, newValue) {
  self._83 = 2;
  self._18 = newValue;
  if (Promise._71) {
    Promise._71(self, newValue);
  }
  finale(self);
}
function finale(self) {
  if (self._75 === 1) {
    handle(self, self._38);
    self._38 = null;
  }
  if (self._75 === 2) {
    for (var i = 0; i < self._38.length; i++) {
      handle(self, self._38[i]);
    }
    self._38 = null;
  }
}

function Handler(onFulfilled, onRejected, promise){
  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;
  this.onRejected = typeof onRejected === 'function' ? onRejected : null;
  this.promise = promise;
}

/**
 * Take a potentially misbehaving resolver function and make sure
 * onFulfilled and onRejected are only called once.
 *
 * Makes no guarantees about asynchrony.
 */
function doResolve(fn, promise) {
  var done = false;
  var res = tryCallTwo(fn, function (value) {
    if (done) return;
    done = true;
    resolve(promise, value);
  }, function (reason) {
    if (done) return;
    done = true;
    reject(promise, reason);
  });
  if (!done && res === IS_ERROR) {
    done = true;
    reject(promise, LAST_ERROR);
  }
}


/***/ }),

/***/ "../../node_modules/promise/lib/es6-extensions.js":
/*!************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/promise/lib/es6-extensions.js ***!
  \************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


//This file contains the ES6 extensions to the core Promises/A+ API

var Promise = __webpack_require__(/*! ./core.js */ "../../node_modules/promise/lib/core.js");

module.exports = Promise;

/* Static Functions */

var TRUE = valuePromise(true);
var FALSE = valuePromise(false);
var NULL = valuePromise(null);
var UNDEFINED = valuePromise(undefined);
var ZERO = valuePromise(0);
var EMPTYSTRING = valuePromise('');

function valuePromise(value) {
  var p = new Promise(Promise._44);
  p._83 = 1;
  p._18 = value;
  return p;
}
Promise.resolve = function (value) {
  if (value instanceof Promise) return value;

  if (value === null) return NULL;
  if (value === undefined) return UNDEFINED;
  if (value === true) return TRUE;
  if (value === false) return FALSE;
  if (value === 0) return ZERO;
  if (value === '') return EMPTYSTRING;

  if (typeof value === 'object' || typeof value === 'function') {
    try {
      var then = value.then;
      if (typeof then === 'function') {
        return new Promise(then.bind(value));
      }
    } catch (ex) {
      return new Promise(function (resolve, reject) {
        reject(ex);
      });
    }
  }
  return valuePromise(value);
};

Promise.all = function (arr) {
  var args = Array.prototype.slice.call(arr);

  return new Promise(function (resolve, reject) {
    if (args.length === 0) return resolve([]);
    var remaining = args.length;
    function res(i, val) {
      if (val && (typeof val === 'object' || typeof val === 'function')) {
        if (val instanceof Promise && val.then === Promise.prototype.then) {
          while (val._83 === 3) {
            val = val._18;
          }
          if (val._83 === 1) return res(i, val._18);
          if (val._83 === 2) reject(val._18);
          val.then(function (val) {
            res(i, val);
          }, reject);
          return;
        } else {
          var then = val.then;
          if (typeof then === 'function') {
            var p = new Promise(then.bind(val));
            p.then(function (val) {
              res(i, val);
            }, reject);
            return;
          }
        }
      }
      args[i] = val;
      if (--remaining === 0) {
        resolve(args);
      }
    }
    for (var i = 0; i < args.length; i++) {
      res(i, args[i]);
    }
  });
};

Promise.reject = function (value) {
  return new Promise(function (resolve, reject) {
    reject(value);
  });
};

Promise.race = function (values) {
  return new Promise(function (resolve, reject) {
    values.forEach(function(value){
      Promise.resolve(value).then(resolve, reject);
    });
  });
};

/* Prototype Methods */

Promise.prototype['catch'] = function (onRejected) {
  return this.then(null, onRejected);
};


/***/ }),

/***/ "../../node_modules/promise/lib/rejection-tracking.js":
/*!****************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/promise/lib/rejection-tracking.js ***!
  \****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var Promise = __webpack_require__(/*! ./core */ "../../node_modules/promise/lib/core.js");

var DEFAULT_WHITELIST = [
  ReferenceError,
  TypeError,
  RangeError
];

var enabled = false;
exports.disable = disable;
function disable() {
  enabled = false;
  Promise._47 = null;
  Promise._71 = null;
}

exports.enable = enable;
function enable(options) {
  options = options || {};
  if (enabled) disable();
  enabled = true;
  var id = 0;
  var displayId = 0;
  var rejections = {};
  Promise._47 = function (promise) {
    if (
      promise._83 === 2 && // IS REJECTED
      rejections[promise._56]
    ) {
      if (rejections[promise._56].logged) {
        onHandled(promise._56);
      } else {
        clearTimeout(rejections[promise._56].timeout);
      }
      delete rejections[promise._56];
    }
  };
  Promise._71 = function (promise, err) {
    if (promise._75 === 0) { // not yet handled
      promise._56 = id++;
      rejections[promise._56] = {
        displayId: null,
        error: err,
        timeout: setTimeout(
          onUnhandled.bind(null, promise._56),
          // For reference errors and type errors, this almost always
          // means the programmer made a mistake, so log them after just
          // 100ms
          // otherwise, wait 2 seconds to see if they get handled
          matchWhitelist(err, DEFAULT_WHITELIST)
            ? 100
            : 2000
        ),
        logged: false
      };
    }
  };
  function onUnhandled(id) {
    if (
      options.allRejections ||
      matchWhitelist(
        rejections[id].error,
        options.whitelist || DEFAULT_WHITELIST
      )
    ) {
      rejections[id].displayId = displayId++;
      if (options.onUnhandled) {
        rejections[id].logged = true;
        options.onUnhandled(
          rejections[id].displayId,
          rejections[id].error
        );
      } else {
        rejections[id].logged = true;
        logError(
          rejections[id].displayId,
          rejections[id].error
        );
      }
    }
  }
  function onHandled(id) {
    if (rejections[id].logged) {
      if (options.onHandled) {
        options.onHandled(rejections[id].displayId, rejections[id].error);
      } else if (!rejections[id].onUnhandled) {
        console.warn(
          'Promise Rejection Handled (id: ' + rejections[id].displayId + '):'
        );
        console.warn(
          '  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id ' +
          rejections[id].displayId + '.'
        );
      }
    }
  }
}

function logError(id, error) {
  console.warn('Possible Unhandled Promise Rejection (id: ' + id + '):');
  var errStr = (error && (error.stack || error)) + '';
  errStr.split('\n').forEach(function (line) {
    console.warn('  ' + line);
  });
}

function matchWhitelist(error, list) {
  return list.some(function (cls) {
    return error instanceof cls;
  });
}

/***/ }),

/***/ "../../node_modules/punycode/punycode.js":
/*!***************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/punycode/punycode.js ***!
  \***************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(module, global) {var __WEBPACK_AMD_DEFINE_RESULT__;/*! https://mths.be/punycode v1.4.1 by @mathias */
;(function(root) {

	/** Detect free variables */
	var freeExports = typeof exports == 'object' && exports &&
		!exports.nodeType && exports;
	var freeModule = typeof module == 'object' && module &&
		!module.nodeType && module;
	var freeGlobal = typeof global == 'object' && global;
	if (
		freeGlobal.global === freeGlobal ||
		freeGlobal.window === freeGlobal ||
		freeGlobal.self === freeGlobal
	) {
		root = freeGlobal;
	}

	/**
	 * The `punycode` object.
	 * @name punycode
	 * @type Object
	 */
	var punycode,

	/** Highest positive signed 32-bit float value */
	maxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1

	/** Bootstring parameters */
	base = 36,
	tMin = 1,
	tMax = 26,
	skew = 38,
	damp = 700,
	initialBias = 72,
	initialN = 128, // 0x80
	delimiter = '-', // '\x2D'

	/** Regular expressions */
	regexPunycode = /^xn--/,
	regexNonASCII = /[^\x20-\x7E]/, // unprintable ASCII chars + non-ASCII chars
	regexSeparators = /[\x2E\u3002\uFF0E\uFF61]/g, // RFC 3490 separators

	/** Error messages */
	errors = {
		'overflow': 'Overflow: input needs wider integers to process',
		'not-basic': 'Illegal input >= 0x80 (not a basic code point)',
		'invalid-input': 'Invalid input'
	},

	/** Convenience shortcuts */
	baseMinusTMin = base - tMin,
	floor = Math.floor,
	stringFromCharCode = String.fromCharCode,

	/** Temporary variable */
	key;

	/*--------------------------------------------------------------------------*/

	/**
	 * A generic error utility function.
	 * @private
	 * @param {String} type The error type.
	 * @returns {Error} Throws a `RangeError` with the applicable error message.
	 */
	function error(type) {
		throw new RangeError(errors[type]);
	}

	/**
	 * A generic `Array#map` utility function.
	 * @private
	 * @param {Array} array The array to iterate over.
	 * @param {Function} callback The function that gets called for every array
	 * item.
	 * @returns {Array} A new array of values returned by the callback function.
	 */
	function map(array, fn) {
		var length = array.length;
		var result = [];
		while (length--) {
			result[length] = fn(array[length]);
		}
		return result;
	}

	/**
	 * A simple `Array#map`-like wrapper to work with domain name strings or email
	 * addresses.
	 * @private
	 * @param {String} domain The domain name or email address.
	 * @param {Function} callback The function that gets called for every
	 * character.
	 * @returns {Array} A new string of characters returned by the callback
	 * function.
	 */
	function mapDomain(string, fn) {
		var parts = string.split('@');
		var result = '';
		if (parts.length > 1) {
			// In email addresses, only the domain name should be punycoded. Leave
			// the local part (i.e. everything up to `@`) intact.
			result = parts[0] + '@';
			string = parts[1];
		}
		// Avoid `split(regex)` for IE8 compatibility. See #17.
		string = string.replace(regexSeparators, '\x2E');
		var labels = string.split('.');
		var encoded = map(labels, fn).join('.');
		return result + encoded;
	}

	/**
	 * Creates an array containing the numeric code points of each Unicode
	 * character in the string. While JavaScript uses UCS-2 internally,
	 * this function will convert a pair of surrogate halves (each of which
	 * UCS-2 exposes as separate characters) into a single code point,
	 * matching UTF-16.
	 * @see `punycode.ucs2.encode`
	 * @see <https://mathiasbynens.be/notes/javascript-encoding>
	 * @memberOf punycode.ucs2
	 * @name decode
	 * @param {String} string The Unicode input string (UCS-2).
	 * @returns {Array} The new array of code points.
	 */
	function ucs2decode(string) {
		var output = [],
		    counter = 0,
		    length = string.length,
		    value,
		    extra;
		while (counter < length) {
			value = string.charCodeAt(counter++);
			if (value >= 0xD800 && value <= 0xDBFF && counter < length) {
				// high surrogate, and there is a next character
				extra = string.charCodeAt(counter++);
				if ((extra & 0xFC00) == 0xDC00) { // low surrogate
					output.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);
				} else {
					// unmatched surrogate; only append this code unit, in case the next
					// code unit is the high surrogate of a surrogate pair
					output.push(value);
					counter--;
				}
			} else {
				output.push(value);
			}
		}
		return output;
	}

	/**
	 * Creates a string based on an array of numeric code points.
	 * @see `punycode.ucs2.decode`
	 * @memberOf punycode.ucs2
	 * @name encode
	 * @param {Array} codePoints The array of numeric code points.
	 * @returns {String} The new Unicode string (UCS-2).
	 */
	function ucs2encode(array) {
		return map(array, function(value) {
			var output = '';
			if (value > 0xFFFF) {
				value -= 0x10000;
				output += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);
				value = 0xDC00 | value & 0x3FF;
			}
			output += stringFromCharCode(value);
			return output;
		}).join('');
	}

	/**
	 * Converts a basic code point into a digit/integer.
	 * @see `digitToBasic()`
	 * @private
	 * @param {Number} codePoint The basic numeric code point value.
	 * @returns {Number} The numeric value of a basic code point (for use in
	 * representing integers) in the range `0` to `base - 1`, or `base` if
	 * the code point does not represent a value.
	 */
	function basicToDigit(codePoint) {
		if (codePoint - 48 < 10) {
			return codePoint - 22;
		}
		if (codePoint - 65 < 26) {
			return codePoint - 65;
		}
		if (codePoint - 97 < 26) {
			return codePoint - 97;
		}
		return base;
	}

	/**
	 * Converts a digit/integer into a basic code point.
	 * @see `basicToDigit()`
	 * @private
	 * @param {Number} digit The numeric value of a basic code point.
	 * @returns {Number} The basic code point whose value (when used for
	 * representing integers) is `digit`, which needs to be in the range
	 * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is
	 * used; else, the lowercase form is used. The behavior is undefined
	 * if `flag` is non-zero and `digit` has no uppercase form.
	 */
	function digitToBasic(digit, flag) {
		//  0..25 map to ASCII a..z or A..Z
		// 26..35 map to ASCII 0..9
		return digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);
	}

	/**
	 * Bias adaptation function as per section 3.4 of RFC 3492.
	 * https://tools.ietf.org/html/rfc3492#section-3.4
	 * @private
	 */
	function adapt(delta, numPoints, firstTime) {
		var k = 0;
		delta = firstTime ? floor(delta / damp) : delta >> 1;
		delta += floor(delta / numPoints);
		for (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {
			delta = floor(delta / baseMinusTMin);
		}
		return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));
	}

	/**
	 * Converts a Punycode string of ASCII-only symbols to a string of Unicode
	 * symbols.
	 * @memberOf punycode
	 * @param {String} input The Punycode string of ASCII-only symbols.
	 * @returns {String} The resulting string of Unicode symbols.
	 */
	function decode(input) {
		// Don't use UCS-2
		var output = [],
		    inputLength = input.length,
		    out,
		    i = 0,
		    n = initialN,
		    bias = initialBias,
		    basic,
		    j,
		    index,
		    oldi,
		    w,
		    k,
		    digit,
		    t,
		    /** Cached calculation results */
		    baseMinusT;

		// Handle the basic code points: let `basic` be the number of input code
		// points before the last delimiter, or `0` if there is none, then copy
		// the first basic code points to the output.

		basic = input.lastIndexOf(delimiter);
		if (basic < 0) {
			basic = 0;
		}

		for (j = 0; j < basic; ++j) {
			// if it's not a basic code point
			if (input.charCodeAt(j) >= 0x80) {
				error('not-basic');
			}
			output.push(input.charCodeAt(j));
		}

		// Main decoding loop: start just after the last delimiter if any basic code
		// points were copied; start at the beginning otherwise.

		for (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {

			// `index` is the index of the next character to be consumed.
			// Decode a generalized variable-length integer into `delta`,
			// which gets added to `i`. The overflow checking is easier
			// if we increase `i` as we go, then subtract off its starting
			// value at the end to obtain `delta`.
			for (oldi = i, w = 1, k = base; /* no condition */; k += base) {

				if (index >= inputLength) {
					error('invalid-input');
				}

				digit = basicToDigit(input.charCodeAt(index++));

				if (digit >= base || digit > floor((maxInt - i) / w)) {
					error('overflow');
				}

				i += digit * w;
				t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);

				if (digit < t) {
					break;
				}

				baseMinusT = base - t;
				if (w > floor(maxInt / baseMinusT)) {
					error('overflow');
				}

				w *= baseMinusT;

			}

			out = output.length + 1;
			bias = adapt(i - oldi, out, oldi == 0);

			// `i` was supposed to wrap around from `out` to `0`,
			// incrementing `n` each time, so we'll fix that now:
			if (floor(i / out) > maxInt - n) {
				error('overflow');
			}

			n += floor(i / out);
			i %= out;

			// Insert `n` at position `i` of the output
			output.splice(i++, 0, n);

		}

		return ucs2encode(output);
	}

	/**
	 * Converts a string of Unicode symbols (e.g. a domain name label) to a
	 * Punycode string of ASCII-only symbols.
	 * @memberOf punycode
	 * @param {String} input The string of Unicode symbols.
	 * @returns {String} The resulting Punycode string of ASCII-only symbols.
	 */
	function encode(input) {
		var n,
		    delta,
		    handledCPCount,
		    basicLength,
		    bias,
		    j,
		    m,
		    q,
		    k,
		    t,
		    currentValue,
		    output = [],
		    /** `inputLength` will hold the number of code points in `input`. */
		    inputLength,
		    /** Cached calculation results */
		    handledCPCountPlusOne,
		    baseMinusT,
		    qMinusT;

		// Convert the input in UCS-2 to Unicode
		input = ucs2decode(input);

		// Cache the length
		inputLength = input.length;

		// Initialize the state
		n = initialN;
		delta = 0;
		bias = initialBias;

		// Handle the basic code points
		for (j = 0; j < inputLength; ++j) {
			currentValue = input[j];
			if (currentValue < 0x80) {
				output.push(stringFromCharCode(currentValue));
			}
		}

		handledCPCount = basicLength = output.length;

		// `handledCPCount` is the number of code points that have been handled;
		// `basicLength` is the number of basic code points.

		// Finish the basic string - if it is not empty - with a delimiter
		if (basicLength) {
			output.push(delimiter);
		}

		// Main encoding loop:
		while (handledCPCount < inputLength) {

			// All non-basic code points < n have been handled already. Find the next
			// larger one:
			for (m = maxInt, j = 0; j < inputLength; ++j) {
				currentValue = input[j];
				if (currentValue >= n && currentValue < m) {
					m = currentValue;
				}
			}

			// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,
			// but guard against overflow
			handledCPCountPlusOne = handledCPCount + 1;
			if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {
				error('overflow');
			}

			delta += (m - n) * handledCPCountPlusOne;
			n = m;

			for (j = 0; j < inputLength; ++j) {
				currentValue = input[j];

				if (currentValue < n && ++delta > maxInt) {
					error('overflow');
				}

				if (currentValue == n) {
					// Represent delta as a generalized variable-length integer
					for (q = delta, k = base; /* no condition */; k += base) {
						t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);
						if (q < t) {
							break;
						}
						qMinusT = q - t;
						baseMinusT = base - t;
						output.push(
							stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))
						);
						q = floor(qMinusT / baseMinusT);
					}

					output.push(stringFromCharCode(digitToBasic(q, 0)));
					bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);
					delta = 0;
					++handledCPCount;
				}
			}

			++delta;
			++n;

		}
		return output.join('');
	}

	/**
	 * Converts a Punycode string representing a domain name or an email address
	 * to Unicode. Only the Punycoded parts of the input will be converted, i.e.
	 * it doesn't matter if you call it on a string that has already been
	 * converted to Unicode.
	 * @memberOf punycode
	 * @param {String} input The Punycoded domain name or email address to
	 * convert to Unicode.
	 * @returns {String} The Unicode representation of the given Punycode
	 * string.
	 */
	function toUnicode(input) {
		return mapDomain(input, function(string) {
			return regexPunycode.test(string)
				? decode(string.slice(4).toLowerCase())
				: string;
		});
	}

	/**
	 * Converts a Unicode string representing a domain name or an email address to
	 * Punycode. Only the non-ASCII parts of the domain name will be converted,
	 * i.e. it doesn't matter if you call it with a domain that's already in
	 * ASCII.
	 * @memberOf punycode
	 * @param {String} input The domain name or email address to convert, as a
	 * Unicode string.
	 * @returns {String} The Punycode representation of the given domain name or
	 * email address.
	 */
	function toASCII(input) {
		return mapDomain(input, function(string) {
			return regexNonASCII.test(string)
				? 'xn--' + encode(string)
				: string;
		});
	}

	/*--------------------------------------------------------------------------*/

	/** Define the public API */
	punycode = {
		/**
		 * A string representing the current Punycode.js version number.
		 * @memberOf punycode
		 * @type String
		 */
		'version': '1.4.1',
		/**
		 * An object of methods to convert from JavaScript's internal character
		 * representation (UCS-2) to Unicode code points, and back.
		 * @see <https://mathiasbynens.be/notes/javascript-encoding>
		 * @memberOf punycode
		 * @type Object
		 */
		'ucs2': {
			'decode': ucs2decode,
			'encode': ucs2encode
		},
		'decode': decode,
		'encode': encode,
		'toASCII': toASCII,
		'toUnicode': toUnicode
	};

	/** Expose `punycode` */
	// Some AMD build optimizers, like r.js, check for specific condition patterns
	// like the following:
	if (
		true
	) {
		!(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {
			return punycode;
		}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
	} else {}

}(this));

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../packages/web-sdk/node_modules/webpack/buildin/module.js */ "./node_modules/webpack/buildin/module.js")(module), __webpack_require__(/*! ./../../packages/web-sdk/node_modules/webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "../../node_modules/querystring-es3/decode.js":
/*!********************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/querystring-es3/decode.js ***!
  \********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



// If obj.hasOwnProperty has been overridden, then calling
// obj.hasOwnProperty(prop) will break.
// See: https://github.com/joyent/node/issues/1707
function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}

module.exports = function(qs, sep, eq, options) {
  sep = sep || '&';
  eq = eq || '=';
  var obj = {};

  if (typeof qs !== 'string' || qs.length === 0) {
    return obj;
  }

  var regexp = /\+/g;
  qs = qs.split(sep);

  var maxKeys = 1000;
  if (options && typeof options.maxKeys === 'number') {
    maxKeys = options.maxKeys;
  }

  var len = qs.length;
  // maxKeys <= 0 means that we should not limit keys count
  if (maxKeys > 0 && len > maxKeys) {
    len = maxKeys;
  }

  for (var i = 0; i < len; ++i) {
    var x = qs[i].replace(regexp, '%20'),
        idx = x.indexOf(eq),
        kstr, vstr, k, v;

    if (idx >= 0) {
      kstr = x.substr(0, idx);
      vstr = x.substr(idx + 1);
    } else {
      kstr = x;
      vstr = '';
    }

    k = decodeURIComponent(kstr);
    v = decodeURIComponent(vstr);

    if (!hasOwnProperty(obj, k)) {
      obj[k] = v;
    } else if (isArray(obj[k])) {
      obj[k].push(v);
    } else {
      obj[k] = [obj[k], v];
    }
  }

  return obj;
};

var isArray = Array.isArray || function (xs) {
  return Object.prototype.toString.call(xs) === '[object Array]';
};


/***/ }),

/***/ "../../node_modules/querystring-es3/encode.js":
/*!********************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/querystring-es3/encode.js ***!
  \********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



var stringifyPrimitive = function(v) {
  switch (typeof v) {
    case 'string':
      return v;

    case 'boolean':
      return v ? 'true' : 'false';

    case 'number':
      return isFinite(v) ? v : '';

    default:
      return '';
  }
};

module.exports = function(obj, sep, eq, name) {
  sep = sep || '&';
  eq = eq || '=';
  if (obj === null) {
    obj = undefined;
  }

  if (typeof obj === 'object') {
    return map(objectKeys(obj), function(k) {
      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;
      if (isArray(obj[k])) {
        return map(obj[k], function(v) {
          return ks + encodeURIComponent(stringifyPrimitive(v));
        }).join(sep);
      } else {
        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));
      }
    }).join(sep);

  }

  if (!name) return '';
  return encodeURIComponent(stringifyPrimitive(name)) + eq +
         encodeURIComponent(stringifyPrimitive(obj));
};

var isArray = Array.isArray || function (xs) {
  return Object.prototype.toString.call(xs) === '[object Array]';
};

function map (xs, f) {
  if (xs.map) return xs.map(f);
  var res = [];
  for (var i = 0; i < xs.length; i++) {
    res.push(f(xs[i], i));
  }
  return res;
}

var objectKeys = Object.keys || function (obj) {
  var res = [];
  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);
  }
  return res;
};


/***/ }),

/***/ "../../node_modules/querystring-es3/index.js":
/*!*******************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/querystring-es3/index.js ***!
  \*******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.decode = exports.parse = __webpack_require__(/*! ./decode */ "../../node_modules/querystring-es3/decode.js");
exports.encode = exports.stringify = __webpack_require__(/*! ./encode */ "../../node_modules/querystring-es3/encode.js");


/***/ }),

/***/ "../../node_modules/rollbar/dist/rollbar.umd.min.js":
/*!**************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/rollbar/dist/rollbar.umd.min.js ***!
  \**************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

!function(t,e){ true?module.exports=e():undefined}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){t.exports=r(1)},function(t,e,r){"use strict";var n=r(2),o="undefined"!=typeof window&&window._rollbarConfig,i=o&&o.globalAlias||"Rollbar",a="undefined"!=typeof window&&window[i]&&"function"==typeof window[i].shimId&&void 0!==window[i].shimId();if("undefined"==typeof window||window._rollbarStartTime||(window._rollbarStartTime=(new Date).getTime()),!a&&o){var s=new n(o);window[i]=s}else"undefined"!=typeof window?(window.rollbar=n,window._rollbarDidLoad=!0):"undefined"!=typeof self&&(self.rollbar=n,self._rollbarDidLoad=!0);t.exports=n},function(t,e,r){"use strict";function n(t,e){this.options=c.handleOptions(x,t);var r=new l(this.options,h,d);this.client=e||new u(this.options,r,p,"browser");var n="undefined"!=typeof window&&window||"undefined"!=typeof self&&self,o="undefined"!=typeof document&&document;i(this.client.notifier,n),a(this.client.queue),(this.options.captureUncaught||this.options.handleUncaughtExceptions)&&(f.captureUncaughtExceptions(n,this),f.wrapGlobals(n,this)),(this.options.captureUnhandledRejections||this.options.handleUnhandledRejections)&&f.captureUnhandledRejections(n,this),this.instrumenter=new w(this.options,this.client.telemeter,this,n,o),this.instrumenter.instrument()}function o(t){var e="Rollbar is not initialized";p.error(e),t&&t(new Error(e))}function i(t,e){t.addTransform(m.handleItemWithError).addTransform(m.ensureItemHasSomethingToSay).addTransform(m.addBaseInfo).addTransform(m.addRequestInfo(e)).addTransform(m.addClientInfo(e)).addTransform(m.addPluginInfo(e)).addTransform(m.addBody).addTransform(g.addMessageWithError).addTransform(g.addTelemetryData).addTransform(g.addConfigToPayload).addTransform(m.scrubPayload).addTransform(g.userTransform(p)).addTransform(g.itemToPayload)}function a(t){t.addPredicate(y.checkLevel).addPredicate(v.checkIgnore).addPredicate(y.userCheckIgnore(p)).addPredicate(y.urlIsNotBlacklisted(p)).addPredicate(y.urlIsWhitelisted(p)).addPredicate(y.messageIsIgnored(p))}function s(t){for(var e=0,r=t.length;e<r;++e)if(c.isFunction(t[e]))return t[e]}var u=r(3),c=r(5),l=r(11),p=r(13),f=r(16),h=r(17),d=r(19),m=r(20),g=r(24),v=r(25),y=r(26),b=r(21),w=r(27),_=null;n.init=function(t,e){return _?_.global(t).configure(t):_=new n(t,e)},n.prototype.global=function(t){return this.client.global(t),this},n.global=function(t){return _?_.global(t):void o()},n.prototype.configure=function(t,e){var r=this.options,n={};return e&&(n={payload:e}),this.options=c.handleOptions(r,t,n),this.client.configure(this.options,e),this.instrumenter.configure(this.options),this},n.configure=function(t,e){return _?_.configure(t,e):void o()},n.prototype.lastError=function(){return this.client.lastError},n.lastError=function(){return _?_.lastError():void o()},n.prototype.log=function(){var t=this._createItem(arguments),e=t.uuid;return this.client.log(t),{uuid:e}},n.log=function(){if(_)return _.log.apply(_,arguments);var t=s(arguments);o(t)},n.prototype.debug=function(){var t=this._createItem(arguments),e=t.uuid;return this.client.debug(t),{uuid:e}},n.debug=function(){if(_)return _.debug.apply(_,arguments);var t=s(arguments);o(t)},n.prototype.info=function(){var t=this._createItem(arguments),e=t.uuid;return this.client.info(t),{uuid:e}},n.info=function(){if(_)return _.info.apply(_,arguments);var t=s(arguments);o(t)},n.prototype.warn=function(){var t=this._createItem(arguments),e=t.uuid;return this.client.warn(t),{uuid:e}},n.warn=function(){if(_)return _.warn.apply(_,arguments);var t=s(arguments);o(t)},n.prototype.warning=function(){var t=this._createItem(arguments),e=t.uuid;return this.client.warning(t),{uuid:e}},n.warning=function(){if(_)return _.warning.apply(_,arguments);var t=s(arguments);o(t)},n.prototype.error=function(){var t=this._createItem(arguments),e=t.uuid;return this.client.error(t),{uuid:e}},n.error=function(){if(_)return _.error.apply(_,arguments);var t=s(arguments);o(t)},n.prototype.critical=function(){var t=this._createItem(arguments),e=t.uuid;return this.client.critical(t),{uuid:e}},n.critical=function(){if(_)return _.critical.apply(_,arguments);var t=s(arguments);o(t)},n.prototype.handleUncaughtException=function(t,e,r,n,o,i){var a,s=c.makeUnhandledStackInfo(t,e,r,n,o,"onerror","uncaught exception",b);c.isError(o)?(a=this._createItem([t,o,i]),a._unhandledStackInfo=s):c.isError(e)?(a=this._createItem([t,e,i]),a._unhandledStackInfo=s):(a=this._createItem([t,i]),a.stackInfo=s),a.level=this.options.uncaughtErrorLevel,a._isUncaught=!0,this.client.log(a)},n.prototype.handleUnhandledRejection=function(t,e){var r="unhandled rejection was null or undefined!";if(t)if(t.message)r=t.message;else{var n=c.stringify(t);n.value&&(r=n.value)}var o,i=t&&t._rollbarContext||e&&e._rollbarContext;c.isError(t)?o=this._createItem([r,t,i]):(o=this._createItem([r,t,i]),o.stackInfo=c.makeUnhandledStackInfo(r,"",0,0,null,"unhandledrejection","",b)),o.level=this.options.uncaughtErrorLevel,o._isUncaught=!0,o._originalArgs=o._originalArgs||[],o._originalArgs.push(e),this.client.log(o)},n.prototype.wrap=function(t,e,r){try{var n;if(n=c.isFunction(e)?e:function(){return e||{}},!c.isFunction(t))return t;if(t._isWrap)return t;if(!t._rollbar_wrapped&&(t._rollbar_wrapped=function(){r&&c.isFunction(r)&&r.apply(this,arguments);try{return t.apply(this,arguments)}catch(r){var e=r;throw e&&window._rollbarWrappedError!==e&&(c.isType(e,"string")&&(e=new String(e)),e._rollbarContext=n()||{},e._rollbarContext._wrappedSource=t.toString(),window._rollbarWrappedError=e),e}},t._rollbar_wrapped._isWrap=!0,t.hasOwnProperty))for(var o in t)t.hasOwnProperty(o)&&"_rollbar_wrapped"!==o&&(t._rollbar_wrapped[o]=t[o]);return t._rollbar_wrapped}catch(e){return t}},n.wrap=function(t,e){return _?_.wrap(t,e):void o()},n.prototype.captureEvent=function(){var t=c.createTelemetryEvent(arguments);return this.client.captureEvent(t.type,t.metadata,t.level)},n.captureEvent=function(){return _?_.captureEvent.apply(_,arguments):void o()},n.prototype.captureDomContentLoaded=function(t,e){return e||(e=new Date),this.client.captureDomContentLoaded(e)},n.prototype.captureLoad=function(t,e){return e||(e=new Date),this.client.captureLoad(e)},n.prototype._createItem=function(t){return c.createItem(t,p,this)};var x={version:"2.5.5",scrubFields:["pw","pass","passwd","password","secret","confirm_password","confirmPassword","password_confirmation","passwordConfirmation","access_token","accessToken","secret_key","secretKey","secretToken","cc-number","card number","cardnumber","cardnum","ccnum","ccnumber","cc num","creditcardnumber","credit card number","newcreditcardnumber","new credit card","creditcardno","credit card no","card#","card #","cc-csc","cvc2","cvv2","ccv2","security code","card verification","name on credit card","name on card","nameoncard","cardholder","card holder","name des karteninhabers","card type","cardtype","cc type","cctype","payment type","expiration date","expirationdate","expdate","cc-exp"],logLevel:"debug",reportLevel:"debug",uncaughtErrorLevel:"error",endpoint:"api.rollbar.com/api/1/item/",verbose:!1,enabled:!0,sendConfig:!1,includeItemsInTelemetry:!0,captureIp:!0};t.exports=n},function(t,e,r){"use strict";function n(t,e,r,o){this.options=c.merge(t),this.logger=r,n.rateLimiter.configureGlobal(this.options),n.rateLimiter.setPlatformOptions(o,this.options),this.queue=new a(n.rateLimiter,e,r,this.options),this.notifier=new s(this.queue,this.options),this.telemeter=new u(this.options),this.lastError=null,this.lastErrorHash="none"}function o(t){var e=t.message||"",r=(t.err||{}).stack||String(t.err);return e+"::"+r}var i=r(4),a=r(8),s=r(9),u=r(10),c=r(5),l={maxItems:0,itemsPerMinute:60};n.rateLimiter=new i(l),n.prototype.global=function(t){return n.rateLimiter.configureGlobal(t),this},n.prototype.configure=function(t,e){var r=this.options,n={};return e&&(n={payload:e}),this.options=c.merge(r,t,n),this.notifier&&this.notifier.configure(this.options),this.telemeter&&this.telemeter.configure(this.options),this.global(this.options),this},n.prototype.log=function(t){var e=this._defaultLogLevel();return this._log(e,t)},n.prototype.debug=function(t){this._log("debug",t)},n.prototype.info=function(t){this._log("info",t)},n.prototype.warn=function(t){this._log("warning",t)},n.prototype.warning=function(t){this._log("warning",t)},n.prototype.error=function(t){this._log("error",t)},n.prototype.critical=function(t){this._log("critical",t)},n.prototype.wait=function(t){this.queue.wait(t)},n.prototype.captureEvent=function(t,e,r){return this.telemeter.captureEvent(t,e,r)},n.prototype.captureDomContentLoaded=function(t){return this.telemeter.captureDomContentLoaded(t)},n.prototype.captureLoad=function(t){return this.telemeter.captureLoad(t)},n.prototype._log=function(t,e){var r;if(e.callback&&(r=e.callback,delete e.callback),this._sameAsLastError(e)){if(r){var n=new Error("ignored identical item");n.item=e,r(n)}}else try{e.level=e.level||t,this.telemeter._captureRollbarItem(e),e.telemetryEvents=this.telemeter.copyEvents(),this.notifier.log(e,r)}catch(t){this.logger.error(t)}},n.prototype._defaultLogLevel=function(){return this.options.logLevel||"debug"},n.prototype._sameAsLastError=function(t){if(!t._isUncaught)return!1;var e=o(t);return this.lastErrorHash===e||(this.lastError=t.err,this.lastErrorHash=e,!1)},t.exports=n},function(t,e,r){"use strict";function n(t){this.startTime=s.now(),this.counter=0,this.perMinCounter=0,this.platform=null,this.platformOptions={},this.configureGlobal(t)}function o(t,e,r){return!t.ignoreRateLimit&&e>=1&&r>e}function i(t,e,r,n,o,i,s){var u=null;return r&&(r=new Error(r)),r||n||(u=a(t,e,o,i,s)),{error:r,shouldSend:n,payload:u}}function a(t,e,r,n,o){var i,a=e.environment||e.payload&&e.payload.environment;i=o?"item per minute limit reached, ignoring errors until timeout":"maxItems has been hit, ignoring errors until reset.";var s={body:{message:{body:i,extra:{maxItems:r,itemsPerMinute:n}}},language:"javascript",environment:a,notifier:{version:e.notifier&&e.notifier.version||e.version}};return"browser"===t?(s.platform="browser",s.framework="browser-js",s.notifier.name="rollbar-browser-js"):"server"===t?(s.framework=e.framework||"node-js",s.notifier.name=e.notifier.name):"react-native"===t&&(s.framework=e.framework||"react-native",s.notifier.name=e.notifier.name),s}var s=r(5);n.globalSettings={startTime:s.now(),maxItems:void 0,itemsPerMinute:void 0},n.prototype.configureGlobal=function(t){void 0!==t.startTime&&(n.globalSettings.startTime=t.startTime),void 0!==t.maxItems&&(n.globalSettings.maxItems=t.maxItems),void 0!==t.itemsPerMinute&&(n.globalSettings.itemsPerMinute=t.itemsPerMinute)},n.prototype.shouldSend=function(t,e){e=e||s.now();var r=e-this.startTime;(r<0||r>=6e4)&&(this.startTime=e,this.perMinCounter=0);var a=n.globalSettings.maxItems,u=n.globalSettings.itemsPerMinute;if(o(t,a,this.counter))return i(this.platform,this.platformOptions,a+" max items reached",!1);if(o(t,u,this.perMinCounter))return i(this.platform,this.platformOptions,u+" items per minute reached",!1);this.counter++,this.perMinCounter++;var c=!o(t,a,this.counter),l=c;return c=c&&!o(t,u,this.perMinCounter),i(this.platform,this.platformOptions,null,c,a,u,l)},n.prototype.setPlatformOptions=function(t,e){this.platform=t,this.platformOptions=e},t.exports=n},function(t,e,r){"use strict";function n(){if(!P&&(P=!0,c(JSON)&&(s(JSON.stringify)&&(q.stringify=JSON.stringify),s(JSON.parse)&&(q.parse=JSON.parse)),!a(q.stringify)||!a(q.parse))){var t=r(7);t(q)}}function o(t,e){return e===i(t)}function i(t){var e=typeof t;return"object"!==e?e:t?t instanceof Error?"error":{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase():"null"}function a(t){return o(t,"function")}function s(t){var e=/[\\^$.*+?()[\]{}|]/g,r=Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),n=RegExp("^"+r+"$");return u(t)&&n.test(t)}function u(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function c(t){return!o(t,"undefined")}function l(t){var e=i(t);return"object"===e||"array"===e}function p(t){return o(t,"error")||o(t,"exception")}function f(t,e,r){var n,i,a,s=o(t,"object"),u=o(t,"array"),c=[];if(s&&r.indexOf(t)!==-1)return t;if(r.push(t),s)for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&c.push(n);else if(u)for(a=0;a<t.length;++a)c.push(a);var l=s?{}:[],p=!0;for(a=0;a<c.length;++a)n=c[a],i=t[n],l[n]=e(n,i,r),p=p&&l[n]===t[n];return 0==c.length||p?t:l}function h(){return"********"}function d(){var t=j(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?r:7&r|8).toString(16)});return e}function m(t){var e=g(t);return e?(""===e.anchor&&(e.source=e.source.replace("#","")),t=e.source.replace("?"+e.query,"")):"(unknown)"}function g(t){if(o(t,"string")){for(var e=M,r=e.parser[e.strictMode?"strict":"loose"].exec(t),n={},i=0,a=e.key.length;i<a;++i)n[e.key[i]]=r[i]||"";return n[e.q.name]={},n[e.key[12]].replace(e.q.parser,function(t,r,o){r&&(n[e.q.name][r]=o)}),n}}function v(t,e,r){r=r||{},r.access_token=t;var n,o=[];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&o.push([n,r[n]].join("="));var i="?"+o.sort().join("&");e=e||{},e.path=e.path||"";var a,s=e.path.indexOf("?"),u=e.path.indexOf("#");s!==-1&&(u===-1||u>s)?(a=e.path,e.path=a.substring(0,s)+i+"&"+a.substring(s+1)):u!==-1?(a=e.path,e.path=a.substring(0,u)+i+a.substring(u)):e.path=e.path+i}function y(t,e){if(e=e||t.protocol,!e&&t.port&&(80===t.port?e="http:":443===t.port&&(e="https:")),e=e||"https:",!t.hostname)return null;var r=e+"//"+t.hostname;return t.port&&(r=r+":"+t.port),t.path&&(r+=t.path),r}function b(t,e){var r,n;try{r=q.stringify(t)}catch(o){if(e&&a(e))try{r=e(t)}catch(t){n=t}else n=o}return{error:n,value:r}}function w(t){var e,r;try{e=q.parse(t)}catch(t){r=t}return{error:r,value:e}}function _(t,e,r,n,o,i,a,s){var u={url:e||"",line:r,column:n};u.func=s.guessFunctionName(u.url,u.line),u.context=s.gatherContext(u.url,u.line);var c=document&&document.location&&document.location.href,l=window&&window.navigator&&window.navigator.userAgent;return{mode:i,message:o?String(o):t||a,url:c,stack:[u],useragent:l}}function x(t,e){return function(r,n){try{e(r,n)}catch(e){t.error(e)}}}function k(t,e,r,n,o){for(var a,s,u,c,l,p,f=[],h=0,m=t.length;h<m;++h){p=t[h];var g=i(p);switch(g){case"undefined":break;case"string":a?f.push(p):a=p;break;case"function":c=x(e,p);break;case"date":f.push(p);break;case"error":case"domexception":case"exception":s?f.push(p):s=p;break;case"object":case"array":if(p instanceof Error||"undefined"!=typeof DOMException&&p instanceof DOMException){s?f.push(p):s=p;break}if(n&&"object"===g&&!l){for(var v=0,y=n.length;v<y;++v)if(void 0!==p[n[v]]){l=p;break}if(l)break}u?f.push(p):u=p;break;default:if(p instanceof Error||"undefined"!=typeof DOMException&&p instanceof DOMException){s?f.push(p):s=p;break}f.push(p)}}f.length>0&&(u=F(u),u.extraArgs=f);var b={message:a,err:s,custom:u,timestamp:j(),callback:c,uuid:d()};return u&&void 0!==u.level&&(b.level=u.level,delete u.level),n&&l&&(b.request=l),o&&(b.lambdaContext=o),b._originalArgs=t,b}function E(t,e){for(var r=0;r<t.length;++r)if(t[r]===e)return!0;return!1}function I(t){for(var e,r,n,o,a=0,s=t.length;a<s;++a){o=t[a];var u=i(o);switch(u){case"string":E(U,o)?e=o:E(H,o)&&(n=o);break;case"object":r=o}}var c={type:e||"manual",metadata:r||{},level:n};return c}function T(t,e){if(t){var r=e.split("."),n=t;try{for(var o=0,i=r.length;o<i;++o)n=n[r[o]]}catch(t){n=void 0}return n}}function S(t,e,r){if(t){var n=e.split("."),o=n.length;if(!(o<1)){if(1===o)return void(t[n[0]]=r);try{for(var i=t[n[0]]||{},a=i,s=1;s<o-1;++s)i[n[s]]=i[n[s]]||{},i=i[n[s]];i[n[o-1]]=r,t[n[0]]=a}catch(t){return}}}}function O(t,e){function r(t,e){return e+h()}function n(t){var e;if(o(t,"string"))for(e=0;e<u.length;++e)t=t.replace(u[e],r);return t}function i(t,e){var r;for(r=0;r<s.length;++r)if(s[r].test(t)){e=h();break}return e}function a(t,e,r){var s=i(t,e);return s===e?o(e,"object")||o(e,"array")?f(e,a,r):n(s):s}e=e||[];var s=L(e),u=N(e);return f(t,a,[])}function L(t){for(var e,r=[],n=0;n<t.length;++n)e="^\\[?(%5[bB])?"+t[n]+"\\[?(%5[bB])?\\]?(%5[dD])?$",r.push(new RegExp(e,"i"));return r}function N(t){for(var e,r=[],n=0;n<t.length;++n)e="\\[?(%5[bB])?"+t[n]+"\\[?(%5[bB])?\\]?(%5[dD])?",r.push(new RegExp("("+e+"=)([^&\\n]+)","igm"));return r}function C(t){var e,r,n,o=[];for(e=0,r=t.length;e<r;++e){switch(n=t[e],i(n)){case"object":n=b(n),n=n.error||n.value,n.length>500&&(n=n.substr(0,497)+"...");break;case"null":n="null";break;case"undefined":n="undefined";break;case"symbol":n=n.toString()}o.push(n)}return o.join(" ")}function j(){return Date.now?+Date.now():+new Date}function R(t,e){if(t&&t.user_ip&&e!==!0){var r=t.user_ip;if(e)try{var n;if(r.indexOf(".")!==-1)n=r.split("."),n.pop(),n.push("0"),r=n.join(".");else if(r.indexOf(":")!==-1){if(n=r.split(":"),n.length>2){var o=n.slice(0,3),i=o[2].indexOf("/");i!==-1&&(o[2]=o[2].substring(0,i));var a="0000:0000:0000:0000:0000";r=o.concat(a).join(":")}}else r=null}catch(t){r=null}else r=null;t.user_ip=r}}function A(t,e,r){var n=F(t,e,r);return!e||e.overwriteScrubFields?n:(e.scrubFields&&(n.scrubFields=(t.scrubFields||[]).concat(e.scrubFields)),n)}var F=r(6),q={},P=!1;n();var D={debug:0,info:1,warning:2,error:3,critical:4},M={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},U=["log","network","dom","navigation","error","manual"],H=["critical","error","warning","info","debug"];t.exports={addParamsAndAccessTokenToPath:v,createItem:k,createTelemetryEvent:I,filterIp:R,formatArgsAsString:C,formatUrl:y,get:T,handleOptions:A,isError:p,isFunction:a,isIterable:l,isNativeFunction:s,isType:o,jsonParse:w,LEVELS:D,makeUnhandledStackInfo:_,merge:F,now:j,redact:h,sanitizeUrl:m,scrub:O,set:S,stringify:b,traverse:f,typeName:i,uuid4:d}},function(t,e){"use strict";function r(){var t,e,n,o,a,s={},u=null,c=arguments.length;for(t=0;t<c;t++)if(u=arguments[t],null!=u)for(a in u)e=s[a],n=u[a],s!==n&&(n&&i(n)?(o=e&&i(e)?e:{},s[a]=r(o,n)):"undefined"!=typeof n&&(s[a]=n));return s}var n=Object.prototype.hasOwnProperty,o=Object.prototype.toString,i=function(t){if(!t||"[object Object]"!==o.call(t))return!1;var e=n.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&n.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!r)return!1;var i;for(i in t);return"undefined"==typeof i||n.call(t,i)};t.exports=r},function(t,e){var r=function(t){function e(t){return t<10?"0"+t:t}function r(){return this.valueOf()}function n(t){return i.lastIndex=0,i.test(t)?'"'+t.replace(i,function(t){var e=u[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function o(t,e){var r,i,u,l,p,f=a,h=e[t];switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(t)),"function"==typeof c&&(h=c.call(e,t,h)),typeof h){case"string":return n(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(a+=s,p=[],"[object Array]"===Object.prototype.toString.apply(h)){for(l=h.length,r=0;r<l;r+=1)p[r]=o(r,h)||"null";return u=0===p.length?"[]":a?"[\n"+a+p.join(",\n"+a)+"\n"+f+"]":"["+p.join(",")+"]",a=f,u}if(c&&"object"==typeof c)for(l=c.length,r=0;r<l;r+=1)"string"==typeof c[r]&&(i=c[r],u=o(i,h),u&&p.push(n(i)+(a?": ":":")+u));else for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(u=o(i,h),u&&p.push(n(i)+(a?": ":":")+u));return u=0===p.length?"{}":a?"{\n"+a+p.join(",\n"+a)+"\n"+f+"}":"{"+p.join(",")+"}",a=f,u}}var i=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=r,Number.prototype.toJSON=r,String.prototype.toJSON=r);var a,s,u,c;"function"!=typeof t.stringify&&(u={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t.stringify=function(t,e,r){var n;if(a="",s="","number"==typeof r)for(n=0;n<r;n+=1)s+=" ";else"string"==typeof r&&(s=r);if(c=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return o("",{"":t})}),"function"!=typeof t.parse&&(t.parse=function(){function t(t){return t.replace(/\\(?:u(.{4})|([^u]))/g,function(t,e,r){return e?String.fromCharCode(parseInt(e,16)):a[r]})}var e,r,n,o,i,a={"\\":"\\",'"':'"',"/":"/",t:"\t",n:"\n",r:"\r",f:"\f",b:"\b"},s={go:function(){e="ok"},firstokey:function(){o=i,e="colon"},okey:function(){o=i,e="colon"},ovalue:function(){e="ocomma"},firstavalue:function(){e="acomma"},avalue:function(){e="acomma"}},u={go:function(){e="ok"},ovalue:function(){e="ocomma"},firstavalue:function(){e="acomma"},avalue:function(){e="acomma"}},c={"{":{go:function(){r.push({state:"ok"}),n={},e="firstokey"},ovalue:function(){r.push({container:n,state:"ocomma",key:o}),n={},e="firstokey"},firstavalue:function(){r.push({container:n,state:"acomma"}),n={},e="firstokey"},avalue:function(){r.push({container:n,state:"acomma"}),n={},e="firstokey"}},"}":{firstokey:function(){var t=r.pop();i=n,n=t.container,o=t.key,e=t.state},ocomma:function(){var t=r.pop();n[o]=i,i=n,n=t.container,o=t.key,e=t.state}},"[":{go:function(){r.push({state:"ok"}),n=[],e="firstavalue"},ovalue:function(){r.push({container:n,state:"ocomma",key:o}),n=[],e="firstavalue"},firstavalue:function(){r.push({container:n,state:"acomma"}),n=[],e="firstavalue"},avalue:function(){r.push({container:n,state:"acomma"}),n=[],e="firstavalue"}},"]":{firstavalue:function(){var t=r.pop();i=n,n=t.container,o=t.key,e=t.state},acomma:function(){var t=r.pop();n.push(i),i=n,n=t.container,o=t.key,e=t.state}},":":{colon:function(){if(Object.hasOwnProperty.call(n,o))throw new SyntaxError("Duplicate key '"+o+'"');e="ovalue"}},",":{ocomma:function(){n[o]=i,e="okey"},acomma:function(){n.push(i),e="avalue"}},true:{go:function(){i=!0,e="ok"},ovalue:function(){i=!0,e="ocomma"},firstavalue:function(){i=!0,e="acomma"},avalue:function(){i=!0,e="acomma"}},false:{go:function(){i=!1,e="ok"},ovalue:function(){i=!1,e="ocomma"},firstavalue:function(){i=!1,e="acomma"},avalue:function(){i=!1,e="acomma"}},null:{go:function(){i=null,e="ok"},ovalue:function(){i=null,e="ocomma"},firstavalue:function(){i=null,e="acomma"},avalue:function(){i=null,e="acomma"}}};return function(n,o){var a,l=/^[\u0020\t\n\r]*(?:([,:\[\]{}]|true|false|null)|(-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)|"((?:[^\r\n\t\\\"]|\\(?:["\\\/trnfb]|u[0-9a-fA-F]{4}))*)")/;e="go",r=[];try{for(;;){if(a=l.exec(n),!a)break;a[1]?c[a[1]][e]():a[2]?(i=+a[2],u[e]()):(i=t(a[3]),s[e]()),n=n.slice(a[0].length)}}catch(t){e=t}if("ok"!==e||/[^\u0020\t\n\r]/.test(n))throw e instanceof SyntaxError?e:new SyntaxError("JSON");return"function"==typeof o?function t(e,r){var n,a,s=e[r];if(s&&"object"==typeof s)for(n in i)Object.prototype.hasOwnProperty.call(s,n)&&(a=t(s,n),void 0!==a?s[n]=a:delete s[n]);return o.call(e,r,s)}({"":i},""):i}}())};t.exports=r},function(t,e,r){"use strict";function n(t,e,r,n){this.rateLimiter=t,this.api=e,this.logger=r,this.options=n,this.predicates=[],this.pendingItems=[],this.pendingRequests=[],this.retryQueue=[],this.retryHandle=null,this.waitCallback=null,this.waitIntervalID=null}var o=r(5);n.prototype.configure=function(t){this.api&&this.api.configure(t);var e=this.options;return this.options=o.merge(e,t),this},n.prototype.addPredicate=function(t){return o.isFunction(t)&&this.predicates.push(t),this},n.prototype.addPendingItem=function(t){this.pendingItems.push(t)},n.prototype.removePendingItem=function(t){var e=this.pendingItems.indexOf(t);e!==-1&&this.pendingItems.splice(e,1)},n.prototype.addItem=function(t,e,r,n){e&&o.isFunction(e)||(e=function(){});var i=this._applyPredicates(t);if(i.stop)return this.removePendingItem(n),void e(i.err);this._maybeLog(t,r),this.removePendingItem(n),this.pendingRequests.push(t);try{this._makeApiRequest(t,function(r,n){this._dequeuePendingRequest(t),e(r,n)}.bind(this))}catch(r){this._dequeuePendingRequest(t),e(r)}},n.prototype.wait=function(t){o.isFunction(t)&&(this.waitCallback=t,this._maybeCallWait()||(this.waitIntervalID&&(this.waitIntervalID=clearInterval(this.waitIntervalID)),this.waitIntervalID=setInterval(function(){this._maybeCallWait()}.bind(this),500)))},n.prototype._applyPredicates=function(t){for(var e=null,r=0,n=this.predicates.length;r<n;r++)if(e=this.predicates[r](t,this.options),!e||void 0!==e.err)return{stop:!0,err:e.err};return{stop:!1,err:null}},n.prototype._makeApiRequest=function(t,e){var r=this.rateLimiter.shouldSend(t);r.shouldSend?this.api.postItem(t,function(r,n){r?this._maybeRetry(r,t,e):e(r,n)}.bind(this)):r.error?e(r.error):this.api.postItem(r.payload,e)};var i=["ECONNRESET","ENOTFOUND","ESOCKETTIMEDOUT","ETIMEDOUT","ECONNREFUSED","EHOSTUNREACH","EPIPE","EAI_AGAIN"];n.prototype._maybeRetry=function(t,e,r){var n=!1;if(this.options.retryInterval)for(var o=0,a=i.length;o<a;o++)if(t.code===i[o]){n=!0;break}n?this._retryApiRequest(e,r):r(t)},n.prototype._retryApiRequest=function(t,e){this.retryQueue.push({item:t,callback:e}),this.retryHandle||(this.retryHandle=setInterval(function(){for(;this.retryQueue.length;){var t=this.retryQueue.shift();this._makeApiRequest(t.item,t.callback)}}.bind(this),this.options.retryInterval))},n.prototype._dequeuePendingRequest=function(t){var e=this.pendingRequests.indexOf(t);e!==-1&&(this.pendingRequests.splice(e,1),this._maybeCallWait())},n.prototype._maybeLog=function(t,e){if(this.logger&&this.options.verbose){var r=e;if(r=r||o.get(t,"body.trace.exception.message"),r=r||o.get(t,"body.trace_chain.0.exception.message"))return void this.logger.error(r);r=o.get(t,"body.message.body"),r&&this.logger.log(r)}},n.prototype._maybeCallWait=function(){return!(!o.isFunction(this.waitCallback)||0!==this.pendingItems.length||0!==this.pendingRequests.length)&&(this.waitIntervalID&&(this.waitIntervalID=clearInterval(this.waitIntervalID)),this.waitCallback(),!0)},t.exports=n},function(t,e,r){"use strict";function n(t,e){this.queue=t,this.options=e,this.transforms=[]}var o=r(5);n.prototype.configure=function(t){this.queue&&this.queue.configure(t);var e=this.options;return this.options=o.merge(e,t),this},n.prototype.addTransform=function(t){return o.isFunction(t)&&this.transforms.push(t),this},n.prototype.log=function(t,e){if(e&&o.isFunction(e)||(e=function(){}),!this.options.enabled)return e(new Error("Rollbar is not enabled"));this.queue.addPendingItem(t);var r=t.err;this._applyTransforms(t,function(n,o){return n?(this.queue.removePendingItem(t),e(n,null)):void this.queue.addItem(o,e,r,t)}.bind(this))},n.prototype._applyTransforms=function(t,e){var r=-1,n=this.transforms.length,o=this.transforms,i=this.options,a=function(t,s){return t?void e(t,null):(r++,r===n?void e(null,s):void o[r](s,i,a))};a(null,t)},t.exports=n},function(t,e,r){"use strict";function n(t){this.queue=[],this.options=i.merge(t);var e=this.options.maxTelemetryEvents||a;this.maxQueueSize=Math.max(0,Math.min(e,a))}function o(t,e){if(e)return e;var r={error:"error",manual:"info"};return r[t]||"info"}var i=r(5),a=100;n.prototype.configure=function(t){var e=this.options;this.options=i.merge(e,t);var r=this.options.maxTelemetryEvents||a,n=Math.max(0,Math.min(r,a)),o=0;this.maxQueueSize>n&&(o=this.maxQueueSize-n),this.maxQueueSize=n,this.queue.splice(0,o)},n.prototype.copyEvents=function(){var t=Array.prototype.slice.call(this.queue,0);if(i.isFunction(this.options.filterTelemetry))try{for(var e=t.length;e--;)this.options.filterTelemetry(t[e])&&t.splice(e,1)}catch(t){this.options.filterTelemetry=null}return t},n.prototype.capture=function(t,e,r,n,a){var s={level:o(t,r),type:t,timestamp_ms:a||i.now(),body:e,source:"client"};n&&(s.uuid=n);try{if(i.isFunction(this.options.filterTelemetry)&&this.options.filterTelemetry(s))return!1}catch(t){this.options.filterTelemetry=null}return this.push(s),s},n.prototype.captureEvent=function(t,e,r,n){return this.capture(t,e,r,n)},n.prototype.captureError=function(t,e,r,n){var o={message:t.message||String(t)};return t.stack&&(o.stack=t.stack),this.capture("error",o,e,r,n)},n.prototype.captureLog=function(t,e,r,n){return this.capture("log",{message:t},e,r,n)},n.prototype.captureNetwork=function(t,e,r,n){e=e||"xhr",t.subtype=t.subtype||e,n&&(t.request=n);var o=this.levelFromStatus(t.status_code);return this.capture("network",t,o,r)},n.prototype.levelFromStatus=function(t){return t>=200&&t<400?"info":0===t||t>=400?"error":"info"},n.prototype.captureDom=function(t,e,r,n,o){var i={subtype:t,element:e};return void 0!==r&&(i.value=r),void 0!==n&&(i.checked=n),this.capture("dom",i,"info",o)},n.prototype.captureNavigation=function(t,e,r){return this.capture("navigation",{from:t,to:e},"info",r)},n.prototype.captureDomContentLoaded=function(t){return this.capture("navigation",{subtype:"DOMContentLoaded"},"info",void 0,t&&t.getTime())},n.prototype.captureLoad=function(t){return this.capture("navigation",{subtype:"load"},"info",void 0,t&&t.getTime())},n.prototype.captureConnectivityChange=function(t,e){return this.captureNetwork({change:t},"connectivity",e)},n.prototype._captureRollbarItem=function(t){if(this.options.includeItemsInTelemetry)return t.err?this.captureError(t.err,t.level,t.uuid,t.timestamp):t.message?this.captureLog(t.message,t.level,t.uuid,t.timestamp):t.custom?this.capture("log",t.custom,t.level,t.uuid,t.timestamp):void 0},n.prototype.push=function(t){this.queue.push(t),this.queue.length>this.maxQueueSize&&this.queue.shift()},t.exports=n},function(t,e,r){"use strict";function n(t,e,r,n){this.options=t,this.transport=e,this.url=r,this.jsonBackup=n,this.accessToken=t.accessToken,this.transportOptions=o(t,r)}function o(t,e){return a.getTransportFromOptions(t,s,e)}var i=r(5),a=r(12),s={hostname:"api.rollbar.com",path:"/api/1/item/",search:null,version:"1",protocol:"https:",port:443};n.prototype.postItem=function(t,e){var r=a.transportOptions(this.transportOptions,"POST"),n=a.buildPayload(this.accessToken,t,this.jsonBackup);this.transport.post(this.accessToken,r,n,e)},n.prototype.configure=function(t){var e=this.oldOptions;return this.options=i.merge(e,t),this.transportOptions=o(this.options,this.url),void 0!==this.options.accessToken&&(this.accessToken=this.options.accessToken),this},t.exports=n},function(t,e,r){"use strict";function n(t,e,r){if(!s.isType(e.context,"string")){var n=s.stringify(e.context,r);n.error?e.context="Error: could not serialize 'context'":e.context=n.value||"",e.context.length>255&&(e.context=e.context.substr(0,255))}return{access_token:t,data:e}}function o(t,e,r){var n=e.hostname,o=e.protocol,i=e.port,a=e.path,s=e.search,u=t.proxy;if(t.endpoint){var c=r.parse(t.endpoint);n=c.hostname,o=c.protocol,i=c.port,a=c.pathname,s=c.search}return{hostname:n,protocol:o,port:i,path:a,search:s,proxy:u}}function i(t,e){var r=t.protocol||"https:",n=t.port||("http:"===r?80:"https:"===r?443:void 0),o=t.hostname,i=t.path;
return t.search&&(i+=t.search),t.proxy&&(i=r+"//"+o+i,o=t.proxy.host||t.proxy.hostname,n=t.proxy.port,r=t.proxy.protocol||r),{protocol:r,hostname:o,path:i,port:n,method:e}}function a(t,e){var r=/\/$/.test(t),n=/^\//.test(e);return r&&n?e=e.substring(1):r||n||(e="/"+e),t+e}var s=r(5);t.exports={buildPayload:n,getTransportFromOptions:o,transportOptions:i,appendPathToPath:a}},function(t,e,r){"use strict";function n(){var t=Array.prototype.slice.call(arguments,0);t.unshift("Rollbar:"),a.ieVersion()<=8?console.error(s.formatArgsAsString(t)):console.error.apply(console,t)}function o(){var t=Array.prototype.slice.call(arguments,0);t.unshift("Rollbar:"),a.ieVersion()<=8?console.info(s.formatArgsAsString(t)):console.info.apply(console,t)}function i(){var t=Array.prototype.slice.call(arguments,0);t.unshift("Rollbar:"),a.ieVersion()<=8?console.log(s.formatArgsAsString(t)):console.log.apply(console,t)}r(14);var a=r(15),s=r(5);t.exports={error:n,info:o,log:i}},function(t,e){!function(t){"use strict";t.console||(t.console={});for(var e,r,n=t.console,o=function(){},i=["memory"],a="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");e=i.pop();)n[e]||(n[e]={});for(;r=a.pop();)n[r]||(n[r]=o)}("undefined"==typeof window?this:window)},function(t,e){"use strict";function r(){var t;if(!document)return t;for(var e=3,r=document.createElement("div"),n=r.getElementsByTagName("i");r.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",n[0];);return e>4?e:t}var n={ieVersion:r};t.exports=n},function(t,e){"use strict";function r(t,e,r){if(t){var o;if("function"==typeof e._rollbarOldOnError)o=e._rollbarOldOnError;else if(t.onerror){for(o=t.onerror;o._rollbarOldOnError;)o=o._rollbarOldOnError;e._rollbarOldOnError=o}var i=function(){var r=Array.prototype.slice.call(arguments,0);n(t,e,o,r)};r&&(i._rollbarOldOnError=o),t.onerror=i}}function n(t,e,r,n){t._rollbarWrappedError&&(n[4]||(n[4]=t._rollbarWrappedError),n[5]||(n[5]=t._rollbarWrappedError._rollbarContext),t._rollbarWrappedError=null),e.handleUncaughtException.apply(e,n),r&&r.apply(t,n)}function o(t,e,r){if(t){"function"==typeof t._rollbarURH&&t._rollbarURH.belongsToShim&&t.removeEventListener("unhandledrejection",t._rollbarURH);var n=function(t){var r,n,o;try{r=t.reason}catch(t){r=void 0}try{n=t.promise}catch(t){n="[unhandledrejection] error getting `promise` from event"}try{o=t.detail,!r&&o&&(r=o.reason,n=o.promise)}catch(t){}r||(r="[unhandledrejection] error getting `reason` from event"),e&&e.handleUnhandledRejection&&e.handleUnhandledRejection(r,n)};n.belongsToShim=r,t._rollbarURH=n,t.addEventListener("unhandledrejection",n)}}function i(t,e,r){if(t){var n,o,i="EventTarget,Window,Node,ApplicationCache,AudioTrackList,ChannelMergerNode,CryptoOperation,EventSource,FileReader,HTMLUnknownElement,IDBDatabase,IDBRequest,IDBTransaction,KeyOperation,MediaController,MessagePort,ModalWindow,Notification,SVGElementInstance,Screen,TextTrack,TextTrackCue,TextTrackList,WebSocket,WebSocketWorker,Worker,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload".split(",");for(n=0;n<i.length;++n)o=i[n],t[o]&&t[o].prototype&&a(e,t[o].prototype,r)}}function a(t,e,r){if(e.hasOwnProperty&&e.hasOwnProperty("addEventListener")){for(var n=e.addEventListener;n._rollbarOldAdd&&n.belongsToShim;)n=n._rollbarOldAdd;var o=function(e,r,o){n.call(this,e,t.wrap(r),o)};o._rollbarOldAdd=n,o.belongsToShim=r,e.addEventListener=o;for(var i=e.removeEventListener;i._rollbarOldRemove&&i.belongsToShim;)i=i._rollbarOldRemove;var a=function(t,e,r){i.call(this,t,e&&e._rollbar_wrapped||e,r)};a._rollbarOldRemove=i,a.belongsToShim=r,e.removeEventListener=a}}t.exports={captureUncaughtExceptions:r,captureUnhandledRejections:o,wrapGlobals:i}},function(t,e,r){"use strict";function n(t,e,r,n,o){n&&p.isFunction(n)||(n=function(){}),p.addParamsAndAccessTokenToPath(t,e,r);var a="GET",s=p.formatUrl(e);i(t,s,a,null,n,o)}function o(t,e,r,n,o){if(n&&p.isFunction(n)||(n=function(){}),!r)return n(new Error("Cannot send empty request"));var a=f.truncate(r);if(a.error)return n(a.error);var s=a.value,u="POST",c=p.formatUrl(e);i(t,c,u,s,n,o)}function i(t,e,r,n,o,i){var s="undefined"!=typeof window&&window||"undefined"!=typeof self&&self,u=s&&s.Zone&&s.Zone.current;if(u&&"angular"===u._name){var c=u._parent;c.run(function(){a(t,e,r,n,o,i)})}else a(t,e,r,n,o,i)}function a(t,e,r,n,o,i){var a;if(a=i?i():s(),!a)return o(new Error("No way to send a request"));try{try{var f=function(){try{if(f&&4===a.readyState){f=void 0;var t=p.jsonParse(a.responseText);if(u(a))return void o(t.error,t.value);if(c(a)){if(403===a.status){var e=t.value&&t.value.message;h.error(e)}o(new Error(String(a.status)))}else{var r="XHR response had no status code (likely connection failure)";o(l(r))}}}catch(t){var n;n=t&&t.stack?t:new Error(t),o(n)}};a.open(r,e,!0),a.setRequestHeader&&(a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("X-Rollbar-Access-Token",t)),a.onreadystatechange=f,a.send(n)}catch(t){if("undefined"!=typeof XDomainRequest){if(!window||!window.location)return o(new Error("No window available during request, unknown environment"));"http:"===window.location.href.substring(0,5)&&"https"===e.substring(0,5)&&(e="http"+e.substring(5));var d=new XDomainRequest;d.onprogress=function(){},d.ontimeout=function(){var t="Request timed out",e="ETIMEDOUT";o(l(t,e))},d.onerror=function(){o(new Error("Error during request"))},d.onload=function(){var t=p.jsonParse(d.responseText);o(t.error,t.value)},d.open(r,e,!0),d.send(n)}else o(new Error("Cannot find a method to transport a request"))}}catch(t){o(t)}}function s(){var t,e,r=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],n=r.length;for(e=0;e<n;e++)try{t=r[e]();break}catch(t){}return t}function u(t){return t&&t.status&&200===t.status}function c(t){return t&&p.isType(t.status,"number")&&t.status>=400&&t.status<600}function l(t,e){var r=new Error(t);return r.code=e||"ENOTFOUND",r}var p=r(5),f=r(18),h=r(13);t.exports={get:n,post:o}},function(t,e,r){"use strict";function n(t,e){return[t,f.stringify(t,e)]}function o(t,e){var r=t.length;return r>2*e?t.slice(0,e).concat(t.slice(r-e)):t}function i(t,e,r){r="undefined"==typeof r?30:r;var n,i=t.data.body;if(i.trace_chain)for(var a=i.trace_chain,s=0;s<a.length;s++)n=a[s].frames,n=o(n,r),a[s].frames=n;else i.trace&&(n=i.trace.frames,n=o(n,r),i.trace.frames=n);return[t,f.stringify(t,e)]}function a(t,e){return e&&e.length>t?e.slice(0,t-3).concat("..."):e}function s(t,e,r){function n(e,r,o){switch(f.typeName(r)){case"string":return a(t,r);case"object":case"array":return f.traverse(r,n,o);default:return r}}return e=f.traverse(e,n,[]),[e,f.stringify(e,r)]}function u(t){return t.exception&&(delete t.exception.description,t.exception.message=a(255,t.exception.message)),t.frames=o(t.frames,1),t}function c(t,e){var r=t.data.body;if(r.trace_chain)for(var n=r.trace_chain,o=0;o<n.length;o++)n[o]=u(n[o]);else r.trace&&(r.trace=u(r.trace));return[t,f.stringify(t,e)]}function l(t,e){return t.length>e}function p(t,e,r){r="undefined"==typeof r?524288:r;for(var o,a,u,p=[n,i,s.bind(null,1024),s.bind(null,512),s.bind(null,256),c];o=p.shift();)if(a=o(t,e),t=a[0],u=a[1],u.error||!l(u.value,r))return u;return u}var f=r(5);t.exports={truncate:p,raw:n,truncateFrames:i,truncateStrings:s,maybeTruncateValue:a}},function(t,e){"use strict";function r(t){var e,r,n={protocol:null,auth:null,host:null,path:null,hash:null,href:t,hostname:null,port:null,pathname:null,search:null,query:null};if(e=t.indexOf("//"),e!==-1?(n.protocol=t.substring(0,e),r=e+2):r=0,e=t.indexOf("@",r),e!==-1&&(n.auth=t.substring(r,e),r=e+1),e=t.indexOf("/",r),e===-1){if(e=t.indexOf("?",r),e===-1)return e=t.indexOf("#",r),e===-1?n.host=t.substring(r):(n.host=t.substring(r,e),n.hash=t.substring(e)),n.hostname=n.host.split(":")[0],n.port=n.host.split(":")[1],n.port&&(n.port=parseInt(n.port,10)),n;n.host=t.substring(r,e),n.hostname=n.host.split(":")[0],n.port=n.host.split(":")[1],n.port&&(n.port=parseInt(n.port,10)),r=e}else n.host=t.substring(r,e),n.hostname=n.host.split(":")[0],n.port=n.host.split(":")[1],n.port&&(n.port=parseInt(n.port,10)),r=e;if(e=t.indexOf("#",r),e===-1?n.path=t.substring(r):(n.path=t.substring(r,e),n.hash=t.substring(e)),n.path){var o=n.path.split("?");n.pathname=o[0],n.query=o[1],n.search=n.query?"?"+n.query:null}return n}t.exports={parse:r}},function(t,e,r){"use strict";function n(t,e,r){if(t.data=t.data||{},t.err)try{t.stackInfo=t.err._savedStackTrace||d.parse(t.err)}catch(e){m.error("Error while parsing the error object.",e);try{t.message=t.err.message||t.err.description||t.message||String(t.err)}catch(e){t.message=String(t.err)||String(e)}delete t.err}r(null,t)}function o(t,e,r){t.message||t.stackInfo||t.custom||r(new Error("No message, stack info, or custom data"),null),r(null,t)}function i(t,e,r){var n=e.payload&&e.payload.environment||e.environment;t.data=h.merge(t.data,{environment:n,level:t.level,endpoint:e.endpoint,platform:"browser",framework:"browser-js",language:"javascript",server:{},uuid:t.uuid,notifier:{name:"rollbar-browser-js",version:e.version}}),r(null,t)}function a(t){return function(e,r,n){if(!t||!t.location)return n(null,e);var o="$remote_ip";r.captureIp?r.captureIp!==!0&&(o+="_anonymize"):o=null,h.set(e,"data.request",{url:t.location.href,query_string:t.location.search,user_ip:o}),n(null,e)}}function s(t){return function(e,r,n){if(!t)return n(null,e);var o=t.navigator||{},i=t.screen||{};h.set(e,"data.client",{runtime_ms:e.timestamp-t._rollbarStartTime,timestamp:Math.round(e.timestamp/1e3),javascript:{browser:o.userAgent,language:o.language,cookie_enabled:o.cookieEnabled,screen:{width:i.width,height:i.height}}}),n(null,e)}}function u(t){return function(e,r,n){if(!t||!t.navigator)return n(null,e);for(var o,i=[],a=t.navigator.plugins||[],s=0,u=a.length;s<u;++s)o=a[s],i.push({name:o.name,description:o.description});h.set(e,"data.client.javascript.plugins",i),n(null,e)}}function c(t,e,r){t.stackInfo?p(t,e,r):l(t,e,r)}function l(t,e,r){var n=t.message,o=t.custom;if(!n)if(o){var i=e.scrubFields,a=h.stringify(h.scrub(o,i));n=a.error||a.value||""}else n="";var s={body:n};o&&(s.extra=h.merge(o)),h.set(t,"data.body",{message:s}),r(null,t)}function p(t,e,r){var n=t.data.description,o=t.stackInfo,i=t.custom,a=d.guessErrorClass(o.message),s=o.name||a[0],u=a[1],c={exception:{class:s,message:u}};n&&(c.exception.description=n);var p=o.stack;if(p&&0===p.length&&t._unhandledStackInfo&&t._unhandledStackInfo.stack&&(p=t._unhandledStackInfo.stack),p){0===p.length&&(c.exception.stack=o.rawStack,c.exception.raw=String(o.rawException));var f,m,g,v,y,b,w,_;for(c.frames=[],w=0;w<p.length;++w)f=p[w],m={filename:f.url?h.sanitizeUrl(f.url):"(unknown)",lineno:f.line||null,method:f.func&&"?"!==f.func?f.func:"[anonymous]",colno:f.column},e.sendFrameUrl&&(m.url=f.url),m.method&&m.method.endsWith&&m.method.endsWith("_rollbar_wrapped")||(g=v=y=null,b=f.context?f.context.length:0,b&&(_=Math.floor(b/2),v=f.context.slice(0,_),g=f.context[_],y=f.context.slice(_)),g&&(m.code=g),(v||y)&&(m.context={},v&&v.length&&(m.context.pre=v),y&&y.length&&(m.context.post=y)),f.args&&(m.args=f.args),c.frames.push(m));c.frames.reverse(),i&&(c.extra=h.merge(i)),h.set(t,"data.body",{trace:c}),r(null,t)}else t.message=s+": "+u,l(t,e,r)}function f(t,e,r){var n=e.scrubFields;t.data=h.scrub(t.data,n),r(null,t)}var h=r(5),d=r(21),m=r(13);t.exports={handleItemWithError:n,ensureItemHasSomethingToSay:o,addBaseInfo:i,addRequestInfo:a,addClientInfo:s,addPluginInfo:u,addBody:c,scrubPayload:f}},function(t,e,r){"use strict";function n(){return l}function o(){return null}function i(t){var e={};return e._stackFrame=t,e.url=t.fileName,e.line=t.lineNumber,e.func=t.functionName,e.column=t.columnNumber,e.args=t.args,e.context=o(),e}function a(t){function e(){var e,r=[];if(t.stack)e=t;else try{throw t}catch(t){e=t}try{r=c.parse(e)}catch(t){r=[]}for(var n=[],o=0;o<r.length;o++)n.push(new i(r[o]));return n}var r=t.constructor&&t.constructor.name;return(!r||!r.length||r.length<3)&&(r=t.name),{stack:e(),message:t.message,name:r,rawStack:t.stack,rawException:t}}function s(t){return new a(t)}function u(t){if(!t||!t.match)return["Unknown error. There was no error message to display.",""];var e=t.match(p),r="(unknown)";return e&&(r=e[e.length-1],t=t.replace((e[e.length-2]||"")+r+":",""),t=t.replace(/(^[\s]+|[\s]+$)/g,"")),[r,t]}var c=r(22),l="?",p=new RegExp("^(([a-zA-Z0-9-_$ ]*): *)?(Uncaught )?([a-zA-Z0-9-_$ ]*): ");t.exports={guessFunctionName:n,guessErrorClass:u,gatherContext:o,parse:s,Stack:a,Frame:i}},function(t,e,r){var n,o,i;!function(a,s){"use strict";o=[r(23)],n=s,i="function"==typeof n?n.apply(e,o):n,!(void 0!==i&&(t.exports=i))}(this,function(t){"use strict";function e(t,e,r){if("function"==typeof Array.prototype.map)return t.map(e,r);for(var n=new Array(t.length),o=0;o<t.length;o++)n[o]=e.call(r,t[o]);return n}function r(t,e,r){if("function"==typeof Array.prototype.filter)return t.filter(e,r);for(var n=[],o=0;o<t.length;o++)e.call(r,t[o])&&n.push(t[o]);return n}var n=/(^|@)\S+\:\d+/,o=/^\s*at .*(\S+\:\d+|\(native\))/m,i=/^(eval@)?(\[native code\])?$/;return{parse:function(t){if("undefined"!=typeof t.stacktrace||"undefined"!=typeof t["opera#sourceloc"])return this.parseOpera(t);if(t.stack&&t.stack.match(o))return this.parseV8OrIE(t);if(t.stack)return this.parseFFOrSafari(t);throw new Error("Cannot parse given Error object")},extractLocation:function(t){if(t.indexOf(":")===-1)return[t];var e=t.replace(/[\(\)\s]/g,"").split(":"),r=e.pop(),n=e[e.length-1];if(!isNaN(parseFloat(n))&&isFinite(n)){var o=e.pop();return[e.join(":"),o,r]}return[e.join(":"),r,void 0]},parseV8OrIE:function(n){var i=r(n.stack.split("\n"),function(t){return!!t.match(o)},this);return e(i,function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var r=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),n=this.extractLocation(r.pop()),o=r.join(" ")||void 0,i="eval"===n[0]?void 0:n[0];return new t(o,void 0,i,n[1],n[2],e)},this)},parseFFOrSafari:function(n){var o=r(n.stack.split("\n"),function(t){return!t.match(i)},this);return e(o,function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),e.indexOf("@")===-1&&e.indexOf(":")===-1)return new t(e);var r=e.split("@"),n=this.extractLocation(r.pop()),o=r.shift()||void 0;return new t(o,void 0,n[0],n[1],n[2],e)},this)},parseOpera:function(t){return!t.stacktrace||t.message.indexOf("\n")>-1&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(e){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),o=[],i=2,a=n.length;i<a;i+=2){var s=r.exec(n[i]);s&&o.push(new t(void 0,void 0,s[2],s[1],void 0,n[i]))}return o},parseOpera10:function(e){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),o=[],i=0,a=n.length;i<a;i+=2){var s=r.exec(n[i]);s&&o.push(new t(s[3]||void 0,void 0,s[2],s[1],void 0,n[i]))}return o},parseOpera11:function(o){var i=r(o.stack.split("\n"),function(t){return!!t.match(n)&&!t.match(/^Error created at/)},this);return e(i,function(e){var r,n=e.split("@"),o=this.extractLocation(n.pop()),i=n.shift()||"",a=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;i.match(/\(([^\)]*)\)/)&&(r=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var s=void 0===r||"[arguments not available]"===r?void 0:r.split(",");return new t(a,s,o[0],o[1],o[2],e)},this)}}})},function(t,e,r){var n,o,i;!function(r,a){"use strict";o=[],n=a,i="function"==typeof n?n.apply(e,o):n,!(void 0!==i&&(t.exports=i))}(this,function(){"use strict";function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}function e(t,e,r,n,o,i){void 0!==t&&this.setFunctionName(t),void 0!==e&&this.setArgs(e),void 0!==r&&this.setFileName(r),void 0!==n&&this.setLineNumber(n),void 0!==o&&this.setColumnNumber(o),void 0!==i&&this.setSource(i)}return e.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(t){this.functionName=String(t)},getArgs:function(){return this.args},setArgs:function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("Args must be an Array");this.args=t},getFileName:function(){return this.fileName},setFileName:function(t){this.fileName=String(t)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(e){if(!t(e))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(e)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(e){if(!t(e))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(e)},getSource:function(){return this.source},setSource:function(t){this.source=String(t)},toString:function(){var e=this.getFunctionName()||"{anonymous}",r="("+(this.getArgs()||[]).join(",")+")",n=this.getFileName()?"@"+this.getFileName():"",o=t(this.getLineNumber())?":"+this.getLineNumber():"",i=t(this.getColumnNumber())?":"+this.getColumnNumber():"";return e+r+n+o+i}},e})},function(t,e,r){"use strict";function n(t,e,r){var n=e.payload||{};n.body&&delete n.body;var o=u.merge(t.data,n);t._isUncaught&&(o._isUncaught=!0),t._originalArgs&&(o._originalArgs=t._originalArgs),r(null,o)}function o(t,e,r){t.telemetryEvents&&u.set(t,"data.body.telemetry",t.telemetryEvents),r(null,t)}function i(t,e,r){if(!t.message)return void r(null,t);var n="data.body.trace_chain.0",o=u.get(t,n);if(o||(n="data.body.trace",o=u.get(t,n)),o){if(!o.exception||!o.exception.description)return u.set(t,n+".exception.description",t.message),void r(null,t);var i=u.get(t,n+".extra")||{},a=u.merge(i,{message:t.message});u.set(t,n+".extra",a)}r(null,t)}function a(t){return function(e,r,n){var o=u.merge(e);try{u.isFunction(r.transform)&&r.transform(o.data,e)}catch(o){return r.transform=null,t.error("Error while calling custom transform() function. Removing custom transform().",o),void n(null,e)}n(null,o)}}function s(t,e,r){if(!e.sendConfig)return r(null,t);var n="_rollbarConfig",o=u.get(t,"data.custom")||{};o[n]=e,t.data.custom=o,r(null,t)}var u=r(5);t.exports={itemToPayload:n,addTelemetryData:o,addMessageWithError:i,userTransform:a,addConfigToPayload:s}},function(t,e,r){"use strict";function n(t,e){return!o.get(e,"plugins.jquery.ignoreAjaxErrors")||!o.get(t,"body.message.extra.isAjax")}var o=r(5);t.exports={checkIgnore:n}},function(t,e,r){"use strict";function n(t,e){var r=t.level,n=c.LEVELS[r]||0,o=e.reportLevel,i=c.LEVELS[o]||0;return!(n<i)}function o(t){return function(e,r){var n=!!e._isUncaught;delete e._isUncaught;var o=e._originalArgs;delete e._originalArgs;try{c.isFunction(r.onSendCallback)&&r.onSendCallback(n,o,e)}catch(e){r.onSendCallback=null,t.error("Error while calling onSendCallback, removing",e)}try{if(c.isFunction(r.checkIgnore)&&r.checkIgnore(n,o,e))return!1}catch(e){r.checkIgnore=null,t.error("Error while calling custom checkIgnore(), removing",e)}return!0}}function i(t){return function(e,r){return!s(e,r,"blacklist",t)}}function a(t){return function(e,r){return s(e,r,"whitelist",t)}}function s(t,e,r,n){var o=!1;"blacklist"===r&&(o=!0);var i,a,s,u,l,p,f,h,d,m;try{if(i=o?e.hostBlackList:e.hostWhiteList,f=i&&i.length,a=c.get(t,"body.trace"),!i||0===f)return!o;if(!a||!a.frames||0===a.frames.length)return!o;for(l=a.frames.length,d=0;d<l;d++){if(s=a.frames[d],u=s.filename,!c.isType(u,"string"))return!o;for(m=0;m<f;m++)if(p=i[m],h=new RegExp(p),h.test(u))return!0}}catch(t){o?e.hostBlackList=null:e.hostWhiteList=null;var g=o?"hostBlackList":"hostWhiteList";return n.error("Error while reading your configuration's "+g+" option. Removing custom "+g+".",t),!o}return!1}function u(t){return function(e,r){var n,o,i,a,s,u,l,p,f;try{if(s=!1,i=r.ignoredMessages,!i||0===i.length)return!0;if(l=e.body,p=c.get(l,"trace.exception.message"),f=c.get(l,"message.body"),n=p||f,!n)return!0;for(a=i.length,o=0;o<a&&(u=new RegExp(i[o],"gi"),!(s=u.test(n)));o++);}catch(e){r.ignoredMessages=null,t.error("Error while reading your configuration's ignoredMessages option. Removing custom ignoredMessages.")}return!s}}var c=r(5);t.exports={checkLevel:n,userCheckIgnore:o,urlIsNotBlacklisted:i,urlIsWhitelisted:a,messageIsIgnored:u}},function(t,e,r){"use strict";function n(t,e,r,n,o){var i=t[e];t[e]=r(i),n&&n[o].push([t,e,i])}function o(t,e){for(var r;t[e].length;)r=t[e].shift(),r[0][r[1]]=r[2]}function i(t){if(!t||!t.attributes)return null;for(var e=t.attributes,r=0;r<e.length;++r)if("name"===e[r].key)return e[r].value;return null}function a(t){for(var e=[],r=0;r<t.length;++r)e.push(new RegExp(t[r],"i"));return function(t){var r=i(t);if(!r)return!1;for(var n=0;n<e.length;++n)if(e[n].test(r))return!0;return!1}}function s(t,e,r,n,o){var i=t.autoInstrument;t.enabled===!1||i===!1?this.autoInstrument={}:(u.isType(i,"object")||(i=p),this.autoInstrument=u.merge(p,i)),this.scrubTelemetryInputs=!!t.scrubTelemetryInputs,this.telemetryScrubber=t.telemetryScrubber,this.defaultValueScrubber=a(t.scrubFields),this.telemeter=e,this.rollbar=r,this._window=n||{},this._document=o||{},this.replacements={network:[],log:[],navigation:[],connectivity:[]},this.eventRemovers={dom:[],connectivity:[]},this._location=this._window.location,this._lastHref=this._location&&this._location.href}var u=r(5),c=r(19),l=r(28),p={network:!0,networkResponseHeaders:!1,networkResponseBody:!1,networkRequestBody:!1,log:!0,dom:!0,navigation:!0,connectivity:!0};s.prototype.configure=function(t){var e=t.autoInstrument,r=u.merge(this.autoInstrument);t.enabled===!1||e===!1?this.autoInstrument={}:(u.isType(e,"object")||(e=p),this.autoInstrument=u.merge(p,e)),this.instrument(r),void 0!==t.scrubTelemetryInputs&&(this.scrubTelemetryInputs=!!t.scrubTelemetryInputs),void 0!==t.telemetryScrubber&&(this.telemetryScrubber=t.telemetryScrubber)},s.prototype.instrument=function(t){!this.autoInstrument.network||t&&t.network?!this.autoInstrument.network&&t&&t.network&&this.deinstrumentNetwork():this.instrumentNetwork(),!this.autoInstrument.log||t&&t.log?!this.autoInstrument.log&&t&&t.log&&this.deinstrumentConsole():this.instrumentConsole(),!this.autoInstrument.dom||t&&t.dom?!this.autoInstrument.dom&&t&&t.dom&&this.deinstrumentDom():this.instrumentDom(),!this.autoInstrument.navigation||t&&t.navigation?!this.autoInstrument.navigation&&t&&t.navigation&&this.deinstrumentNavigation():this.instrumentNavigation(),!this.autoInstrument.connectivity||t&&t.connectivity?!this.autoInstrument.connectivity&&t&&t.connectivity&&this.deinstrumentConnectivity():this.instrumentConnectivity()},s.prototype.deinstrumentNetwork=function(){o(this.replacements,"network")},s.prototype.instrumentNetwork=function(){function t(t,r){t in r&&u.isFunction(r[t])&&n(r,t,function(t){return e.rollbar.wrap(t)})}var e=this;if("XMLHttpRequest"in this._window){var r=this._window.XMLHttpRequest.prototype;n(r,"open",function(t){return function(e,r){return u.isType(r,"string")&&(this.__rollbar_xhr={method:e,url:r,status_code:null,start_time_ms:u.now(),end_time_ms:null}),t.apply(this,arguments)}},this.replacements,"network"),n(r,"send",function(r){return function(o){function i(){if(a.__rollbar_xhr){if(null===a.__rollbar_xhr.status_code){a.__rollbar_xhr.status_code=0;var t=null;e.autoInstrument.networkRequestBody&&(t=o),a.__rollbar_event=e.telemeter.captureNetwork(a.__rollbar_xhr,"xhr",void 0,t)}if(a.readyState<2&&(a.__rollbar_xhr.start_time_ms=u.now()),a.readyState>3){a.__rollbar_xhr.end_time_ms=u.now();var r=null;if(e.autoInstrument.networkResponseHeaders){var n=e.autoInstrument.networkResponseHeaders;r={};try{var i,s;if(n===!0){var c=a.getAllResponseHeaders();if(c){var l,p,f=c.trim().split(/[\r\n]+/);for(s=0;s<f.length;s++)l=f[s].split(": "),i=l.shift(),p=l.join(": "),r[i]=p}}else for(s=0;s<n.length;s++)i=n[s],r[i]=a.getResponseHeader(i)}catch(t){}}var h=null;if(e.autoInstrument.networkResponseBody)try{h=a.responseText}catch(t){}var d=null;(h||r)&&(d={},h&&(d.body=h),r&&(d.headers=r)),d&&(a.__rollbar_xhr.response=d);try{var m=a.status;m=1223===m?204:m,a.__rollbar_xhr.status_code=m,a.__rollbar_event.level=e.telemeter.levelFromStatus(m)}catch(t){}}}}var a=this;return t("onload",a),t("onerror",a),t("onprogress",a),"onreadystatechange"in a&&u.isFunction(a.onreadystatechange)?n(a,"onreadystatechange",function(t){return e.rollbar.wrap(t,void 0,i)}):a.onreadystatechange=i,r.apply(this,arguments)}},this.replacements,"network")}"fetch"in this._window&&n(this._window,"fetch",function(t){return function(r,n){for(var o=new Array(arguments.length),i=0,a=o.length;i<a;i++)o[i]=arguments[i];var s,c=o[0],l="GET";u.isType(c,"string")?s=c:c&&(s=c.url,c.method&&(l=c.method)),o[1]&&o[1].method&&(l=o[1].method);var p={method:l,url:s,status_code:null,start_time_ms:u.now(),end_time_ms:null},f=null;return e.autoInstrument.networkRequestBody&&(o[1]&&o[1].body?f=o[1].body:o[0]&&!u.isType(o[0],"string")&&o[0].body&&(f=o[0].body)),e.telemeter.captureNetwork(p,"fetch",void 0,f),t.apply(this,o).then(function(t){p.end_time_ms=u.now(),p.status_code=t.status;var r=null;if(e.autoInstrument.networkResponseHeaders){var n=e.autoInstrument.networkResponseHeaders;r={};try{if(n===!0);else for(var o=0;o<n.length;o++){var i=n[o];r[i]=t.headers.get(i)}}catch(t){}}var a=null;return r&&(a={headers:r}),a&&(p.response=a),t})}},this.replacements,"network")},s.prototype.deinstrumentConsole=function(){if("console"in this._window&&this._window.console.log)for(var t;this.replacements.log.length;)t=this.replacements.log.shift(),this._window.console[t[0]]=t[1]},s.prototype.instrumentConsole=function(){function t(t){var n=r[t],o=r,i="warn"===t?"warning":t;r[t]=function(){var t=Array.prototype.slice.call(arguments),r=u.formatArgsAsString(t);e.telemeter.captureLog(r,i),n&&Function.prototype.apply.call(n,o,t)},e.replacements.log.push([t,n])}if("console"in this._window&&this._window.console.log)for(var e=this,r=this._window.console,n=["debug","info","warn","error","log"],o=0,i=n.length;o<i;o++)t(n[o])},s.prototype.deinstrumentDom=function(){("addEventListener"in this._window||"attachEvent"in this._window)&&this.removeListeners("dom")},s.prototype.instrumentDom=function(){if("addEventListener"in this._window||"attachEvent"in this._window){var t=this.handleClick.bind(this),e=this.handleBlur.bind(this);this.addListener("dom",this._window,"click","onclick",t,!0),this.addListener("dom",this._window,"blur","onfocusout",e,!0)}},s.prototype.handleClick=function(t){try{var e=l.getElementFromEvent(t,this._document),r=e&&e.tagName,n=l.isDescribedElement(e,"a")||l.isDescribedElement(e,"button");r&&(n||l.isDescribedElement(e,"input",["button","submit"]))?this.captureDomEvent("click",e):l.isDescribedElement(e,"input",["checkbox","radio"])&&this.captureDomEvent("input",e,e.value,e.checked)}catch(t){}},s.prototype.handleBlur=function(t){try{var e=l.getElementFromEvent(t,this._document);e&&e.tagName&&(l.isDescribedElement(e,"textarea")?this.captureDomEvent("input",e,e.value):l.isDescribedElement(e,"select")&&e.options&&e.options.length?this.handleSelectInputChanged(e):l.isDescribedElement(e,"input")&&!l.isDescribedElement(e,"input",["button","submit","hidden","checkbox","radio"])&&this.captureDomEvent("input",e,e.value))}catch(t){}},s.prototype.handleSelectInputChanged=function(t){if(t.multiple)for(var e=0;e<t.options.length;e++)t.options[e].selected&&this.captureDomEvent("input",t,t.options[e].value);else t.selectedIndex>=0&&t.options[t.selectedIndex]&&this.captureDomEvent("input",t,t.options[t.selectedIndex].value)},s.prototype.captureDomEvent=function(t,e,r,n){if(void 0!==r)if(this.scrubTelemetryInputs||"password"===l.getElementType(e))r="[scrubbed]";else{var o=l.describeElement(e);this.telemetryScrubber?this.telemetryScrubber(o)&&(r="[scrubbed]"):this.defaultValueScrubber(o)&&(r="[scrubbed]")}var i=l.elementArrayToString(l.treeToArray(e));this.telemeter.captureDom(t,i,r,n)},s.prototype.deinstrumentNavigation=function(){var t=this._window.chrome,e=t&&t.app&&t.app.runtime,r=!e&&this._window.history&&this._window.history.pushState;r&&o(this.replacements,"navigation")},s.prototype.instrumentNavigation=function(){var t=this._window.chrome,e=t&&t.app&&t.app.runtime,r=!e&&this._window.history&&this._window.history.pushState;if(r){var o=this;n(this._window,"onpopstate",function(t){return function(){var e=o._location.href;o.handleUrlChange(o._lastHref,e),t&&t.apply(this,arguments)}},this.replacements,"navigation"),n(this._window.history,"pushState",function(t){return function(){var e=arguments.length>2?arguments[2]:void 0;return e&&o.handleUrlChange(o._lastHref,e+""),t.apply(this,arguments)}},this.replacements,"navigation")}},s.prototype.handleUrlChange=function(t,e){var r=c.parse(this._location.href),n=c.parse(e),o=c.parse(t);this._lastHref=e,r.protocol===n.protocol&&r.host===n.host&&(e=n.path+(n.hash||"")),r.protocol===o.protocol&&r.host===o.host&&(t=o.path+(o.hash||"")),this.telemeter.captureNavigation(t,e)},s.prototype.deinstrumentConnectivity=function(){("addEventListener"in this._window||"body"in this._document)&&(this._window.addEventListener?this.removeListeners("connectivity"):o(this.replacements,"connectivity"))},s.prototype.instrumentConnectivity=function(){if("addEventListener"in this._window||"body"in this._document)if(this._window.addEventListener)this.addListener("connectivity",this._window,"online",void 0,function(){this.telemeter.captureConnectivityChange("online")}.bind(this),!0),this.addListener("connectivity",this._window,"offline",void 0,function(){this.telemeter.captureConnectivityChange("offline")}.bind(this),!0);else{var t=this;n(this._document.body,"ononline",function(e){return function(){t.telemeter.captureConnectivityChange("online"),e&&e.apply(this,arguments)}},this.replacements,"connectivity"),n(this._document.body,"onoffline",function(e){return function(){t.telemeter.captureConnectivityChange("offline"),e&&e.apply(this,arguments)}},this.replacements,"connectivity")}},s.prototype.addListener=function(t,e,r,n,o,i){e.addEventListener?(e.addEventListener(r,o,i),this.eventRemovers[t].push(function(){e.removeEventListener(r,o,i)})):n&&(e.attachEvent(n,o),this.eventRemovers[t].push(function(){e.detachEvent(n,o)}))},s.prototype.removeListeners=function(t){for(var e;this.eventRemovers[t].length;)(e=this.eventRemovers[t].shift())()},t.exports=s},function(t,e){"use strict";function r(t){return(t.getAttribute("type")||"").toLowerCase()}function n(t,e,n){if(t.tagName.toLowerCase()!==e.toLowerCase())return!1;if(!n)return!0;t=r(t);for(var o=0;o<n.length;o++)if(n[o]===t)return!0;return!1}function o(t,e){return t.target?t.target:e&&e.elementFromPoint?e.elementFromPoint(t.clientX,t.clientY):void 0}function i(t){for(var e,r=5,n=[],o=0;t&&o<r&&(e=u(t),"html"!==e.tagName);o++)n.unshift(e),t=t.parentNode;return n}function a(t){for(var e,r,n=80,o=" > ",i=o.length,a=[],u=0,c=t.length-1;c>=0;c--){if(e=s(t[c]),r=u+a.length*i+e.length,c<t.length-1&&r>=n+3){a.unshift("...");break}a.unshift(e),u+=e.length}return a.join(o)}function s(t){if(!t||!t.tagName)return"";var e=[t.tagName];t.id&&e.push("#"+t.id),t.classes&&e.push("."+t.classes.join("."));for(var r=0;r<t.attributes.length;r++)e.push("["+t.attributes[r].key+'="'+t.attributes[r].value+'"]');return e.join("")}function u(t){if(!t||!t.tagName)return null;var e,r,n,o,i={};i.tagName=t.tagName.toLowerCase(),t.id&&(i.id=t.id),e=t.className,e&&"string"==typeof e&&(i.classes=e.split(/\s+/));var a=["type","name","title","alt"];for(i.attributes=[],o=0;o<a.length;o++)r=a[o],n=t.getAttribute(r),n&&i.attributes.push({key:r,value:n});return i}t.exports={describeElement:u,descriptionToString:s,elementArrayToString:a,treeToArray:i,getElementFromEvent:o,isDescribedElement:n,getElementType:r}}])});
//# sourceMappingURL=rollbar.umd.min.js.map

/***/ }),

/***/ "../../node_modules/style-loader/lib/addStyles.js":
/*!************************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/style-loader/lib/addStyles.js ***!
  \************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/

var stylesInDom = {};

var	memoize = function (fn) {
	var memo;

	return function () {
		if (typeof memo === "undefined") memo = fn.apply(this, arguments);
		return memo;
	};
};

var isOldIE = memoize(function () {
	// Test for IE <= 9 as proposed by Browserhacks
	// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
	// Tests for existence of standard globals is to allow style-loader
	// to operate correctly into non-standard environments
	// @see https://github.com/webpack-contrib/style-loader/issues/177
	return window && document && document.all && !window.atob;
});

var getTarget = function (target, parent) {
  if (parent){
    return parent.querySelector(target);
  }
  return document.querySelector(target);
};

var getElement = (function (fn) {
	var memo = {};

	return function(target, parent) {
                // If passing function in options, then use it for resolve "head" element.
                // Useful for Shadow Root style i.e
                // {
                //   insertInto: function () { return document.querySelector("#foo").shadowRoot }
                // }
                if (typeof target === 'function') {
                        return target();
                }
                if (typeof memo[target] === "undefined") {
			var styleTarget = getTarget.call(this, target, parent);
			// Special case to return head of iframe instead of iframe itself
			if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
				try {
					// This will throw an exception if access to iframe is blocked
					// due to cross-origin restrictions
					styleTarget = styleTarget.contentDocument.head;
				} catch(e) {
					styleTarget = null;
				}
			}
			memo[target] = styleTarget;
		}
		return memo[target]
	};
})();

var singleton = null;
var	singletonCounter = 0;
var	stylesInsertedAtTop = [];

var	fixUrls = __webpack_require__(/*! ./urls */ "../../node_modules/style-loader/lib/urls.js");

module.exports = function(list, options) {
	if (typeof DEBUG !== "undefined" && DEBUG) {
		if (typeof document !== "object") throw new Error("The style-loader cannot be used in a non-browser environment");
	}

	options = options || {};

	options.attrs = typeof options.attrs === "object" ? options.attrs : {};

	// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
	// tags it will allow on a page
	if (!options.singleton && typeof options.singleton !== "boolean") options.singleton = isOldIE();

	// By default, add <style> tags to the <head> element
        if (!options.insertInto) options.insertInto = "head";

	// By default, add <style> tags to the bottom of the target
	if (!options.insertAt) options.insertAt = "bottom";

	var styles = listToStyles(list, options);

	addStylesToDom(styles, options);

	return function update (newList) {
		var mayRemove = [];

		for (var i = 0; i < styles.length; i++) {
			var item = styles[i];
			var domStyle = stylesInDom[item.id];

			domStyle.refs--;
			mayRemove.push(domStyle);
		}

		if(newList) {
			var newStyles = listToStyles(newList, options);
			addStylesToDom(newStyles, options);
		}

		for (var i = 0; i < mayRemove.length; i++) {
			var domStyle = mayRemove[i];

			if(domStyle.refs === 0) {
				for (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();

				delete stylesInDom[domStyle.id];
			}
		}
	};
};

function addStylesToDom (styles, options) {
	for (var i = 0; i < styles.length; i++) {
		var item = styles[i];
		var domStyle = stylesInDom[item.id];

		if(domStyle) {
			domStyle.refs++;

			for(var j = 0; j < domStyle.parts.length; j++) {
				domStyle.parts[j](item.parts[j]);
			}

			for(; j < item.parts.length; j++) {
				domStyle.parts.push(addStyle(item.parts[j], options));
			}
		} else {
			var parts = [];

			for(var j = 0; j < item.parts.length; j++) {
				parts.push(addStyle(item.parts[j], options));
			}

			stylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};
		}
	}
}

function listToStyles (list, options) {
	var styles = [];
	var newStyles = {};

	for (var i = 0; i < list.length; i++) {
		var item = list[i];
		var id = options.base ? item[0] + options.base : item[0];
		var css = item[1];
		var media = item[2];
		var sourceMap = item[3];
		var part = {css: css, media: media, sourceMap: sourceMap};

		if(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});
		else newStyles[id].parts.push(part);
	}

	return styles;
}

function insertStyleElement (options, style) {
	var target = getElement(options.insertInto)

	if (!target) {
		throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");
	}

	var lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];

	if (options.insertAt === "top") {
		if (!lastStyleElementInsertedAtTop) {
			target.insertBefore(style, target.firstChild);
		} else if (lastStyleElementInsertedAtTop.nextSibling) {
			target.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);
		} else {
			target.appendChild(style);
		}
		stylesInsertedAtTop.push(style);
	} else if (options.insertAt === "bottom") {
		target.appendChild(style);
	} else if (typeof options.insertAt === "object" && options.insertAt.before) {
		var nextSibling = getElement(options.insertAt.before, target);
		target.insertBefore(style, nextSibling);
	} else {
		throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");
	}
}

function removeStyleElement (style) {
	if (style.parentNode === null) return false;
	style.parentNode.removeChild(style);

	var idx = stylesInsertedAtTop.indexOf(style);
	if(idx >= 0) {
		stylesInsertedAtTop.splice(idx, 1);
	}
}

function createStyleElement (options) {
	var style = document.createElement("style");

	if(options.attrs.type === undefined) {
		options.attrs.type = "text/css";
	}

	if(options.attrs.nonce === undefined) {
		var nonce = getNonce();
		if (nonce) {
			options.attrs.nonce = nonce;
		}
	}

	addAttrs(style, options.attrs);
	insertStyleElement(options, style);

	return style;
}

function createLinkElement (options) {
	var link = document.createElement("link");

	if(options.attrs.type === undefined) {
		options.attrs.type = "text/css";
	}
	options.attrs.rel = "stylesheet";

	addAttrs(link, options.attrs);
	insertStyleElement(options, link);

	return link;
}

function addAttrs (el, attrs) {
	Object.keys(attrs).forEach(function (key) {
		el.setAttribute(key, attrs[key]);
	});
}

function getNonce() {
	if (false) {}

	return __webpack_require__.nc;
}

function addStyle (obj, options) {
	var style, update, remove, result;

	// If a transform function was defined, run it on the css
	if (options.transform && obj.css) {
	    result = typeof options.transform === 'function'
		 ? options.transform(obj.css) 
		 : options.transform.default(obj.css);

	    if (result) {
	    	// If transform returns a value, use that instead of the original css.
	    	// This allows running runtime transformations on the css.
	    	obj.css = result;
	    } else {
	    	// If the transform function returns a falsy value, don't add this css.
	    	// This allows conditional loading of css
	    	return function() {
	    		// noop
	    	};
	    }
	}

	if (options.singleton) {
		var styleIndex = singletonCounter++;

		style = singleton || (singleton = createStyleElement(options));

		update = applyToSingletonTag.bind(null, style, styleIndex, false);
		remove = applyToSingletonTag.bind(null, style, styleIndex, true);

	} else if (
		obj.sourceMap &&
		typeof URL === "function" &&
		typeof URL.createObjectURL === "function" &&
		typeof URL.revokeObjectURL === "function" &&
		typeof Blob === "function" &&
		typeof btoa === "function"
	) {
		style = createLinkElement(options);
		update = updateLink.bind(null, style, options);
		remove = function () {
			removeStyleElement(style);

			if(style.href) URL.revokeObjectURL(style.href);
		};
	} else {
		style = createStyleElement(options);
		update = applyToTag.bind(null, style);
		remove = function () {
			removeStyleElement(style);
		};
	}

	update(obj);

	return function updateStyle (newObj) {
		if (newObj) {
			if (
				newObj.css === obj.css &&
				newObj.media === obj.media &&
				newObj.sourceMap === obj.sourceMap
			) {
				return;
			}

			update(obj = newObj);
		} else {
			remove();
		}
	};
}

var replaceText = (function () {
	var textStore = [];

	return function (index, replacement) {
		textStore[index] = replacement;

		return textStore.filter(Boolean).join('\n');
	};
})();

function applyToSingletonTag (style, index, remove, obj) {
	var css = remove ? "" : obj.css;

	if (style.styleSheet) {
		style.styleSheet.cssText = replaceText(index, css);
	} else {
		var cssNode = document.createTextNode(css);
		var childNodes = style.childNodes;

		if (childNodes[index]) style.removeChild(childNodes[index]);

		if (childNodes.length) {
			style.insertBefore(cssNode, childNodes[index]);
		} else {
			style.appendChild(cssNode);
		}
	}
}

function applyToTag (style, obj) {
	var css = obj.css;
	var media = obj.media;

	if(media) {
		style.setAttribute("media", media)
	}

	if(style.styleSheet) {
		style.styleSheet.cssText = css;
	} else {
		while(style.firstChild) {
			style.removeChild(style.firstChild);
		}

		style.appendChild(document.createTextNode(css));
	}
}

function updateLink (link, options, obj) {
	var css = obj.css;
	var sourceMap = obj.sourceMap;

	/*
		If convertToAbsoluteUrls isn't defined, but sourcemaps are enabled
		and there is no publicPath defined then lets turn convertToAbsoluteUrls
		on by default.  Otherwise default to the convertToAbsoluteUrls option
		directly
	*/
	var autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;

	if (options.convertToAbsoluteUrls || autoFixUrls) {
		css = fixUrls(css);
	}

	if (sourceMap) {
		// http://stackoverflow.com/a/26603875
		css += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + " */";
	}

	var blob = new Blob([css], { type: "text/css" });

	var oldSrc = link.href;

	link.href = URL.createObjectURL(blob);

	if(oldSrc) URL.revokeObjectURL(oldSrc);
}


/***/ }),

/***/ "../../node_modules/style-loader/lib/urls.js":
/*!*******************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/style-loader/lib/urls.js ***!
  \*******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {


/**
 * When source maps are enabled, `style-loader` uses a link element with a data-uri to
 * embed the css on the page. This breaks all relative urls because now they are relative to a
 * bundle instead of the current page.
 *
 * One solution is to only use full urls, but that may be impossible.
 *
 * Instead, this function "fixes" the relative urls to be absolute according to the current page location.
 *
 * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.
 *
 */

module.exports = function (css) {
  // get current location
  var location = typeof window !== "undefined" && window.location;

  if (!location) {
    throw new Error("fixUrls requires window.location");
  }

	// blank or null?
	if (!css || typeof css !== "string") {
	  return css;
  }

  var baseUrl = location.protocol + "//" + location.host;
  var currentDir = baseUrl + location.pathname.replace(/\/[^\/]*$/, "/");

	// convert each url(...)
	/*
	This regular expression is just a way to recursively match brackets within
	a string.

	 /url\s*\(  = Match on the word "url" with any whitespace after it and then a parens
	   (  = Start a capturing group
	     (?:  = Start a non-capturing group
	         [^)(]  = Match anything that isn't a parentheses
	         |  = OR
	         \(  = Match a start parentheses
	             (?:  = Start another non-capturing groups
	                 [^)(]+  = Match anything that isn't a parentheses
	                 |  = OR
	                 \(  = Match a start parentheses
	                     [^)(]*  = Match anything that isn't a parentheses
	                 \)  = Match a end parentheses
	             )  = End Group
              *\) = Match anything and then a close parens
          )  = Close non-capturing group
          *  = Match anything
       )  = Close capturing group
	 \)  = Match a close parens

	 /gi  = Get all matches, not the first.  Be case insensitive.
	 */
	var fixedCss = css.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi, function(fullMatch, origUrl) {
		// strip quotes (if they exist)
		var unquotedOrigUrl = origUrl
			.trim()
			.replace(/^"(.*)"$/, function(o, $1){ return $1; })
			.replace(/^'(.*)'$/, function(o, $1){ return $1; });

		// already a full url? no change
		if (/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(unquotedOrigUrl)) {
		  return fullMatch;
		}

		// convert the url to a full url
		var newUrl;

		if (unquotedOrigUrl.indexOf("//") === 0) {
		  	//TODO: should we add protocol?
			newUrl = unquotedOrigUrl;
		} else if (unquotedOrigUrl.indexOf("/") === 0) {
			// path should be relative to the base url
			newUrl = baseUrl + unquotedOrigUrl; // already starts with '/'
		} else {
			// path should be relative to current directory
			newUrl = currentDir + unquotedOrigUrl.replace(/^\.\//, ""); // Strip leading './'
		}

		// send back the fixed url(...)
		return "url(" + JSON.stringify(newUrl) + ")";
	});

	// send back the fixed css
	return fixedCss;
};


/***/ }),

/***/ "../../node_modules/url-polyfill/url-polyfill.js":
/*!***********************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/url-polyfill/url-polyfill.js ***!
  \***********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {(function(global) {
  /**
   * Polyfill URLSearchParams
   *
   * Inspired from : https://github.com/WebReflection/url-search-params/blob/master/src/url-search-params.js
   */

  var checkIfIteratorIsSupported = function() {
    try {
      return !!Symbol.iterator;
    } catch (error) {
      return false;
    }
  };


  var iteratorSupported = checkIfIteratorIsSupported();

  var createIterator = function(items) {
    var iterator = {
      next: function() {
        var value = items.shift();
        return { done: value === void 0, value: value };
      }
    };

    if (iteratorSupported) {
      iterator[Symbol.iterator] = function() {
        return iterator;
      };
    }

    return iterator;
  };

  /**
   * Search param name and values should be encoded according to https://url.spec.whatwg.org/#urlencoded-serializing
   * encodeURIComponent() produces the same result except encoding spaces as `%20` instead of `+`.
   */
  var serializeParam = function(value) {
    return encodeURIComponent(value).replace(/%20/g, '+');
  };

  var deserializeParam = function(value) {
    return decodeURIComponent(value).replace(/\+/g, ' ');
  };

  var polyfillURLSearchParams = function() {

    var URLSearchParams = function(searchString) {
      Object.defineProperty(this, '_entries', { writable: true, value: {} });
      var typeofSearchString = typeof searchString;

      if (typeofSearchString === 'undefined') {
        // do nothing
      } else if (typeofSearchString === 'string') {
        if (searchString !== '') {
          this._fromString(searchString);
        }
      } else if (searchString instanceof URLSearchParams) {
        var _this = this;
        searchString.forEach(function(value, name) {
          _this.append(name, value);
        });
      } else if ((searchString !== null) && (typeofSearchString === 'object')) {
        if (Object.prototype.toString.call(searchString) === '[object Array]') {
          for (var i = 0; i < searchString.length; i++) {
            var entry = searchString[i];
            if ((Object.prototype.toString.call(entry) === '[object Array]') || (entry.length !== 2)) {
              this.append(entry[0], entry[1]);
            } else {
              throw new TypeError('Expected [string, any] as entry at index ' + i + ' of URLSearchParams\'s input');
            }
          }
        } else {
          for (var key in searchString) {
            if (searchString.hasOwnProperty(key)) {
              this.append(key, searchString[key]);
            }
          }
        }
      } else {
        throw new TypeError('Unsupported input\'s type for URLSearchParams');
      }
    };

    var proto = URLSearchParams.prototype;

    proto.append = function(name, value) {
      if (name in this._entries) {
        this._entries[name].push(String(value));
      } else {
        this._entries[name] = [String(value)];
      }
    };

    proto.delete = function(name) {
      delete this._entries[name];
    };

    proto.get = function(name) {
      return (name in this._entries) ? this._entries[name][0] : null;
    };

    proto.getAll = function(name) {
      return (name in this._entries) ? this._entries[name].slice(0) : [];
    };

    proto.has = function(name) {
      return (name in this._entries);
    };

    proto.set = function(name, value) {
      this._entries[name] = [String(value)];
    };

    proto.forEach = function(callback, thisArg) {
      var entries;
      for (var name in this._entries) {
        if (this._entries.hasOwnProperty(name)) {
          entries = this._entries[name];
          for (var i = 0; i < entries.length; i++) {
            callback.call(thisArg, entries[i], name, this);
          }
        }
      }
    };

    proto.keys = function() {
      var items = [];
      this.forEach(function(value, name) {
        items.push(name);
      });
      return createIterator(items);
    };

    proto.values = function() {
      var items = [];
      this.forEach(function(value) {
        items.push(value);
      });
      return createIterator(items);
    };

    proto.entries = function() {
      var items = [];
      this.forEach(function(value, name) {
        items.push([name, value]);
      });
      return createIterator(items);
    };

    if (iteratorSupported) {
      proto[Symbol.iterator] = proto.entries;
    }

    proto.toString = function() {
      var searchArray = [];
      this.forEach(function(value, name) {
        searchArray.push(serializeParam(name) + '=' + serializeParam(value));
      });
      return searchArray.join('&');
    };


    global.URLSearchParams = URLSearchParams;
  };

  if (!('URLSearchParams' in global) || (new URLSearchParams('?a=1').toString() !== 'a=1')) {
    polyfillURLSearchParams();
  }

  var proto = URLSearchParams.prototype;

  if (typeof proto.sort !== 'function') {
    proto.sort = function() {
      var _this = this;
      var items = [];
      this.forEach(function(value, name) {
        items.push([name, value]);
        if (!_this._entries) {
          _this.delete(name);
        }
      });
      items.sort(function(a, b) {
        if (a[0] < b[0]) {
          return -1;
        } else if (a[0] > b[0]) {
          return +1;
        } else {
          return 0;
        }
      });
      if (_this._entries) { // force reset because IE keeps keys index
        _this._entries = {};
      }
      for (var i = 0; i < items.length; i++) {
        this.append(items[i][0], items[i][1]);
      }
    };
  }

  if (typeof proto._fromString !== 'function') {
    Object.defineProperty(proto, '_fromString', {
      enumerable: false,
      configurable: false,
      writable: false,
      value: function(searchString) {
        if (this._entries) {
          this._entries = {};
        } else {
          var keys = [];
          this.forEach(function(value, name) {
            keys.push(name);
          });
          for (var i = 0; i < keys.length; i++) {
            this.delete(keys[i]);
          }
        }

        searchString = searchString.replace(/^\?/, '');
        var attributes = searchString.split('&');
        var attribute;
        for (var i = 0; i < attributes.length; i++) {
          attribute = attributes[i].split('=');
          this.append(
            deserializeParam(attribute[0]),
            (attribute.length > 1) ? deserializeParam(attribute[1]) : ''
          );
        }
      }
    });
  }

  // HTMLAnchorElement

})(
  (typeof global !== 'undefined') ? global
    : ((typeof window !== 'undefined') ? window
    : ((typeof self !== 'undefined') ? self : this))
);

(function(global) {
  /**
   * Polyfill URL
   *
   * Inspired from : https://github.com/arv/DOM-URL-Polyfill/blob/master/src/url.js
   */

  var checkIfURLIsSupported = function() {
    try {
      var u = new URL('b', 'http://a');
      u.pathname = 'c%20d';
      return (u.href === 'http://a/c%20d') && u.searchParams;
    } catch (e) {
      return false;
    }
  };


  var polyfillURL = function() {
    var _URL = global.URL;

    var URL = function(url, base) {
      if (typeof url !== 'string') url = String(url);

      // Only create another document if the base is different from current location.
      var doc = document, baseElement;
      if (base && (global.location === void 0 || base !== global.location.href)) {
        doc = document.implementation.createHTMLDocument('');
        baseElement = doc.createElement('base');
        baseElement.href = base;
        doc.head.appendChild(baseElement);
        try {
          if (baseElement.href.indexOf(base) !== 0) throw new Error(baseElement.href);
        } catch (err) {
          throw new Error('URL unable to set base ' + base + ' due to ' + err);
        }
      }

      var anchorElement = doc.createElement('a');
      anchorElement.href = url;
      if (baseElement) {
        doc.body.appendChild(anchorElement);
        anchorElement.href = anchorElement.href; // force href to refresh
      }

      if (anchorElement.protocol === ':' || !/:/.test(anchorElement.href)) {
        throw new TypeError('Invalid URL');
      }

      Object.defineProperty(this, '_anchorElement', {
        value: anchorElement
      });


      // create a linked searchParams which reflect its changes on URL
      var searchParams = new URLSearchParams(this.search);
      var enableSearchUpdate = true;
      var enableSearchParamsUpdate = true;
      var _this = this;
      ['append', 'delete', 'set'].forEach(function(methodName) {
        var method = searchParams[methodName];
        searchParams[methodName] = function() {
          method.apply(searchParams, arguments);
          if (enableSearchUpdate) {
            enableSearchParamsUpdate = false;
            _this.search = searchParams.toString();
            enableSearchParamsUpdate = true;
          }
        };
      });

      Object.defineProperty(this, 'searchParams', {
        value: searchParams,
        enumerable: true
      });

      var search = void 0;
      Object.defineProperty(this, '_updateSearchParams', {
        enumerable: false,
        configurable: false,
        writable: false,
        value: function() {
          if (this.search !== search) {
            search = this.search;
            if (enableSearchParamsUpdate) {
              enableSearchUpdate = false;
              this.searchParams._fromString(this.search);
              enableSearchUpdate = true;
            }
          }
        }
      });
    };

    var proto = URL.prototype;

    var linkURLWithAnchorAttribute = function(attributeName) {
      Object.defineProperty(proto, attributeName, {
        get: function() {
          return this._anchorElement[attributeName];
        },
        set: function(value) {
          this._anchorElement[attributeName] = value;
        },
        enumerable: true
      });
    };

    ['hash', 'host', 'hostname', 'port', 'protocol']
      .forEach(function(attributeName) {
        linkURLWithAnchorAttribute(attributeName);
      });

    Object.defineProperty(proto, 'search', {
      get: function() {
        return this._anchorElement['search'];
      },
      set: function(value) {
        this._anchorElement['search'] = value;
        this._updateSearchParams();
      },
      enumerable: true
    });

    Object.defineProperties(proto, {

      'toString': {
        get: function() {
          var _this = this;
          return function() {
            return _this.href;
          };
        }
      },

      'href': {
        get: function() {
          return this._anchorElement.href.replace(/\?$/, '');
        },
        set: function(value) {
          this._anchorElement.href = value;
          this._updateSearchParams();
        },
        enumerable: true
      },

      'pathname': {
        get: function() {
          return this._anchorElement.pathname.replace(/(^\/?)/, '/');
        },
        set: function(value) {
          this._anchorElement.pathname = value;
        },
        enumerable: true
      },

      'origin': {
        get: function() {
          // get expected port from protocol
          var expectedPort = { 'http:': 80, 'https:': 443, 'ftp:': 21 }[this._anchorElement.protocol];
          // add port to origin if, expected port is different than actual port
          // and it is not empty f.e http://foo:8080
          // 8080 != 80 && 8080 != ''
          var addPortToOrigin = this._anchorElement.port != expectedPort &&
            this._anchorElement.port !== '';

          return this._anchorElement.protocol +
            '//' +
            this._anchorElement.hostname +
            (addPortToOrigin ? (':' + this._anchorElement.port) : '');
        },
        enumerable: true
      },

      'password': { // TODO
        get: function() {
          return '';
        },
        set: function(value) {
        },
        enumerable: true
      },

      'username': { // TODO
        get: function() {
          return '';
        },
        set: function(value) {
        },
        enumerable: true
      },
    });

    URL.createObjectURL = function(blob) {
      return _URL.createObjectURL.apply(_URL, arguments);
    };

    URL.revokeObjectURL = function(url) {
      return _URL.revokeObjectURL.apply(_URL, arguments);
    };

    global.URL = URL;

  };

  if (!checkIfURLIsSupported()) {
    polyfillURL();
  }

  if ((global.location !== void 0) && !('origin' in global.location)) {
    var getOrigin = function() {
      return global.location.protocol + '//' + global.location.hostname + (global.location.port ? (':' + global.location.port) : '');
    };

    try {
      Object.defineProperty(global.location, 'origin', {
        get: getOrigin,
        enumerable: true
      });
    } catch (e) {
      setInterval(function() {
        global.location.origin = getOrigin();
      }, 100);
    }
  }

})(
  (typeof global !== 'undefined') ? global
    : ((typeof window !== 'undefined') ? window
    : ((typeof self !== 'undefined') ? self : this))
);

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../packages/web-sdk/node_modules/webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "../../node_modules/url/url.js":
/*!*****************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/url/url.js ***!
  \*****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



var punycode = __webpack_require__(/*! punycode */ "../../node_modules/punycode/punycode.js");
var util = __webpack_require__(/*! ./util */ "../../node_modules/url/util.js");

exports.parse = urlParse;
exports.resolve = urlResolve;
exports.resolveObject = urlResolveObject;
exports.format = urlFormat;

exports.Url = Url;

function Url() {
  this.protocol = null;
  this.slashes = null;
  this.auth = null;
  this.host = null;
  this.port = null;
  this.hostname = null;
  this.hash = null;
  this.search = null;
  this.query = null;
  this.pathname = null;
  this.path = null;
  this.href = null;
}

// Reference: RFC 3986, RFC 1808, RFC 2396

// define these here so at least they only have to be
// compiled once on the first module load.
var protocolPattern = /^([a-z0-9.+-]+:)/i,
    portPattern = /:[0-9]*$/,

    // Special case for a simple path URL
    simplePathPattern = /^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,

    // RFC 2396: characters reserved for delimiting URLs.
    // We actually just auto-escape these.
    delims = ['<', '>', '"', '`', ' ', '\r', '\n', '\t'],

    // RFC 2396: characters not allowed for various reasons.
    unwise = ['{', '}', '|', '\\', '^', '`'].concat(delims),

    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.
    autoEscape = ['\''].concat(unwise),
    // Characters that are never ever allowed in a hostname.
    // Note that any invalid chars are also handled, but these
    // are the ones that are *expected* to be seen, so we fast-path
    // them.
    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),
    hostEndingChars = ['/', '?', '#'],
    hostnameMaxLen = 255,
    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,
    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,
    // protocols that can allow "unsafe" and "unwise" chars.
    unsafeProtocol = {
      'javascript': true,
      'javascript:': true
    },
    // protocols that never have a hostname.
    hostlessProtocol = {
      'javascript': true,
      'javascript:': true
    },
    // protocols that always contain a // bit.
    slashedProtocol = {
      'http': true,
      'https': true,
      'ftp': true,
      'gopher': true,
      'file': true,
      'http:': true,
      'https:': true,
      'ftp:': true,
      'gopher:': true,
      'file:': true
    },
    querystring = __webpack_require__(/*! querystring */ "../../node_modules/querystring-es3/index.js");

function urlParse(url, parseQueryString, slashesDenoteHost) {
  if (url && util.isObject(url) && url instanceof Url) return url;

  var u = new Url;
  u.parse(url, parseQueryString, slashesDenoteHost);
  return u;
}

Url.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {
  if (!util.isString(url)) {
    throw new TypeError("Parameter 'url' must be a string, not " + typeof url);
  }

  // Copy chrome, IE, opera backslash-handling behavior.
  // Back slashes before the query string get converted to forward slashes
  // See: https://code.google.com/p/chromium/issues/detail?id=25916
  var queryIndex = url.indexOf('?'),
      splitter =
          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',
      uSplit = url.split(splitter),
      slashRegex = /\\/g;
  uSplit[0] = uSplit[0].replace(slashRegex, '/');
  url = uSplit.join(splitter);

  var rest = url;

  // trim before proceeding.
  // This is to support parse stuff like "  http://foo.com  \n"
  rest = rest.trim();

  if (!slashesDenoteHost && url.split('#').length === 1) {
    // Try fast path regexp
    var simplePath = simplePathPattern.exec(rest);
    if (simplePath) {
      this.path = rest;
      this.href = rest;
      this.pathname = simplePath[1];
      if (simplePath[2]) {
        this.search = simplePath[2];
        if (parseQueryString) {
          this.query = querystring.parse(this.search.substr(1));
        } else {
          this.query = this.search.substr(1);
        }
      } else if (parseQueryString) {
        this.search = '';
        this.query = {};
      }
      return this;
    }
  }

  var proto = protocolPattern.exec(rest);
  if (proto) {
    proto = proto[0];
    var lowerProto = proto.toLowerCase();
    this.protocol = lowerProto;
    rest = rest.substr(proto.length);
  }

  // figure out if it's got a host
  // user@server is *always* interpreted as a hostname, and url
  // resolution will treat //foo/bar as host=foo,path=bar because that's
  // how the browser resolves relative URLs.
  if (slashesDenoteHost || proto || rest.match(/^\/\/[^@\/]+@[^@\/]+/)) {
    var slashes = rest.substr(0, 2) === '//';
    if (slashes && !(proto && hostlessProtocol[proto])) {
      rest = rest.substr(2);
      this.slashes = true;
    }
  }

  if (!hostlessProtocol[proto] &&
      (slashes || (proto && !slashedProtocol[proto]))) {

    // there's a hostname.
    // the first instance of /, ?, ;, or # ends the host.
    //
    // If there is an @ in the hostname, then non-host chars *are* allowed
    // to the left of the last @ sign, unless some host-ending character
    // comes *before* the @-sign.
    // URLs are obnoxious.
    //
    // ex:
    // http://a@b@c/ => user:a@b host:c
    // http://a@b?@c => user:a host:c path:/?@c

    // v0.12 TODO(isaacs): This is not quite how Chrome does things.
    // Review our test case against browsers more comprehensively.

    // find the first instance of any hostEndingChars
    var hostEnd = -1;
    for (var i = 0; i < hostEndingChars.length; i++) {
      var hec = rest.indexOf(hostEndingChars[i]);
      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))
        hostEnd = hec;
    }

    // at this point, either we have an explicit point where the
    // auth portion cannot go past, or the last @ char is the decider.
    var auth, atSign;
    if (hostEnd === -1) {
      // atSign can be anywhere.
      atSign = rest.lastIndexOf('@');
    } else {
      // atSign must be in auth portion.
      // http://a@b/c@d => host:b auth:a path:/c@d
      atSign = rest.lastIndexOf('@', hostEnd);
    }

    // Now we have a portion which is definitely the auth.
    // Pull that off.
    if (atSign !== -1) {
      auth = rest.slice(0, atSign);
      rest = rest.slice(atSign + 1);
      this.auth = decodeURIComponent(auth);
    }

    // the host is the remaining to the left of the first non-host char
    hostEnd = -1;
    for (var i = 0; i < nonHostChars.length; i++) {
      var hec = rest.indexOf(nonHostChars[i]);
      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))
        hostEnd = hec;
    }
    // if we still have not hit it, then the entire thing is a host.
    if (hostEnd === -1)
      hostEnd = rest.length;

    this.host = rest.slice(0, hostEnd);
    rest = rest.slice(hostEnd);

    // pull out port.
    this.parseHost();

    // we've indicated that there is a hostname,
    // so even if it's empty, it has to be present.
    this.hostname = this.hostname || '';

    // if hostname begins with [ and ends with ]
    // assume that it's an IPv6 address.
    var ipv6Hostname = this.hostname[0] === '[' &&
        this.hostname[this.hostname.length - 1] === ']';

    // validate a little.
    if (!ipv6Hostname) {
      var hostparts = this.hostname.split(/\./);
      for (var i = 0, l = hostparts.length; i < l; i++) {
        var part = hostparts[i];
        if (!part) continue;
        if (!part.match(hostnamePartPattern)) {
          var newpart = '';
          for (var j = 0, k = part.length; j < k; j++) {
            if (part.charCodeAt(j) > 127) {
              // we replace non-ASCII char with a temporary placeholder
              // we need this to make sure size of hostname is not
              // broken by replacing non-ASCII by nothing
              newpart += 'x';
            } else {
              newpart += part[j];
            }
          }
          // we test again with ASCII char only
          if (!newpart.match(hostnamePartPattern)) {
            var validParts = hostparts.slice(0, i);
            var notHost = hostparts.slice(i + 1);
            var bit = part.match(hostnamePartStart);
            if (bit) {
              validParts.push(bit[1]);
              notHost.unshift(bit[2]);
            }
            if (notHost.length) {
              rest = '/' + notHost.join('.') + rest;
            }
            this.hostname = validParts.join('.');
            break;
          }
        }
      }
    }

    if (this.hostname.length > hostnameMaxLen) {
      this.hostname = '';
    } else {
      // hostnames are always lower case.
      this.hostname = this.hostname.toLowerCase();
    }

    if (!ipv6Hostname) {
      // IDNA Support: Returns a punycoded representation of "domain".
      // It only converts parts of the domain name that
      // have non-ASCII characters, i.e. it doesn't matter if
      // you call it with a domain that already is ASCII-only.
      this.hostname = punycode.toASCII(this.hostname);
    }

    var p = this.port ? ':' + this.port : '';
    var h = this.hostname || '';
    this.host = h + p;
    this.href += this.host;

    // strip [ and ] from the hostname
    // the host field still retains them, though
    if (ipv6Hostname) {
      this.hostname = this.hostname.substr(1, this.hostname.length - 2);
      if (rest[0] !== '/') {
        rest = '/' + rest;
      }
    }
  }

  // now rest is set to the post-host stuff.
  // chop off any delim chars.
  if (!unsafeProtocol[lowerProto]) {

    // First, make 100% sure that any "autoEscape" chars get
    // escaped, even if encodeURIComponent doesn't think they
    // need to be.
    for (var i = 0, l = autoEscape.length; i < l; i++) {
      var ae = autoEscape[i];
      if (rest.indexOf(ae) === -1)
        continue;
      var esc = encodeURIComponent(ae);
      if (esc === ae) {
        esc = escape(ae);
      }
      rest = rest.split(ae).join(esc);
    }
  }


  // chop off from the tail first.
  var hash = rest.indexOf('#');
  if (hash !== -1) {
    // got a fragment string.
    this.hash = rest.substr(hash);
    rest = rest.slice(0, hash);
  }
  var qm = rest.indexOf('?');
  if (qm !== -1) {
    this.search = rest.substr(qm);
    this.query = rest.substr(qm + 1);
    if (parseQueryString) {
      this.query = querystring.parse(this.query);
    }
    rest = rest.slice(0, qm);
  } else if (parseQueryString) {
    // no query string, but parseQueryString still requested
    this.search = '';
    this.query = {};
  }
  if (rest) this.pathname = rest;
  if (slashedProtocol[lowerProto] &&
      this.hostname && !this.pathname) {
    this.pathname = '/';
  }

  //to support http.request
  if (this.pathname || this.search) {
    var p = this.pathname || '';
    var s = this.search || '';
    this.path = p + s;
  }

  // finally, reconstruct the href based on what has been validated.
  this.href = this.format();
  return this;
};

// format a parsed object into a url string
function urlFormat(obj) {
  // ensure it's an object, and not a string url.
  // If it's an obj, this is a no-op.
  // this way, you can call url_format() on strings
  // to clean up potentially wonky urls.
  if (util.isString(obj)) obj = urlParse(obj);
  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);
  return obj.format();
}

Url.prototype.format = function() {
  var auth = this.auth || '';
  if (auth) {
    auth = encodeURIComponent(auth);
    auth = auth.replace(/%3A/i, ':');
    auth += '@';
  }

  var protocol = this.protocol || '',
      pathname = this.pathname || '',
      hash = this.hash || '',
      host = false,
      query = '';

  if (this.host) {
    host = auth + this.host;
  } else if (this.hostname) {
    host = auth + (this.hostname.indexOf(':') === -1 ?
        this.hostname :
        '[' + this.hostname + ']');
    if (this.port) {
      host += ':' + this.port;
    }
  }

  if (this.query &&
      util.isObject(this.query) &&
      Object.keys(this.query).length) {
    query = querystring.stringify(this.query);
  }

  var search = this.search || (query && ('?' + query)) || '';

  if (protocol && protocol.substr(-1) !== ':') protocol += ':';

  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.
  // unless they had them to begin with.
  if (this.slashes ||
      (!protocol || slashedProtocol[protocol]) && host !== false) {
    host = '//' + (host || '');
    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;
  } else if (!host) {
    host = '';
  }

  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;
  if (search && search.charAt(0) !== '?') search = '?' + search;

  pathname = pathname.replace(/[?#]/g, function(match) {
    return encodeURIComponent(match);
  });
  search = search.replace('#', '%23');

  return protocol + host + pathname + search + hash;
};

function urlResolve(source, relative) {
  return urlParse(source, false, true).resolve(relative);
}

Url.prototype.resolve = function(relative) {
  return this.resolveObject(urlParse(relative, false, true)).format();
};

function urlResolveObject(source, relative) {
  if (!source) return relative;
  return urlParse(source, false, true).resolveObject(relative);
}

Url.prototype.resolveObject = function(relative) {
  if (util.isString(relative)) {
    var rel = new Url();
    rel.parse(relative, false, true);
    relative = rel;
  }

  var result = new Url();
  var tkeys = Object.keys(this);
  for (var tk = 0; tk < tkeys.length; tk++) {
    var tkey = tkeys[tk];
    result[tkey] = this[tkey];
  }

  // hash is always overridden, no matter what.
  // even href="" will remove it.
  result.hash = relative.hash;

  // if the relative url is empty, then there's nothing left to do here.
  if (relative.href === '') {
    result.href = result.format();
    return result;
  }

  // hrefs like //foo/bar always cut to the protocol.
  if (relative.slashes && !relative.protocol) {
    // take everything except the protocol from relative
    var rkeys = Object.keys(relative);
    for (var rk = 0; rk < rkeys.length; rk++) {
      var rkey = rkeys[rk];
      if (rkey !== 'protocol')
        result[rkey] = relative[rkey];
    }

    //urlParse appends trailing / to urls like http://www.example.com
    if (slashedProtocol[result.protocol] &&
        result.hostname && !result.pathname) {
      result.path = result.pathname = '/';
    }

    result.href = result.format();
    return result;
  }

  if (relative.protocol && relative.protocol !== result.protocol) {
    // if it's a known url protocol, then changing
    // the protocol does weird things
    // first, if it's not file:, then we MUST have a host,
    // and if there was a path
    // to begin with, then we MUST have a path.
    // if it is file:, then the host is dropped,
    // because that's known to be hostless.
    // anything else is assumed to be absolute.
    if (!slashedProtocol[relative.protocol]) {
      var keys = Object.keys(relative);
      for (var v = 0; v < keys.length; v++) {
        var k = keys[v];
        result[k] = relative[k];
      }
      result.href = result.format();
      return result;
    }

    result.protocol = relative.protocol;
    if (!relative.host && !hostlessProtocol[relative.protocol]) {
      var relPath = (relative.pathname || '').split('/');
      while (relPath.length && !(relative.host = relPath.shift()));
      if (!relative.host) relative.host = '';
      if (!relative.hostname) relative.hostname = '';
      if (relPath[0] !== '') relPath.unshift('');
      if (relPath.length < 2) relPath.unshift('');
      result.pathname = relPath.join('/');
    } else {
      result.pathname = relative.pathname;
    }
    result.search = relative.search;
    result.query = relative.query;
    result.host = relative.host || '';
    result.auth = relative.auth;
    result.hostname = relative.hostname || relative.host;
    result.port = relative.port;
    // to support http.request
    if (result.pathname || result.search) {
      var p = result.pathname || '';
      var s = result.search || '';
      result.path = p + s;
    }
    result.slashes = result.slashes || relative.slashes;
    result.href = result.format();
    return result;
  }

  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),
      isRelAbs = (
          relative.host ||
          relative.pathname && relative.pathname.charAt(0) === '/'
      ),
      mustEndAbs = (isRelAbs || isSourceAbs ||
                    (result.host && relative.pathname)),
      removeAllDots = mustEndAbs,
      srcPath = result.pathname && result.pathname.split('/') || [],
      relPath = relative.pathname && relative.pathname.split('/') || [],
      psychotic = result.protocol && !slashedProtocol[result.protocol];

  // if the url is a non-slashed url, then relative
  // links like ../.. should be able
  // to crawl up to the hostname, as well.  This is strange.
  // result.protocol has already been set by now.
  // Later on, put the first path part into the host field.
  if (psychotic) {
    result.hostname = '';
    result.port = null;
    if (result.host) {
      if (srcPath[0] === '') srcPath[0] = result.host;
      else srcPath.unshift(result.host);
    }
    result.host = '';
    if (relative.protocol) {
      relative.hostname = null;
      relative.port = null;
      if (relative.host) {
        if (relPath[0] === '') relPath[0] = relative.host;
        else relPath.unshift(relative.host);
      }
      relative.host = null;
    }
    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');
  }

  if (isRelAbs) {
    // it's absolute.
    result.host = (relative.host || relative.host === '') ?
                  relative.host : result.host;
    result.hostname = (relative.hostname || relative.hostname === '') ?
                      relative.hostname : result.hostname;
    result.search = relative.search;
    result.query = relative.query;
    srcPath = relPath;
    // fall through to the dot-handling below.
  } else if (relPath.length) {
    // it's relative
    // throw away the existing file, and take the new path instead.
    if (!srcPath) srcPath = [];
    srcPath.pop();
    srcPath = srcPath.concat(relPath);
    result.search = relative.search;
    result.query = relative.query;
  } else if (!util.isNullOrUndefined(relative.search)) {
    // just pull out the search.
    // like href='?foo'.
    // Put this after the other two cases because it simplifies the booleans
    if (psychotic) {
      result.hostname = result.host = srcPath.shift();
      //occationaly the auth can get stuck only in host
      //this especially happens in cases like
      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')
      var authInHost = result.host && result.host.indexOf('@') > 0 ?
                       result.host.split('@') : false;
      if (authInHost) {
        result.auth = authInHost.shift();
        result.host = result.hostname = authInHost.shift();
      }
    }
    result.search = relative.search;
    result.query = relative.query;
    //to support http.request
    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {
      result.path = (result.pathname ? result.pathname : '') +
                    (result.search ? result.search : '');
    }
    result.href = result.format();
    return result;
  }

  if (!srcPath.length) {
    // no path at all.  easy.
    // we've already handled the other stuff above.
    result.pathname = null;
    //to support http.request
    if (result.search) {
      result.path = '/' + result.search;
    } else {
      result.path = null;
    }
    result.href = result.format();
    return result;
  }

  // if a url ENDs in . or .., then it must get a trailing slash.
  // however, if it ends in anything else non-slashy,
  // then it must NOT get a trailing slash.
  var last = srcPath.slice(-1)[0];
  var hasTrailingSlash = (
      (result.host || relative.host || srcPath.length > 1) &&
      (last === '.' || last === '..') || last === '');

  // strip single dots, resolve double dots to parent dir
  // if the path tries to go above the root, `up` ends up > 0
  var up = 0;
  for (var i = srcPath.length; i >= 0; i--) {
    last = srcPath[i];
    if (last === '.') {
      srcPath.splice(i, 1);
    } else if (last === '..') {
      srcPath.splice(i, 1);
      up++;
    } else if (up) {
      srcPath.splice(i, 1);
      up--;
    }
  }

  // if the path is allowed to go above the root, restore leading ..s
  if (!mustEndAbs && !removeAllDots) {
    for (; up--; up) {
      srcPath.unshift('..');
    }
  }

  if (mustEndAbs && srcPath[0] !== '' &&
      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {
    srcPath.unshift('');
  }

  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {
    srcPath.push('');
  }

  var isAbsolute = srcPath[0] === '' ||
      (srcPath[0] && srcPath[0].charAt(0) === '/');

  // put the host back
  if (psychotic) {
    result.hostname = result.host = isAbsolute ? '' :
                                    srcPath.length ? srcPath.shift() : '';
    //occationaly the auth can get stuck only in host
    //this especially happens in cases like
    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')
    var authInHost = result.host && result.host.indexOf('@') > 0 ?
                     result.host.split('@') : false;
    if (authInHost) {
      result.auth = authInHost.shift();
      result.host = result.hostname = authInHost.shift();
    }
  }

  mustEndAbs = mustEndAbs || (result.host && srcPath.length);

  if (mustEndAbs && !isAbsolute) {
    srcPath.unshift('');
  }

  if (!srcPath.length) {
    result.pathname = null;
    result.path = null;
  } else {
    result.pathname = srcPath.join('/');
  }

  //to support request.http
  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {
    result.path = (result.pathname ? result.pathname : '') +
                  (result.search ? result.search : '');
  }
  result.auth = relative.auth || result.auth;
  result.slashes = result.slashes || relative.slashes;
  result.href = result.format();
  return result;
};

Url.prototype.parseHost = function() {
  var host = this.host;
  var port = portPattern.exec(host);
  if (port) {
    port = port[0];
    if (port !== ':') {
      this.port = port.substr(1);
    }
    host = host.substr(0, host.length - port.length);
  }
  if (host) this.hostname = host;
};


/***/ }),

/***/ "../../node_modules/url/util.js":
/*!******************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/url/util.js ***!
  \******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = {
  isString: function(arg) {
    return typeof(arg) === 'string';
  },
  isObject: function(arg) {
    return typeof(arg) === 'object' && arg !== null;
  },
  isNull: function(arg) {
    return arg === null;
  },
  isNullOrUndefined: function(arg) {
    return arg == null;
  }
};


/***/ }),

/***/ "../../node_modules/whatwg-fetch/fetch.js":
/*!****************************************************************************************************!*\
  !*** /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/whatwg-fetch/fetch.js ***!
  \****************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

(function(self) {
  'use strict';

  if (self.fetch) {
    return
  }

  var support = {
    searchParams: 'URLSearchParams' in self,
    iterable: 'Symbol' in self && 'iterator' in Symbol,
    blob: 'FileReader' in self && 'Blob' in self && (function() {
      try {
        new Blob()
        return true
      } catch(e) {
        return false
      }
    })(),
    formData: 'FormData' in self,
    arrayBuffer: 'ArrayBuffer' in self
  }

  if (support.arrayBuffer) {
    var viewClasses = [
      '[object Int8Array]',
      '[object Uint8Array]',
      '[object Uint8ClampedArray]',
      '[object Int16Array]',
      '[object Uint16Array]',
      '[object Int32Array]',
      '[object Uint32Array]',
      '[object Float32Array]',
      '[object Float64Array]'
    ]

    var isDataView = function(obj) {
      return obj && DataView.prototype.isPrototypeOf(obj)
    }

    var isArrayBufferView = ArrayBuffer.isView || function(obj) {
      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1
    }
  }

  function normalizeName(name) {
    if (typeof name !== 'string') {
      name = String(name)
    }
    if (/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(name)) {
      throw new TypeError('Invalid character in header field name')
    }
    return name.toLowerCase()
  }

  function normalizeValue(value) {
    if (typeof value !== 'string') {
      value = String(value)
    }
    return value
  }

  // Build a destructive iterator for the value list
  function iteratorFor(items) {
    var iterator = {
      next: function() {
        var value = items.shift()
        return {done: value === undefined, value: value}
      }
    }

    if (support.iterable) {
      iterator[Symbol.iterator] = function() {
        return iterator
      }
    }

    return iterator
  }

  function Headers(headers) {
    this.map = {}

    if (headers instanceof Headers) {
      headers.forEach(function(value, name) {
        this.append(name, value)
      }, this)
    } else if (Array.isArray(headers)) {
      headers.forEach(function(header) {
        this.append(header[0], header[1])
      }, this)
    } else if (headers) {
      Object.getOwnPropertyNames(headers).forEach(function(name) {
        this.append(name, headers[name])
      }, this)
    }
  }

  Headers.prototype.append = function(name, value) {
    name = normalizeName(name)
    value = normalizeValue(value)
    var oldValue = this.map[name]
    this.map[name] = oldValue ? oldValue+','+value : value
  }

  Headers.prototype['delete'] = function(name) {
    delete this.map[normalizeName(name)]
  }

  Headers.prototype.get = function(name) {
    name = normalizeName(name)
    return this.has(name) ? this.map[name] : null
  }

  Headers.prototype.has = function(name) {
    return this.map.hasOwnProperty(normalizeName(name))
  }

  Headers.prototype.set = function(name, value) {
    this.map[normalizeName(name)] = normalizeValue(value)
  }

  Headers.prototype.forEach = function(callback, thisArg) {
    for (var name in this.map) {
      if (this.map.hasOwnProperty(name)) {
        callback.call(thisArg, this.map[name], name, this)
      }
    }
  }

  Headers.prototype.keys = function() {
    var items = []
    this.forEach(function(value, name) { items.push(name) })
    return iteratorFor(items)
  }

  Headers.prototype.values = function() {
    var items = []
    this.forEach(function(value) { items.push(value) })
    return iteratorFor(items)
  }

  Headers.prototype.entries = function() {
    var items = []
    this.forEach(function(value, name) { items.push([name, value]) })
    return iteratorFor(items)
  }

  if (support.iterable) {
    Headers.prototype[Symbol.iterator] = Headers.prototype.entries
  }

  function consumed(body) {
    if (body.bodyUsed) {
      return Promise.reject(new TypeError('Already read'))
    }
    body.bodyUsed = true
  }

  function fileReaderReady(reader) {
    return new Promise(function(resolve, reject) {
      reader.onload = function() {
        resolve(reader.result)
      }
      reader.onerror = function() {
        reject(reader.error)
      }
    })
  }

  function readBlobAsArrayBuffer(blob) {
    var reader = new FileReader()
    var promise = fileReaderReady(reader)
    reader.readAsArrayBuffer(blob)
    return promise
  }

  function readBlobAsText(blob) {
    var reader = new FileReader()
    var promise = fileReaderReady(reader)
    reader.readAsText(blob)
    return promise
  }

  function readArrayBufferAsText(buf) {
    var view = new Uint8Array(buf)
    var chars = new Array(view.length)

    for (var i = 0; i < view.length; i++) {
      chars[i] = String.fromCharCode(view[i])
    }
    return chars.join('')
  }

  function bufferClone(buf) {
    if (buf.slice) {
      return buf.slice(0)
    } else {
      var view = new Uint8Array(buf.byteLength)
      view.set(new Uint8Array(buf))
      return view.buffer
    }
  }

  function Body() {
    this.bodyUsed = false

    this._initBody = function(body) {
      this._bodyInit = body
      if (!body) {
        this._bodyText = ''
      } else if (typeof body === 'string') {
        this._bodyText = body
      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {
        this._bodyBlob = body
      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {
        this._bodyFormData = body
      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {
        this._bodyText = body.toString()
      } else if (support.arrayBuffer && support.blob && isDataView(body)) {
        this._bodyArrayBuffer = bufferClone(body.buffer)
        // IE 10-11 can't handle a DataView body.
        this._bodyInit = new Blob([this._bodyArrayBuffer])
      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {
        this._bodyArrayBuffer = bufferClone(body)
      } else {
        throw new Error('unsupported BodyInit type')
      }

      if (!this.headers.get('content-type')) {
        if (typeof body === 'string') {
          this.headers.set('content-type', 'text/plain;charset=UTF-8')
        } else if (this._bodyBlob && this._bodyBlob.type) {
          this.headers.set('content-type', this._bodyBlob.type)
        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {
          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')
        }
      }
    }

    if (support.blob) {
      this.blob = function() {
        var rejected = consumed(this)
        if (rejected) {
          return rejected
        }

        if (this._bodyBlob) {
          return Promise.resolve(this._bodyBlob)
        } else if (this._bodyArrayBuffer) {
          return Promise.resolve(new Blob([this._bodyArrayBuffer]))
        } else if (this._bodyFormData) {
          throw new Error('could not read FormData body as blob')
        } else {
          return Promise.resolve(new Blob([this._bodyText]))
        }
      }

      this.arrayBuffer = function() {
        if (this._bodyArrayBuffer) {
          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)
        } else {
          return this.blob().then(readBlobAsArrayBuffer)
        }
      }
    }

    this.text = function() {
      var rejected = consumed(this)
      if (rejected) {
        return rejected
      }

      if (this._bodyBlob) {
        return readBlobAsText(this._bodyBlob)
      } else if (this._bodyArrayBuffer) {
        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))
      } else if (this._bodyFormData) {
        throw new Error('could not read FormData body as text')
      } else {
        return Promise.resolve(this._bodyText)
      }
    }

    if (support.formData) {
      this.formData = function() {
        return this.text().then(decode)
      }
    }

    this.json = function() {
      return this.text().then(JSON.parse)
    }

    return this
  }

  // HTTP methods whose capitalization should be normalized
  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']

  function normalizeMethod(method) {
    var upcased = method.toUpperCase()
    return (methods.indexOf(upcased) > -1) ? upcased : method
  }

  function Request(input, options) {
    options = options || {}
    var body = options.body

    if (input instanceof Request) {
      if (input.bodyUsed) {
        throw new TypeError('Already read')
      }
      this.url = input.url
      this.credentials = input.credentials
      if (!options.headers) {
        this.headers = new Headers(input.headers)
      }
      this.method = input.method
      this.mode = input.mode
      if (!body && input._bodyInit != null) {
        body = input._bodyInit
        input.bodyUsed = true
      }
    } else {
      this.url = String(input)
    }

    this.credentials = options.credentials || this.credentials || 'omit'
    if (options.headers || !this.headers) {
      this.headers = new Headers(options.headers)
    }
    this.method = normalizeMethod(options.method || this.method || 'GET')
    this.mode = options.mode || this.mode || null
    this.referrer = null

    if ((this.method === 'GET' || this.method === 'HEAD') && body) {
      throw new TypeError('Body not allowed for GET or HEAD requests')
    }
    this._initBody(body)
  }

  Request.prototype.clone = function() {
    return new Request(this, { body: this._bodyInit })
  }

  function decode(body) {
    var form = new FormData()
    body.trim().split('&').forEach(function(bytes) {
      if (bytes) {
        var split = bytes.split('=')
        var name = split.shift().replace(/\+/g, ' ')
        var value = split.join('=').replace(/\+/g, ' ')
        form.append(decodeURIComponent(name), decodeURIComponent(value))
      }
    })
    return form
  }

  function parseHeaders(rawHeaders) {
    var headers = new Headers()
    // Replace instances of \r\n and \n followed by at least one space or horizontal tab with a space
    // https://tools.ietf.org/html/rfc7230#section-3.2
    var preProcessedHeaders = rawHeaders.replace(/\r?\n[\t ]+/g, ' ')
    preProcessedHeaders.split(/\r?\n/).forEach(function(line) {
      var parts = line.split(':')
      var key = parts.shift().trim()
      if (key) {
        var value = parts.join(':').trim()
        headers.append(key, value)
      }
    })
    return headers
  }

  Body.call(Request.prototype)

  function Response(bodyInit, options) {
    if (!options) {
      options = {}
    }

    this.type = 'default'
    this.status = options.status === undefined ? 200 : options.status
    this.ok = this.status >= 200 && this.status < 300
    this.statusText = 'statusText' in options ? options.statusText : 'OK'
    this.headers = new Headers(options.headers)
    this.url = options.url || ''
    this._initBody(bodyInit)
  }

  Body.call(Response.prototype)

  Response.prototype.clone = function() {
    return new Response(this._bodyInit, {
      status: this.status,
      statusText: this.statusText,
      headers: new Headers(this.headers),
      url: this.url
    })
  }

  Response.error = function() {
    var response = new Response(null, {status: 0, statusText: ''})
    response.type = 'error'
    return response
  }

  var redirectStatuses = [301, 302, 303, 307, 308]

  Response.redirect = function(url, status) {
    if (redirectStatuses.indexOf(status) === -1) {
      throw new RangeError('Invalid status code')
    }

    return new Response(null, {status: status, headers: {location: url}})
  }

  self.Headers = Headers
  self.Request = Request
  self.Response = Response

  self.fetch = function(input, init) {
    return new Promise(function(resolve, reject) {
      var request = new Request(input, init)
      var xhr = new XMLHttpRequest()

      xhr.onload = function() {
        var options = {
          status: xhr.status,
          statusText: xhr.statusText,
          headers: parseHeaders(xhr.getAllResponseHeaders() || '')
        }
        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')
        var body = 'response' in xhr ? xhr.response : xhr.responseText
        resolve(new Response(body, options))
      }

      xhr.onerror = function() {
        reject(new TypeError('Network request failed'))
      }

      xhr.ontimeout = function() {
        reject(new TypeError('Network request failed'))
      }

      xhr.open(request.method, request.url, true)

      if (request.credentials === 'include') {
        xhr.withCredentials = true
      } else if (request.credentials === 'omit') {
        xhr.withCredentials = false
      }

      if ('responseType' in xhr && support.blob) {
        xhr.responseType = 'blob'
      }

      request.headers.forEach(function(value, name) {
        xhr.setRequestHeader(name, value)
      })

      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)
    })
  }
  self.fetch.polyfill = true
})(typeof self !== 'undefined' ? self : this);


/***/ }),

/***/ "./config/polyfills.js":
/*!*****************************!*\
  !*** ./config/polyfills.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Polyfills for URL() and URLSearchParams()
 * Also polyfill URL object if url.searchParams() is not supported
 *
 * @see https://developer.mozilla.org/en-US/docs/Web/API/URL/searchParams#Browser_compatibility
 */

if (typeof URL === 'undefined' || typeof URLSearchParams === 'undefined' || URL && !URL.prototype.hasOwnProperty('searchParams')) {
  __webpack_require__(/*! url-polyfill */ "../../node_modules/url-polyfill/url-polyfill.js");
} // Promise polyfill


if (typeof Promise === 'undefined') {
  __webpack_require__(/*! promise/lib/rejection-tracking */ "../../node_modules/promise/lib/rejection-tracking.js").enable();

  window.Promise = __webpack_require__(/*! promise/lib/es6-extensions.js */ "../../node_modules/promise/lib/es6-extensions.js");
} // fetch() polyfill for making API calls.


__webpack_require__(/*! whatwg-fetch */ "../../node_modules/whatwg-fetch/fetch.js"); // Object.assign() polyfill


__webpack_require__(/*! core-js/fn/object/assign */ "../../node_modules/core-js/fn/object/assign.js"); // .includes() method for string and array


__webpack_require__(/*! core-js/fn/string/includes */ "../../node_modules/core-js/fn/string/includes.js");

__webpack_require__(/*! core-js/fn/array/includes */ "../../node_modules/core-js/fn/array/includes.js"); // Polyfill for array destruction


__webpack_require__(/*! core-js/fn/array/from */ "../../node_modules/core-js/fn/array/from.js");

/***/ }),

/***/ "./lib/QGraph.js":
/*!***********************!*\
  !*** ./lib/QGraph.js ***!
  \***********************/
/*! exports provided: default, cookie */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread.js");
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js");
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toArray__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toArray */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toArray.js");
/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! component-emitter */ "../../node_modules/component-emitter/index.js");
/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(component_emitter__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var idb_keyval__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! idb-keyval */ "../../node_modules/idb-keyval/dist/idb-keyval.mjs");
/* harmony import */ var _third_party_ua_parser__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./third_party/ua-parser */ "./lib/third_party/ua-parser.js");
/* harmony import */ var _third_party_ua_parser__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_third_party_ua_parser__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _third_party_isPrivateMode__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./third_party/isPrivateMode */ "./lib/third_party/isPrivateMode.js");
/* harmony import */ var _web_push_initSimplePush__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./web_push/initSimplePush */ "./lib/web_push/initSimplePush.js");
/* harmony import */ var _web_push_registerServiceWorker__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./web_push/registerServiceWorker */ "./lib/web_push/registerServiceWorker.js");
/* harmony import */ var _web_push_shouldEnablePush__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./web_push/shouldEnablePush */ "./lib/web_push/shouldEnablePush.js");
/* harmony import */ var _web_push_loadManifest__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./web_push/loadManifest */ "./lib/web_push/loadManifest.js");
/* harmony import */ var _push_prompts_on_subscribed_popup__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./push_prompts/on_subscribed_popup */ "./lib/push_prompts/on_subscribed_popup/index.js");
/* harmony import */ var _push_prompts_overlay_prompt__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./push_prompts/overlay_prompt */ "./lib/push_prompts/overlay_prompt/index.js");
/* harmony import */ var _push_prompts_fake_prompt__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./push_prompts/fake_prompt */ "./lib/push_prompts/fake_prompt/index.js");
/* harmony import */ var _push_prompts_cym_prompt__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./push_prompts/cym_prompt */ "./lib/push_prompts/cym_prompt/index.js");
/* harmony import */ var _in_web_fetchInWebData__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./in_web/fetchInWebData */ "./lib/in_web/fetchInWebData.js");
/* harmony import */ var _in_web_triggerInWebCampaign__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./in_web/triggerInWebCampaign */ "./lib/in_web/triggerInWebCampaign.js");
/* harmony import */ var _in_web_exitIntentHandler__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./in_web/exitIntentHandler */ "./lib/in_web/exitIntentHandler.js");
/* harmony import */ var _in_web_scrollPercentHandler__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./in_web/scrollPercentHandler */ "./lib/in_web/scrollPercentHandler.js");
/* harmony import */ var _in_web_idleHandler__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./in_web/idleHandler */ "./lib/in_web/idleHandler.js");
/* harmony import */ var _recommendation__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./recommendation */ "./lib/recommendation/index.js");
/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./utils/log */ "./lib/utils/log.js");
/* harmony import */ var _utils_cookie__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./utils/cookie */ "./lib/utils/cookie.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "cookie", function() { return _utils_cookie__WEBPACK_IMPORTED_MODULE_24__["default"]; });

/* harmony import */ var _utils_attribution__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./utils/attribution */ "./lib/utils/attribution.js");
/* harmony import */ var _utils_dates__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./utils/dates */ "./lib/utils/dates.js");
/* harmony import */ var _utils_parseUtmParams__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./utils/parseUtmParams */ "./lib/utils/parseUtmParams.js");
/* harmony import */ var _utils_makeRequest__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./utils/makeRequest */ "./lib/utils/makeRequest.js");
/* harmony import */ var _utils_first_time__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./utils/first_time */ "./lib/utils/first_time.js");
/* harmony import */ var _utils_user_id__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./utils/user_id */ "./lib/utils/user_id.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./constants */ "./lib/constants.js");








 // Web Push modules




 // Push Prompts modules




 // In-Web modules





 // Recommendation modules

 // Utilities










var uaParser = Object(_third_party_ua_parser__WEBPACK_IMPORTED_MODULE_7__["UAParser"])();
var QG_DATA_SETTINGS = 'qgdatasettings';
var IS_SAFARI_BROWSER = uaParser.browser.name.toLowerCase().includes('safari');
component_emitter__WEBPACK_IMPORTED_MODULE_5___default()(QG.prototype);
var constants = {
  identified: 'identified',
  qg_identified: '_qg_identified',
  gcm_sender_id: 'qg_gcm_sender_id',
  PUSH_REQUEST: '_qg_pushrequest',
  CYMP: '_qg_cymp',
  QG_DATA_NAME: 'qg_data',
  // Only used for legacy API endpoint
  QG_QAID: '_qg_qaid',
  QG_APPIER_CM_FLAG: '_qg_cm'
};

function QG() {
  this._settings = {};
  this.initialized = false;
  this.headers = {
    'Content-Type': 'application/json',
    'Package-Name': window.location.hostname
  };
}

QG.prototype.callmethod = function (args) {
  var _this = this;

  if (!(args && args.length > 0)) {
    return;
  }

  var _args = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toArray__WEBPACK_IMPORTED_MODULE_4__["default"])(args),
      method = _args[0],
      params = _args.slice(1);

  var appId = this._settings.appId;

  switch (method) {
    case 'init':
      return this.init(args[1]);

    case 'prompt-push':
      return this.promptPush();

    case 'message-received':
      return this.messageReceived(args[1]);

    case 'identify':
      return this.identify(args[1]);

    case 'event':
      {
        this.events.apply(this, Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_3__["default"])(params));
        break;
      }

    case 'qgEvent':
      {
        this.qgEvents.apply(this, Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_3__["default"])(params));
        break;
      }

    case 'getRecommendation':
      {
        Object(_recommendation__WEBPACK_IMPORTED_MODULE_22__["getRecommendationWithApp"])(appId).apply(void 0, Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_3__["default"])(params));
        break;
      }

    case 'showRecommendation':
      {
        Object(_recommendation__WEBPACK_IMPORTED_MODULE_22__["showRecommendationWithApp"])(appId).apply(void 0, Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_3__["default"])(params));
        break;
      }

    case 'closeOnSubscribedPopup':
      {
        Object(_push_prompts_on_subscribed_popup__WEBPACK_IMPORTED_MODULE_13__["closeOnSubscribedPopup"])(function () {
          _this.emit(_push_prompts_on_subscribed_popup__WEBPACK_IMPORTED_MODULE_13__["POPUP_CLOSED_EVENT"]);
        });
        break;
      }

    /**
     * Delegate handlers of event emitter
     */

    case 'on':
    case 'once':
    case 'off':
      {
        this[method].apply(this, Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_3__["default"])(params));
        break;
      }
    // Turn on debug mode

    case 'debug':
      {
        _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].enableAll();
        break;
      }

    case 'getAttribution':
      {
        Object(_utils_attribution__WEBPACK_IMPORTED_MODULE_25__["getAttribution"])().then(args[1]);
        break;
      }

    case 'navigateWithAttribution':
      {
        var urlStrWithIdentified = setUrlParamsWithIdentified(args[1]);
        Object(_utils_attribution__WEBPACK_IMPORTED_MODULE_25__["navigateWithAttribution"])(urlStrWithIdentified);
        break;
      }

    default:
      _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].error('undefined method', method);
  }
};

function updateDataSettings(key, value) {
  var d = localStorage.getItem(QG_DATA_SETTINGS);

  try {
    d = JSON.parse(d) || {};
  } catch (err) {
    d = {};
    _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].debug(err);
  }

  d[key] = value;
  localStorage.setItem(QG_DATA_SETTINGS, JSON.stringify(d));
}
/**
 * Cookie sync for Appier. (Only for legacy API endpoint)
 * The safari browser does NOT support cookie sync currently(intelligent tracking prevention)
 * So we don't implement cookie sync in safari.js in this stage.
 *
 * #TODO: Remove it until all users migrate to the appier dback.
 */


function appierCookieSync(qg) {
  if (_utils_cookie__WEBPACK_IMPORTED_MODULE_24__["default"].getJSON(constants.QG_APPIER_CM_FLAG)) {
    return;
  }
  /* disable cookie matching in 1 hr */


  _utils_cookie__WEBPACK_IMPORTED_MODULE_24__["default"].exSet(constants.QG_APPIER_CM_FLAG, 1, {
    maxage: 3600 * 1000
  });
  /**
   * POST method with http 302 redirection may cause undefined behavior
   * https://zh.wikipedia.org/wiki/HTTP_302
   * https://zh.wikipedia.org/wiki/HTTP_307
   */

  Object(_utils_makeRequest__WEBPACK_IMPORTED_MODULE_28__["default"])({
    url: "".concat("https://dback.new-infra.staging-api.qgraph.io" || '', "/web/cm/"),
    method: 'GET'
  }).then(function (_ref) {
    var json = _ref.json;
    _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].debug('Ran Appier cookie sync', json);

    var _ref2 = json || {},
        qaid = _ref2.qaid;

    if (qaid) {
      qg._sendDataToServer({
        profiles: {
          qg_qaid: qaid
        }
      }).then(function () {
        /* Cookie sync at most one time each two weeks. */
        _utils_cookie__WEBPACK_IMPORTED_MODULE_24__["default"].exSet(constants.QG_APPIER_CM_FLAG, 1, {
          maxage: 86400 * 14 * 1000
        });
        _utils_cookie__WEBPACK_IMPORTED_MODULE_24__["default"].exSet(constants.QG_QAID, qaid, {
          maxage: 31536000000
        }); // 1 year
      })["catch"](function (err) {
        _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].error('Failed to save Appier cookie sync', err);
      });
    }
  })["catch"](function (err) {
    _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].error('Failed to run Appier cookie sync', err);
  });
}
/**
 * Set `aiq_identified` in url's search params
 *
 * @param {String} urlStr
 * @returns {String}
 */


function setUrlParamsWithIdentified(urlStr) {
  try {
    var url = new URL(urlStr);
    var qgDataSettings = JSON.parse(localStorage.getItem(QG_DATA_SETTINGS) || '{}');

    if (_utils_cookie__WEBPACK_IMPORTED_MODULE_24__["default"].getJSON(constants.qg_identified) || qgDataSettings[constants.identified]) {
      url.searchParams.set(_constants__WEBPACK_IMPORTED_MODULE_31__["SEARCH_PARAMS_IDENTIFIED_KEY"], true);
    }

    return url.toString();
  } catch (err) {
    _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].error('Set url params error', err);
  }
}
/**
 * Send data to server
 *
 * @param {Url} endpoint
 * @param {JSON} data
 * @param {boolean|undefined} runInSync
 * @returns {Promise|void}
 */


QG.prototype._sendDataToServer =
/*#__PURE__*/
function () {
  var _ref3 = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["default"])(
  /*#__PURE__*/
  _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee(data, runInSync) {
    var apiHost, requestOpts;
    return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            data.wUserId = Object(_utils_user_id__WEBPACK_IMPORTED_MODULE_30__["getWUserId"])();
            data.device = 'web';
            data.cv = '1.9.0';

            if (!(data && Array.isArray(data.events))) {
              _context.next = 7;
              break;
            }

            _context.next = 6;
            return Object(_utils_attribution__WEBPACK_IMPORTED_MODULE_25__["composeAttributionEvents"])(data.events);

          case 6:
            data.events = _context.sent;

          case 7:
            apiHost = this._settings.useLegacyAPI ? "https://dback.new-infra.staging-api.qgraph.io" : "https://dback.new-infra.staging-api.qgraph.io";
            requestOpts = {
              url: "".concat(apiHost, "/web/").concat(this._settings.appId, "/data/"),
              method: 'POST',
              headers: this.headers,
              data: data
            };
            _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].debug('Send data to server', data);
            return _context.abrupt("return", Object(_utils_makeRequest__WEBPACK_IMPORTED_MODULE_28__["default"])(requestOpts, runInSync));

          case 11:
          case "end":
            return _context.stop();
        }
      }
    }, _callee, this);
  }));

  return function (_x, _x2) {
    return _ref3.apply(this, arguments);
  };
}();
/**
 * Send data to server in batch
 */


QG.prototype.batch = function () {
  var d = this.data;

  if (d.events.length === 0 && Object.keys(d.profiles).length === 0) {
    return;
  }

  if (d.events.length === 0) {
    delete d.events;
  }

  if (Object.keys(d.profiles).length === 0) {
    delete d.profiles;
  }

  this.data = {
    profiles: {},
    events: []
  };

  this._sendDataToServer(d).then(function (data) {
    _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].debug(data);
    localStorage.removeItem(constants.QG_DATA_NAME);
  });
};
/**
 * Send data immediately before page unload
 */


QG.prototype.unloadFlush =
/*#__PURE__*/
Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["default"])(
/*#__PURE__*/
_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee2() {
  var d, apiHost;
  return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee2$(_context2) {
    while (1) {
      switch (_context2.prev = _context2.next) {
        case 0:
          d = this.data;

          if (!(d.events.length === 0 && Object.keys(d.profiles).length === 0)) {
            _context2.next = 3;
            break;
          }

          return _context2.abrupt("return");

        case 3:
          if (d.events.length === 0) {
            delete d.events;
          }

          if (Object.keys(d.profiles).length === 0) {
            delete d.profiles;
          }

          this.data = {
            profiles: {},
            events: []
          }; // Schedule a non-blocking request to flush all the data in background

          if (!(navigator && navigator.sendBeacon)) {
            _context2.next = 18;
            break;
          }

          d.wUserId = Object(_utils_user_id__WEBPACK_IMPORTED_MODULE_30__["getWUserId"])();
          d.device = 'web';
          d.cv = '1.9.0';

          if (!(d && Array.isArray(d.events))) {
            _context2.next = 14;
            break;
          }

          _context2.next = 13;
          return Object(_utils_attribution__WEBPACK_IMPORTED_MODULE_25__["composeAttributionEvents"])(d.events);

        case 13:
          d.events = _context2.sent;

        case 14:
          apiHost = this._settings.useLegacyAPI ? "https://dback.new-infra.staging-api.qgraph.io" : "https://dback.new-infra.staging-api.qgraph.io";
          navigator.sendBeacon("".concat(apiHost, "/web/").concat(this._settings.appId, "/data/"), JSON.stringify(d));
          _context2.next = 19;
          break;

        case 18:
          // Use synchronous xhr if `sendBeacon` API is not supported in client's browser
          this._sendDataToServer(d, true);

        case 19:
          localStorage.removeItem(constants.QG_DATA_NAME);

        case 20:
        case "end":
          return _context2.stop();
      }
    }
  }, _callee2, this);
}));
/**
 * Compose and collect event if current user is identified
 */

QG.prototype.events = function (eventName, parameters, vts) {
  if (!this.identified) {
    return;
  }

  this.qgEvents(eventName, parameters, vts);
};
/**
 * Compose the event object and put it into queue
 */


QG.prototype.qgEvents = function (eventName, parameters, vts) {
  if (!eventName) {
    _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].warn('should contain event name in first parameter');
    return;
  }

  var e = {
    eventName: eventName,
    qgts: parseInt(new Date().getTime() / 1000)
  };

  if (parameters) {
    e.parameters = parameters;
  } // TODO: Add an unit test for numeric validation


  if (vts && !isNaN(parseFloat(vts)) && isFinite(vts)) {
    e.vts = parseFloat(vts);
  }

  this.data.events.push(e);
  localStorage.setItem(constants.QG_DATA_NAME, JSON.stringify(this.data)); // Trigger InWeb campaign

  if (this._settings.inWebEnabled) {
    Object(_in_web_triggerInWebCampaign__WEBPACK_IMPORTED_MODULE_18__["default"])(e, this._settings.appId);
  }
};

QG.prototype.identify = function (json) {
  if (json.hasOwnProperty('email')) {
    updateDataSettings(constants.identified, true);
    _utils_cookie__WEBPACK_IMPORTED_MODULE_24__["default"].exSet(constants.qg_identified, true);
    this.identified = true;
  } else {
    if (!this.identified) {
      return;
    }
  }

  for (var key in json) {
    this.data.profiles[key] = json[key];
  }

  localStorage.setItem(constants.QG_DATA_NAME, JSON.stringify(this.data));
};

function sendSubscriptionStatus(self, permission, subscription) {
  var profiles = {};
  profiles.permission = permission;

  if (subscription) {
    profiles.subscription = subscription;

    var _k = subscription.endpoint.split('/');

    profiles.gcmId = _k[_k.length - 1];
    profiles.identified = true;
    self.identified = true;
  } else {
    profiles.subscription = '';
    profiles.gcmId = '';
  }

  var data = localStorage.getItem(QG_DATA_SETTINGS);

  try {
    data = JSON.parse(data) || {};
  } catch (err) {
    data = {};
    _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].error('Invalid profile data', err);
  }

  var sendDataToServer = false;

  for (var _k2 in profiles) {
    if (typeof profiles[_k2] === typeof {}) {
      if (JSON.stringify(profiles[_k2]) !== JSON.stringify(data[_k2])) {
        sendDataToServer = true;
      }
    } else if (profiles[_k2] !== data[_k2]) {
      sendDataToServer = true;
    }

    data[_k2] = profiles[_k2];
  }

  if (sendDataToServer) {
    var d = localStorage.getItem(QG_DATA_SETTINGS);

    try {
      d = JSON.parse(d) || {};
    } catch (err) {
      d = {};
      _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].debug(err);
    }

    for (var k in profiles) {
      d[k] = profiles[k];
    }

    localStorage.setItem(QG_DATA_SETTINGS, JSON.stringify(d)); // Send `subscribed_to_webpush` event if user granted push permission

    if (permission === 'granted') {
      var paramaters = {
        url: window.location.href
      };

      if (window.document.referrer) {
        paramaters.referrer = window.document.referrer;
      }

      _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].info('Sending "subscribed_to_webpush" event...', paramaters);
      self.events('subscribed_to_webpush', paramaters);
    }

    _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].debug('Sending push subscription status', permission, subscription);

    self._sendDataToServer({
      profiles: profiles
    });
  }
}

var isPushServiceSubscribed = false;
/**
 * Subscribe to a push service through registered service worker
 */

function subscribeSWPush(_x3) {
  return _subscribeSWPush.apply(this, arguments);
}

function _subscribeSWPush() {
  _subscribeSWPush = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["default"])(
  /*#__PURE__*/
  _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee4(self) {
    var assetsRoot, swUrl, swRegistration, currentPermissionState, pushSubscription, newPermissionState, currentDate;
    return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee4$(_context4) {
      while (1) {
        switch (_context4.prev = _context4.next) {
          case 0:
            if ('serviceWorker' in navigator) {
              _context4.next = 3;
              break;
            }

            _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].debug('serviceWorker not supported');
            return _context4.abrupt("return");

          case 3:
            _context4.prev = 3;
            assetsRoot = (window.QGSettings.assetsRoot || '/').replace(/^\/*/, '/').replace(/$|\/+$/, '/'); // Ensure leading and trailing slash in path

            swUrl = "".concat(assetsRoot, "qg-sw.").concat(window.QGSettings.appId, ".js"); // Register new or get the cached service worker

            _context4.next = 8;
            return Object(_web_push_registerServiceWorker__WEBPACK_IMPORTED_MODULE_10__["default"])(swUrl, // Register the service worker at another scope to prevent scope collision.
            "".concat(assetsRoot).concat(_constants__WEBPACK_IMPORTED_MODULE_31__["DEFAULT_SW_SCOPE"]));

          case 8:
            swRegistration = _context4.sent;

            if (!(isPushServiceSubscribed || !swRegistration || !('Notification' in window) || 'sw' in window.QGSettings && !window.QGSettings.sw)) {
              _context4.next = 11;
              break;
            }

            return _context4.abrupt("return");

          case 11:
            isPushServiceSubscribed = true; // Avoid resubscribing

            currentPermissionState = Notification.permission;
            _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].debug('Subscribing push service...', currentPermissionState); // Show overlay before asking push permission

            if (currentPermissionState === 'default') {
              Object(_push_prompts_overlay_prompt__WEBPACK_IMPORTED_MODULE_14__["openOverlayPrompt"])(self._settings.push.overlay);
            } // Subscribe push service on service worker registration


            _context4.next = 17;
            return swRegistration.pushManager.subscribe({
              userVisibleOnly: true
            });

          case 17:
            pushSubscription = _context4.sent;
            newPermissionState = Notification.permission;
            _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].debug('Subscribed push', newPermissionState, pushSubscription); // Show On-Subscribed Popup if user first granted the notification permission

            if (currentPermissionState !== 'granted' && newPermissionState === 'granted' && self._settings.push.onSubscribedPopup) {
              Object(_push_prompts_on_subscribed_popup__WEBPACK_IMPORTED_MODULE_13__["openOnSubscribedPopup"])(self._settings.push.onSubscribedPopup, {
                onPopupOpened: function onPopupOpened() {
                  self.emit(_push_prompts_on_subscribed_popup__WEBPACK_IMPORTED_MODULE_13__["POPUP_OPENED_EVENT"]);
                },
                onPopupClosed: function onPopupClosed() {
                  self.emit(_push_prompts_on_subscribed_popup__WEBPACK_IMPORTED_MODULE_13__["POPUP_CLOSED_EVENT"]);
                }
              });
            } // Send subscription result to dback


            sendSubscriptionStatus(self, newPermissionState, pushSubscription.toJSON()); // Close overlay

            Object(_push_prompts_overlay_prompt__WEBPACK_IMPORTED_MODULE_14__["closeOverlayPrompt"])(); // Set timeout to ask next permission

            _utils_cookie__WEBPACK_IMPORTED_MODULE_24__["default"].exSet(constants.PUSH_REQUEST, true, {
              maxage: (self._settings.push.secondsBetweenPrompts || 3600) * 1000
            });
            _context4.next = 29;
            break;

          case 26:
            _context4.prev = 26;
            _context4.t0 = _context4["catch"](3);

            // Permission denied or ignored
            if (_context4.t0 instanceof DOMException && _context4.t0.name === 'NotAllowedError') {
              _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].debug('Denied or ignored push permission'); // Send subscription result to dback

              sendSubscriptionStatus(self, Notification.permission); // Close overlay

              Object(_push_prompts_overlay_prompt__WEBPACK_IMPORTED_MODULE_14__["closeOverlayPrompt"])(); // Set timeout to ask next permission

              _utils_cookie__WEBPACK_IMPORTED_MODULE_24__["default"].exSet(constants.PUSH_REQUEST, true, {
                maxage: (self._settings.push.secondsBetweenPrompts || 3600) * 1000
              }); // Set timeout to show next CYMP

              currentDate = new Date();
              currentDate.setHours(0, 0, 0, 0); // 12:00am

              Object(idb_keyval__WEBPACK_IMPORTED_MODULE_6__["set"])(_constants__WEBPACK_IMPORTED_MODULE_31__["IDB_PUSH_DENIED_TIMESTAMP"], +currentDate);
            } else {
              _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].error('Failed to register service worker', _context4.t0);
            }

          case 29:
          case "end":
            return _context4.stop();
        }
      }
    }, _callee4, null, [[3, 26]]);
  }));
  return _subscribeSWPush.apply(this, arguments);
}

QG.prototype.messageReceived = function (data) {
  var d = data || {};

  if (d.src !== 'QG') {
    return;
  }

  _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].debug('messageReceived', data);

  if (d.cmd === 'pushStatus') {
    if (d.status === 'granted' && d.sts) {
      if (d.subscription) {
        sendSubscriptionStatus(this, 'granted', d.subscription);
      }
    } else if (d.status === 'granted' && !d.sts) {
      if (d.subscription) {
        sendSubscriptionStatus(this, 'granted', d.subscription);
      } else {
        sendSubscriptionStatus(this, 'granted');
      }

      this.popSecFakePrompt();
    } else if (d.status === 'default') {
      if (this._settings.push.fakePrompt) {
        this.showFakePrompt();
      } else {
        interestedInPush(this);
      }
    } else if (d.status === 'denied') {
      sendSubscriptionStatus(this, 'denied');
    }
  } else if (d.cmd === 'reqPushPerm') {
    if (d.status === 'granted') {
      this.popSecFakePrompt();
    } else {
      console.log('permission denied by user');
    }

    Object(_push_prompts_overlay_prompt__WEBPACK_IMPORTED_MODULE_14__["closeOverlayPrompt"])();
    var secondsBetweenPrompts = (this._settings.push.secondsBetweenPrompts || 3600) * 1000;
    _utils_cookie__WEBPACK_IMPORTED_MODULE_24__["default"].exSet(constants.PUSH_REQUEST, true, {
      maxage: secondsBetweenPrompts
    });
  } else if (d.cmd === 'ready') {
    if (d.permission === 'granted') {
      _utils_cookie__WEBPACK_IMPORTED_MODULE_24__["default"].exSet(constants.qg_identified, true);
      this.identified = data.identified;
      _utils_cookie__WEBPACK_IMPORTED_MODULE_24__["default"].remove(constants.PUSH_REQUEST);
    }

    this._settings.push.ready = true;

    if (this._settings.push.delay) {
      var qg = this;
      window.setTimeout(function () {
        initAdvancedPush(qg);
      }, qg._settings.push.delay * 1000);
    } else {
      initAdvancedPush(this);
    }
  }
};

function interestedInPush(self) {
  var secondsBetweenPrompts = (self._settings.push.secondsBetweenPrompts || 3600) * 1000;
  _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].debug('interestedInPush', 'window.location.protocol', window.location.protocol);
  Object(_push_prompts_fake_prompt__WEBPACK_IMPORTED_MODULE_15__["closeFakePrompt"])(function () {
    _utils_cookie__WEBPACK_IMPORTED_MODULE_24__["default"].exSet(constants.PUSH_REQUEST, true, {
      maxage: secondsBetweenPrompts
    });
  });

  if (window.location.protocol === 'https:') {
    subscribeSWPush(self);
  } else {
    Object(_push_prompts_overlay_prompt__WEBPACK_IMPORTED_MODULE_14__["openOverlayPrompt"])(self._settings.push.overlay);
    var frame = document.getElementById('QGA');
    var s = {
      settings: self._settings,
      cmd: 'reqPushPerm',
      src: 'QG'
    };
    frame.contentWindow.postMessage(s, '*');
  }
}

var popupAlign = function popupAlign(alignment) {
  var dim = 'height=' + String('1px');
  dim = dim + ',width=' + String('1px');

  if (alignment) {
    var avHt = window.screen.availHeight;
    var avWt = window.screen.availWidth;

    if (alignment.indexOf('top') > -1) {
      dim = dim + ',top=1px';
    } else if (alignment.indexOf('bottom') > -1) {
      dim = dim + ',top=' + avHt + 'px';
    } else if (alignment.indexOf('center') > -1) {
      var top = avHt / 2 - 45;
      var left = avWt / 2;
      dim = dim + ',top=' + top + ',left=' + left;
    }

    if (alignment.indexOf('left') > -1) {
      dim = dim + ',left=1px';
    }

    if (alignment.indexOf('right') > -1) {
      dim = dim + ',left=' + avWt + 'px';
    }
  } else {
    dim = dim + ',top=2000,left=0';
  }

  return dim;
};

function openPushWindow(self) {
  var e = self._settings.qgendpoint;
  var alignment = self._settings.push.popupAlignment;
  var dim = popupAlign(alignment);
  var landingUrl;

  if (e.startsWith('https:')) {
    landingUrl = window.QGSettings.qgendpoint + '?appId=' + self._settings.appId + '&subscribe=true&userId=' + Object(_utils_user_id__WEBPACK_IMPORTED_MODULE_30__["getWUserId"])();
  } else {
    landingUrl = 'https://' + self._settings.qgendpoint + '.qgr.ph?appId=' + self._settings.appId + '&subscribe=true&userId=' + Object(_utils_user_id__WEBPACK_IMPORTED_MODULE_30__["getWUserId"])();
  }

  var qgraphSecFakePrompt = document.getElementById('qgraphSecFakePrompt');

  if (qgraphSecFakePrompt) {
    qgraphSecFakePrompt.setAttribute('style', 'display:none');
  }

  window.open(landingUrl, '_blank', dim);
}

QG.prototype.popSecFakePrompt = function () {
  if (this.poppedSecFakePrompt) {
    return;
  } else {
    this.poppedSecFakePrompt = true;
  }

  var qgraphCss = document.getElementById('qgraph-css');

  if (!qgraphCss) {
    var sheet = document.createElement('style');
    sheet.id = 'qgraph-css';

    if (uaParser.device.type === 'mobile' || uaParser.device.type === 'tablet') {
      sheet.innerHTML = '.chromePushDv { background-color: #ffffff; line-height: 1; font-size: 16px; font-family: sans-serif; color: #000000; width: 100%; background: #fff; position: fixed; z-index: 2147483000; bottom: 0px; left: 0; right: 0; padding: 10px 10px; box-sizing: border-box; border: 1px solid #efebeb; box-shadow: 0 -3px 6px #a9a1a1; -webkit-box-shadow: 0 -3px 6px #c5c2c2 } .chromePushDv div { opacity: 1; font: inherit; } .chromePushDv span { display: inline-block } .chromePushDv p { font: inherit; margin-top: 4px; margin-left: 8px; opacity: 0.4; margin-right: 30px } .chromePushDv p .allowPush { background-color: #D6E6FD; color: #4285F4; padding: 2px 4px; font: inherit; } .chromePushDv .pushMsg { margin-left: 8px; opacity: 0.8; font: inherit; } .chromePushDv .btnsCont { display: block; font: inherit; font-size: 13px; margin: 15px 0 0 0; } .chromePushDv .btnsCont .powered { opacity: 0.4; font: inherit; margin-top: 20px; margin-left: 8px } .chromePushDv .btnsCont .showPush { float: right; font: inherit; background: #4285F4; padding: 10px 20PX 10px 20PX; position: relative; box-sizing: border-box; color: #ffffff; transition: 1s ease-in; opacity: 0; right: 8px; } .chromePushDv .btnsCont .solidBtn { font-weight: bold; opacity: 1; font: inherit; cursor: pointer } .chromePushDv .pushmodalClose { position: absolute; top: 8px; font: inherit; right: 16px; cursor: pointer; }';
    } else {
      sheet.innerHTML = '.chromePushDv { background-color: #ffffff; line-height: 1; font-size: 16px; color: #000000; top: 0; font-family: sans-serif; width: 30%; left: 10%; right: 60%; background: #fff; position: fixed; z-index: 2147483000; margin 0 auto; padding: 10px 10px; box-sizing: border-box; border: 1px solid #efebeb; box-shadow: 0 -3px 6px #a9a1a1; -webkit-box-shadow: 0 3px 6px #c5c2c2 } .chromePushDv div { font: inherit; opacity: 1 } .chromePushDv span { font: inherit; display: inline-block } .chromePushDv p { font: inherit; margin-top: 4px; margin-left: 8px; opacity: 0.4; margin-right: 30px } .chromePushDv p .allowPush { font: inherit; background-color: #D6E6FD; color: #4285F4; padding: 2px 4px } .chromePushDv .pushMsg { font: inherit; margin-left: 8px; opacity: 0.8 } .chromePushDv .btnsCont { font: inherit; display: block; font-size: 13px; margin: 15px 0 0 0; } .chromePushDv .btnsCont .showPush { font: inherit; float: right; background: #4285F4; padding: 10px 20PX 10px 20PX; position: relative; box-sizing: border-box; color: #ffffff; transition: 1s ease-in; opacity: 0; right: 8px; } .chromePushDv .btnsCont .solidBtn { font: inherit; font-weight: bold; opacity: 1; cursor: pointer } .chromePushDv .btnsCont .powered { font: inherit; opacity: 0.4; margin-top: 20px; margin-left: 8px } .chromePushDv .pushmodalClose { font: inherit; position: absolute; top: 8px; right: 16px; cursor: pointer; }.qg-close-popup { position: fixed; text-rendering: optimizeLegibility; z-index: 0; top: 40%; left: 50%; background: transparent; transform: translate(-50%, -50%) scale(0.948148) translateZ(0px); zoom: 1; background-color: transparent !important; } .qg-popup-form { background-color: #f0f3f5 !important; border-radius: 5px; font-family: sans-serif !important; background: #f0f0f0; color: #444; margin: 0 auto; max-width: none; font-size: 1.1em; line-height: 1.5em; padding-bottom: 0px !important;padding-left: 1.5em !important;padding-right: 1.5em !important;padding-top: 1.5em !important; } .qg-popup-heading { color: #495259 !important; margin: 0 0 10px; font-size: 24px; font-weight: bold; text-align: center; box-sizing: border-box; } .qg-popup-text{ margin: 0; padding: 0; font-family: inherit; font-weight: normal; font-size: 16px; line-height: 1.6; margin-bottom: 20px; text-rendering: optimizeLegibility; text-transform: initial; direction: ltr; text-align: center; letter-spacing: normal; color:#495259 !important; } .qg-close-button{ cursor: pointer; font-family: sans-serif !important; font-weight: normal; line-height: normal; letter-spacing: normal; margin: 0 0 20px; position: relative; text-decoration: none; text-align: center; text-transform: uppercase; text-shadow: none; box-shadow: none; width: auto; height: auto; min-width: initial; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; outline: 0; display: inline-block; padding-top: 16px; padding-right: 32px; padding-bottom: 17px; padding-left: 32px; font-size: 16px; background: #0073b7 !important; border-top: none !important; border-left: none !important; border-right: none !important; border-bottom: none !important; -webkit-transition: background-color 1s; -moz-transition: background-color 1s; -o-transition: background-color 1s; transition: background-color 1s; padding-right: 0; padding-left: 0; width: 100%; -webkit-border-radius: 3px; border-radius: 3px; margin-bottom: 0; opacity: 1; float: initial; background:#0f74b5 !important; color:#ffffff !important; }';
    }
  }

  document.body.appendChild(sheet);
  var prompt = this._settings.push.thankYouPrompt || {};
  var isMobileDevice = uaParser.device.type === 'mobile' || uaParser.device.type === 'tablet';
  var title, textBox, message, powered, interestedBtn, btnsCont, container, body;

  if (prompt.center && !isMobileDevice) {
    title = document.createElement('div');
    title.className = 'qg-popup-heading';
    title.innerHTML = prompt.title || 'Thanks for subscribing.';
    textBox = document.createElement('div');
    textBox.appendChild(title);
    message = document.createElement('div');
    message.className = 'qg-popup-text';
    message.innerHTML = prompt.message || 'Click CLOSE button to finish subscription process.';
    powered = document.createElement('span');
    powered.className = 'powered';
    powered.innerHTML = 'Powered by QGraph';
    interestedBtn = document.createElement('button');
    interestedBtn.className = 'qg-close-button';
    interestedBtn.innerHTML = 'CLOSE';
    interestedBtn.onclick = openPushWindow.bind(null, this);
    btnsCont = document.createElement('div');
    btnsCont.className = 'btnsCont';
    powered.style = 'font-size:12px !important;';
    btnsCont.appendChild(interestedBtn);
    btnsCont.appendChild(powered);
    container = document.createElement('div');
    container.className = 'qg-popup-form qg-close-popup';
    container.appendChild(textBox);
    container.appendChild(message);
    container.appendChild(btnsCont);
    container.id = 'qgraphSecFakePrompt';
    body = document.getElementsByTagName('body');
    body = body[0];
    body.appendChild(container);
  } else {
    title = document.createElement('span');
    title.className = 'pushMsg';
    title.innerHTML = prompt.title || 'Thank you for subscribing';
    textBox = document.createElement('div');
    textBox.appendChild(title);
    message = document.createElement('p');
    message.innerHTML = prompt.message || 'Happy browsing';
    powered = document.createElement('span');
    powered.className = 'powered';
    powered.innerHTML = 'Powered by QGraph';
    interestedBtn = document.createElement('span');
    interestedBtn.className = 'showPush solidBtn';
    interestedBtn.innerHTML = 'CLOSE';
    interestedBtn.onclick = openPushWindow.bind(null, this);
    btnsCont = document.createElement('div');
    btnsCont.className = 'btnsCont';
    btnsCont.appendChild(powered);
    btnsCont.appendChild(interestedBtn);
    container = document.createElement('div');
    container.className = 'font15 chromePushDv';
    container.appendChild(textBox);
    container.appendChild(message);
    container.appendChild(btnsCont);
    container.id = 'qgraphSecFakePrompt';
    body = document.getElementsByTagName('body');
    body = body[0];
    body.appendChild(container);
  }
};

QG.prototype.showFakePrompt = function () {
  var _this2 = this;

  var _this$_settings$push = this._settings.push,
      push = _this$_settings$push === void 0 ? {} : _this$_settings$push;
  var secondsBetweenPrompts = (push.secondsBetweenPrompts || 3600) * 1000;
  Object(_push_prompts_fake_prompt__WEBPACK_IMPORTED_MODULE_15__["openFakePrompt"])(push.prompt, {
    onPromptClosed: function onPromptClosed() {
      _utils_cookie__WEBPACK_IMPORTED_MODULE_24__["default"].exSet(constants.PUSH_REQUEST, true, {
        maxage: secondsBetweenPrompts
      });
    },
    onPromptConfirmed: function onPromptConfirmed() {
      interestedInPush(_this2);
    }
  });
};

QG.prototype.promptPush = function () {
  // #TODO: push notification is not supported for safari browser
  if (IS_SAFARI_BROWSER) {
    _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].warn('Web push functions are not supported for safari yet');
    return;
  }

  if (!Object(_web_push_shouldEnablePush__WEBPACK_IMPORTED_MODULE_11__["default"])(this._settings)) {
    return;
  }

  if (window.location.protocol === 'https:') {
    if (Notification.permission === 'default' && 'serviceWorker' in navigator) {
      if (this._settings.push.fakePrompt) {
        this.showFakePrompt();
      } else {
        subscribeSWPush(this);
      }
    } else {
      interestedInPush(this);
    }
  } else if ('serviceWorker' in navigator) {
    if (this._settings.push.ready) {
      var frame = document.getElementById('QGA');
      var requestPushStatus = {
        settings: this._settings,
        cmd: 'pushStatus',
        src: 'QG'
      };
      frame.contentWindow.postMessage(requestPushStatus, '*');
    } else {
      this._settings.push.requested = true;
    }
  }
};
/**
 * Initialize web push integration in "advancde" or "manual" way
 *
 * #TODO: move to separate file
 */


function initAdvancedPush(self) {
  try {
    var qgSettings = self._settings; // Skip if current account is not enabling web push

    if (!Object(_web_push_shouldEnablePush__WEBPACK_IMPORTED_MODULE_11__["default"])(qgSettings)) {
      return;
    }

    _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].debug('Initializing advanced web push integration...'); // Append manifest.json

    if (qgSettings.manifest !== false) {
      Object(_web_push_loadManifest__WEBPACK_IMPORTED_MODULE_12__["default"])(qgSettings.assetsRoot);
    } // Subscribe push subscription


    if (Notification.permission !== 'default') {
      subscribeSWPush(self);
    } // Show prompt (native or fake) if user is not subscribed yet


    if (!qgSettings.push.requestSelf && _utils_cookie__WEBPACK_IMPORTED_MODULE_24__["default"].getJSON(constants.PUSH_REQUEST) === undefined) {
      self.promptPush();
    } // Show CYMP if user denied push permission


    if (qgSettings.push && qgSettings.push.cymp && window.Notification.permission === 'denied') {
      var cymp = qgSettings.push.cymp;
      Object(_third_party_isPrivateMode__WEBPACK_IMPORTED_MODULE_8__["default"])().then(
      /*#__PURE__*/
      function () {
        var _ref5 = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["default"])(
        /*#__PURE__*/
        _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee3(isPrivate) {
          var cympThreshold, hasCympAcked, pushDeniedTimestamp;
          return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee3$(_context3) {
            while (1) {
              switch (_context3.prev = _context3.next) {
                case 0:
                  // "threshold" is the number of days after which the user is shown the prompt
                  cympThreshold = +cymp.threshold || 0;
                  _context3.next = 3;
                  return Object(idb_keyval__WEBPACK_IMPORTED_MODULE_6__["get"])(_constants__WEBPACK_IMPORTED_MODULE_31__["IDB_CYMP_ACKED"]);

                case 3:
                  hasCympAcked = _context3.sent;
                  _context3.next = 6;
                  return Object(idb_keyval__WEBPACK_IMPORTED_MODULE_6__["get"])(_constants__WEBPACK_IMPORTED_MODULE_31__["IDB_PUSH_DENIED_TIMESTAMP"]);

                case 6:
                  pushDeniedTimestamp = _context3.sent;

                  if (!(isPrivate || hasCympAcked || (pushDeniedTimestamp && Object(_utils_dates__WEBPACK_IMPORTED_MODULE_26__["diffDatesInDays"])(new Date(pushDeniedTimestamp), new Date())) <= cympThreshold)) {
                    _context3.next = 9;
                    break;
                  }

                  return _context3.abrupt("return");

                case 9:
                  Object(_push_prompts_cym_prompt__WEBPACK_IMPORTED_MODULE_16__["openCymPrompt"])(cymp, {
                    onPromptOpened: function onPromptOpened() {
                      Object(idb_keyval__WEBPACK_IMPORTED_MODULE_6__["set"])(_constants__WEBPACK_IMPORTED_MODULE_31__["IDB_CYMP_ACKED"], true);
                    }
                  });

                case 10:
                case "end":
                  return _context3.stop();
              }
            }
          }, _callee3);
        }));

        return function (_x4) {
          return _ref5.apply(this, arguments);
        };
      }());
    }
  } catch (err) {
    _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].error('Advanced Push Integration', err);
  }
}
/**
 * Initialize web push, split the workflow to "simple" or "advanced"
 */


function initializeWebPush(self) {
  // #TODO: push notification is not supported for safari browser
  if (IS_SAFARI_BROWSER || !('Notification' in window) || !('serviceWorker' in navigator)) {
    return;
  }

  var _ref6 = self._settings.push || {},
      delay = _ref6.delay; // In seconds


  var delayTime = delay ? delay * 1000 : 0; // In milliseconds

  var initPush = function initPush() {
    // #TODO: Should determine the flow by flag in pixel settings,
    //        not only check the website protocol
    if (window.location.protocol === 'https:') {
      initAdvancedPush(self);
    } else if (window.location.protocol === 'http:') {
      Object(_web_push_initSimplePush__WEBPACK_IMPORTED_MODULE_9__["default"])(self._settings);
    }
  };

  if (delayTime > 0) {
    // Initialize web push function after delay
    setTimeout(initPush, delayTime);
  } else {
    initPush();
  }
}

QG.prototype.init = QG.prototype.initialize = function (settings) {
  var _this3 = this;

  if (this.initialized) {
    return;
  }

  _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].debug('Initializing sdk...');
  settings = settings || {};
  this.data = {
    events: [],
    profiles: {}
  };
  this._settings = settings;
  this.emit('initialize', settings); // Set first time cookie at beginning

  Object(_utils_first_time__WEBPACK_IMPORTED_MODULE_29__["setFirstTimeCookie"])(); // Set `wUserId` for first time user

  if (!Object(_utils_user_id__WEBPACK_IMPORTED_MODULE_30__["getWUserId"])()) {
    Object(_utils_user_id__WEBPACK_IMPORTED_MODULE_30__["setWUserId"])();
  }

  var self = this;

  if (_utils_cookie__WEBPACK_IMPORTED_MODULE_24__["default"].getJSON(constants.qg_identified) || settings.personalizationEnabled) {
    this.identified = true;
  } // Initialize web push function


  initializeWebPush(this);
  /* Initialize InWeb data and refresh every 1hr */

  if (this._settings.inWebEnabled) {
    var firstTimeCookie = Object(_utils_first_time__WEBPACK_IMPORTED_MODULE_29__["getFirstTimeCookie"])() || 0; // Keep flag in first 24hours when user first onboard

    var isFirstTimeUser = new Date() - firstTimeCookie < 86400000;
    Object(_in_web_fetchInWebData__WEBPACK_IMPORTED_MODULE_17__["default"])(this._settings.appId, this._settings.useLegacyAPI, isFirstTimeUser);
    setInterval(function () {
      Object(_in_web_fetchInWebData__WEBPACK_IMPORTED_MODULE_17__["default"])(_this3._settings.appId, _this3._settings.useLegacyAPI, undefined, true);
    }, _constants__WEBPACK_IMPORTED_MODULE_31__["INWEB_DATA_LIFETIME"]);
    Object(_in_web_exitIntentHandler__WEBPACK_IMPORTED_MODULE_19__["default"])(this._settings.appId);
    Object(_in_web_scrollPercentHandler__WEBPACK_IMPORTED_MODULE_20__["default"])(this._settings.appId);
    Object(_in_web_idleHandler__WEBPACK_IMPORTED_MODULE_21__["default"])(this._settings.appId);
  }

  var locationUrl = new URL(window.location); // Try to set attribution from query string

  Object(_utils_attribution__WEBPACK_IMPORTED_MODULE_25__["setAttributionViaUrl"])(locationUrl); // Check identified from url

  if (locationUrl.searchParams.get(_constants__WEBPACK_IMPORTED_MODULE_31__["SEARCH_PARAMS_IDENTIFIED_KEY"])) {
    updateDataSettings(constants.identified, true);
    _utils_cookie__WEBPACK_IMPORTED_MODULE_24__["default"].exSet(constants.qg_identified, true);
    this.identified = true;
  }

  this.initialized = true;
  /*
    To save time we have set identified as true when QGSettings.events,
    we need to send events irrespective of identification when
    QGSettings.events is true
    */

  if (this._settings.events) {
    this.identified = true;
  }

  var currentDate = new Date().toJSON().slice(0, 10);
  var e = {
    events: [],
    profiles: {}
  };
  var data = null; // Harness of JSON parse to prevent throwing error while processing
  // null data in some browsers or via polyfills.

  try {
    data = JSON.parse(localStorage.getItem(QG_DATA_SETTINGS));
  } catch (e) {}

  if (!data || data.lastSyncDate !== currentDate) {
    var visitedEvent = {
      eventName: 'visited',
      qgts: parseInt(new Date().getTime() / 1000),
      parameters: Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__["default"])({
        url: window.location.href
      }, Object(_utils_parseUtmParams__WEBPACK_IMPORTED_MODULE_27__["default"])(locationUrl))
    };
    e.events.push(visitedEvent); // Trigger InWeb campaign after `visited` event

    if (this._settings.inWebEnabled) {
      Object(_in_web_triggerInWebCampaign__WEBPACK_IMPORTED_MODULE_18__["default"])(visitedEvent, this._settings.appId);
    }

    if (uaParser.device) {
      e.profiles.qgDevice = uaParser.device;
    }

    if (uaParser.browser) {
      e.profiles.qgBrsr = uaParser.browser;
    }

    if (uaParser.os) {
      e.profiles.qgOS = uaParser.os;
    }

    var ga = _utils_cookie__WEBPACK_IMPORTED_MODULE_24__["default"].get('_ga');

    try {
      if (ga) {
        var k = ga.split('.');
        e.profiles.qg_ga = k[2] + '.' + k[3];
        e.profiles.qg_gats = parseInt(k[3]);
      }
    } catch (err) {
      _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].error('Failed to set GA profile', err);
    }

    if (data && (data.identified || data.subscribed)) {
      if (data.hasOwnProperty('subscription')) {
        e.profiles.subscription = data.subscription;
      }

      if (data.hasOwnProperty('gcmId')) {
        e.profiles.gcmId = data.gcmId;
      }

      if (data.hasOwnProperty('permission')) {
        e.profiles.permission = data.permission;
      }
    }
  }

  if (data && (data.identified || data.subscribed)) {
    _utils_cookie__WEBPACK_IMPORTED_MODULE_24__["default"].exSet(constants.qg_identified, true);
    self.identified = data.identified;
  } // Try to set profile if redirect from line ï¼† send click event at the same time


  var lineChannel = locationUrl.searchParams.get(_constants__WEBPACK_IMPORTED_MODULE_31__["SEARCH_PARAMS_LINECHANNEL"]);
  var lineUid = locationUrl.searchParams.get(_constants__WEBPACK_IMPORTED_MODULE_31__["SEARCH_PARAMS_LINEUID"]);

  if (lineChannel && lineUid) {
    this.identified = true;
    this.identify({
      line_channel_id: lineChannel,
      line_uid: lineUid
    });
    var clickEvent = {
      eventName: 'qg_line_click',
      qgts: parseInt(new Date().getTime() / 1000),
      parameters: Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__["default"])({
        url: window.location.href
      }, Object(_utils_parseUtmParams__WEBPACK_IMPORTED_MODULE_27__["default"])(locationUrl))
    };
    e.events.push(clickEvent); // Remove particular query strings

    if (window.history && window.history.replaceState) {
      ['_lnuid', '_lnchid', 'openExternalBrowser'].forEach(function (param) {
        return locationUrl.searchParams["delete"](param);
      });
      window.history.replaceState(window.history.state, document.title, locationUrl.href);
    } // Trigger InWeb campaign after line click event


    if (this._settings.inWebEnabled) {
      Object(_in_web_triggerInWebCampaign__WEBPACK_IMPORTED_MODULE_18__["default"])(clickEvent, this._settings.appId);
    }
  }

  if (self.identified) {
    var pageViewedEvent = {
      eventName: 'page_viewed',
      qgts: parseInt(new Date().getTime() / 1000),
      parameters: Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__["default"])({
        url: window.location.href
      }, Object(_utils_parseUtmParams__WEBPACK_IMPORTED_MODULE_27__["default"])(locationUrl))
    };

    if (window.document.referrer) {
      pageViewedEvent.parameters.referrer = window.document.referrer;
    }

    var qgSeg = locationUrl.searchParams.get('qg_seg');

    if (qgSeg) {
      pageViewedEvent.parameters.qg_seg = qgSeg;
    }

    e.events.push(pageViewedEvent); // Trigger InWeb campaign after `page_viewed` event

    if (this._settings.inWebEnabled) {
      Object(_in_web_triggerInWebCampaign__WEBPACK_IMPORTED_MODULE_18__["default"])(pageViewedEvent, this._settings.appId);
    }
  }

  if (e.events.length > 0) {
    self._sendDataToServer(e).then(function () {
      updateDataSettings('lastSyncDate', currentDate);
    })["catch"](function (err) {
      _utils_log__WEBPACK_IMPORTED_MODULE_23__["default"].error('Failed to send data', err);
    });
  }
  /* Do cookie sync in the background (only for legacy API endpoint) */


  if (this._settings.useLegacyAPI) {
    window.setTimeout(function () {
      appierCookieSync(self);
    }, 2000);
  }
};

/* harmony default export */ __webpack_exports__["default"] = (QG);


/***/ }),

/***/ "./lib/WithAppSdkMode.js":
/*!*******************************!*\
  !*** ./lib/WithAppSdkMode.js ***!
  \*******************************/
/*! exports provided: sendIdentify, sendEvent, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sendIdentify", function() { return sendIdentify; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sendEvent", function() { return sendEvent; });
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toArray */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toArray.js");
/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/log */ "./lib/utils/log.js");
/* harmony import */ var _utils_version__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/version */ "./lib/utils/version.js");




function WithAppSdkMode() {
  Object(_utils_version__WEBPACK_IMPORTED_MODULE_2__["logMobileSdkVersion"])();
}

WithAppSdkMode.prototype.callmethod = function (args) {
  if (!(args && args.length > 0)) {
    return;
  }

  var _args = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toArray__WEBPACK_IMPORTED_MODULE_0__["default"])(args),
      method = _args[0],
      params = _args.slice(1);

  switch (method) {
    case 'identify':
      return sendIdentify(params[0]);

    case 'event':
    case 'qgEvent':
      return sendEvent.apply(null, params);
    // Turn on debug mode

    case 'debug':
      _utils_log__WEBPACK_IMPORTED_MODULE_1__["default"].enableAll();
      break;

    case 'init':
    case 'prompt-push':
    case 'message-received':
    case 'getRecommendation':
    case 'showRecommendation':
    case 'closeOnSubscribedPopup':
    case 'on':
    case 'once':
    case 'off':
    case 'getAttribution':
      break;

    default:
      _utils_log__WEBPACK_IMPORTED_MODULE_1__["default"].error('undefined method', method);
  }
};

var sendIdentify = function sendIdentify(identifies) {
  if (typeof identifies !== 'object' || identifies === null) {
    _utils_log__WEBPACK_IMPORTED_MODULE_1__["default"].error('Expect JSON object, but get', identifies);
    return;
  }

  Object.keys(identifies).forEach(function (key) {
    var value = identifies[key];

    switch (key) {
      case 'email':
      case 'userId':
      case 'name':
      case 'firstName':
      case 'lastName':
      case 'city':
        if (typeof value !== 'string') {
          _utils_log__WEBPACK_IMPORTED_MODULE_1__["default"].error('Expect value as string, but get', {
            key: key,
            value: value
          });
          return;
        }

        break;

      case 'day':
      case 'month':
      case 'year':
        if (typeof value !== 'number') {
          _utils_log__WEBPACK_IMPORTED_MODULE_1__["default"].error('Expect value as number, but get', {
            key: key,
            value: value
          });
          return;
        }

        break;

      default:
        var typeOfValue = typeof value;

        if (typeOfValue !== 'boolean' && typeOfValue !== 'string' && typeOfValue !== 'number') {
          _utils_log__WEBPACK_IMPORTED_MODULE_1__["default"].error('Expect value as boolean, string or number, but get', {
            key: key,
            value: value
          });
          return;
        }

    }

    window.aiqMobileSdk.setCustomKey(JSON.stringify({
      key: key,
      value: value
    })); // Let App-SDK side do the rest type protection
  });
};
var sendEvent = function sendEvent(eventName, parameters, vts) {
  if (!eventName || typeof eventName !== 'string') {
    _utils_log__WEBPACK_IMPORTED_MODULE_1__["default"].error('Expect eventName to be string, but get', eventName);
    return;
  }

  if (parameters && typeof parameters !== 'object') {
    _utils_log__WEBPACK_IMPORTED_MODULE_1__["default"].error('Expect parameters to be JSON object, but get', parameters);
    return;
  }

  if (vts && typeof vts !== 'number') {
    _utils_log__WEBPACK_IMPORTED_MODULE_1__["default"].error('Expect vts to be number, but get', vts);
    return;
  }

  var obj = {
    eventName: eventName,
    parameters: parameters,
    vts: vts
  };

  if (!parameters) {
    delete obj.parameters;
  }

  window.aiqMobileSdk.logEvent(JSON.stringify(obj));
};
/* harmony default export */ __webpack_exports__["default"] = (WithAppSdkMode);

/***/ }),

/***/ "./lib/constants.js":
/*!**************************!*\
  !*** ./lib/constants.js ***!
  \**************************/
/*! exports provided: IDB_ATTRIBUTION_KEY, IDB_VERSION_KEY, IDB_INWEB_DATA_KEY, IDB_INWEB_HISTORIES_KEY, IDB_PUSH_DENIED_TIMESTAMP, IDB_CYMP_ACKED, INWEB_EXIT_INTENT_SHOWN, INWEB_SCROLL_PERCENT_SHOWN, SEARCH_PARAMS_ATTRIBUTION_KEY, SEARCH_PARAMS_IDENTIFIED_KEY, SEARCH_PARAMS_LINECHANNEL, SEARCH_PARAMS_LINEUID, DEFAULT_SW_SCOPE, INWEB_DATA_LIFETIME, WUSER_ID_KEY */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IDB_ATTRIBUTION_KEY", function() { return IDB_ATTRIBUTION_KEY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IDB_VERSION_KEY", function() { return IDB_VERSION_KEY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IDB_INWEB_DATA_KEY", function() { return IDB_INWEB_DATA_KEY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IDB_INWEB_HISTORIES_KEY", function() { return IDB_INWEB_HISTORIES_KEY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IDB_PUSH_DENIED_TIMESTAMP", function() { return IDB_PUSH_DENIED_TIMESTAMP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IDB_CYMP_ACKED", function() { return IDB_CYMP_ACKED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "INWEB_EXIT_INTENT_SHOWN", function() { return INWEB_EXIT_INTENT_SHOWN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "INWEB_SCROLL_PERCENT_SHOWN", function() { return INWEB_SCROLL_PERCENT_SHOWN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SEARCH_PARAMS_ATTRIBUTION_KEY", function() { return SEARCH_PARAMS_ATTRIBUTION_KEY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SEARCH_PARAMS_IDENTIFIED_KEY", function() { return SEARCH_PARAMS_IDENTIFIED_KEY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SEARCH_PARAMS_LINECHANNEL", function() { return SEARCH_PARAMS_LINECHANNEL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SEARCH_PARAMS_LINEUID", function() { return SEARCH_PARAMS_LINEUID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_SW_SCOPE", function() { return DEFAULT_SW_SCOPE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "INWEB_DATA_LIFETIME", function() { return INWEB_DATA_LIFETIME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WUSER_ID_KEY", function() { return WUSER_ID_KEY; });
// Storage key in indexDB
var IDB_ATTRIBUTION_KEY = 'aiq-attribution';
var IDB_VERSION_KEY = 'aiq-version';
var IDB_INWEB_DATA_KEY = 'aiq-inweb-data';
var IDB_INWEB_HISTORIES_KEY = 'aiq-inweb-histories';
var IDB_PUSH_DENIED_TIMESTAMP = 'aiq-push-denied-timestamp';
var IDB_CYMP_ACKED = 'aiq-cymp-acked'; // Storage key in SessionStorage

var INWEB_EXIT_INTENT_SHOWN = 'aiq-inwebExitIntentShown';
var INWEB_SCROLL_PERCENT_SHOWN = 'aiq-inwebScrollPercentShown'; // For cross-domain attribution

var SEARCH_PARAMS_ATTRIBUTION_KEY = 'aiq_attr';
var SEARCH_PARAMS_IDENTIFIED_KEY = 'aiq_identified'; // For catch line id & channel

var SEARCH_PARAMS_LINECHANNEL = '_lnchid';
var SEARCH_PARAMS_LINEUID = '_lnuid'; // Service worker's scope

var DEFAULT_SW_SCOPE = 'aiqua'; // Lifetime of inweb data

var INWEB_DATA_LIFETIME = 3600000; // 1hour
// Cookie key for wUserId

var WUSER_ID_KEY = 'QGUserId';

/***/ }),

/***/ "./lib/in_web/buildPageViewedEvent.js":
/*!********************************************!*\
  !*** ./lib/in_web/buildPageViewedEvent.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread.js");
/* harmony import */ var _utils_parseUtmParams__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/parseUtmParams */ "./lib/utils/parseUtmParams.js");



/**
 * Build `page_viewed` event for `ExitIntent` to filter campaign
 */
var buildPageViewedEvent = function buildPageViewedEvent() {
  var locationUrl = new URL(window.location);
  var event = {
    eventName: 'page_viewed',
    // Currently, we make `exitIntent` based on `page_viewd` condition.
    qgts: parseInt(+new Date() / 1000),
    parameters: Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__["default"])({
      url: window.location.href
    }, Object(_utils_parseUtmParams__WEBPACK_IMPORTED_MODULE_1__["default"])(locationUrl))
  }; // Flow do not allow to set `referrer` without make `if (event.parameters)` first

  if (event.parameters && window.document.referrer) {
    event.parameters.referrer = window.document.referrer;
  }

  var qgSeg = locationUrl.searchParams.get('qg_seg');

  if (event.parameters && qgSeg) {
    event.parameters.qg_seg = qgSeg;
  }

  return event;
};

/* harmony default export */ __webpack_exports__["default"] = (buildPageViewedEvent);

/***/ }),

/***/ "./lib/in_web/exitIntentHandler.js":
/*!*****************************************!*\
  !*** ./lib/in_web/exitIntentHandler.js ***!
  \*****************************************/
/*! exports provided: setMouseY, handleMouseMove, handleMouseOut, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setMouseY", function() { return setMouseY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "handleMouseMove", function() { return handleMouseMove; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "handleMouseOut", function() { return handleMouseOut; });
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/log */ "./lib/utils/log.js");
/* harmony import */ var _triggerInWebCampaign__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./triggerInWebCampaign */ "./lib/in_web/triggerInWebCampaign.js");
/* harmony import */ var _buildPageViewedEvent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./buildPageViewedEvent */ "./lib/in_web/buildPageViewedEvent.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../constants */ "./lib/constants.js");






var VERTICAL_BOUNDARY = 100;
var mouseY = 0;
var APP_ID; // Export for unit test

var setMouseY = function setMouseY(y) {
  mouseY = y;
};
var handleMouseMove = function handleMouseMove(e) {
  setMouseY(e.clientY);
};
function handleMouseOut(_x) {
  return _handleMouseOut.apply(this, arguments);
}

function _handleMouseOut() {
  _handleMouseOut = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(
  /*#__PURE__*/
  _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(e) {
    var isOpen;
    return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            if (!(sessionStorage.getItem(_constants__WEBPACK_IMPORTED_MODULE_5__["INWEB_EXIT_INTENT_SHOWN"]) === 'true')) {
              _context.next = 3;
              break;
            }

            _utils_log__WEBPACK_IMPORTED_MODULE_2__["default"].debug('ExitIntent shows before');
            return _context.abrupt("return");

          case 3:
            if (!(!e.relatedTarget && mouseY < VERTICAL_BOUNDARY)) {
              _context.next = 8;
              break;
            }

            _context.next = 6;
            return Object(_triggerInWebCampaign__WEBPACK_IMPORTED_MODULE_3__["default"])(Object(_buildPageViewedEvent__WEBPACK_IMPORTED_MODULE_4__["default"])(), APP_ID, 'exitIntent');

          case 6:
            isOpen = _context.sent;

            // Record the exit intent had triggered in current browser session
            if (isOpen) {
              sessionStorage.setItem(_constants__WEBPACK_IMPORTED_MODULE_5__["INWEB_EXIT_INTENT_SHOWN"], 'true');
            }

          case 8:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));
  return _handleMouseOut.apply(this, arguments);
}

var bindExitIntentHandler = function bindExitIntentHandler(appId) {
  APP_ID = appId;
  /**
   * Note: Firefox do not fire `mouseleave` on `document`, so we need to use mouseout to simulate it...
   */
  // Remove previous event handler if any

  document.removeEventListener('mousemove', handleMouseMove);
  document.removeEventListener('mouseout', handleMouseOut); // Add event handler for Exit Intent

  document.addEventListener('mousemove', handleMouseMove);
  document.addEventListener('mouseout', handleMouseOut);
};

/* harmony default export */ __webpack_exports__["default"] = (bindExitIntentHandler);

/***/ }),

/***/ "./lib/in_web/fetchInWebData.js":
/*!**************************************!*\
  !*** ./lib/in_web/fetchInWebData.js ***!
  \**************************************/
/*! exports provided: FETCH_TIMEOUT, HAS_FETCH_INWEB, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FETCH_TIMEOUT", function() { return FETCH_TIMEOUT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HAS_FETCH_INWEB", function() { return HAS_FETCH_INWEB; });
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var idb_keyval__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! idb-keyval */ "../../node_modules/idb-keyval/dist/idb-keyval.mjs");
/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/log */ "./lib/utils/log.js");
/* harmony import */ var _utils_makeRequest__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/makeRequest */ "./lib/utils/makeRequest.js");
/* harmony import */ var _utils_user_id__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/user_id */ "./lib/utils/user_id.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../constants */ "./lib/constants.js");







// Export for unit test
var FETCH_TIMEOUT = 3000; // 3seconds

var HAS_FETCH_INWEB = 'aiq-hasFetchInWeb'; // A flag in sessionStorage

/**
 * Request InWeb data from AIQUA user server
 */

function requestInWebData(appId, useLegacyAPI, firstTime) {
  var apiHost = useLegacyAPI ? "https://user.new-infra.staging-api.qgraph.io" : "https://user.new-infra.staging-api.qgraph.io";
  var apiUrl = "".concat(apiHost || '', "/web-inapp/") + "?appId=".concat(appId) + "&firstTime=".concat(firstTime ? 1 : 0) + "&wUserId=".concat(Object(_utils_user_id__WEBPACK_IMPORTED_MODULE_5__["getWUserId"])()) + // Send wUserId cookie to avoid DoNotTrack limitation
  '&versionNo=0'; // Always get latest campaigns list, instead of diff

  return Object(_utils_makeRequest__WEBPACK_IMPORTED_MODULE_4__["default"])({
    url: apiUrl,
    method: 'GET'
  }).then(
  /*#__PURE__*/
  function () {
    var _ref2 = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(
    /*#__PURE__*/
    _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(_ref) {
      var _ref$json, inapp;

      return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _ref$json = _ref.json;
              _ref$json = _ref$json === void 0 ? {} : _ref$json;
              inapp = _ref$json.inapp;
              return _context.abrupt("return", {
                campaigns: inapp.campaigns || [],
                timestamp: +new Date()
              });

            case 4:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    }));

    return function (_x) {
      return _ref2.apply(this, arguments);
    };
  }());
}
/**
 * Get the InWeb data from cache.
 * But if the cache is not there or outdated, fetch it again.
 */


var fetchInWebData = function (requestPromise, cachedData) {
  return (
    /*#__PURE__*/
    function () {
      var _ref3 = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(
      /*#__PURE__*/
      _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(appId, useLegacyAPI, firstTime, forceRequest) {
        var hasFetchInWeb;
        return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                hasFetchInWeb = !!sessionStorage.getItem(HAS_FETCH_INWEB);
                _context2.t1 = "development" !== 'test' && cachedData;

                if (_context2.t1) {
                  _context2.next = 6;
                  break;
                }

                _context2.next = 5;
                return Object(idb_keyval__WEBPACK_IMPORTED_MODULE_2__["get"])(_constants__WEBPACK_IMPORTED_MODULE_6__["IDB_INWEB_DATA_KEY"]);

              case 5:
                _context2.t1 = _context2.sent;

              case 6:
                _context2.t0 = _context2.t1;

                if (_context2.t0) {
                  _context2.next = 9;
                  break;
                }

                _context2.t0 = null;

              case 9:
                cachedData = _context2.t0;

                // NOTE: Only for unit test
                if (forceRequest) {
                  requestPromise = null;
                } // Early return the cached data if not expired yet.


                if (!(hasFetchInWeb && cachedData && +new Date() - cachedData.timestamp <= _constants__WEBPACK_IMPORTED_MODULE_6__["INWEB_DATA_LIFETIME"])) {
                  _context2.next = 13;
                  break;
                }

                return _context2.abrupt("return", Promise.resolve(cachedData));

              case 13:
                // Cache the request promise
                requestPromise = requestPromise || requestInWebData(appId, useLegacyAPI, firstTime);
                return _context2.abrupt("return", Promise.race([requestPromise, new Promise(function (resolve) {
                  return setTimeout(function () {
                    resolve(cachedData);
                  }, FETCH_TIMEOUT);
                })]).then(function (data) {
                  cachedData = data;

                  if (data) {
                    Object(idb_keyval__WEBPACK_IMPORTED_MODULE_2__["set"])(_constants__WEBPACK_IMPORTED_MODULE_6__["IDB_INWEB_DATA_KEY"], data); // Fire but don't wait, let clourse handle memorization.

                    sessionStorage.setItem(HAS_FETCH_INWEB, 'true');
                  } else {
                    requestPromise = null;
                  }

                  return data;
                })["catch"](function (err) {
                  _utils_log__WEBPACK_IMPORTED_MODULE_3__["default"].error('Failed to fetch inweb data', err);
                  return cachedData;
                }));

              case 15:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2);
      }));

      return function (_x2, _x3, _x4, _x5) {
        return _ref3.apply(this, arguments);
      };
    }()
  );
}(null, null);

/* harmony default export */ __webpack_exports__["default"] = (fetchInWebData);

/***/ }),

/***/ "./lib/in_web/idleHandler.js":
/*!***********************************!*\
  !*** ./lib/in_web/idleHandler.js ***!
  \***********************************/
/*! exports provided: setLastActionTimestamp, shouldIdleTimeoutMatch, checkIdle, resetTimer, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setLastActionTimestamp", function() { return setLastActionTimestamp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shouldIdleTimeoutMatch", function() { return shouldIdleTimeoutMatch; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "checkIdle", function() { return checkIdle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "resetTimer", function() { return resetTimer; });
/* harmony import */ var _utils_time__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/time */ "./lib/utils/time.js");
/* harmony import */ var _triggerInWebCampaign__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./triggerInWebCampaign */ "./lib/in_web/triggerInWebCampaign.js");
/* harmony import */ var _buildPageViewedEvent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./buildPageViewedEvent */ "./lib/in_web/buildPageViewedEvent.js");



var APP_ID;
var lastActionTimestamp;
var timer;
var setLastActionTimestamp = function setLastActionTimestamp(timestamp) {
  lastActionTimestamp = timestamp;
};
var shouldIdleTimeoutMatch = function shouldIdleTimeoutMatch(seconds) {
  return function (campaign) {
    return (// SPEC: Check `over` not `closest to`
      !!campaign.idleTriggerRule && seconds >= campaign.idleTriggerRule.timeout
    );
  };
};
var checkIdle = function checkIdle() {
  var timeSecondDiff = Object(_utils_time__WEBPACK_IMPORTED_MODULE_0__["toUnixTimestamp"])(+new Date()) - lastActionTimestamp;
  Object(_triggerInWebCampaign__WEBPACK_IMPORTED_MODULE_1__["default"])(Object(_buildPageViewedEvent__WEBPACK_IMPORTED_MODULE_2__["default"])(), APP_ID, 'idleTime', shouldIdleTimeoutMatch(timeSecondDiff));
};
var resetTimer = function resetTimer() {
  // Reset last action's timestamp
  setLastActionTimestamp(Object(_utils_time__WEBPACK_IMPORTED_MODULE_0__["toUnixTimestamp"])(+new Date()));
  clearInterval(timer);
  timer = setInterval(checkIdle, 10 * 1000); // Checking based on each 10 sec.
};

var bindIdleHandler = function bindIdleHandler(appId) {
  APP_ID = appId;
  clearInterval(timer);
  ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart'].forEach(function (eventName) {
    // Remove previous event handler if any
    document.removeEventListener(eventName, resetTimer, true); // Add event handler

    document.addEventListener(eventName, resetTimer, true);
  });
};

/* harmony default export */ __webpack_exports__["default"] = (bindIdleHandler);

/***/ }),

/***/ "./lib/in_web/inweb_html_popup/index.js":
/*!**********************************************!*\
  !*** ./lib/in_web/inweb_html_popup/index.js ***!
  \**********************************************/
/*! exports provided: openInwebHtmlPopup, closeInwebHtmlPopup, HTML_POPUP_ID */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _inweb_html_popup__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./inweb_html_popup */ "./lib/in_web/inweb_html_popup/inweb_html_popup.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "openInwebHtmlPopup", function() { return _inweb_html_popup__WEBPACK_IMPORTED_MODULE_0__["openInwebHtmlPopup"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "closeInwebHtmlPopup", function() { return _inweb_html_popup__WEBPACK_IMPORTED_MODULE_0__["closeInwebHtmlPopup"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HTML_POPUP_ID", function() { return _inweb_html_popup__WEBPACK_IMPORTED_MODULE_0__["POPUP_ID"]; });



/***/ }),

/***/ "./lib/in_web/inweb_html_popup/inweb_html_popup.css":
/*!**********************************************************!*\
  !*** ./lib/in_web/inweb_html_popup/inweb_html_popup.css ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(/*! !../../../../../node_modules/css-loader??ref--6-1!../../../../../node_modules/postcss-loader/src??postcss!./inweb_html_popup.css */ "../../node_modules/css-loader/index.js?!../../node_modules/postcss-loader/src/index.js?!./lib/in_web/inweb_html_popup/inweb_html_popup.css");

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":true}

options.transform = transform
options.insertInto = undefined;

var update = __webpack_require__(/*! ../../../../../node_modules/style-loader/lib/addStyles.js */ "../../node_modules/style-loader/lib/addStyles.js")(content, options);

if(content.locals) module.exports = content.locals;

if(false) {}

/***/ }),

/***/ "./lib/in_web/inweb_html_popup/inweb_html_popup.js":
/*!*********************************************************!*\
  !*** ./lib/in_web/inweb_html_popup/inweb_html_popup.js ***!
  \*********************************************************/
/*! exports provided: POPUP_ID, isHyperlinkUrl, handleHyperlinkClick, openInwebHtmlPopup, closeInwebHtmlPopup */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "POPUP_ID", function() { return POPUP_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isHyperlinkUrl", function() { return isHyperlinkUrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "handleHyperlinkClick", function() { return handleHyperlinkClick; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "openInwebHtmlPopup", function() { return openInwebHtmlPopup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "closeInwebHtmlPopup", function() { return closeInwebHtmlPopup; });
/* harmony import */ var _inweb_html_popup_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./inweb_html_popup.css */ "./lib/in_web/inweb_html_popup/inweb_html_popup.css");
/* harmony import */ var _inweb_html_popup_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_inweb_html_popup_css__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/log */ "./lib/utils/log.js");


var POPUP_ID = 'qg-inweb-html-popup'; // Export for unit test

/**
 * Check it is a hyperlink and not perform as a click button.
 * Bypass any of below cases:
 * <a>example</a>
 * <a href="#">example</a>
 * <a href="#" onclick="handleClick()">onclick</a>
 * <a href="javascript:handleClick()">onclick</a>
 * <a href="javascript:void()" onclick="handleClick()">onclick</a>
 */

var isHyperlinkUrl = function isHyperlinkUrl(href) {
  return href && href !== '#' && !href.startsWith('javascript:');
};
var handleHyperlinkClick = function handleHyperlinkClick(popupOptions) {
  return function (e) {
    var target = e.target,
        currentTarget = e.currentTarget;

    var _ref = popupOptions || {},
        onPopupClosed = _ref.onPopupClosed,
        onHyperlinkClick = _ref.onHyperlinkClick;

    _utils_log__WEBPACK_IMPORTED_MODULE_1__["default"].debug('Click', e, 'target', target);
    /**
     * Go through the event bubbling path to handle the case below.
     * <a href="https://www.appier.com/"><img src="https://upload.cc/i1/2019/02/01/v46NyC.png" /></a>
     */

    var node = target;

    while (node !== currentTarget) {
      _utils_log__WEBPACK_IMPORTED_MODULE_1__["default"].trace('The node', node, 'currentTarget', currentTarget);
      var href = (node.getAttribute('href') || '').trim(); // Check it is a hyperlink and not perform as a click button

      if (node.tagName.toLowerCase() === 'a' && isHyperlinkUrl(href)) {
        e.preventDefault();
        _utils_log__WEBPACK_IMPORTED_MODULE_1__["default"].debug('Click on hyperlink', href); // Log event to calculate campaign click

        if (typeof onHyperlinkClick === 'function') {
          onHyperlinkClick();
        } // Close popup


        closeInwebHtmlPopup(onPopupClosed); // Redirect based on target attribute

        var hyperlinkTarget = node.getAttribute('target') || '_self';
        window.open(href, hyperlinkTarget);
        break;
      }

      node = node.parentNode;
      _utils_log__WEBPACK_IMPORTED_MODULE_1__["default"].trace('New node', node);
    }
  };
};
/**
 * Append Inweb html Popup on body element
 */

function openInwebHtmlPopup(inWebHtmlPopup, popupOptions) {
  if (document.getElementById(POPUP_ID)) {
    return;
  }

  var _ref2 = popupOptions || {},
      rootDocument = _ref2.rootDocument,
      containerId = _ref2.containerId,
      onPopupOpened = _ref2.onPopupOpened,
      onPopupClosed = _ref2.onPopupClosed,
      onCloseButtonClick = _ref2.onCloseButtonClick;

  var popup = document.createElement('div');
  popup.classList.add(_inweb_html_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a.popup);
  popup.id = POPUP_ID; // Append overlay if necessary

  if (inWebHtmlPopup.showOverlay) {
    var overlay = document.createElement('div');
    overlay.classList.add(_inweb_html_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a.overlay);
    popup.appendChild(overlay);
  } // Prevent body from scrolling with extra wrapper


  var poupScroll = document.createElement('div');
  poupScroll.classList.add(_inweb_html_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a['popup-scroll']);
  popup.appendChild(poupScroll); // Append container

  var container = document.createElement('div');

  if (containerId) {
    container.id = containerId;
  }

  container.classList.add(_inweb_html_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a.container);
  container.innerHTML = inWebHtmlPopup.htmlBody; // Append customer HTML

  poupScroll.appendChild(container); // Append close button

  var closeButton = document.createElement('div');
  closeButton.classList.add(_inweb_html_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a['close-button']);

  closeButton.onclick = onCloseButtonClick || function () {
    closeInwebHtmlPopup(onPopupClosed);
  };

  container.appendChild(closeButton); // Append to DOM

  var renderedDocument = rootDocument || document;

  if (renderedDocument.body) {
    renderedDocument.body.appendChild(popup);
  } // Bind click event listener


  container.addEventListener('click', handleHyperlinkClick(popupOptions));

  if (onPopupOpened) {
    onPopupOpened();
  }
}
/**
 * Remove Inweb html Popup from DOM tree
 */

function closeInwebHtmlPopup(onPopupClosed) {
  var popupWrapper = document.getElementById(POPUP_ID);

  if (popupWrapper) {
    popupWrapper.remove();

    if (onPopupClosed) {
      onPopupClosed();
    }
  }
}

/***/ }),

/***/ "./lib/in_web/inweb_lead_popup/index.js":
/*!**********************************************!*\
  !*** ./lib/in_web/inweb_lead_popup/index.js ***!
  \**********************************************/
/*! exports provided: openInwebLeadPopup, closeInwebLeadPopup, LEAD_POPUP_ID */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _inweb_lead_popup__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./inweb_lead_popup */ "./lib/in_web/inweb_lead_popup/inweb_lead_popup.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "openInwebLeadPopup", function() { return _inweb_lead_popup__WEBPACK_IMPORTED_MODULE_0__["openInwebLeadPopup"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "closeInwebLeadPopup", function() { return _inweb_lead_popup__WEBPACK_IMPORTED_MODULE_0__["closeInwebLeadPopup"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LEAD_POPUP_ID", function() { return _inweb_lead_popup__WEBPACK_IMPORTED_MODULE_0__["POPUP_ID"]; });



/***/ }),

/***/ "./lib/in_web/inweb_lead_popup/inweb_lead_popup.css":
/*!**********************************************************!*\
  !*** ./lib/in_web/inweb_lead_popup/inweb_lead_popup.css ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(/*! !../../../../../node_modules/css-loader??ref--6-1!../../../../../node_modules/postcss-loader/src??postcss!./inweb_lead_popup.css */ "../../node_modules/css-loader/index.js?!../../node_modules/postcss-loader/src/index.js?!./lib/in_web/inweb_lead_popup/inweb_lead_popup.css");

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":true}

options.transform = transform
options.insertInto = undefined;

var update = __webpack_require__(/*! ../../../../../node_modules/style-loader/lib/addStyles.js */ "../../node_modules/style-loader/lib/addStyles.js")(content, options);

if(content.locals) module.exports = content.locals;

if(false) {}

/***/ }),

/***/ "./lib/in_web/inweb_lead_popup/inweb_lead_popup.js":
/*!*********************************************************!*\
  !*** ./lib/in_web/inweb_lead_popup/inweb_lead_popup.js ***!
  \*********************************************************/
/*! exports provided: POPUP_ID, openInwebLeadPopup, closeInwebLeadPopup */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "POPUP_ID", function() { return POPUP_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "openInwebLeadPopup", function() { return openInwebLeadPopup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "closeInwebLeadPopup", function() { return closeInwebLeadPopup; });
/* harmony import */ var _inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./inweb_lead_popup.css */ "./lib/in_web/inweb_lead_popup/inweb_lead_popup.css");
/* harmony import */ var _inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0__);

var POPUP_ID = 'qg-inweb-lead-popup'; // Export for unit test

/**
 * Append Inweb lead Popup on body element
 */

function openInwebLeadPopup(inWebLeadPopup, popupOptions) {
  if (document.getElementById(POPUP_ID)) {
    return;
  }

  var _ref = popupOptions || {},
      rootDocument = _ref.rootDocument,
      containerId = _ref.containerId,
      onPopupOpened = _ref.onPopupOpened,
      onPopupClosed = _ref.onPopupClosed,
      onCloseButtonClick = _ref.onCloseButtonClick,
      onSubmit = _ref.onSubmit;

  var error = inWebLeadPopup.errorMessages || {
    required: 'This field is required',
    invalid: 'Invalid value',
    agreement: 'Please tick above to agree terms'
  };
  var popup = document.createElement('div');
  popup.classList.add(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a.popup);
  popup.id = POPUP_ID;

  if (inWebLeadPopup.showOverlay) {
    var overlay = document.createElement('div');
    overlay.classList.add(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a.overlay);
    popup.appendChild(overlay);
  }

  var container = document.createElement('div');

  if (containerId) {
    container.id = containerId;
  }

  container.classList.add(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a.container);
  container.style.backgroundColor = inWebLeadPopup.contentBackgroundColor;

  if (inWebLeadPopup.imgSrc) {
    var banner = document.createElement('div');
    banner.style.backgroundImage = "url(".concat(inWebLeadPopup.imgSrc || '', ")");
    banner.classList.add(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a.banner);
    container.appendChild(banner);
  }

  var closeButton = document.createElement('div');
  closeButton.classList.add(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a['close-button']);

  closeButton.onclick = onCloseButtonClick || function () {
    closeInwebLeadPopup(onPopupClosed);
  };

  container.appendChild(closeButton);

  if (inWebLeadPopup.title) {
    var title = document.createElement('p');
    title.innerText = inWebLeadPopup.title;
    title.style.color = inWebLeadPopup.titleColor;
    title.classList.add(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a.title);
    container.appendChild(title);
  }

  if (inWebLeadPopup.message) {
    var message = document.createElement('p');
    message.innerText = inWebLeadPopup.message;
    message.style.color = inWebLeadPopup.messageColor;
    message.classList.add(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a.message);
    container.appendChild(message);
  }

  if (Array.isArray(inWebLeadPopup.inputs)) {
    inWebLeadPopup.inputs.forEach(function (leadInput) {
      var inputBlock = document.createElement('div');
      inputBlock.classList.add(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a['input-block']);

      if (leadInput.inputType === 'dropdown') {
        var select = document.createElement('select');
        select.name = leadInput.fieldName;
        select.required = leadInput.required;
        select.dataset.dataType = leadInput.dataType;
        var option = document.createElement('option');
        option.innerText = "".concat(leadInput.placeholder).concat(leadInput.required ? '*' : '');
        option.value = '';
        option.selected = true;
        option.disabled = true;
        select.appendChild(option);

        if (Array.isArray(leadInput.options)) {
          leadInput.options.forEach(function (opt) {
            var option = document.createElement('option');
            option.value = opt.value;
            option.innerText = opt.label;
            select.appendChild(option);
          });
        }

        select.classList.add(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a.input);
        select.classList.add(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a.select);
        inputBlock.classList.add(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a['select-block']);
        inputBlock.appendChild(select);
      } else {
        var input = document.createElement('input');
        input.name = leadInput.fieldName;
        input.type = leadInput.inputType;
        input.required = leadInput.required;
        input.placeholder = "".concat(leadInput.placeholder).concat(leadInput.required ? '*' : '');
        input.dataset.dataType = leadInput.dataType;
        input.classList.add(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a.input);
        inputBlock.appendChild(input);
      }

      var err = document.createElement('span');
      err.classList.add(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a.error);
      inputBlock.appendChild(err);
      container.appendChild(inputBlock);
    });
  }

  if (inWebLeadPopup.agreementText) {
    var agreement = document.createElement('div');
    agreement.classList.add(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a.agreement);
    var label = document.createElement('label');
    var check = document.createElement('input');
    check.type = 'checkbox';
    check.name = 'agreement';
    label.appendChild(check);
    var icon = document.createElement('i');
    label.appendChild(icon);
    agreement.appendChild(label);

    if (inWebLeadPopup.agreementUrl) {
      var link = document.createElement('a');
      link.innerText = inWebLeadPopup.agreementText;
      link.href = inWebLeadPopup.agreementUrl || '';
      link.target = '_blank';
      link.style.color = inWebLeadPopup.agreementColor || '';
      agreement.appendChild(link);
    } else {
      var text = document.createElement('span');
      text.innerText = inWebLeadPopup.agreementText;
      text.classList.add(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a.text);
      text.style.color = inWebLeadPopup.agreementColor || '';
      agreement.appendChild(text);
    }

    var err = document.createElement('span');
    err.innerText = "*".concat(error.agreement);
    err.classList.add(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a.error);
    agreement.appendChild(err);
    container.appendChild(agreement);
  }

  if (inWebLeadPopup.submitText) {
    var submit = document.createElement('div');
    submit.innerText = inWebLeadPopup.submitText;
    submit.style.color = inWebLeadPopup.submitColor;
    submit.style.backgroundColor = inWebLeadPopup.submitBackgroundColor;
    submit.classList.add(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a['submit-button']);

    submit.onclick = function () {
      var result = {};
      var pass = true;
      popup.querySelectorAll('input, select').forEach(function (node) {
        switch (node.type) {
          case 'checkbox':
            if (node.checked) {
              node.parentElement.classList.remove(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a['input-error']);
              result[node.name] = true;
            } else {
              node.parentElement.classList.add(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a['input-error']);
              node.addEventListener('change', function _listener() {
                node.parentElement.classList.remove(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a['input-error']);
                node.removeEventListener('change', _listener);
              });
              pass = false;
            }

            break;

          default:
            node.classList.remove(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a['input-error']);

            if (node.value) {
              if (node.name === 'email' && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(node.value) || node.dataset.dataType === 'number' && isNaN(node.value * 1)) {
                node.nextSibling.innerText = "*".concat(error.invalid);
                node.classList.add(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a['input-error']);
                node.addEventListener('change', function _listener() {
                  node.classList.remove(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a['input-error']);
                  node.removeEventListener('change', _listener);
                });
                pass = false;
              } else {
                result[node.name] = node.dataset.dataType === 'number' ? +node.value : node.value;
              }
            } else if (node.required) {
              node.nextSibling.innerText = "*".concat(error.required);
              node.classList.add(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a['input-error']);
              node.addEventListener('change', function _listener() {
                node.classList.remove(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a['input-error']);
                node.removeEventListener('change', _listener);
              });
              pass = false;
            }

            break;
        }
      });

      if (pass && onSubmit) {
        onSubmit(result);
        closeInwebLeadPopup(onPopupClosed);

        if (inWebLeadPopup.redirectUrl) {
          window.location.assign(inWebLeadPopup.redirectUrl);
        }
      }
    };

    container.appendChild(submit);
  } // Prevent body from scrolling with extra wrapper


  var poupScroll = document.createElement('div');
  poupScroll.classList.add(_inweb_lead_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a['popup-scroll']);
  poupScroll.append(container);
  popup.appendChild(poupScroll);
  var renderedDocument = rootDocument || document;

  if (renderedDocument.body) {
    renderedDocument.body.appendChild(popup);
  }

  if (onPopupOpened) {
    onPopupOpened();
  }
}
/**
 * Remove Inweb lead Popup from DOM tree
 */

function closeInwebLeadPopup(onPopupClosed) {
  var popupWrapper = document.getElementById(POPUP_ID);

  if (popupWrapper) {
    popupWrapper.remove();

    if (onPopupClosed) {
      onPopupClosed();
    }
  }
}

/***/ }),

/***/ "./lib/in_web/matchEventParameter.js":
/*!*******************************************!*\
  !*** ./lib/in_web/matchEventParameter.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/**
 * Match the value of event parameter based on condition's operator
 */
function matchEventParameter(event, condition) {
  // Should match parameter keyname
  if (!event.parameters || !event.parameters.hasOwnProperty(condition.param)) {
    return false;
  }

  var eventValue = event.parameters[condition.param];

  switch (condition.op) {
    case 'contains':
      return typeof eventValue === 'string' ? eventValue.includes(condition.value) : false;

    case 'equals':
      return typeof eventValue === 'string' ? eventValue === condition.value : false;

    case '=':
      return +eventValue === +condition.value;

    case '!=':
      return +eventValue !== +condition.value;

    case '<':
      return +eventValue < +condition.value;

    case '>':
      return +eventValue > +condition.value;

    case '<=':
      return +eventValue <= +condition.value;

    case '>=':
      return +eventValue >= +condition.value;

    case 'exists':
      return eventValue !== null && eventValue !== undefined;

    default:
      return false;
  }
}

/* harmony default export */ __webpack_exports__["default"] = (matchEventParameter);

/***/ }),

/***/ "./lib/in_web/openInWebPopup.js":
/*!**************************************!*\
  !*** ./lib/in_web/openInWebPopup.js ***!
  \**************************************/
/*! exports provided: toggleIsPopupOpened, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toggleIsPopupOpened", function() { return toggleIsPopupOpened; });
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread.js");
/* harmony import */ var idb_keyval__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! idb-keyval */ "../../node_modules/idb-keyval/dist/idb-keyval.mjs");
/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/log */ "./lib/utils/log.js");
/* harmony import */ var _utils_attribution__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/attribution */ "./lib/utils/attribution.js");
/* harmony import */ var _inweb_html_popup__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./inweb_html_popup */ "./lib/in_web/inweb_html_popup/index.js");
/* harmony import */ var _inweb_lead_popup__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./inweb_lead_popup */ "./lib/in_web/inweb_lead_popup/index.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../constants */ "./lib/constants.js");










var isPopupOpened = false; // Export for unit test to reset.

var toggleIsPopupOpened = function toggleIsPopupOpened(opened) {
  isPopupOpened = !!opened;
};

var handlePopupOpened = function handlePopupOpened(campaign) {
  return function () {
    _utils_log__WEBPACK_IMPORTED_MODULE_5__["default"].debug("Displayed ".concat(campaign.notificationId, " campaign"), campaign);
    toggleIsPopupOpened(true); // Set "view" attribution

    Object(_utils_attribution__WEBPACK_IMPORTED_MODULE_6__["setAttribution"])('view', campaign.notificationId).then(function () {
      // Log event to calculate campaign impression
      window.qg('event', 'qg_inweb_displayed', {
        notificationId: campaign.notificationId
      });
    }); // Mark current campaign is readed

    Object(idb_keyval__WEBPACK_IMPORTED_MODULE_4__["get"])(_constants__WEBPACK_IMPORTED_MODULE_9__["IDB_INWEB_HISTORIES_KEY"]).then(function () {
      var histories = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var triggeredCount = +histories["camp-".concat(campaign.notificationId)] || 0;
      return Object(idb_keyval__WEBPACK_IMPORTED_MODULE_4__["set"])(_constants__WEBPACK_IMPORTED_MODULE_9__["IDB_INWEB_HISTORIES_KEY"], Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_3__["default"])({}, histories, Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])({}, "camp-".concat(campaign.notificationId), triggeredCount + 1)));
    });
  };
};

var handlePopupClosed = function handlePopupClosed(campaign) {
  return function () {
    _utils_log__WEBPACK_IMPORTED_MODULE_5__["default"].debug("Closed ".concat(campaign.notificationId, " campaign"));
    toggleIsPopupOpened(false);
    window.qg('event', 'qg_inweb_closed', {
      notificationId: campaign.notificationId
    });
  };
};
/**
 * Open corresponding inweb popup depends on creativeType
 */


function openInWebPopup(_x) {
  return _openInWebPopup.apply(this, arguments);
}

function _openInWebPopup() {
  _openInWebPopup = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(
  /*#__PURE__*/
  _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(campaign) {
    return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            if (!isPopupOpened) {
              _context.next = 2;
              break;
            }

            return _context.abrupt("return", Promise.resolve(false));

          case 2:
            _context.t0 = campaign.creativeType;
            _context.next = _context.t0 === 'html' ? 5 : _context.t0 === 'lead' ? 9 : 13;
            break;

          case 5:
            if (campaign.html) {
              _context.next = 7;
              break;
            }

            return _context.abrupt("return", Promise.resolve(false));

          case 7:
            Object(_inweb_html_popup__WEBPACK_IMPORTED_MODULE_7__["openInwebHtmlPopup"])(campaign.html, {
              onPopupOpened: handlePopupOpened(campaign),
              onPopupClosed: handlePopupClosed(campaign),
              onHyperlinkClick: function onHyperlinkClick() {
                _utils_log__WEBPACK_IMPORTED_MODULE_5__["default"].debug("Click hyperlink from ".concat(campaign.notificationId, " campaign")); // Log event to calculate campaign clicks

                window.qg('event', 'qg_inweb_clicked', {
                  notificationId: campaign.notificationId
                });
              }
            });
            return _context.abrupt("return", Promise.resolve(true));

          case 9:
            if (campaign.lead) {
              _context.next = 11;
              break;
            }

            return _context.abrupt("return", Promise.resolve(false));

          case 11:
            Object(_inweb_lead_popup__WEBPACK_IMPORTED_MODULE_8__["openInwebLeadPopup"])(campaign.lead, {
              onPopupOpened: handlePopupOpened(campaign),
              onPopupClosed: handlePopupClosed(campaign),
              onSubmit: function onSubmit(leadData) {
                _utils_log__WEBPACK_IMPORTED_MODULE_5__["default"].debug("Submit lead to ".concat(campaign.notificationId, " campaign"), leadData);
                window.qg('identify', leadData);
                window.qg('event', 'qg_inweb_lead_gen', {
                  notificationId: campaign.notificationId,
                  leadKeys: Object.keys(leadData)
                });
              }
            });
            return _context.abrupt("return", Promise.resolve(true));

          case 13:
            return _context.abrupt("break", 14);

          case 14:
            return _context.abrupt("return", Promise.resolve(false));

          case 15:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));
  return _openInWebPopup.apply(this, arguments);
}

/* harmony default export */ __webpack_exports__["default"] = (openInWebPopup);

/***/ }),

/***/ "./lib/in_web/scrollPercentHandler.js":
/*!********************************************!*\
  !*** ./lib/in_web/scrollPercentHandler.js ***!
  \********************************************/
/*! exports provided: setLastPercent, shouldScrollPercentMatch, handleScroll, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setLastPercent", function() { return setLastPercent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shouldScrollPercentMatch", function() { return shouldScrollPercentMatch; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "handleScroll", function() { return handleScroll; });
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var lodash_throttle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash.throttle */ "../../node_modules/lodash.throttle/index.js");
/* harmony import */ var lodash_throttle__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_throttle__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _third_party_getScrollPercent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../third_party/getScrollPercent */ "./lib/third_party/getScrollPercent.js");
/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/log */ "./lib/utils/log.js");
/* harmony import */ var _triggerInWebCampaign__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./triggerInWebCampaign */ "./lib/in_web/triggerInWebCampaign.js");
/* harmony import */ var _buildPageViewedEvent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./buildPageViewedEvent */ "./lib/in_web/buildPageViewedEvent.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../constants */ "./lib/constants.js");








var lastPercent = 0;
var APP_ID;
var setLastPercent = function setLastPercent(percent) {
  lastPercent = percent;
};
var shouldScrollPercentMatch = function shouldScrollPercentMatch(scrollPercent) {
  return function (campaign) {
    return (// SPEC: Check `over` not `closest to`
      !!campaign.scrollTriggerRule && scrollPercent >= campaign.scrollTriggerRule.percent
    );
  };
};
function handleScroll() {
  return _handleScroll.apply(this, arguments);
}

function _handleScroll() {
  _handleScroll = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(
  /*#__PURE__*/
  _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
    var inwebscrollPercentShown, previousPercent, percent, isOpen;
    return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            inwebscrollPercentShown = +sessionStorage.getItem(_constants__WEBPACK_IMPORTED_MODULE_7__["INWEB_SCROLL_PERCENT_SHOWN"]); // Only allow once in one browser session.

            if (!(inwebscrollPercentShown > 0)) {
              _context.next = 4;
              break;
            }

            _utils_log__WEBPACK_IMPORTED_MODULE_4__["default"].debug("ScrollPercent show ".concat(inwebscrollPercentShown, " before"));
            return _context.abrupt("return");

          case 4:
            previousPercent = lastPercent;
            percent = Object(_third_party_getScrollPercent__WEBPACK_IMPORTED_MODULE_3__["default"])();
            _utils_log__WEBPACK_IMPORTED_MODULE_4__["default"].debug("handleScroll ".concat(previousPercent, "%, ").concat(percent, "%"));

            if (!(!Number.isFinite(percent) || Number.isNaN(percent))) {
              _context.next = 10;
              break;
            }

            // In case we get `Infinity` or `NaN` from getScrollPercent()
            _utils_log__WEBPACK_IMPORTED_MODULE_4__["default"].warn("handleScroll error");
            return _context.abrupt("return");

          case 10:
            // Note: In mobile, might get 100.xxx% for some screen size...
            setLastPercent(percent);

            if (!(previousPercent >= percent)) {
              _context.next = 13;
              break;
            }

            return _context.abrupt("return");

          case 13:
            _context.next = 15;
            return Object(_triggerInWebCampaign__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_buildPageViewedEvent__WEBPACK_IMPORTED_MODULE_6__["default"])(), APP_ID, 'scrollThreshold', shouldScrollPercentMatch(percent));

          case 15:
            isOpen = _context.sent;

            // Record the exit intent had triggered in current browser session
            if (isOpen) {
              sessionStorage.setItem(_constants__WEBPACK_IMPORTED_MODULE_7__["INWEB_SCROLL_PERCENT_SHOWN"], "".concat(inwebscrollPercentShown + 1));
            }

          case 17:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));
  return _handleScroll.apply(this, arguments);
}

var throttleHandleScroll = lodash_throttle__WEBPACK_IMPORTED_MODULE_2___default()(handleScroll, 100);

var bindScrollPercentHandler = function bindScrollPercentHandler(appId) {
  APP_ID = appId; // Remove previous event handler if any

  document.removeEventListener('scroll', throttleHandleScroll); // Add event handler

  document.addEventListener('scroll', throttleHandleScroll);
};

/* harmony default export */ __webpack_exports__["default"] = (bindScrollPercentHandler);

/***/ }),

/***/ "./lib/in_web/triggerInWebCampaign.js":
/*!********************************************!*\
  !*** ./lib/in_web/triggerInWebCampaign.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var idb_keyval__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! idb-keyval */ "../../node_modules/idb-keyval/dist/idb-keyval.mjs");
/* harmony import */ var _utils_delay__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/delay */ "./lib/utils/delay.js");
/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/log */ "./lib/utils/log.js");
/* harmony import */ var _fetchInWebData__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./fetchInWebData */ "./lib/in_web/fetchInWebData.js");
/* harmony import */ var _matchEventParameter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./matchEventParameter */ "./lib/in_web/matchEventParameter.js");
/* harmony import */ var _openInWebPopup__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./openInWebPopup */ "./lib/in_web/openInWebPopup.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../constants */ "./lib/constants.js");










/**
 * Find the matched based on trigger condition
 */
function getMatchedInWebCampaign(triggerType, event, campaigns, inWebHistories, extraCondition) {
  return campaigns.find(function (campaign) {
    // Convert to unix timestamp
    var currentTime = Math.floor(+new Date() / 1000); // should match active time range

    if (currentTime < campaign.startTime || currentTime > campaign.endTime) {
      return false;
    } // should match trigger type


    if (campaign.triggerType !== triggerType) {
      return false;
    } // Should match extra matcher


    if (extraCondition && !extraCondition(campaign)) {
      return false;
    }

    var triggerCondition = campaign.whenCond || {}; // should match event name

    if (event.eventName !== triggerCondition.eventName) {
      return false;
    } // should not reaches the max display count


    var triggeredCount = +inWebHistories["camp-".concat(campaign.notificationId)] || 0;
    var hasReachMaxDisplayCount = campaign.scheduledType === 'once' ? triggeredCount > 0 : triggeredCount >= (campaign.maxNumTimesToShow || 0);

    if (hasReachMaxDisplayCount) {
      return false;
    } // should fuzzy match the campaign if conditions is an empty list


    if (triggerCondition.conditions.length === 0) {
      return true;
    } // should match all event parameters


    if (triggerCondition.operator === 'AND') {
      return triggerCondition.conditions.every(function (condition) {
        return Object(_matchEventParameter__WEBPACK_IMPORTED_MODULE_6__["default"])(event, condition);
      });
    } // should match any event parameter


    return triggerCondition.conditions.some(function (condition) {
      return Object(_matchEventParameter__WEBPACK_IMPORTED_MODULE_6__["default"])(event, condition);
    });
  });
}
/**
 * Trigger InWeb campaign by event
 */


function triggerInWebCampaign(_x, _x2) {
  return _triggerInWebCampaign.apply(this, arguments);
}

function _triggerInWebCampaign() {
  _triggerInWebCampaign = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(
  /*#__PURE__*/
  _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(event, appId) {
    var triggerType,
        extraCondition,
        inWebData,
        inWebHistories,
        matchedCampaign,
        _args = arguments;
    return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            triggerType = _args.length > 2 && _args[2] !== undefined ? _args[2] : 'userEvent';
            extraCondition = _args.length > 3 ? _args[3] : undefined;
            _utils_log__WEBPACK_IMPORTED_MODULE_4__["default"].debug("Triggering inweb campaigns by \"".concat(triggerType, "\" with \"").concat(event.eventName, "\" event..."), event);
            _context.next = 5;
            return Object(_fetchInWebData__WEBPACK_IMPORTED_MODULE_5__["default"])(appId);

          case 5:
            inWebData = _context.sent;

            if (inWebData) {
              _context.next = 8;
              break;
            }

            return _context.abrupt("return", Promise.resolve(false));

          case 8:
            _context.next = 10;
            return Object(idb_keyval__WEBPACK_IMPORTED_MODULE_2__["get"])(_constants__WEBPACK_IMPORTED_MODULE_8__["IDB_INWEB_HISTORIES_KEY"]);

          case 10:
            _context.t0 = _context.sent;

            if (_context.t0) {
              _context.next = 13;
              break;
            }

            _context.t0 = {};

          case 13:
            inWebHistories = _context.t0;
            matchedCampaign = getMatchedInWebCampaign(triggerType, event, inWebData.campaigns, inWebHistories, extraCondition);

            if (matchedCampaign) {
              _context.next = 17;
              break;
            }

            return _context.abrupt("return", Promise.resolve(false));

          case 17:
            _context.next = 19;
            return Object(_utils_delay__WEBPACK_IMPORTED_MODULE_3__["default"])((matchedCampaign.delayTime || 0) * 1e3);

          case 19:
            return _context.abrupt("return", Object(_openInWebPopup__WEBPACK_IMPORTED_MODULE_7__["default"])(matchedCampaign));

          case 20:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));
  return _triggerInWebCampaign.apply(this, arguments);
}

/* harmony default export */ __webpack_exports__["default"] = (triggerInWebCampaign);

/***/ }),

/***/ "./lib/index.js":
/*!**********************!*\
  !*** ./lib/index.js ***!
  \**********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _QGraph__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./QGraph */ "./lib/QGraph.js");
/* harmony import */ var _WithAppSdkMode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./WithAppSdkMode */ "./lib/WithAppSdkMode.js");
/* harmony import */ var _migrations_runMigrations__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./migrations/runMigrations */ "./lib/migrations/runMigrations.js");
/* harmony import */ var _utils_version__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/version */ "./lib/utils/version.js");
/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/log */ "./lib/utils/log.js");
/* harmony import */ var _utils_withAppSdk__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils/withAppSdk */ "./lib/utils/withAppSdk.js");
/* harmony import */ var _utils_rollbar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utils/rollbar */ "./lib/utils/rollbar.js");









/**
 * Run in browser (Not in webview)
 */

function initWebMode() {
  return _initWebMode.apply(this, arguments);
}
/**
 * Starts to excute the queue.
 */


function _initWebMode() {
  _initWebMode = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(
  /*#__PURE__*/
  _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
    var currentVersion, lastestVersion, hasMigratedFailed;
    return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            // Send events and profiles data in batch
            window.setInterval(function () {
              if (window._qg) {
                window._qg.batch();
              }
            }, 5000); // Flush all the unexcuted profiles and events before page unload

            window.addEventListener('beforeunload', function () {
              if (window._qg) {
                window._qg.unloadFlush();
              }
            }, false); // -------------------------------------
            //   Run migrations
            // -------------------------------------

            _context.next = 4;
            return Object(_utils_version__WEBPACK_IMPORTED_MODULE_5__["getSdkVersion"])();

          case 4:
            currentVersion = _context.sent;
            lastestVersion = Object(_utils_version__WEBPACK_IMPORTED_MODULE_5__["getPackageVersion"])();
            _utils_log__WEBPACK_IMPORTED_MODULE_6__["default"].info("Current SDK version: ".concat(currentVersion || 'None'), "lastest SDK version: ".concat(lastestVersion));

            if (!(currentVersion !== lastestVersion)) {
              _context.next = 14;
              break;
            }

            hasMigratedFailed = false; // Run migrations only if current version was stored before

            if (!currentVersion) {
              _context.next = 13;
              break;
            }

            _context.next = 12;
            return Object(_migrations_runMigrations__WEBPACK_IMPORTED_MODULE_4__["default"])(currentVersion);

          case 12:
            hasMigratedFailed = !_context.sent;

          case 13:
            if (!hasMigratedFailed) {
              Object(_utils_version__WEBPACK_IMPORTED_MODULE_5__["setSdkVersion"])(lastestVersion);
            }

          case 14:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));
  return _initWebMode.apply(this, arguments);
}

function initSdk() {
  return _initSdk.apply(this, arguments);
}

function _initSdk() {
  _initSdk = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(
  /*#__PURE__*/
  _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {
    var isWithAppSdk, _qg, _q, args;

    return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            if (!(!window.qg || window._qg)) {
              _context2.next = 2;
              break;
            }

            return _context2.abrupt("return");

          case 2:
            _utils_log__WEBPACK_IMPORTED_MODULE_6__["default"].setDefaultLevel(_utils_log__WEBPACK_IMPORTED_MODULE_6__["default"].levels.ERROR); // Log sdk error to Rollbar

            _utils_rollbar__WEBPACK_IMPORTED_MODULE_8__["default"].configure({
              payload: {
                person: {
                  id: window.QGSettings ? window.QGSettings.appId : ''
                }
              }
            }); // Display logs in development mode or debug setting is true

            if (true) {
              _utils_log__WEBPACK_IMPORTED_MODULE_6__["default"].enableAll();
            } // Bootstrap SDK instance by platform


            _context2.next = 7;
            return Object(_utils_withAppSdk__WEBPACK_IMPORTED_MODULE_7__["default"])();

          case 7:
            isWithAppSdk = _context2.sent;
            _qg = isWithAppSdk ? new _WithAppSdkMode__WEBPACK_IMPORTED_MODULE_3__["default"]() : new _QGraph__WEBPACK_IMPORTED_MODULE_2__["default"]();
            window.QG = window._qg = _qg;

            if (isWithAppSdk) {
              _context2.next = 13;
              break;
            }

            _context2.next = 13;
            return initWebMode();

          case 13:
            // Starts to excute qg queue
            if (window.qg.hasOwnProperty('queue')) {
              _q = window.qg.queue || [];

              while (_q.length > 0) {
                args = _q.shift();

                window._qg.callmethod.call(_qg, args);
              }

              window.qg = function () {
                window._qg.callmethod.call(_qg, arguments);
              };
            }

          case 14:
          case "end":
            return _context2.stop();
        }
      }
    }, _callee2);
  }));
  return _initSdk.apply(this, arguments);
}

initSdk();

/***/ }),

/***/ "./lib/migrations/migrateCympCookie.js":
/*!*********************************************!*\
  !*** ./lib/migrations/migrateCympCookie.js ***!
  \*********************************************/
/*! exports provided: LEGACY_CYMP_COOKIE, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LEGACY_CYMP_COOKIE", function() { return LEGACY_CYMP_COOKIE; });
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var idb_keyval__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! idb-keyval */ "../../node_modules/idb-keyval/dist/idb-keyval.mjs");
/* harmony import */ var _utils_cookie__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/cookie */ "./lib/utils/cookie.js");
/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/log */ "./lib/utils/log.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../constants */ "./lib/constants.js");





 // Export for unit test

var LEGACY_CYMP_COOKIE = '_qg_cymp';
/**
 * Migrate legacy `_qg_cymp` cookie to new two flags in IDB
 *
 * 1. If legacy cookie's value is unix timestamp -> convert to standard timestamp (12:00am) in iDB
 * 2. If legacy cookie's value is -1 -> set timestamp with current date (12:00am), CYMP is acked
 */

function migrateCympCookie() {
  return _migrateCympCookie.apply(this, arguments);
}

function _migrateCympCookie() {
  _migrateCympCookie = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(
  /*#__PURE__*/
  _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
    var legacyPushDeniedUnixTime, currentDate, pushDeniedDate;
    return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            legacyPushDeniedUnixTime = _utils_cookie__WEBPACK_IMPORTED_MODULE_3__["default"].getJSON(LEGACY_CYMP_COOKIE); // Do nothing if can't find legacy flag

            if (!(!legacyPushDeniedUnixTime && legacyPushDeniedUnixTime !== 0)) {
              _context.next = 3;
              break;
            }

            return _context.abrupt("return");

          case 3:
            if (!(legacyPushDeniedUnixTime === -1)) {
              _context.next = 12;
              break;
            }

            // Current date in 12:00am
            currentDate = new Date();
            currentDate.setHours(0, 0, 0, 0);
            _context.next = 8;
            return Object(idb_keyval__WEBPACK_IMPORTED_MODULE_2__["set"])(_constants__WEBPACK_IMPORTED_MODULE_5__["IDB_PUSH_DENIED_TIMESTAMP"], +currentDate);

          case 8:
            _context.next = 10;
            return Object(idb_keyval__WEBPACK_IMPORTED_MODULE_2__["set"])(_constants__WEBPACK_IMPORTED_MODULE_5__["IDB_CYMP_ACKED"], true);

          case 10:
            _utils_cookie__WEBPACK_IMPORTED_MODULE_3__["default"].remove(LEGACY_CYMP_COOKIE); // Remove legacy cookie

            return _context.abrupt("return");

          case 12:
            // Convert unix time to standard timestamp, and convert to 12:00am
            pushDeniedDate = new Date(+legacyPushDeniedUnixTime * 1000);
            pushDeniedDate.setHours(0, 0, 0, 0); // Set push denied date

            _context.next = 16;
            return Object(idb_keyval__WEBPACK_IMPORTED_MODULE_2__["set"])(_constants__WEBPACK_IMPORTED_MODULE_5__["IDB_PUSH_DENIED_TIMESTAMP"], +pushDeniedDate);

          case 16:
            // Remove legacy cookie
            _utils_cookie__WEBPACK_IMPORTED_MODULE_3__["default"].remove(LEGACY_CYMP_COOKIE);
            _utils_log__WEBPACK_IMPORTED_MODULE_4__["default"].debug('Migrated legacy cymp cookie to new data in iDB');

          case 18:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));
  return _migrateCympCookie.apply(this, arguments);
}

/* harmony default export */ __webpack_exports__["default"] = (migrateCympCookie);

/***/ }),

/***/ "./lib/migrations/migrateWUserId.js":
/*!******************************************!*\
  !*** ./lib/migrations/migrateWUserId.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _utils_cookie__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/cookie */ "./lib/utils/cookie.js");
/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/log */ "./lib/utils/log.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../constants */ "./lib/constants.js");




 // Matches `"` or encoded double quote

var DOUBLE_QUOTE_REGEXP = new RegExp(/"|%22/g);
/**
 * XXX:
 * we have some legacy users have double quote like `"123"` as value.
 * We should sanitize it once and for all.
 */

function migrateWUserId() {
  return _migrateWUserId.apply(this, arguments);
}

function _migrateWUserId() {
  _migrateWUserId = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(
  /*#__PURE__*/
  _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
    var wUserId, modifiedWUserId;
    return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            wUserId = _utils_cookie__WEBPACK_IMPORTED_MODULE_2__["default"].get(_constants__WEBPACK_IMPORTED_MODULE_4__["WUSER_ID_KEY"]) || '';

            if (!(!wUserId || !DOUBLE_QUOTE_REGEXP.test(wUserId))) {
              _context.next = 3;
              break;
            }

            return _context.abrupt("return");

          case 3:
            // Remove double quote then set back to cookie
            modifiedWUserId = wUserId.replace(DOUBLE_QUOTE_REGEXP, '');
            _utils_cookie__WEBPACK_IMPORTED_MODULE_2__["default"].exSet(_constants__WEBPACK_IMPORTED_MODULE_4__["WUSER_ID_KEY"], modifiedWUserId);
            _utils_log__WEBPACK_IMPORTED_MODULE_3__["default"].debug('Migrated legacy wUserId to correct format');

          case 6:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));
  return _migrateWUserId.apply(this, arguments);
}

/* harmony default export */ __webpack_exports__["default"] = (migrateWUserId);

/***/ }),

/***/ "./lib/migrations/runMigrations.js":
/*!*****************************************!*\
  !*** ./lib/migrations/runMigrations.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var compare_versions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! compare-versions */ "../../node_modules/compare-versions/index.js");
/* harmony import */ var compare_versions__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(compare_versions__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/log */ "./lib/utils/log.js");
/* harmony import */ var _utils_version__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/version */ "./lib/utils/version.js");
/* harmony import */ var _migrateCympCookie__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./migrateCympCookie */ "./lib/migrations/migrateCympCookie.js");
/* harmony import */ var _migrateWUserId__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./migrateWUserId */ "./lib/migrations/migrateWUserId.js");




 // Migration scripts



/**
 * Run available migration scripts
 */

function runMigrations(_x) {
  return _runMigrations.apply(this, arguments);
}

function _runMigrations() {
  _runMigrations = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(
  /*#__PURE__*/
  _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(currentVersion) {
    return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            _context.prev = 0;

            if (!(compare_versions__WEBPACK_IMPORTED_MODULE_2___default()('3.15.0', currentVersion) === 1)) {
              _context.next = 5;
              break;
            }

            _context.next = 4;
            return Object(_migrateCympCookie__WEBPACK_IMPORTED_MODULE_5__["default"])();

          case 4:
            Object(_utils_version__WEBPACK_IMPORTED_MODULE_4__["setSdkVersion"])('3.15.0'); // Bump version incrementally

          case 5:
            if (!(compare_versions__WEBPACK_IMPORTED_MODULE_2___default()('3.18.1', currentVersion) === 1)) {
              _context.next = 9;
              break;
            }

            _context.next = 8;
            return Object(_migrateWUserId__WEBPACK_IMPORTED_MODULE_6__["default"])();

          case 8:
            Object(_utils_version__WEBPACK_IMPORTED_MODULE_4__["setSdkVersion"])('3.18.1'); // Bump version incrementally

          case 9:
            return _context.abrupt("return", true);

          case 12:
            _context.prev = 12;
            _context.t0 = _context["catch"](0);
            _utils_log__WEBPACK_IMPORTED_MODULE_3__["default"].error('Migration failed', _context.t0);
            return _context.abrupt("return", false);

          case 16:
          case "end":
            return _context.stop();
        }
      }
    }, _callee, null, [[0, 12]]);
  }));
  return _runMigrations.apply(this, arguments);
}

/* harmony default export */ __webpack_exports__["default"] = (runMigrations);

/***/ }),

/***/ "./lib/push_prompts/cym_prompt/cym_prompt.css":
/*!****************************************************!*\
  !*** ./lib/push_prompts/cym_prompt/cym_prompt.css ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(/*! !../../../../../node_modules/css-loader??ref--6-1!../../../../../node_modules/postcss-loader/src??postcss!./cym_prompt.css */ "../../node_modules/css-loader/index.js?!../../node_modules/postcss-loader/src/index.js?!./lib/push_prompts/cym_prompt/cym_prompt.css");

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":true}

options.transform = transform
options.insertInto = undefined;

var update = __webpack_require__(/*! ../../../../../node_modules/style-loader/lib/addStyles.js */ "../../node_modules/style-loader/lib/addStyles.js")(content, options);

if(content.locals) module.exports = content.locals;

if(false) {}

/***/ }),

/***/ "./lib/push_prompts/cym_prompt/cym_prompt.js":
/*!***************************************************!*\
  !*** ./lib/push_prompts/cym_prompt/cym_prompt.js ***!
  \***************************************************/
/*! exports provided: CYM_PROMPT_ID, CLOSE_TRANSITION_DURATION, openCymPrompt, closeCymPrompt */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CYM_PROMPT_ID", function() { return CYM_PROMPT_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CLOSE_TRANSITION_DURATION", function() { return CLOSE_TRANSITION_DURATION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "openCymPrompt", function() { return openCymPrompt; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "closeCymPrompt", function() { return closeCymPrompt; });
/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/log */ "./lib/utils/log.js");
/* harmony import */ var _cym_prompt_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cym_prompt.css */ "./lib/push_prompts/cym_prompt/cym_prompt.css");
/* harmony import */ var _cym_prompt_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_cym_prompt_css__WEBPACK_IMPORTED_MODULE_1__);


var CYM_PROMPT_ID = 'qgraphFakePromptContainer';
var CLOSE_TRANSITION_DURATION = 550;

/**
 * Compose cymp's container
 */
function composeCympContainer(cymPromptData, cymPromptOptions) {
  var container = document.createElement('div');
  container.classList.add(_cym_prompt_css__WEBPACK_IMPORTED_MODULE_1___default.a.container); // Apply custom background color on container

  if (cymPromptData.color) {
    container.style.background = cymPromptData.color;
  } // Apply custom text color on container


  if (cymPromptData.textColor) {
    container.style.color = cymPromptData.textColor;
  } // Append container's caret


  var caret = document.createElement('span');
  caret.classList.add(_cym_prompt_css__WEBPACK_IMPORTED_MODULE_1___default.a.caret);

  if (cymPromptData.color) {
    caret.style.color = cymPromptData.color;
  }

  container.appendChild(caret); // Append message (switch content in different window size)

  var message = document.createElement('div');
  message.classList.add(_cym_prompt_css__WEBPACK_IMPORTED_MODULE_1___default.a.message);
  message.innerHTML = window.innerWidth < 520 ? (cymPromptData.mobile || {}).message : (cymPromptData.desktop || {}).message;
  container.appendChild(message); // Append close button

  var closeButton = document.createElement('button');
  closeButton.classList.add(_cym_prompt_css__WEBPACK_IMPORTED_MODULE_1___default.a['close-button']);

  closeButton.onclick = function () {
    return closeCymPrompt(cymPromptOptions.onPromptClosed);
  };

  container.appendChild(closeButton);
  return container;
}
/**
 * Append CYM-Prompt (Change-Your-Mind Prompt) on body element
 */


function openCymPrompt(cymPromptData) {
  var cymPromptOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  if (document.getElementById(CYM_PROMPT_ID) || !cymPromptData) {
    return;
  }

  _utils_log__WEBPACK_IMPORTED_MODULE_0__["default"].debug('Showing cym-prompt...');
  var cymPrompt = document.createElement('div');
  cymPrompt.classList.add(_cym_prompt_css__WEBPACK_IMPORTED_MODULE_1___default.a['cymp']);
  cymPrompt.id = CYM_PROMPT_ID;

  if (cymPromptData.html) {
    cymPrompt.innerHTML = cymPromptData.html;
  } else {
    // Append overlay
    var overlay = document.createElement('div');
    overlay.classList.add(_cym_prompt_css__WEBPACK_IMPORTED_MODULE_1___default.a.overlay);
    cymPrompt.appendChild(overlay); // Append container

    var container = composeCympContainer(cymPromptData, cymPromptOptions);
    cymPrompt.appendChild(container);
  } // Append to DOM


  if (document.body) {
    document.body.appendChild(cymPrompt);
  } // Opened callback


  if (cymPromptOptions.onPromptOpened) {
    cymPromptOptions.onPromptOpened();
  }
}
/**
 * Remove CYM-Prompt (Change-Your-Mind Prompt) from DOM tree
 */

function closeCymPrompt(onPromptClosed) {
  var promptElement = document.getElementById(CYM_PROMPT_ID);

  if (promptElement) {
    _utils_log__WEBPACK_IMPORTED_MODULE_0__["default"].debug('Closing cym-prompt...');
    promptElement.classList.add(_cym_prompt_css__WEBPACK_IMPORTED_MODULE_1___default.a['is-closing']); // Closed callback

    if (onPromptClosed) {
      onPromptClosed();
    } // Remove DOM element after transition


    setTimeout(function () {
      promptElement.remove();
    }, CLOSE_TRANSITION_DURATION);
  }
}

/***/ }),

/***/ "./lib/push_prompts/cym_prompt/index.js":
/*!**********************************************!*\
  !*** ./lib/push_prompts/cym_prompt/index.js ***!
  \**********************************************/
/*! exports provided: openCymPrompt, closeCymPrompt */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _cym_prompt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cym_prompt */ "./lib/push_prompts/cym_prompt/cym_prompt.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "openCymPrompt", function() { return _cym_prompt__WEBPACK_IMPORTED_MODULE_0__["openCymPrompt"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "closeCymPrompt", function() { return _cym_prompt__WEBPACK_IMPORTED_MODULE_0__["closeCymPrompt"]; });



/***/ }),

/***/ "./lib/push_prompts/fake_prompt/fake_prompt.css":
/*!******************************************************!*\
  !*** ./lib/push_prompts/fake_prompt/fake_prompt.css ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(/*! !../../../../../node_modules/css-loader??ref--6-1!../../../../../node_modules/postcss-loader/src??postcss!./fake_prompt.css */ "../../node_modules/css-loader/index.js?!../../node_modules/postcss-loader/src/index.js?!./lib/push_prompts/fake_prompt/fake_prompt.css");

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":true}

options.transform = transform
options.insertInto = undefined;

var update = __webpack_require__(/*! ../../../../../node_modules/style-loader/lib/addStyles.js */ "../../node_modules/style-loader/lib/addStyles.js")(content, options);

if(content.locals) module.exports = content.locals;

if(false) {}

/***/ }),

/***/ "./lib/push_prompts/fake_prompt/fake_prompt.js":
/*!*****************************************************!*\
  !*** ./lib/push_prompts/fake_prompt/fake_prompt.js ***!
  \*****************************************************/
/*! exports provided: FAKE_PROMPT_ID, CLOSE_TRANSITION_DURATION, openFakePrompt, closeFakePrompt, confirmFakePrompt */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FAKE_PROMPT_ID", function() { return FAKE_PROMPT_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CLOSE_TRANSITION_DURATION", function() { return CLOSE_TRANSITION_DURATION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "openFakePrompt", function() { return openFakePrompt; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "closeFakePrompt", function() { return closeFakePrompt; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "confirmFakePrompt", function() { return confirmFakePrompt; });
/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/log */ "./lib/utils/log.js");
/* harmony import */ var _fake_prompt_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fake_prompt.css */ "./lib/push_prompts/fake_prompt/fake_prompt.css");
/* harmony import */ var _fake_prompt_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_fake_prompt_css__WEBPACK_IMPORTED_MODULE_1__);


var FAKE_PROMPT_ID = 'qgraphFakePromptContainer';
var CLOSE_TRANSITION_DURATION = 550;
var defaultPromptData = {
  title: 'Get Latest Updates',
  message: 'Subscribe to notifications',
  // A bell icon
  icon: 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiIHZpZXdCb3g9IjAgMCA1MzUuNSA1MzUuNSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTM1LjUgNTM1LjU7IiB4bWw6c3BhY2U9InByZXNlcnZlIj48Zz48ZyBpZD0ibm90aWZpY2F0aW9ucy1vbiI+PHBhdGggZD0iTTE0Mi44LDUzLjU1bC0zNS43LTM1LjdDNDUuOSw2My43NSw1LjEsMTM1LjE1LDAsMjE2Ljc1aDUxQzU2LjEsMTQ3LjksODkuMjUsODkuMjUsMTQyLjgsNTMuNTV6IE00ODQuNSwyMTYuNzVoNTEgICAgYy01LjEtODEuNi00My4zNS0xNTMtMTA0LjU1LTE5OC45bC0zNS43LDM1LjdDNDQ2LjI1LDg5LjI1LDQ3OS40LDE0Ny45LDQ4NC41LDIxNi43NXogTTQzMy41LDIyOS41ICAgIGMwLTc5LjA1LTUzLjU1LTE0Mi44LTEyNy41LTE2MC42NVY1MWMwLTIwLjQtMTcuODUtMzguMjUtMzguMjUtMzguMjVjLTIwLjQsMC0zOC4yNSwxNy44NS0zOC4yNSwzOC4yNXYxNy44NSAgICBDMTU1LjU1LDg2LjcsMTAyLDE1MC40NSwxMDIsMjI5LjV2MTQwLjI1bC01MSw1MXYyNS41aDQzMy41di0yNS41bC01MS01MVYyMjkuNXogTTI2Ny43NSw1MjIuNzVjMi41NSwwLDcuNjUsMCwxMC4yLDAgICAgYzE3Ljg1LTIuNTUsMzAuNi0xNS4zLDM1LjctMzAuNmMyLjU1LTUuMTAxLDUuMS0xMi43NSw1LjEtMjAuNGgtMTAyQzIxNi43NSw0OTkuOCwyMzkuNyw1MjIuNzUsMjY3Ljc1LDUyMi43NXoiIGZpbGw9IiMwMDZERjAiLz48L2c+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjwvc3ZnPg==',
  subscribeText: 'Enable',
  laterText: 'Not Now'
};

/**
 * Compose fake prompt's container
 */
function composeFakePromptContainer(fakePromptData, fakePromptOptions) {
  var container = document.createElement('div');
  container.classList.add(_fake_prompt_css__WEBPACK_IMPORTED_MODULE_1___default.a.container);
  var contentWrapper = document.createElement('div');
  contentWrapper.classList.add(_fake_prompt_css__WEBPACK_IMPORTED_MODULE_1___default.a['content-wrapper']);
  var content = document.createElement('div');
  content.classList.add(_fake_prompt_css__WEBPACK_IMPORTED_MODULE_1___default.a.content);
  var actionButtons = document.createElement('div');
  actionButtons.classList.add(_fake_prompt_css__WEBPACK_IMPORTED_MODULE_1___default.a['action-buttons']); // Append icon image

  var iconImg = document.createElement('img');
  iconImg.classList.add(_fake_prompt_css__WEBPACK_IMPORTED_MODULE_1___default.a.icon);
  iconImg.setAttribute('src', fakePromptData.icon || defaultPromptData.icon);
  contentWrapper.appendChild(iconImg); // Append title

  var title = document.createElement('h3');
  title.innerHTML = fakePromptData.title || defaultPromptData.title;
  content.appendChild(title); // Append message

  var message = document.createElement('p');
  message.innerHTML = fakePromptData.message || defaultPromptData.message;
  content.appendChild(message); // Append close button

  var closeButton = document.createElement('button');
  closeButton.classList.add(_fake_prompt_css__WEBPACK_IMPORTED_MODULE_1___default.a['close-button']);
  closeButton.innerHTML = fakePromptData.laterText || defaultPromptData.laterText;

  closeButton.onclick = function () {
    return closeFakePrompt(fakePromptOptions.onPromptClosed);
  };

  actionButtons.appendChild(closeButton); // Append confirm button

  var confirmButton = document.createElement('button');
  confirmButton.classList.add(_fake_prompt_css__WEBPACK_IMPORTED_MODULE_1___default.a['confirm-button']);
  confirmButton.innerHTML = fakePromptData.subscribeText || defaultPromptData.subscribeText;

  confirmButton.onclick = function () {
    return confirmFakePrompt(fakePromptOptions.onPromptConfirmed, fakePromptOptions.onPromptClosed);
  };

  if (fakePromptData.buttonColor) {
    confirmButton.setAttribute('style', "background: ".concat(fakePromptData.buttonColor, ";"));
  }

  actionButtons.appendChild(confirmButton);
  contentWrapper.appendChild(content);
  container.appendChild(contentWrapper);
  container.appendChild(actionButtons);
  return container;
}
/**
 * Append Fake Prompt on body element
 */


function openFakePrompt() {
  var fakePromptData = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var fakePromptOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  if (document.getElementById(FAKE_PROMPT_ID)) {
    return;
  }

  _utils_log__WEBPACK_IMPORTED_MODULE_0__["default"].debug('Showing fake prompt...');
  var fakePrompt = document.createElement('div');
  fakePrompt.classList.add(_fake_prompt_css__WEBPACK_IMPORTED_MODULE_1___default.a['fake-prompt']);
  fakePrompt.id = FAKE_PROMPT_ID; // Append `.is-middle` modifier on container's class

  if (fakePromptData.isMiddle) {
    fakePrompt.classList.add(_fake_prompt_css__WEBPACK_IMPORTED_MODULE_1___default.a['is-middle']);
  }

  if (fakePromptData.html) {
    fakePrompt.innerHTML = fakePromptData.html;
  } else {
    // Append overlay
    if (fakePromptData.overlay) {
      var overlay = document.createElement('div');
      overlay.classList.add(_fake_prompt_css__WEBPACK_IMPORTED_MODULE_1___default.a.overlay);
      fakePrompt.appendChild(overlay);
    } // Append container


    var container = composeFakePromptContainer(fakePromptData, fakePromptOptions);
    fakePrompt.appendChild(container);
  } // Append to DOM


  if (document.body) {
    document.body.appendChild(fakePrompt);
  } // Opened callback


  if (fakePromptOptions.onPromptOpened) {
    fakePromptOptions.onPromptOpened();
  }
}
/**
 * Remove Fake Prompt from DOM tree
 */

function closeFakePrompt(onPromptClosed) {
  var promptElement = document.getElementById(FAKE_PROMPT_ID);

  if (promptElement) {
    _utils_log__WEBPACK_IMPORTED_MODULE_0__["default"].debug('Closing fake prompt...');
    promptElement.classList.add(_fake_prompt_css__WEBPACK_IMPORTED_MODULE_1___default.a['is-closing']); // Closed callback

    if (onPromptClosed) {
      onPromptClosed();
    } // Remove DOM element after transition


    setTimeout(function () {
      promptElement.remove();
    }, CLOSE_TRANSITION_DURATION);
  }
}
/**
 * Close then fire confirm callback
 */

function confirmFakePrompt(onPromptConfirmed, onPromptClosed) {
  closeFakePrompt(onPromptClosed);
  _utils_log__WEBPACK_IMPORTED_MODULE_0__["default"].debug('Confirm fake prompt'); // Confirmed callback

  if (onPromptConfirmed) {
    onPromptConfirmed();
  }
}

/***/ }),

/***/ "./lib/push_prompts/fake_prompt/index.js":
/*!***********************************************!*\
  !*** ./lib/push_prompts/fake_prompt/index.js ***!
  \***********************************************/
/*! exports provided: openFakePrompt, closeFakePrompt, confirmFakePrompt */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _fake_prompt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fake_prompt */ "./lib/push_prompts/fake_prompt/fake_prompt.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "openFakePrompt", function() { return _fake_prompt__WEBPACK_IMPORTED_MODULE_0__["openFakePrompt"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "closeFakePrompt", function() { return _fake_prompt__WEBPACK_IMPORTED_MODULE_0__["closeFakePrompt"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "confirmFakePrompt", function() { return _fake_prompt__WEBPACK_IMPORTED_MODULE_0__["confirmFakePrompt"]; });



/***/ }),

/***/ "./lib/push_prompts/on_subscribed_popup/index.js":
/*!*******************************************************!*\
  !*** ./lib/push_prompts/on_subscribed_popup/index.js ***!
  \*******************************************************/
/*! exports provided: openOnSubscribedPopup, closeOnSubscribedPopup, POPUP_OPENED_EVENT, POPUP_CLOSED_EVENT */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _on_subscribed_popup__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./on_subscribed_popup */ "./lib/push_prompts/on_subscribed_popup/on_subscribed_popup.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "openOnSubscribedPopup", function() { return _on_subscribed_popup__WEBPACK_IMPORTED_MODULE_0__["openOnSubscribedPopup"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "closeOnSubscribedPopup", function() { return _on_subscribed_popup__WEBPACK_IMPORTED_MODULE_0__["closeOnSubscribedPopup"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "POPUP_OPENED_EVENT", function() { return _on_subscribed_popup__WEBPACK_IMPORTED_MODULE_0__["POPUP_OPENED_EVENT"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "POPUP_CLOSED_EVENT", function() { return _on_subscribed_popup__WEBPACK_IMPORTED_MODULE_0__["POPUP_CLOSED_EVENT"]; });



/***/ }),

/***/ "./lib/push_prompts/on_subscribed_popup/on_subscribed_popup.css":
/*!**********************************************************************!*\
  !*** ./lib/push_prompts/on_subscribed_popup/on_subscribed_popup.css ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(/*! !../../../../../node_modules/css-loader??ref--6-1!../../../../../node_modules/postcss-loader/src??postcss!./on_subscribed_popup.css */ "../../node_modules/css-loader/index.js?!../../node_modules/postcss-loader/src/index.js?!./lib/push_prompts/on_subscribed_popup/on_subscribed_popup.css");

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":true}

options.transform = transform
options.insertInto = undefined;

var update = __webpack_require__(/*! ../../../../../node_modules/style-loader/lib/addStyles.js */ "../../node_modules/style-loader/lib/addStyles.js")(content, options);

if(content.locals) module.exports = content.locals;

if(false) {}

/***/ }),

/***/ "./lib/push_prompts/on_subscribed_popup/on_subscribed_popup.js":
/*!*********************************************************************!*\
  !*** ./lib/push_prompts/on_subscribed_popup/on_subscribed_popup.js ***!
  \*********************************************************************/
/*! exports provided: POPUP_ID, POPUP_OPENED_EVENT, POPUP_CLOSED_EVENT, openOnSubscribedPopup, closeOnSubscribedPopup */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "POPUP_ID", function() { return POPUP_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "POPUP_OPENED_EVENT", function() { return POPUP_OPENED_EVENT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "POPUP_CLOSED_EVENT", function() { return POPUP_CLOSED_EVENT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "openOnSubscribedPopup", function() { return openOnSubscribedPopup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "closeOnSubscribedPopup", function() { return closeOnSubscribedPopup; });
/* harmony import */ var _on_subscribed_popup_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./on_subscribed_popup.css */ "./lib/push_prompts/on_subscribed_popup/on_subscribed_popup.css");
/* harmony import */ var _on_subscribed_popup_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_on_subscribed_popup_css__WEBPACK_IMPORTED_MODULE_0__);

var POPUP_ID = 'qg-on-subscribed-popup'; // Export for unit test

var POPUP_OPENED_EVENT = 'onSubscribedPopupOpened';
var POPUP_CLOSED_EVENT = 'onSubscribedPopupClosed';
/**
 * Append On-Subscribed Popup on body element
 */

function openOnSubscribedPopup(onSubscribedPopup, popupOptions) {
  if (!onSubscribedPopup.enabled) {
    return;
  }

  var _ref = popupOptions || {},
      rootDocument = _ref.rootDocument,
      containerId = _ref.containerId,
      onPopupOpened = _ref.onPopupOpened,
      onPopupClosed = _ref.onPopupClosed,
      onCloseButtonClick = _ref.onCloseButtonClick;

  var popup = document.createElement('div');
  popup.classList.add(_on_subscribed_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a.popup);
  popup.id = POPUP_ID; // Append overlay if necessary

  if (onSubscribedPopup.showOverlay) {
    var overlay = document.createElement('div');
    overlay.classList.add(_on_subscribed_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a.overlay);
    popup.appendChild(overlay);
  } // Append close button


  var closeButton = document.createElement('div');
  closeButton.classList.add(_on_subscribed_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a['close-button']);

  closeButton.onclick = onCloseButtonClick || function () {
    closeOnSubscribedPopup(onPopupClosed);
  };

  popup.appendChild(closeButton); // Prevent body from scrolling with extra wrapper

  var poupScroll = document.createElement('div');
  poupScroll.classList.add(_on_subscribed_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a['popup-scroll']);
  popup.appendChild(poupScroll); // Append container

  var container = document.createElement('div');

  if (containerId) {
    container.id = containerId;
  }

  container.classList.add(_on_subscribed_popup_css__WEBPACK_IMPORTED_MODULE_0___default.a.container);
  container.innerHTML = onSubscribedPopup.htmlBody;
  poupScroll.appendChild(container); // Append to DOM

  var renderedDocument = rootDocument || document;

  if (renderedDocument.body) {
    renderedDocument.body.appendChild(popup);
  } // Opened callback


  if (onPopupOpened) {
    onPopupOpened();
  }
}
/**
 * Remove On-Subscribed Popup from DOM tree
 */

function closeOnSubscribedPopup(onPopupClosed) {
  var popupWrapper = document.getElementById(POPUP_ID);

  if (popupWrapper) {
    popupWrapper.remove(); // Closed callback

    if (onPopupClosed) {
      onPopupClosed();
    }
  }
}

/***/ }),

/***/ "./lib/push_prompts/overlay_prompt/index.js":
/*!**************************************************!*\
  !*** ./lib/push_prompts/overlay_prompt/index.js ***!
  \**************************************************/
/*! exports provided: openOverlayPrompt, closeOverlayPrompt */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _overlay_prompt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./overlay_prompt */ "./lib/push_prompts/overlay_prompt/overlay_prompt.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "openOverlayPrompt", function() { return _overlay_prompt__WEBPACK_IMPORTED_MODULE_0__["openOverlayPrompt"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "closeOverlayPrompt", function() { return _overlay_prompt__WEBPACK_IMPORTED_MODULE_0__["closeOverlayPrompt"]; });



/***/ }),

/***/ "./lib/push_prompts/overlay_prompt/overlay_prompt.css":
/*!************************************************************!*\
  !*** ./lib/push_prompts/overlay_prompt/overlay_prompt.css ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(/*! !../../../../../node_modules/css-loader??ref--6-1!../../../../../node_modules/postcss-loader/src??postcss!./overlay_prompt.css */ "../../node_modules/css-loader/index.js?!../../node_modules/postcss-loader/src/index.js?!./lib/push_prompts/overlay_prompt/overlay_prompt.css");

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":true}

options.transform = transform
options.insertInto = undefined;

var update = __webpack_require__(/*! ../../../../../node_modules/style-loader/lib/addStyles.js */ "../../node_modules/style-loader/lib/addStyles.js")(content, options);

if(content.locals) module.exports = content.locals;

if(false) {}

/***/ }),

/***/ "./lib/push_prompts/overlay_prompt/overlay_prompt.js":
/*!***********************************************************!*\
  !*** ./lib/push_prompts/overlay_prompt/overlay_prompt.js ***!
  \***********************************************************/
/*! exports provided: OVERLAY_PROMPT_ID, openOverlayPrompt, closeOverlayPrompt */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OVERLAY_PROMPT_ID", function() { return OVERLAY_PROMPT_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "openOverlayPrompt", function() { return openOverlayPrompt; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "closeOverlayPrompt", function() { return closeOverlayPrompt; });
/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/log */ "./lib/utils/log.js");
/* harmony import */ var _overlay_prompt_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./overlay_prompt.css */ "./lib/push_prompts/overlay_prompt/overlay_prompt.css");
/* harmony import */ var _overlay_prompt_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_overlay_prompt_css__WEBPACK_IMPORTED_MODULE_1__);


var OVERLAY_PROMPT_ID = 'qg-overlay-view';
/**
 * Get DOM element of overlay's content
 */

function composeOverlayContent(_ref) {
  var title = _ref.title,
      message = _ref.message;
  var content = document.createElement('div');
  content.classList.add(_overlay_prompt_css__WEBPACK_IMPORTED_MODULE_1___default.a.content);

  content.onclick = function (e) {
    _utils_log__WEBPACK_IMPORTED_MODULE_0__["default"].debug('clicked overlay child');
    e.stopPropagation();
  }; // Append title


  if (title) {
    var contentTitle = document.createElement('h4');
    contentTitle.innerHTML = title;
    content.appendChild(contentTitle);
  } // Append message


  if (message) {
    var contentMsg = document.createElement('h6');
    contentMsg.innerHTML = message;
    content.appendChild(contentMsg);
  }

  return content;
}

function openOverlayPrompt(overlayPrompt) {
  // Do nothing if settings are invalid or prompt was existed
  if (!overlayPrompt || !overlayPrompt.title || !overlayPrompt.message || document.getElementById(OVERLAY_PROMPT_ID)) {
    return;
  }

  var overlay = document.createElement('div');
  overlay.classList.add(_overlay_prompt_css__WEBPACK_IMPORTED_MODULE_1___default.a.overlay);
  overlay.id = OVERLAY_PROMPT_ID;
  overlay.onclick = closeOverlayPrompt; // Append content

  var content = composeOverlayContent(overlayPrompt);
  overlay.appendChild(content); // Append close button

  var closeButton = document.createElement('a');
  closeButton.classList.add(_overlay_prompt_css__WEBPACK_IMPORTED_MODULE_1___default.a['close-button']);
  closeButton.onclick = closeOverlayPrompt;
  overlay.appendChild(closeButton); // Append to DOM

  if (document.body) {
    document.body.appendChild(overlay);
  }
}
function closeOverlayPrompt() {
  var promptElement = document.getElementById(OVERLAY_PROMPT_ID);

  if (promptElement) {
    promptElement.remove();
  }
}

/***/ }),

/***/ "./lib/recommendation/index.js":
/*!*************************************!*\
  !*** ./lib/recommendation/index.js ***!
  \*************************************/
/*! exports provided: getRecommendationWithApp, showRecommendationWithApp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _recommendation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./recommendation */ "./lib/recommendation/recommendation.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getRecommendationWithApp", function() { return _recommendation__WEBPACK_IMPORTED_MODULE_0__["getRecommendationWithApp"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "showRecommendationWithApp", function() { return _recommendation__WEBPACK_IMPORTED_MODULE_0__["showRecommendationWithApp"]; });



/***/ }),

/***/ "./lib/recommendation/recommendation.js":
/*!**********************************************!*\
  !*** ./lib/recommendation/recommendation.js ***!
  \**********************************************/
/*! exports provided: getRecommendationWithApp, showRecommendationWithApp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRecommendationWithApp", function() { return getRecommendationWithApp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showRecommendationWithApp", function() { return showRecommendationWithApp; });
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread.js");
/* harmony import */ var _utils_makeRequest__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/makeRequest */ "./lib/utils/makeRequest.js");
/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/log */ "./lib/utils/log.js");
/* harmony import */ var _widget__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./widget */ "./lib/recommendation/widget.js");




var getRecommendationWithApp = function getRecommendationWithApp(appId) {
  return function (type) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var cb = arguments.length > 2 ? arguments[2] : undefined;

    // Required for flow as hard to judge the replacement can work all the times.
    if (false) {}

    var _options$productId = options.productId,
        productId = _options$productId === void 0 ? '' : _options$productId,
        _options$datafeedId = options.datafeedId,
        datafeedId = _options$datafeedId === void 0 ? '' : _options$datafeedId,
        maxItems = options.maxItems;
    var endpoint = "".concat("https://config.new-infra.staging-api.qgraph.io", "/api/v1.0/user_recommendation?type=").concat(type, "&appId=").concat(appId, "&productId=").concat(productId, "&datafeedId=").concat(datafeedId);
    cb = typeof cb === 'function' ? cb : function () {};
    Object(_utils_makeRequest__WEBPACK_IMPORTED_MODULE_1__["default"])({
      url: endpoint,
      method: 'GET'
    }).then(function (res) {
      _utils_log__WEBPACK_IMPORTED_MODULE_2__["default"].debug('getRecommendation', res);

      if (!res || !res.json || !Array.isArray(res.json)) {
        return cb(new Error('Retrieved invalid recommendation format'));
      }

      cb(null, res.json.slice(0, maxItems || undefined));
    })["catch"](function (err) {
      _utils_log__WEBPACK_IMPORTED_MODULE_2__["default"].error('Failed to get recommendation', err);
      cb(err);
    });
  };
};
var showRecommendationWithApp = function showRecommendationWithApp(appId) {
  return function (id) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
      model: 'auto'
    };
    var cb = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};
    // TODO: If no given columns from user, the columns value should be calculated
    // by intrinsic layout size. e.g. desirable item width is 180px. With a given
    // computed available width: 600px, the columns should be 3.
    var defaultOpts = {
      model: 'auto',
      productId: '',
      datafeedId: '',
      layout: {
        type: 'row',
        gap: 20,
        columns: 5,
        ratio: 1 / 1
      },
      styles: {},
      query: {}
    };
    var container = document.getElementById(id);

    if (!container || !(container instanceof HTMLDivElement)) {
      _utils_log__WEBPACK_IMPORTED_MODULE_2__["default"].error('Cannot find the target widget container', id);
      return cb(new Error('Container element for recommendation is not found'));
    }

    var productId = options.productId,
        datafeedId = options.datafeedId,
        _options$layout = options.layout,
        layout = _options$layout === void 0 ? {} : _options$layout;
    var globalParams = JSON.parse((window._AIQ_REC_PARAMS || {})[id] || '{}');
    var maxItems = layout.maxItems || globalParams.layout && globalParams.layout.maxItems;
    _utils_log__WEBPACK_IMPORTED_MODULE_2__["default"].debug('showRecommendation', globalParams, options);
    getRecommendationWithApp(appId)(options.model || globalParams.model || defaultOpts.model, {
      productId: productId,
      datafeedId: datafeedId,
      maxItems: maxItems
    }, function (err) {
      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];

      if (err) {
        return cb(err);
      }

      if (!result || result.length === 0) {
        return cb(new Error('No recommendation found'));
      } // Append query pairs to existing url


      if (globalParams.query || options.query) {
        result = result.map(function (item) {
          try {
            var _ref = new URL(item.url),
                href = _ref.href,
                searchParams = _ref.searchParams;

            var qs = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__["default"])({}, globalParams.query || {}, options.query || {});

            Object.keys(qs).forEach(function (k) {
              searchParams.set(k, qs[k]);
            });
            item.url = "".concat(href, "?").concat(searchParams.toString());
          } catch (e) {}

          return item;
        });
      }

      Object(_widget__WEBPACK_IMPORTED_MODULE_3__["renderRecommendationWidget"])(container, result, Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__["default"])({}, defaultOpts.layout, globalParams.layout || {}, options.layout || {}), Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__["default"])({}, defaultOpts.styles, globalParams.styles || {}, options.styles || {}));
      cb(null, {
        widgetId: id,
        recommendations: result
      });
    });
  };
};

/***/ }),

/***/ "./lib/recommendation/widget.css":
/*!***************************************!*\
  !*** ./lib/recommendation/widget.css ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(/*! !../../../../node_modules/css-loader??ref--6-1!../../../../node_modules/postcss-loader/src??postcss!./widget.css */ "../../node_modules/css-loader/index.js?!../../node_modules/postcss-loader/src/index.js?!./lib/recommendation/widget.css");

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":true}

options.transform = transform
options.insertInto = undefined;

var update = __webpack_require__(/*! ../../../../node_modules/style-loader/lib/addStyles.js */ "../../node_modules/style-loader/lib/addStyles.js")(content, options);

if(content.locals) module.exports = content.locals;

if(false) {}

/***/ }),

/***/ "./lib/recommendation/widget.js":
/*!**************************************!*\
  !*** ./lib/recommendation/widget.js ***!
  \**************************************/
/*! exports provided: renderRecommendationWidget */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "renderRecommendationWidget", function() { return renderRecommendationWidget; });
/* harmony import */ var _widget_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./widget.css */ "./lib/recommendation/widget.css");
/* harmony import */ var _widget_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_widget_css__WEBPACK_IMPORTED_MODULE_0__);


var applyStyleRules = function applyStyleRules(elem, styles) {
  if (!styles) {
    return;
  }

  Object.keys(styles).forEach(function (rule) {
    // $FlowFixMe No way to cover the type checking but respect the input from user's parameters.
    elem.style[rule] = styles[rule];
  });
}; // TODO: Encapsulate recommendation into a class to contain configurated context instead
// of single render function.


var renderRecommendationWidget = function renderRecommendationWidget(container, recommendations, layout, styles) {
  var type = layout.type,
      gap = layout.gap,
      columns = layout.columns,
      ratio = layout.ratio; // TODO: If no specified columns from call site, we can leverage onresize
  // event to decide better column number for responsiveness.

  var displayColumns = columns + (type === 'row' ? 0.2 : 0);
  var calcWidthStyle = "calc(100% / ".concat(displayColumns, " - ").concat(gap, "px)");
  var calcRatioStyle = "calc(100% * 1 / ".concat(ratio, ")");
  var outerFrag = document.createDocumentFragment(); // TODO: QGRAPH-1146: Send feedback event of impression and click

  recommendations.forEach(function (rec) {
    var wrapper = document.createElement('a');
    var thumbnail = document.createElement('div');
    var productText = document.createElement('div');
    var priceText = document.createElement('div');
    var retailPriceText = document.createElement('div');
    thumbnail.classList.add(_widget_css__WEBPACK_IMPORTED_MODULE_0___default.a.thumbnails);
    thumbnail.style.backgroundImage = "url(\"".concat(rec.image, "\")");
    thumbnail.style.paddingTop = calcRatioStyle;
    productText.textContent = rec.title;
    productText.classList.add(_widget_css__WEBPACK_IMPORTED_MODULE_0___default.a.text);
    productText.classList.add(_widget_css__WEBPACK_IMPORTED_MODULE_0___default.a.title);
    applyStyleRules(productText, styles.title);
    priceText.textContent = new Intl.NumberFormat('en', {
      style: 'decimal',
      currency: rec.currency
    }).format(+rec.currentPrice) || '';
    priceText.classList.add(_widget_css__WEBPACK_IMPORTED_MODULE_0___default.a.text);
    applyStyleRules(priceText, styles.price);
    retailPriceText.textContent = new Intl.NumberFormat('en', {
      style: 'decimal',
      currency: rec.currency
    }).format(+rec.retailPrice) || '';
    retailPriceText.classList.add(_widget_css__WEBPACK_IMPORTED_MODULE_0___default.a.text);
    retailPriceText.classList.add(_widget_css__WEBPACK_IMPORTED_MODULE_0___default.a.retailPrice);
    applyStyleRules(retailPriceText, styles.retailPrice);
    wrapper.append(thumbnail, productText, priceText, retailPriceText);
    wrapper.classList.add(_widget_css__WEBPACK_IMPORTED_MODULE_0___default.a.wrapper);
    wrapper.title = rec.title;
    wrapper.style.minWidth = calcWidthStyle;
    wrapper.style.maxWidth = calcWidthStyle;
    wrapper.style.padding = "".concat(gap, "px ").concat(gap / 2, "px");
    wrapper.href = rec.url;
    outerFrag.appendChild(wrapper);
  }); // Remove existing children under target element.

  while (container.firstChild) {
    container.removeChild(container.firstChild);
  }

  container.classList.add(_widget_css__WEBPACK_IMPORTED_MODULE_0___default.a.container); // Override the default style accordingly by layout types

  if (type === 'grid') {
    container.style.flexWrap = 'wrap';
  }

  if (type === 'row') {
    container.style.overflowX = 'auto';
  }

  container.appendChild(outerFrag);
};

/***/ }),

/***/ "./lib/third_party/getScrollPercent.js":
/*!*********************************************!*\
  !*** ./lib/third_party/getScrollPercent.js ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/**
 * Get viewport height even the `DOCTYPE` is not specified.
 */
function getViewportHeight() {
  if (document.compatMode === 'BackCompat') {
    /**
     * In Quirks mode, have an issue `document.documentElement.clientHeight === document.documentElement.scrollHeight`
     */
    // Try to get from innerHeight especially for mobile device case (EX: OPPO A3, body.clientHeight will be too small...)
    // https://stackoverflow.com/questions/1766861/find-the-exact-height-and-width-of-the-viewport-in-a-cross-browser-way-no-proto
    if (typeof window.innerHeight !== 'undefined') {
      return window.innerHeight;
    } // https://stackoverflow.com/questions/18284087/if-doctype-is-not-specified-on-chrome-firefox-or-safari-is-there-a-way-to-fin


    return document.body.clientHeight;
  }

  return document.documentElement.clientHeight;
}
/**
 * Cross browser method to determine vertical scroll percentage.
 * https://stackoverflow.com/questions/2387136/cross-browser-method-to-determine-vertical-scroll-percentage-in-javascript
 */


function getScrollPercent() {
  var h = document.documentElement;
  var b = document.body;
  var st = 'scrollTop';
  var sh = 'scrollHeight';
  return (h[st] || b[st]) / ((h[sh] || b[sh]) - getViewportHeight()) * 100;
}

/* harmony default export */ __webpack_exports__["default"] = (getScrollPercent);

/***/ }),

/***/ "./lib/third_party/isPrivateMode.js":
/*!******************************************!*\
  !*** ./lib/third_party/isPrivateMode.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/**
 * Detect if the browser is running in Private mode
 * https://gist.github.com/jherax/a81c8c132d09cc354a0e2cb911841ff1
 *
 * @returns {Promise}
 */
function isPrivateMode() {
  return new Promise(function (resolve) {
    var on = function on() {
      return resolve(true);
    }; // is in private mode


    var off = function off() {
      return resolve(false);
    }; // not private mode


    var testLocalStorage = function testLocalStorage() {
      try {
        if (localStorage.length) off();else {
          localStorage.x = 1;
          localStorage.removeItem('x');
          off();
        }
      } catch (e) {
        // Safari only enables cookie in private mode
        // if cookie is disabled, then all client side storage is disabled
        // if all client side storage is disabled, then there is no point
        // in using private mode
        navigator.cookieEnabled ? on() : off();
      }
    }; // Chrome & Opera


    if (window.webkitRequestFileSystem) {
      return void window.webkitRequestFileSystem(0, 0, off, on);
    } // Firefox


    if ('MozAppearance' in document.documentElement.style) {
      if (indexedDB === null) return on();
      var db = indexedDB.open('test');
      db.onerror = on;
      db.onsuccess = off;
      return void 0;
    } // Safari


    var isSafari = navigator.userAgent.match(/Version\/([0-9._]+).*Safari/);

    if (isSafari) {
      var version = parseInt(isSafari[1], 10);
      if (version < 11) return testLocalStorage();

      try {
        window.openDatabase(null, null, null, null);
        return off();
      } catch (_) {
        return on();
      }
    } // IE10+ & Edge InPrivate


    if (!window.indexedDB && (window.PointerEvent || window.MSPointerEvent)) {
      return on();
    } // default navigation mode


    return off();
  });
}

/* harmony default export */ __webpack_exports__["default"] = (isPrivateMode);

/***/ }),

/***/ "./lib/third_party/ua-parser.js":
/*!**************************************!*\
  !*** ./lib/third_party/ua-parser.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* eslint-disable */
(function (window, undefined) {
  'use strict';

  var LIBVERSION = '0.7.10',
      EMPTY = '',
      UNKNOWN = '?',
      FUNC_TYPE = 'function',
      UNDEF_TYPE = 'undefined',
      OBJ_TYPE = 'object',
      STR_TYPE = 'string',
      MAJOR = 'major',
      MODEL = 'model',
      NAME = 'name',
      TYPE = 'type',
      VENDOR = 'vendor',
      VERSION = 'version',
      ARCHITECTURE = 'architecture',
      CONSOLE = 'console',
      MOBILE = 'mobile',
      TABLET = 'tablet',
      SMARTTV = 'smarttv',
      WEARABLE = 'wearable',
      EMBEDDED = 'embedded';
  var util = {
    extend: function extend(regexes, extensions) {
      var margedRegexes = {};

      for (var i in regexes) {
        if (extensions[i] && extensions[i].length % 2 === 0) {
          margedRegexes[i] = extensions[i].concat(regexes[i]);
        } else {
          margedRegexes[i] = regexes[i];
        }
      }

      return margedRegexes;
    },
    has: function has(str1, str2) {
      if (typeof str1 === 'string') {
        return str2.toLowerCase().indexOf(str1.toLowerCase()) !== -1;
      } else {
        return false;
      }
    },
    lowerize: function lowerize(str) {
      return str.toLowerCase();
    },
    major: function major(version) {
      return typeof version === STR_TYPE ? version.split('.')[0] : undefined;
    }
  };
  var mapper = {
    rgx: function rgx() {
      var result,
          i = 0,
          j,
          k,
          p,
          q,
          matches,
          match,
          args = arguments;

      while (i < args.length && !matches) {
        var regex = args[i],
            props = args[i + 1];

        if (typeof result === UNDEF_TYPE) {
          result = {};

          for (p in props) {
            if (props.hasOwnProperty(p)) {
              q = props[p];

              if (typeof q === OBJ_TYPE) {
                result[q[0]] = undefined;
              } else {
                result[q] = undefined;
              }
            }
          }
        }

        j = k = 0;

        while (j < regex.length && !matches) {
          matches = regex[j++].exec(this.getUA());

          if (matches) {
            for (p = 0; p < props.length; p++) {
              match = matches[++k];
              q = props[p];

              if (typeof q === OBJ_TYPE && q.length > 0) {
                if (q.length == 2) {
                  if (typeof q[1] === FUNC_TYPE) {
                    result[q[0]] = q[1].call(this, match);
                  } else {
                    result[q[0]] = q[1];
                  }
                } else if (q.length == 3) {
                  if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {
                    result[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;
                  } else {
                    result[q[0]] = match ? match.replace(q[1], q[2]) : undefined;
                  }
                } else if (q.length == 4) {
                  result[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;
                }
              } else {
                result[q] = match || undefined;
              }
            }
          }
        }

        i += 2;
      }

      return result;
    },
    str: function str(_str, map) {
      for (var i in map) {
        if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {
          for (var j = 0; j < map[i].length; j++) {
            if (util.has(map[i][j], _str)) {
              return i === UNKNOWN ? undefined : i;
            }
          }
        } else if (util.has(map[i], _str)) {
          return i === UNKNOWN ? undefined : i;
        }
      }

      return _str;
    }
  };
  var maps = {
    browser: {
      oldsafari: {
        version: {
          '1.0': '/8',
          1.2: '/1',
          1.3: '/3',
          '2.0': '/412',
          '2.0.2': '/416',
          '2.0.3': '/417',
          '2.0.4': '/419',
          '?': '/'
        }
      }
    },
    device: {
      amazon: {
        model: {
          'Fire Phone': ['SD', 'KF']
        }
      },
      sprint: {
        model: {
          'Evo Shift 4G': '7373KT'
        },
        vendor: {
          HTC: 'APA',
          Sprint: 'Sprint'
        }
      }
    },
    os: {
      windows: {
        version: {
          ME: '4.90',
          'NT 3.11': 'NT3.51',
          'NT 4.0': 'NT4.0',
          2000: 'NT 5.0',
          XP: ['NT 5.1', 'NT 5.2'],
          Vista: 'NT 6.0',
          7: 'NT 6.1',
          8: 'NT 6.2',
          8.1: 'NT 6.3',
          10: ['NT 6.4', 'NT 10.0'],
          RT: 'ARM'
        }
      }
    }
  };
  var regexes = {
    browser: [[/(opera\smini)\/([\w\.-]+)/i, /(opera\s[mobiletab]+).+version\/([\w\.-]+)/i, /(opera).+version\/([\w\.]+)/i, /(opera)[\/\s]+([\w\.]+)/i], [NAME, VERSION], [/(OPiOS)[\/\s]+([\w\.]+)/i], [[NAME, 'Opera Mini'], VERSION], [/\s(opr)\/([\w\.]+)/i], [[NAME, 'Opera'], VERSION], [/(kindle)\/([\w\.]+)/i, /(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i, /(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i, /(?:ms|\()(ie)\s([\w\.]+)/i, /(rekonq)\/([\w\.]+)*/i, /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i], [NAME, VERSION], [/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i], [[NAME, 'IE'], VERSION], [/(edge)\/((\d+)?[\w\.]+)/i], [NAME, VERSION], [/(yabrowser)\/([\w\.]+)/i], [[NAME, 'Yandex'], VERSION], [/(comodo_dragon)\/([\w\.]+)/i], [[NAME, /_/g, ' '], VERSION], [/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i, /(qqbrowser)[\/\s]?([\w\.]+)/i], [NAME, VERSION], [/(uc\s?browser)[\/\s]?([\w\.]+)/i, /ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i, /JUC.+(ucweb)[\/\s]?([\w\.]+)/i], [[NAME, 'UCBrowser'], VERSION], [/(dolfin)\/([\w\.]+)/i], [[NAME, 'Dolphin'], VERSION], [/((?:android.+)crmo|crios)\/([\w\.]+)/i], [[NAME, 'Chrome'], VERSION], [/XiaoMi\/MiuiBrowser\/([\w\.]+)/i], [VERSION, [NAME, 'MIUI Browser']], [/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i], [VERSION, [NAME, 'Android Browser']], [/FBAV\/([\w\.]+);/i], [VERSION, [NAME, 'Facebook']], [/fxios\/([\w\.-]+)/i], [VERSION, [NAME, 'Firefox']], [/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i], [VERSION, [NAME, 'Mobile Safari']], [/version\/([\w\.]+).+?(mobile\s?safari|safari)/i], [VERSION, NAME], [/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i], [NAME, [VERSION, mapper.str, maps.browser.oldsafari.version]], [/(konqueror)\/([\w\.]+)/i, /(webkit|khtml)\/([\w\.]+)/i], [NAME, VERSION], [/(navigator|netscape)\/([\w\.-]+)/i], [[NAME, 'Netscape'], VERSION], [/(swiftfox)/i, /(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i, /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i, /(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i, /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i, /(links)\s\(([\w\.]+)/i, /(gobrowser)\/?([\w\.]+)*/i, /(ice\s?browser)\/v?([\w\._]+)/i, /(mosaic)[\/\s]([\w\.]+)/i], [NAME, VERSION]],
    cpu: [[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i], [[ARCHITECTURE, 'amd64']], [/(ia32(?=;))/i], [[ARCHITECTURE, util.lowerize]], [/((?:i[346]|x)86)[;\)]/i], [[ARCHITECTURE, 'ia32']], [/windows\s(ce|mobile);\sppc;/i], [[ARCHITECTURE, 'arm']], [/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i], [[ARCHITECTURE, /ower/, '', util.lowerize]], [/(sun4\w)[;\)]/i], [[ARCHITECTURE, 'sparc']], [/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i], [[ARCHITECTURE, util.lowerize]]],
    device: [[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i], [MODEL, VENDOR, [TYPE, TABLET]], [/applecoremedia\/[\w\.]+ \((ipad)/], [MODEL, [VENDOR, 'Apple'], [TYPE, TABLET]], [/(apple\s{0,1}tv)/i], [[MODEL, 'Apple TV'], [VENDOR, 'Apple']], [/(archos)\s(gamepad2?)/i, /(hp).+(touchpad)/i, /(kindle)\/([\w\.]+)/i, /\s(nook)[\w\s]+build\/(\w+)/i, /(dell)\s(strea[kpr\s\d]*[\dko])/i], [VENDOR, MODEL, [TYPE, TABLET]], [/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i], [MODEL, [VENDOR, 'Amazon'], [TYPE, TABLET]], [/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i], [[MODEL, mapper.str, maps.device.amazon.model], [VENDOR, 'Amazon'], [TYPE, MOBILE]], [/\((ip[honed|\s\w*]+);.+(apple)/i], [MODEL, VENDOR, [TYPE, MOBILE]], [/\((ip[honed|\s\w*]+);/i], [MODEL, [VENDOR, 'Apple'], [TYPE, MOBILE]], [/(blackberry)[\s-]?(\w+)/i, /(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i, /(hp)\s([\w\s]+\w)/i, /(asus)-?(\w+)/i], [VENDOR, MODEL, [TYPE, MOBILE]], [/\(bb10;\s(\w+)/i], [MODEL, [VENDOR, 'BlackBerry'], [TYPE, MOBILE]], [/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i], [MODEL, [VENDOR, 'Asus'], [TYPE, TABLET]], [/(sony)\s(tablet\s[ps])\sbuild\//i, /(sony)?(?:sgp.+)\sbuild\//i], [[VENDOR, 'Sony'], [MODEL, 'Xperia Tablet'], [TYPE, TABLET]], [/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i], [[VENDOR, 'Sony'], [MODEL, 'Xperia Phone'], [TYPE, MOBILE]], [/\s(ouya)\s/i, /(nintendo)\s([wids3u]+)/i], [VENDOR, MODEL, [TYPE, CONSOLE]], [/android.+;\s(shield)\sbuild/i], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [/(playstation\s[34portablevi]+)/i], [MODEL, [VENDOR, 'Sony'], [TYPE, CONSOLE]], [/(sprint\s(\w+))/i], [[VENDOR, mapper.str, maps.device.sprint.vendor], [MODEL, mapper.str, maps.device.sprint.model], [TYPE, MOBILE]], [/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i], [VENDOR, MODEL, [TYPE, TABLET]], [/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i, /(zte)-(\w+)*/i, /(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [/(nexus\s9)/i], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [/[\s\(;](xbox(?:\sone)?)[\s\);]/i], [MODEL, [VENDOR, 'Microsoft'], [TYPE, CONSOLE]], [/(kin\.[onetw]{3})/i], [[MODEL, /\./g, ' '], [VENDOR, 'Microsoft'], [TYPE, MOBILE]], [/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i, /mot[\s-]?(\w+)*/i, /(XT\d{3,4}) build\//i, /(nexus\s[6])/i], [MODEL, [VENDOR, 'Motorola'], [TYPE, MOBILE]], [/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i], [MODEL, [VENDOR, 'Motorola'], [TYPE, TABLET]], [/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i, /((SM-T\w+))/i], [[VENDOR, 'Samsung'], MODEL, [TYPE, TABLET]], [/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i, /(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i, /sec-((sgh\w+))/i], [[VENDOR, 'Samsung'], MODEL, [TYPE, MOBILE]], [/(samsung);smarttv/i], [VENDOR, MODEL, [TYPE, SMARTTV]], [/\(dtv[\);].+(aquos)/i], [MODEL, [VENDOR, 'Sharp'], [TYPE, SMARTTV]], [/sie-(\w+)*/i], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [/(maemo|nokia).*(n900|lumia\s\d+)/i, /(nokia)[\s_-]?([\w-]+)*/i], [[VENDOR, 'Nokia'], MODEL, [TYPE, MOBILE]], [/android\s3\.[\s\w;-]{10}(a\d{3})/i], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i], [[VENDOR, 'LG'], MODEL, [TYPE, TABLET]], [/(lg) netcast\.tv/i], [VENDOR, MODEL, [TYPE, SMARTTV]], [/(nexus\s[45])/i, /lg[e;\s\/-]+(\w+)*/i], [MODEL, [VENDOR, 'LG'], [TYPE, MOBILE]], [/android.+(ideatab[a-z0-9\-\s]+)/i], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [/linux;.+((jolla));/i], [VENDOR, MODEL, [TYPE, MOBILE]], [/((pebble))app\/[\d\.]+\s/i], [VENDOR, MODEL, [TYPE, WEARABLE]], [/android.+;\s(glass)\s\d/i], [MODEL, [VENDOR, 'Google'], [TYPE, WEARABLE]], [/android.+(\w+)\s+build\/hm\1/i, /android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i, /android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i], [[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, MOBILE]], [/\s(tablet)[;\/\s]/i, /\s(mobile)[;\/\s]/i], [[TYPE, util.lowerize], VENDOR, MODEL]],
    engine: [[/windows.+\sedge\/([\w\.]+)/i], [VERSION, [NAME, 'EdgeHTML']], [/(presto)\/([\w\.]+)/i, /(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i, /(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i, /(icab)[\/\s]([23]\.[\d\.]+)/i], [NAME, VERSION], [/rv\:([\w\.]+).*(gecko)/i], [VERSION, NAME]],
    os: [[/microsoft\s(windows)\s(vista|xp)/i], [NAME, VERSION], [/(windows)\snt\s6\.2;\s(arm)/i, /(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i], [NAME, [VERSION, mapper.str, maps.os.windows.version]], [/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i], [[NAME, 'Windows'], [VERSION, mapper.str, maps.os.windows.version]], [/\((bb)(10);/i], [[NAME, 'BlackBerry'], VERSION], [/(blackberry)\w*\/?([\w\.]+)*/i, /(tizen)[\/\s]([\w\.]+)/i, /(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i, /linux;.+(sailfish);/i], [NAME, VERSION], [/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i], [[NAME, 'Symbian'], VERSION], [/\((series40);/i], [NAME], [/mozilla.+\(mobile;.+gecko.+firefox/i], [[NAME, 'Firefox OS'], VERSION], [/(nintendo|playstation)\s([wids34portablevu]+)/i, /(mint)[\/\s\(]?(\w+)*/i, /(mageia|vectorlinux)[;\s]/i, /(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i, /(hurd|linux)\s?([\w\.]+)*/i, /(gnu)\s?([\w\.]+)*/i], [NAME, VERSION], [/(cros)\s[\w]+\s([\w\.]+\w)/i], [[NAME, 'Chromium OS'], VERSION], [/(sunos)\s?([\w\.]+\d)*/i], [[NAME, 'Solaris'], VERSION], [/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i], [NAME, VERSION], [/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i], [[NAME, 'iOS'], [VERSION, /_/g, '.']], [/(mac\sos\sx)\s?([\w\s\.]+\w)*/i, /(macintosh|mac(?=_powerpc)\s)/i], [[NAME, 'Mac OS'], [VERSION, /_/g, '.']], [/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i, /(haiku)\s(\w+)/i, /(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i, /(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i, /(unix)\s?([\w\.]+)*/i], [NAME, VERSION]]
  };

  var UAParser = function UAParser(uastring, extensions) {
    if (!(this instanceof UAParser)) {
      return new UAParser(uastring, extensions).getResult();
    }

    var ua = uastring || (window && window.navigator && window.navigator.userAgent ? window.navigator.userAgent : EMPTY);
    var rgxmap = extensions ? util.extend(regexes, extensions) : regexes;

    this.getBrowser = function () {
      var browser = mapper.rgx.apply(this, rgxmap.browser);
      browser.major = util.major(browser.version);
      return browser;
    };

    this.getCPU = function () {
      return mapper.rgx.apply(this, rgxmap.cpu);
    };

    this.getDevice = function () {
      return mapper.rgx.apply(this, rgxmap.device);
    };

    this.getEngine = function () {
      return mapper.rgx.apply(this, rgxmap.engine);
    };

    this.getOS = function () {
      return mapper.rgx.apply(this, rgxmap.os);
    };

    this.getResult = function () {
      return {
        ua: this.getUA(),
        browser: this.getBrowser(),
        engine: this.getEngine(),
        os: this.getOS(),
        device: this.getDevice(),
        cpu: this.getCPU()
      };
    };

    this.getUA = function () {
      return ua;
    };

    this.setUA = function (uastring) {
      ua = uastring;
      return this;
    };

    return this;
  };

  UAParser.VERSION = LIBVERSION;
  UAParser.BROWSER = {
    NAME: NAME,
    MAJOR: MAJOR,
    VERSION: VERSION
  };
  UAParser.CPU = {
    ARCHITECTURE: ARCHITECTURE
  };
  UAParser.DEVICE = {
    MODEL: MODEL,
    VENDOR: VENDOR,
    TYPE: TYPE,
    CONSOLE: CONSOLE,
    MOBILE: MOBILE,
    SMARTTV: SMARTTV,
    TABLET: TABLET,
    WEARABLE: WEARABLE,
    EMBEDDED: EMBEDDED
  };
  UAParser.ENGINE = {
    NAME: NAME,
    VERSION: VERSION
  };
  UAParser.OS = {
    NAME: NAME,
    VERSION: VERSION
  };

  if (typeof exports !== UNDEF_TYPE) {
    if (typeof module !== UNDEF_TYPE && module.exports) {
      exports = module.exports = UAParser;
    }

    exports.UAParser = UAParser;
  } else {
    if ("function" === FUNC_TYPE && __webpack_require__(/*! !webpack amd options */ "./node_modules/webpack/buildin/amd-options.js")) {
      !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function () {
        return UAParser;
      }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
    } else {
      window.UAParser = UAParser;
    }
  }

  var $ = window.jQuery || window.Zepto;

  if (typeof $ !== UNDEF_TYPE) {
    var parser = new UAParser();
    $.ua = parser.getResult();

    $.ua.get = function () {
      return parser.getUA();
    };

    $.ua.set = function (uastring) {
      parser.setUA(uastring);
      var result = parser.getResult();

      for (var prop in result) {
        $.ua[prop] = result[prop];
      }
    };
  }
})(typeof window === 'object' ? window : this);

/***/ }),

/***/ "./lib/utils/attribution.js":
/*!**********************************!*\
  !*** ./lib/utils/attribution.js ***!
  \**********************************/
/*! exports provided: getAttribution, setAttribution, setAttributionViaUrl, navigateWithAttribution, composeAttributionEvents */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getAttribution", function() { return getAttribution; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setAttribution", function() { return setAttribution; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setAttributionViaUrl", function() { return setAttributionViaUrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "navigateWithAttribution", function() { return navigateWithAttribution; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "composeAttributionEvents", function() { return composeAttributionEvents; });
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread.js");
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var idb_keyval__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! idb-keyval */ "../../node_modules/idb-keyval/dist/idb-keyval.mjs");
/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/log */ "./lib/utils/log.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../constants */ "./lib/constants.js");







/**
 * Check if attribution is not expired yet
 *
 * - "click" event lasts for 24 hours
 * - "view" event lasts for 1 hour
 */
function shouldAttributionValid(attr) {
  var timeDiff = +new Date() - attr.ts;

  switch (attr.action) {
    case 'click':
      return Math.max(3600 * 24 * 1e3 - timeDiff, 0) > 0;

    case 'view':
      return Math.max(3600 * 1 * 1e3 - timeDiff, 0) > 0;

    default:
      {
        _utils_log__WEBPACK_IMPORTED_MODULE_4__["default"].warn('Invalid attribution', attr);
        return false;
      }
  }
}
/**
 * Get attribution data from indexedDB
 */


function getAttribution() {
  return _getAttribution.apply(this, arguments);
}
/**
 * Compose and set attribution
 */

function _getAttribution() {
  _getAttribution = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["default"])(
  /*#__PURE__*/
  _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee() {
    var attr;
    return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            _context.next = 2;
            return Object(idb_keyval__WEBPACK_IMPORTED_MODULE_3__["get"])(_constants__WEBPACK_IMPORTED_MODULE_5__["IDB_ATTRIBUTION_KEY"]);

          case 2:
            attr = _context.sent;

            if (!(attr && shouldAttributionValid(attr))) {
              _context.next = 5;
              break;
            }

            return _context.abrupt("return", attr);

          case 5:
            return _context.abrupt("return", undefined);

          case 6:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));
  return _getAttribution.apply(this, arguments);
}

function setAttribution(_x, _x2) {
  return _setAttribution.apply(this, arguments);
}
/**
 * Read attribution from url's query string and
 * set them into indexedDB.
 */

function _setAttribution() {
  _setAttribution = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["default"])(
  /*#__PURE__*/
  _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee2(action, notificationId) {
    var attribution;
    return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee2$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            attribution = {
              action: action,
              notificationId: notificationId,
              ts: +new Date()
            };
            _utils_log__WEBPACK_IMPORTED_MODULE_4__["default"].debug('Set attribution into indexedDB', attribution);
            _context2.next = 4;
            return Object(idb_keyval__WEBPACK_IMPORTED_MODULE_3__["set"])(_constants__WEBPACK_IMPORTED_MODULE_5__["IDB_ATTRIBUTION_KEY"], attribution);

          case 4:
            return _context2.abrupt("return", attribution);

          case 5:
          case "end":
            return _context2.stop();
        }
      }
    }, _callee2);
  }));
  return _setAttribution.apply(this, arguments);
}

function setAttributionViaUrl(_x3) {
  return _setAttributionViaUrl.apply(this, arguments);
}
/**
 * Set attribution on target url's search params, then navigate to that page.
 */

function _setAttributionViaUrl() {
  _setAttributionViaUrl = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["default"])(
  /*#__PURE__*/
  _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee3(url) {
    var attributionStr, attributionObj, attribution;
    return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee3$(_context3) {
      while (1) {
        switch (_context3.prev = _context3.next) {
          case 0:
            _context3.prev = 0;
            attributionStr = url.searchParams.get(_constants__WEBPACK_IMPORTED_MODULE_5__["SEARCH_PARAMS_ATTRIBUTION_KEY"]);

            if (!attributionStr) {
              _context3.next = 8;
              break;
            }

            attributionObj = JSON.parse(attributionStr); // Only keep the fields that we have

            attribution = {
              action: attributionObj.action,
              notificationId: attributionObj.notificationId,
              ts: +attributionObj.ts
            };
            _utils_log__WEBPACK_IMPORTED_MODULE_4__["default"].debug('Get attribution and set into indexedDB', attribution);
            _context3.next = 8;
            return Object(idb_keyval__WEBPACK_IMPORTED_MODULE_3__["set"])(_constants__WEBPACK_IMPORTED_MODULE_5__["IDB_ATTRIBUTION_KEY"], attribution);

          case 8:
            _context3.next = 13;
            break;

          case 10:
            _context3.prev = 10;
            _context3.t0 = _context3["catch"](0);
            _utils_log__WEBPACK_IMPORTED_MODULE_4__["default"].error('Failed to set attribution via url', _context3.t0);

          case 13:
          case "end":
            return _context3.stop();
        }
      }
    }, _callee3, null, [[0, 10]]);
  }));
  return _setAttributionViaUrl.apply(this, arguments);
}

function navigateWithAttribution(_x4) {
  return _navigateWithAttribution.apply(this, arguments);
}
/**
 * Compose the attribution data (like notificationId)
 * into each event record.
 */

function _navigateWithAttribution() {
  _navigateWithAttribution = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["default"])(
  /*#__PURE__*/
  _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee4(urlStr) {
    var url, attribution;
    return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee4$(_context4) {
      while (1) {
        switch (_context4.prev = _context4.next) {
          case 0:
            _context4.prev = 0;
            url = new URL(urlStr, location.href);
            _context4.next = 4;
            return getAttribution();

          case 4:
            attribution = _context4.sent;

            // Set attribution into search parameters
            if (attribution) {
              url.searchParams.set(_constants__WEBPACK_IMPORTED_MODULE_5__["SEARCH_PARAMS_ATTRIBUTION_KEY"], JSON.stringify(attribution));
            } // Navigate to a new page


            _utils_log__WEBPACK_IMPORTED_MODULE_4__["default"].debug('Navigate to new page with attribution', url.toString());
            window.location.assign(url.toString());
            _context4.next = 13;
            break;

          case 10:
            _context4.prev = 10;
            _context4.t0 = _context4["catch"](0);
            _utils_log__WEBPACK_IMPORTED_MODULE_4__["default"].error('Failed to navigate with attribution', _context4.t0);

          case 13:
          case "end":
            return _context4.stop();
        }
      }
    }, _callee4, null, [[0, 10]]);
  }));
  return _navigateWithAttribution.apply(this, arguments);
}

function composeAttributionEvents(_x5) {
  return _composeAttributionEvents.apply(this, arguments);
}

function _composeAttributionEvents() {
  _composeAttributionEvents = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["default"])(
  /*#__PURE__*/
  _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee5(events) {
    var attribution, notificationId, action, lastClkdNotId;
    return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee5$(_context5) {
      while (1) {
        switch (_context5.prev = _context5.next) {
          case 0:
            _context5.next = 2;
            return getAttribution();

          case 2:
            attribution = _context5.sent;

            if (!attribution) {
              _context5.next = 7;
              break;
            }

            notificationId = attribution.notificationId, action = attribution.action;
            lastClkdNotId = action === 'click' ? notificationId : undefined;
            return _context5.abrupt("return", events.map(function (event) {
              return Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__["default"])({}, event, {
                notificationId: notificationId,
                lastClkdNotId: lastClkdNotId
              });
            }));

          case 7:
            return _context5.abrupt("return", events);

          case 8:
          case "end":
            return _context5.stop();
        }
      }
    }, _callee5);
  }));
  return _composeAttributionEvents.apply(this, arguments);
}

/***/ }),

/***/ "./lib/utils/cookie.js":
/*!*****************************!*\
  !*** ./lib/utils/cookie.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread.js");
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js");
/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js-cookie */ "../../node_modules/js-cookie/src/js.cookie.js");
/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(js_cookie__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _topDomain__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./topDomain */ "./lib/utils/topDomain.js");



/**
 * Module dependencies.
 */


var domain = '.' + Object(_topDomain__WEBPACK_IMPORTED_MODULE_3__["default"])(window.location.href);
var DEFAULT_OPTIONS = {
  maxage: 31536000000,
  // default to a year
  path: '/',
  domain: domain !== '.' ? domain : undefined
};
/**
 * Add function exSet for Set a `key` and `value` with default options in our cookie.
 */

var exSet = function exSet(key, value) {
  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

  // Build expires by maxage
  var _DEFAULT_OPTIONS$opti = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__["default"])({}, DEFAULT_OPTIONS, options),
      maxage = _DEFAULT_OPTIONS$opti.maxage,
      attr = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__["default"])(_DEFAULT_OPTIONS$opti, ["maxage"]);

  js_cookie__WEBPACK_IMPORTED_MODULE_2___default.a.set(key, value, Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__["default"])({}, attr, {
    expires: new Date(new Date().getTime() + maxage)
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__["default"])({}, js_cookie__WEBPACK_IMPORTED_MODULE_2___default.a, {
  exSet: exSet
}));

/***/ }),

/***/ "./lib/utils/dates.js":
/*!****************************!*\
  !*** ./lib/utils/dates.js ***!
  \****************************/
/*! exports provided: diffDatesInDays */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "diffDatesInDays", function() { return diffDatesInDays; });
/**
 * Get the difference between two dates in days
 *
 * @see https://www.w3resource.com/javascript-exercises/javascript-date-exercise-8.php
 */
function diffDatesInDays(fromDate, toDate) {
  return Math.floor((Date.UTC(toDate.getFullYear(), toDate.getMonth(), toDate.getDate()) - Date.UTC(fromDate.getFullYear(), fromDate.getMonth(), fromDate.getDate())) / (1000 * 60 * 60 * 24));
}

/***/ }),

/***/ "./lib/utils/delay.js":
/*!****************************!*\
  !*** ./lib/utils/delay.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return delay; });
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");



/**
 * Delay for a duration.
 * @param {number} milliseconds The delay
 */
function delay(_x) {
  return _delay.apply(this, arguments);
}

function _delay() {
  _delay = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(
  /*#__PURE__*/
  _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(milliseconds) {
    return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            _context.next = 2;
            return new Promise(function (resolve) {
              return setTimeout(resolve, milliseconds);
            });

          case 2:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));
  return _delay.apply(this, arguments);
}

/***/ }),

/***/ "./lib/utils/first_time.js":
/*!*********************************!*\
  !*** ./lib/utils/first_time.js ***!
  \*********************************/
/*! exports provided: FIRST_TIME_COOKIE, getFirstTimeCookie, setFirstTimeCookie */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FIRST_TIME_COOKIE", function() { return FIRST_TIME_COOKIE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFirstTimeCookie", function() { return getFirstTimeCookie; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setFirstTimeCookie", function() { return setFirstTimeCookie; });
/* harmony import */ var _cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cookie */ "./lib/utils/cookie.js");
 // Export for unit test

var FIRST_TIME_COOKIE = '_qg_fts';
/**
 * Get first time cookie in Date format
 */

function getFirstTimeCookie() {
  var firstTime = _cookie__WEBPACK_IMPORTED_MODULE_0__["default"].get(FIRST_TIME_COOKIE);

  if (!firstTime) {
    return null;
  } // Due legacy issue, convert unix timestamp to standard timestamp


  return new Date(+firstTime * 1000);
}
/**
 * Set first time cookie
 */

function setFirstTimeCookie() {
  // Avoid duplicated cookie set
  if (_cookie__WEBPACK_IMPORTED_MODULE_0__["default"].get(FIRST_TIME_COOKIE)) {
    return;
  } // Due legacy issue, convert timestamp to unix format


  var unixTimestamp = parseInt(+new Date() / 1000);
  _cookie__WEBPACK_IMPORTED_MODULE_0__["default"].exSet(FIRST_TIME_COOKIE, unixTimestamp);
}

/***/ }),

/***/ "./lib/utils/log.js":
/*!**************************!*\
  !*** ./lib/utils/log.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! loglevel */ "../../node_modules/loglevel/lib/loglevel.js");
/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_0__);
 // Export logger with giving name to avoid level settings conflict with customer's.
// (In case they are using loglevel too)

var logger = loglevel__WEBPACK_IMPORTED_MODULE_0__["getLogger"]('aiqua-sdk');
var originalFactory = logger.methodFactory;

logger.methodFactory = function () {
  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }

  // Trace error log on Rollbar
  if (args[0] === 'error') {
    return function () {
      /**
       * Since rollbar will try to access window to track the uncaught errors.
       * But there will not have window object in web worker, we should simply
       * check the global state before using it.
       */
      if (window) {
        var Rollbar = __webpack_require__(/*! ./rollbar */ "./lib/utils/rollbar.js")["default"];

        Rollbar.error.apply(Rollbar, arguments);
      }

      originalFactory.apply(void 0, args).apply(void 0, arguments);
    };
  }

  return originalFactory.apply(void 0, args);
};

/* harmony default export */ __webpack_exports__["default"] = (logger);

/***/ }),

/***/ "./lib/utils/makeRequest.js":
/*!**********************************!*\
  !*** ./lib/utils/makeRequest.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _log__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./log */ "./lib/utils/log.js");


/**
 * Sending a HTTP request with XHR
 */
function makeRequest(opts, runInSync) {
  return new Promise(function (resolve, reject) {
    var xhr = new XMLHttpRequest();
    xhr.open(opts.method, opts.url, !runInSync);
    xhr.withCredentials = true; // Set timeout in async call

    if (!runInSync) {
      xhr.timeout = 8000;
    }

    if (opts.headers) {
      // Destruct it first to avoid flow error
      var headers = opts.headers;
      Object.keys(headers).forEach(function (key) {
        xhr.setRequestHeader(key, headers[key]);
      });
    }

    xhr.onload = function () {
      if (this.status >= 200 && this.status < 300) {
        var respData = {
          status: this.status
        };

        if (xhr.responseText) {
          try {
            respData.json = JSON.parse(xhr.responseText);
          } catch (err) {
            _log__WEBPACK_IMPORTED_MODULE_0__["default"].warn(err);
            respData.text = xhr.responseText;
          }
        }

        resolve(respData);
      } else {
        // eslint-disable-next-line prefer-promise-reject-errors
        reject({
          status: this.status,
          statusText: xhr.statusText
        });
      }
    };

    xhr.onerror = function () {
      // eslint-disable-next-line prefer-promise-reject-errors
      reject({
        status: this.status,
        statusText: xhr.statusText
      });
    };

    if (opts.data) {
      xhr.send(JSON.stringify(opts.data));
    } else {
      xhr.send();
    }
  });
}

/* harmony default export */ __webpack_exports__["default"] = (makeRequest);

/***/ }),

/***/ "./lib/utils/parseUtmParams.js":
/*!*************************************!*\
  !*** ./lib/utils/parseUtmParams.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/**
 * Valid utm parameters
 *
 * @see https://support.google.com/analytics/answer/1033863#parameters
 */
var UTM_PARAMS = ['utm_source', 'utm_medium', 'utm_campaign', 'utm_term', 'utm_content'];
/**
 * Parse utm parameters from URL querystring
 */

function parseUtmParams(url) {
  if (!url.search) {
    return {};
  }

  var searchParams = new URLSearchParams(url.search);
  var utmParams = {};
  UTM_PARAMS.forEach(function (param) {
    var utmParam = searchParams.get(param);

    if (utmParam) {
      utmParams[param] = utmParam;
    }
  });
  return utmParams;
}

/* harmony default export */ __webpack_exports__["default"] = (parseUtmParams);

/***/ }),

/***/ "./lib/utils/rollbar.js":
/*!******************************!*\
  !*** ./lib/utils/rollbar.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var rollbar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rollbar */ "../../node_modules/rollbar/dist/rollbar.umd.min.js");
/* harmony import */ var rollbar__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(rollbar__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./version */ "./lib/utils/version.js");


var SDK_ENV = "staging" || 'local';
var sentExceptions = [];
/**
 * Check if new exception is repeated.
 * If not, put it into an array for duplicated check.
 */

function shouldIgnoreNewException(exception) {
  // Ignore duplicated exception
  if (sentExceptions.includes(exception)) {
    return true;
  } // Log the known exception


  sentExceptions.push(exception);
  return false;
}

var Rollbar = new rollbar__WEBPACK_IMPORTED_MODULE_0___default.a({
  // Only enable on staging or production env
  enabled: SDK_ENV === 'staging' || SDK_ENV === 'production',
  accessToken: "151683fe477143ea98b84fcc44161c35",
  captureUncaught: true,
  captureUnhandledRejections: true,
  verbose: true,
  autoInstrument: {
    log: false
  },
  payload: {
    environment: SDK_ENV,
    client: {
      javascript: {
        code_version: Object(_version__WEBPACK_IMPORTED_MODULE_1__["getPackageVersion"])()
      }
    }
  },
  checkIgnore: function checkIgnore(isUncaught, args, payload) {
    /**
     * Should contains any content
     */
    if (args.length === 0) {
      return true;
    }
    /**
     * Handle uncaught error
     */


    if (isUncaught) {
      var err = args[1]; // Ignore if error instance is not found

      if (!(err instanceof Error)) {
        return true;
      } // Ignore uncaught error that not caused by our SDK


      if (!err.stack.includes('aiqua.js')) {
        return true;
      }

      return shouldIgnoreNewException(err.message);
    }
    /**
     * Try to get error message from first argument
     */


    try {
      var errMsg = "".concat(args[0]) || '';
      return shouldIgnoreNewException(errMsg);
    } catch (err) {
      return shouldIgnoreNewException(err.message);
    }
  }
});
/* harmony default export */ __webpack_exports__["default"] = (Rollbar);

/***/ }),

/***/ "./lib/utils/time.js":
/*!***************************!*\
  !*** ./lib/utils/time.js ***!
  \***************************/
/*! exports provided: toUnixTimestamp, toDateTime */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toUnixTimestamp", function() { return toUnixTimestamp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toDateTime", function() { return toDateTime; });
/**
 * Cover JavaScript dateTime to Unix timestamp
 * @param {Number} dateTime The numeric value of the specified date as the number of milliseconds since January 1, 1970, 00:00:00 UTC
 */
var toUnixTimestamp = function toUnixTimestamp(dateTime) {
  return Math.floor(dateTime / 1e3);
};
/**
 * Cover Unix timestamp to JavaScript dateTime.
 * dateTime: The numeric value of the specified date as the number of milliseconds since January 1, 1970, 00:00:00 UTC
 * @param {Number} timestamp The Unix timestamp
 */

var toDateTime = function toDateTime(unixTimestamp) {
  return unixTimestamp * 1e3;
};

/***/ }),

/***/ "./lib/utils/topDomain.js":
/*!********************************!*\
  !*** ./lib/utils/topDomain.js ***!
  \********************************/
/*! exports provided: default, getLevels */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getLevels", function() { return getLevels; });
/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-cookie */ "../../node_modules/js-cookie/src/js.cookie.js");
/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(js_cookie__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! url */ "../../node_modules/url/url.js");
/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(url__WEBPACK_IMPORTED_MODULE_1__);


/**
 * getLevels returns all levels of the given url.
 *
 * Example levels:
 *
 *      getLevels('http://www.google.co.uk');
 *      // => ["co.uk", "google.co.uk", "www.google.co.uk"]
 *
 *
 * @param {String} url
 * @return {Array}
 * @api public
 */

var getLevels = function getLevels(url) {
  var host = Object(url__WEBPACK_IMPORTED_MODULE_1__["parse"])(url).hostname;
  var parts = host.split('.');
  var last = parts[parts.length - 1];
  var levels = []; // Ip address.

  var numLast = parseInt(last, 10);

  if (parts.length === 4 && !isNaN(numLast) && "".concat(numLast) === last) {
    return levels;
  } // Localhost.


  if (parts.length <= 1) {
    return levels;
  } // Create levels.


  for (var i = parts.length - 2; i >= 0; --i) {
    levels.push(parts.slice(i).join('.'));
  }

  return levels;
};
/**
 * Get the top domain.
 *
 * The function constructs the levels of domain
 * and attempts to set a global cookie on each one
 * when it succeeds it returns the top level domain.
 *
 * The method returns an empty string when the hostname
 * is an ip or `localhost`.
 *
 * Example:
 *
 *      topDomain('http://localhost:3000/baz');
 *      // => ''
 *      topDomain('http://dev:3000/baz');
 *      // => ''
 *      topDomain('http://127.0.0.1:3000/baz');
 *      // => ''
 *      topDomain('http://segment.io/baz');
 *      // => 'segment.io'
 *
 * @param {String} url
 * @return {String}
 * @api public
 */


var topDomain = function topDomain(url) {
  var levels = getLevels(url); // Lookup the real top level one.

  for (var i = 0; i < levels.length; ++i) {
    var cname = 'QG:test';
    var domain = levels[i];
    var opts = {
      domain: '.' + domain
    }; // http://curl.haxx.se/rfc/cookie_spec.html
    // https://publicsuffix.org/list/effective_tld_names.dat
    // https://stackoverflow.com/a/47419897
    //
    // try setting a dummy cookie with the options
    // if the cookie isn't set, it probably means
    // that the domain is on the public suffix list
    // like myapp.herokuapp.com or localhost / ip.

    js_cookie__WEBPACK_IMPORTED_MODULE_0___default.a.set(cname, true, opts);

    if (js_cookie__WEBPACK_IMPORTED_MODULE_0___default.a.getJSON(cname)) {
      js_cookie__WEBPACK_IMPORTED_MODULE_0___default.a.remove(cname, opts);
      return domain;
    }
  }

  return '';
};
/**
 * Expose `topDomain`
 */


/* harmony default export */ __webpack_exports__["default"] = (topDomain);


/***/ }),

/***/ "./lib/utils/user_id.js":
/*!******************************!*\
  !*** ./lib/utils/user_id.js ***!
  \******************************/
/*! exports provided: generateUserId, getWUserId, setWUserId */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateUserId", function() { return generateUserId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getWUserId", function() { return getWUserId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setWUserId", function() { return setWUserId; });
/* harmony import */ var _utils_cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/cookie */ "./lib/utils/cookie.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants */ "./lib/constants.js");


/**
 * Generate a random number string (16 characters) as `wUserId`.
 *
 * @private
 * TODO: Rewrite this function.
 *       Currently, it will not guarantee the length of return value.
 *       EX: When Math.random() return 0
 */

function generateUserId() {
  return (Math.random() + ' ').substring(2, 10) + (Math.random() + ' ').substring(2, 10) + (Math.random() + ' ').substring(2, 2);
}
/**
 * Get user id from cookies
 * (Use for user events & inweb request)
 */

function getWUserId() {
  return (_utils_cookie__WEBPACK_IMPORTED_MODULE_0__["default"].getJSON(_constants__WEBPACK_IMPORTED_MODULE_1__["WUSER_ID_KEY"]) || '').toString();
}
/**
 * Set user id into cookies
 *
 * TODO: `QGUserId` that stored inside cookies is the
 *       alias of `wUserId` we using in server, may rename
 *       it to `wUserId` to prevent confusion.
 */

function setWUserId() {
  var userId = generateUserId();
  _utils_cookie__WEBPACK_IMPORTED_MODULE_0__["default"].exSet(_constants__WEBPACK_IMPORTED_MODULE_1__["WUSER_ID_KEY"], userId);
  return userId;
}

/***/ }),

/***/ "./lib/utils/version.js":
/*!******************************!*\
  !*** ./lib/utils/version.js ***!
  \******************************/
/*! exports provided: getPackageVersion, getSdkVersion, setSdkVersion, logMobileSdkVersion */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getPackageVersion", function() { return getPackageVersion; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSdkVersion", function() { return getSdkVersion; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setSdkVersion", function() { return setSdkVersion; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "logMobileSdkVersion", function() { return logMobileSdkVersion; });
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var idb_keyval__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! idb-keyval */ "../../node_modules/idb-keyval/dist/idb-keyval.mjs");
/* harmony import */ var _log__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./log */ "./lib/utils/log.js");
/* harmony import */ var _withAppSdk__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./withAppSdk */ "./lib/utils/withAppSdk.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../constants */ "./lib/constants.js");






/**
 * Get sdk version based on package.json
 */

function getPackageVersion() {
  return "3.18.1" || '';
}
/**
 * Get sdk version from indexedDB
 */

function getSdkVersion() {
  return _getSdkVersion.apply(this, arguments);
}
/**
 * Save latest sdk version into indexedDB
 */

function _getSdkVersion() {
  _getSdkVersion = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(
  /*#__PURE__*/
  _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
    var version;
    return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            _context.next = 2;
            return Object(idb_keyval__WEBPACK_IMPORTED_MODULE_2__["get"])(_constants__WEBPACK_IMPORTED_MODULE_5__["IDB_VERSION_KEY"]);

          case 2:
            version = _context.sent;
            return _context.abrupt("return", version);

          case 4:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));
  return _getSdkVersion.apply(this, arguments);
}

function setSdkVersion(_x) {
  return _setSdkVersion.apply(this, arguments);
}
/**
 * Log Android or iOS sdk version on console
 */

function _setSdkVersion() {
  _setSdkVersion = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(
  /*#__PURE__*/
  _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(version) {
    return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            _context2.next = 2;
            return Object(idb_keyval__WEBPACK_IMPORTED_MODULE_2__["set"])(_constants__WEBPACK_IMPORTED_MODULE_5__["IDB_VERSION_KEY"], version);

          case 2:
            _log__WEBPACK_IMPORTED_MODULE_3__["default"].info("Updated SDK version to ".concat(version));

          case 3:
          case "end":
            return _context2.stop();
        }
      }
    }, _callee2);
  }));
  return _setSdkVersion.apply(this, arguments);
}

function logMobileSdkVersion() {
  return _logMobileSdkVersion.apply(this, arguments);
}

function _logMobileSdkVersion() {
  _logMobileSdkVersion = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(
  /*#__PURE__*/
  _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3() {
    var isWithAppSdk, _ref, getPlatform, getVersion, androidSdkVersion, iosSdkVersion;

    return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
      while (1) {
        switch (_context3.prev = _context3.next) {
          case 0:
            _context3.next = 2;
            return Object(_withAppSdk__WEBPACK_IMPORTED_MODULE_4__["default"])();

          case 2:
            isWithAppSdk = _context3.sent;

            if (isWithAppSdk) {
              _context3.next = 6;
              break;
            }

            _log__WEBPACK_IMPORTED_MODULE_3__["default"].debug('AIQUA App SDK is not installed');
            return _context3.abrupt("return");

          case 6:
            _ref = window.aiqMobileSdk || {}, getPlatform = _ref.getPlatform, getVersion = _ref.getVersion; // Get Android sdk version

            if (!(typeof getPlatform === 'function' && getPlatform() === 'android')) {
              _context3.next = 11;
              break;
            }

            androidSdkVersion = getVersion();
            _log__WEBPACK_IMPORTED_MODULE_3__["default"].debug('Android SDK verion, v', androidSdkVersion);
            return _context3.abrupt("return");

          case 11:
            _context3.next = 13;
            return getVersion();

          case 13:
            iosSdkVersion = _context3.sent;
            _log__WEBPACK_IMPORTED_MODULE_3__["default"].debug('iOS SDK verion, v', iosSdkVersion);

          case 15:
          case "end":
            return _context3.stop();
        }
      }
    }, _callee3);
  }));
  return _logMobileSdkVersion.apply(this, arguments);
}

/***/ }),

/***/ "./lib/utils/withAppSdk.js":
/*!*********************************!*\
  !*** ./lib/utils/withAppSdk.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");



/**
 * Test it is in App's webview with our App-SDK or not
 */
var withAppSdk =
/*#__PURE__*/
function () {
  var _ref = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(
  /*#__PURE__*/
  _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {
    var _window, aiqMobileSdk, ReactNativeWebView, handshakeResolver, msgHandler, isWithinRN;

    return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            _window = window, aiqMobileSdk = _window.aiqMobileSdk, ReactNativeWebView = _window.ReactNativeWebView; // Do handshaking when ReactNativeWebView present in global. The WebSdk
            // inside WebView will try to send handshake message to reach out
            // our message listener on React Native WebView. If we don't receive
            // the response in 200ms, we assume the WebPage is not inside react native
            // app. Handshake is required to avoid racing issue of JS injection in the
            // webview and WebSdk init.

            if (!ReactNativeWebView) {
              _context.next = 8;
              break;
            }

            msgHandler = function msgHandler(_ref2) {
              var data = _ref2.data;
              window.removeEventListener('message', msgHandler);

              if (typeof handshakeResolver === 'function') {
                handshakeResolver(data === 'aiq_ack');
              }
            };

            _context.next = 5;
            return Promise.race([new Promise(function (resolve) {
              handshakeResolver = resolve;
              ReactNativeWebView.postMessage(JSON.stringify({
                type: 'handshake',
                source: 'aiq'
              }));
              window.addEventListener('message', msgHandler, {
                once: true
              });
            }), new Promise(function (resolve) {
              return setTimeout(function () {
                // Remove message handler when timeout
                window.removeEventListener('message', msgHandler);
                resolve(false);
              }, 200);
            })]);

          case 5:
            isWithinRN = _context.sent;

            if (!isWithinRN) {
              _context.next = 8;
              break;
            }

            return _context.abrupt("return", isWithinRN);

          case 8:
            return _context.abrupt("return", aiqMobileSdk && aiqMobileSdk.logEvent && aiqMobileSdk.getVersion);

          case 9:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));

  return function withAppSdk() {
    return _ref.apply(this, arguments);
  };
}();

/* harmony default export */ __webpack_exports__["default"] = (withAppSdk);

/***/ }),

/***/ "./lib/web_push/initSimplePush.js":
/*!****************************************!*\
  !*** ./lib/web_push/initSimplePush.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _loadNotifyIframe__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./loadNotifyIframe */ "./lib/web_push/loadNotifyIframe.js");
/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/log */ "./lib/utils/log.js");



/**
 * Initialize web push integration in "simple" way
 *
 * #TODO: [QGRAPH-2077] more codes here TEEHEE~
 */
function initSimplePush(qgSettings) {
  try {
    _utils_log__WEBPACK_IMPORTED_MODULE_1__["default"].debug('Initializing simple web push integration...'); // Append iframe

    Object(_loadNotifyIframe__WEBPACK_IMPORTED_MODULE_0__["default"])(qgSettings.qgendpoint);
  } catch (err) {
    _utils_log__WEBPACK_IMPORTED_MODULE_1__["default"].error('Simple Push Integration', err);
  }
}

/* harmony default export */ __webpack_exports__["default"] = (initSimplePush);

/***/ }),

/***/ "./lib/web_push/loadManifest.js":
/*!**************************************!*\
  !*** ./lib/web_push/loadManifest.js ***!
  \**************************************/
/*! exports provided: MANIFEST_LINK_ID, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MANIFEST_LINK_ID", function() { return MANIFEST_LINK_ID; });
var MANIFEST_LINK_ID = 'qg-manifest';
/**
 * Load manifest.json in client website
 * (For push notification subscription)
 */

function loadManifest(assetsRoot) {
  // Not need to append again
  if (document.getElementById(MANIFEST_LINK_ID)) {
    return;
  } // Ensure leading and trailing slash in path


  var modifiedAssetsRoot = (assetsRoot || '/').replace(/^\/*/, '/').replace(/$|\/+$/, '/');
  var l = document.createElement('link');
  l.setAttribute('rel', 'manifest');
  l.setAttribute('id', MANIFEST_LINK_ID);
  l.setAttribute('href', "".concat(modifiedAssetsRoot, "manifest.json"));
  l.setAttribute('crossorigin', 'use-credentials'); // Enable CROS
  // If `<head>` is not available, append manifest on document root

  if (!document.head) {
    document.appendChild(l);
    return;
  }

  var childs = document.head.children;

  if (childs.length > 0) {
    document.head.insertBefore(l, childs[0]);
  } else {
    document.head.appendChild(l);
  }
}

/* harmony default export */ __webpack_exports__["default"] = (loadManifest);

/***/ }),

/***/ "./lib/web_push/loadNotifyIframe.js":
/*!******************************************!*\
  !*** ./lib/web_push/loadNotifyIframe.js ***!
  \******************************************/
/*! exports provided: IFRAME_ID, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IFRAME_ID", function() { return IFRAME_ID; });
/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/log */ "./lib/utils/log.js");
 // Export for unit test

var IFRAME_ID = 'QGA';
/**
 * Load iframe to enable service worker and
 * ask push permission at specific custom domain.
 */

function loadNotifyIframe(qgendpoint) {
  if (!qgendpoint) {
    _utils_log__WEBPACK_IMPORTED_MODULE_0__["default"].error('Failed to add iframe, `qgendpoint` setting is missing');
    return;
  } // Append an iframe to ask push permission


  var iframe = document.createElement('iframe');
  var iframeUrl = qgendpoint.startsWith('https:') ? qgendpoint.replace(/$|\/+$/, '') // Remove trailing slash
  : "https://".concat(qgendpoint, "/.qgr.ph");
  iframe.id = 'QGA';
  iframe.setAttribute('src', iframeUrl);
  iframe.setAttribute('style', 'visibility: hidden; width: 0;height: 0;');

  if (document.body) {
    document.body.appendChild(iframe);
  } else if (document.head) {
    document.head.appendChild(iframe);
  } // Get a signal that user allowed/disallowed the push notificatin in iframe


  window.addEventListener('message', function (_ref) {
    var data = _ref.data,
        origin = _ref.origin;

    if (origin !== iframeUrl) {
      return;
    }

    window.qg('message-received', data);
  });
}

/* harmony default export */ __webpack_exports__["default"] = (loadNotifyIframe);

/***/ }),

/***/ "./lib/web_push/registerServiceWorker.js":
/*!***********************************************!*\
  !*** ./lib/web_push/registerServiceWorker.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ "../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/log */ "./lib/utils/log.js");



var cachedSwRegistration = null;
/**
 * Check if our service worker was registered on relative scopes,
 * unregister them all except of target's scope one.
 */

function unregisterExistedServiceWorkers(_x) {
  return _unregisterExistedServiceWorkers.apply(this, arguments);
}
/**
 * Register a new service worker on default scope,
 * and try to unregister existed service worker which installed at other scope(s).
 */


function _unregisterExistedServiceWorkers() {
  _unregisterExistedServiceWorkers = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(
  /*#__PURE__*/
  _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(scopePath) {
    var registrations, unregisterResults;
    return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
      while (1) {
        switch (_context3.prev = _context3.next) {
          case 0:
            if (navigator.serviceWorker) {
              _context3.next = 2;
              break;
            }

            throw new Error('Service workers are not supported.');

          case 2:
            _context3.next = 4;
            return navigator.serviceWorker.getRegistrations();

          case 4:
            registrations = _context3.sent;
            unregisterResults = registrations // Only if current registration contains our service worker
            .filter(function (registration) {
              // Do not unregister service worker which on target scope
              if (new URL(registration.scope).pathname === scopePath) {
                return false;
              }

              return registration.active && registration.active.scriptURL.includes('qg-sw') || registration.installing && registration.installing.scriptURL.includes('qg-sw');
            }).map(
            /*#__PURE__*/
            function () {
              var _ref2 = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(
              /*#__PURE__*/
              _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(registration) {
                var unregisterResult;
                return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
                  while (1) {
                    switch (_context2.prev = _context2.next) {
                      case 0:
                        _context2.next = 2;
                        return registration.unregister();

                      case 2:
                        unregisterResult = _context2.sent;

                        if (unregisterResult) {
                          _context2.next = 6;
                          break;
                        }

                        _utils_log__WEBPACK_IMPORTED_MODULE_2__["default"].error('Failed to unregister existed service worker', registration.scope);
                        return _context2.abrupt("return", false);

                      case 6:
                        _utils_log__WEBPACK_IMPORTED_MODULE_2__["default"].debug('Unregisted existed service worker', registration.scope);
                        return _context2.abrupt("return", true);

                      case 8:
                      case "end":
                        return _context2.stop();
                    }
                  }
                }, _callee2);
              }));

              return function (_x4) {
                return _ref2.apply(this, arguments);
              };
            }());
            _context3.next = 8;
            return Promise.all(unregisterResults);

          case 8:
            _context3.t0 = Boolean;
            return _context3.abrupt("return", _context3.sent.every(_context3.t0));

          case 10:
          case "end":
            return _context3.stop();
        }
      }
    }, _callee3);
  }));
  return _unregisterExistedServiceWorkers.apply(this, arguments);
}

function registerServiceWorker(scriptUrl, scope) {
  return new Promise(
  /*#__PURE__*/
  function () {
    var _ref = Object(_Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(
    /*#__PURE__*/
    _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(resolve, reject) {
      var serviceWorker, areAllExistedSWUnregistered, newRegistration;
      return _Users_cjies_appier_Documents_Programming_appier_aiqua_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;

              if ('serviceWorker' in navigator) {
                _context.next = 3;
                break;
              }

              return _context.abrupt("return", reject(new Error('Service workers are not supported.')));

            case 3:
              // $FlowFixMe - Checked existence above
              serviceWorker = navigator.serviceWorker; // Quick resolve registered worker

              if (!cachedSwRegistration) {
                _context.next = 6;
                break;
              }

              return _context.abrupt("return", resolve(cachedSwRegistration));

            case 6:
              _context.next = 8;
              return unregisterExistedServiceWorkers(scope);

            case 8:
              areAllExistedSWUnregistered = _context.sent;

              if (areAllExistedSWUnregistered) {
                _context.next = 11;
                break;
              }

              return _context.abrupt("return", reject(new Error('Failed to unregister existed service worker(s)')));

            case 11:
              _context.next = 13;
              return serviceWorker.register(scriptUrl, {
                scope: scope,
                type: 'classic',
                updateViaCache: 'none'
              });

            case 13:
              newRegistration = _context.sent;

              if (!(newRegistration.active && newRegistration.active.state === 'activated')) {
                _context.next = 18;
                break;
              }

              _utils_log__WEBPACK_IMPORTED_MODULE_2__["default"].debug('Got activated service worker', newRegistration);
              cachedSwRegistration = newRegistration;
              return _context.abrupt("return", resolve(newRegistration));

            case 18:
              /**
               * Waiting for the new worker is been fully activated
               */
              newRegistration.addEventListener('updatefound', function () {
                var installingWorker = newRegistration.installing;
                if (!installingWorker) return; // Waiting if the service worker is been activated

                installingWorker.onstatechange = function () {
                  if (newRegistration.active && newRegistration.active.state === 'activated') {
                    _utils_log__WEBPACK_IMPORTED_MODULE_2__["default"].debug('Registered and activated new service worker', newRegistration);
                    cachedSwRegistration = newRegistration;
                    return resolve(newRegistration);
                  }
                };
              });
              _context.next = 24;
              break;

            case 21:
              _context.prev = 21;
              _context.t0 = _context["catch"](0);
              return _context.abrupt("return", reject(_context.t0));

            case 24:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 21]]);
    }));

    return function (_x2, _x3) {
      return _ref.apply(this, arguments);
    };
  }());
}

/* harmony default export */ __webpack_exports__["default"] = (registerServiceWorker);

/***/ }),

/***/ "./lib/web_push/shouldEnablePush.js":
/*!******************************************!*\
  !*** ./lib/web_push/shouldEnablePush.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/log */ "./lib/utils/log.js");


/**
 * Check availability of push related functions which
 * depends on QGSettings.
 */
function shouldEnablePush(qgSettings) {
  var _ref = qgSettings || {},
      push = _ref.push,
      origin = _ref.origin;

  if (!push) {
    _utils_log__WEBPACK_IMPORTED_MODULE_0__["default"].warn('Web push functions are disabled by user settings.');
    return false;
  } // Check if push functions are restricted by same origin


  if (push.restrictOrigin && origin) {
    try {
      var originUrl = new URL(origin);
      var isSameOrigin = originUrl.origin === window.location.origin; // Show warning on console

      if (!isSameOrigin) {
        _utils_log__WEBPACK_IMPORTED_MODULE_0__["default"].warn("Web push can only be used on ".concat(originUrl.origin, ", but current origin is ").concat(window.location.origin, "."));
      }

      return isSameOrigin;
    } catch (e) {
      _utils_log__WEBPACK_IMPORTED_MODULE_0__["default"].error('Invalid origin URL', origin);
      return false;
    }
  }

  return true;
}

/* harmony default export */ __webpack_exports__["default"] = (shouldEnablePush);

/***/ }),

/***/ "./node_modules/webpack/buildin/amd-options.js":
/*!****************************************!*\
  !*** (webpack)/buildin/amd-options.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {/* globals __webpack_amd_options__ */
module.exports = __webpack_amd_options__;

/* WEBPACK VAR INJECTION */}.call(this, {}))

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || Function("return this")() || (1, eval)("this");
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ "./node_modules/webpack/buildin/module.js":
/*!***********************************!*\
  !*** (webpack)/buildin/module.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(module) {
	if (!module.webpackPolyfill) {
		module.deprecate = function() {};
		module.paths = [];
		// module.parent = undefined by default
		if (!module.children) module.children = [];
		Object.defineProperty(module, "loaded", {
			enumerable: true,
			get: function() {
				return module.l;
			}
		});
		Object.defineProperty(module, "id", {
			enumerable: true,
			get: function() {
				return module.i;
			}
		});
		module.webpackPolyfill = 1;
	}
	return module;
};


/***/ }),

/***/ 0:
/*!**************************************************!*\
  !*** multi ./config/polyfills.js ./lib/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! /Users/cjies_appier/Documents/Programming/appier/aiqua-ui/packages/web-sdk/config/polyfills.js */"./config/polyfills.js");
module.exports = __webpack_require__(/*! ./lib/index.js */"./lib/index.js");


/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWlxdWEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvYXNhcC9icm93c2VyLXJhdy5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9iYWJlbC1wcmVzZXQtcmVhY3QtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hcnJheVdpdGhIb2xlcy5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9iYWJlbC1wcmVzZXQtcmVhY3QtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hcnJheVdpdGhvdXRIb2xlcy5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9iYWJlbC1wcmVzZXQtcmVhY3QtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5LmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2l0ZXJhYmxlVG9BcnJheS5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9iYWJlbC1wcmVzZXQtcmVhY3QtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9ub25JdGVyYWJsZVJlc3QuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vbm9uSXRlcmFibGVTcHJlYWQuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9BcnJheS5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9iYWJlbC1wcmVzZXQtcmVhY3QtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheS5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9iYWJlbC1wcmVzZXQtcmVhY3QtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9iYWJlbC1wcmVzZXQtcmVhY3QtYXBwL25vZGVfbW9kdWxlcy9yZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29tcGFyZS12ZXJzaW9ucy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9jb21wb25lbnQtZW1pdHRlci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ZuL2FycmF5L2Zyb20uanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9mbi9hcnJheS9pbmNsdWRlcy5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ZuL29iamVjdC9hc3NpZ24uanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9mbi9zdHJpbmcvaW5jbHVkZXMuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19hLWZ1bmN0aW9uLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9fYWRkLXRvLXVuc2NvcGFibGVzLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9fYW4tb2JqZWN0LmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9fYXJyYXktaW5jbHVkZXMuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19jbGFzc29mLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9fY29mLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9fY29yZS5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX2NyZWF0ZS1wcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX2N0eC5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX2RlZmluZWQuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19kZXNjcmlwdG9ycy5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX2RvbS1jcmVhdGUuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19lbnVtLWJ1Zy1rZXlzLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9fZXhwb3J0LmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9fZmFpbHMtaXMtcmVnZXhwLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9fZmFpbHMuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19nbG9iYWwuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19oYXMuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19oaWRlLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9faHRtbC5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX2llOC1kb20tZGVmaW5lLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9faW9iamVjdC5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX2lzLWFycmF5LWl0ZXIuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19pcy1vYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19pcy1yZWdleHAuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19pdGVyLWNhbGwuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19pdGVyLWNyZWF0ZS5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX2l0ZXItZGVmaW5lLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9faXRlci1kZXRlY3QuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19pdGVyYXRvcnMuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19saWJyYXJ5LmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9fb2JqZWN0LWFzc2lnbi5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX29iamVjdC1jcmVhdGUuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19vYmplY3QtZHAuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19vYmplY3QtZHBzLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9fb2JqZWN0LWdvcHMuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19vYmplY3QtZ3BvLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9fb2JqZWN0LWtleXMtaW50ZXJuYWwuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19vYmplY3Qta2V5cy5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX29iamVjdC1waWUuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19wcm9wZXJ0eS1kZXNjLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9fcmVkZWZpbmUuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19zZXQtdG8tc3RyaW5nLXRhZy5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX3NoYXJlZC1rZXkuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19zaGFyZWQuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19zdHJpbmctYXQuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19zdHJpbmctY29udGV4dC5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX3RvLWFic29sdXRlLWluZGV4LmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9fdG8taW50ZWdlci5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX3RvLWlvYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL190by1sZW5ndGguanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL190by1vYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL190by1wcmltaXRpdmUuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL191aWQuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL193a3MuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZC5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXM2LmFycmF5LmZyb20uanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzNi5vYmplY3QuYXNzaWduLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLmluY2x1ZGVzLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lczcuYXJyYXkuaW5jbHVkZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbGliL2luX3dlYi9pbndlYl9odG1sX3BvcHVwL2lud2ViX2h0bWxfcG9wdXAuY3NzIiwid2VicGFjazovLy8uL2xpYi9pbl93ZWIvaW53ZWJfbGVhZF9wb3B1cC9pbndlYl9sZWFkX3BvcHVwLmNzcyIsIndlYnBhY2s6Ly8vLi9saWIvcHVzaF9wcm9tcHRzL2N5bV9wcm9tcHQvY3ltX3Byb21wdC5jc3MiLCJ3ZWJwYWNrOi8vLy4vbGliL3B1c2hfcHJvbXB0cy9mYWtlX3Byb21wdC9mYWtlX3Byb21wdC5jc3MiLCJ3ZWJwYWNrOi8vLy4vbGliL3B1c2hfcHJvbXB0cy9vbl9zdWJzY3JpYmVkX3BvcHVwL29uX3N1YnNjcmliZWRfcG9wdXAuY3NzIiwid2VicGFjazovLy8uL2xpYi9wdXNoX3Byb21wdHMvb3ZlcmxheV9wcm9tcHQvb3ZlcmxheV9wcm9tcHQuY3NzIiwid2VicGFjazovLy8uL2xpYi9yZWNvbW1lbmRhdGlvbi93aWRnZXQuY3NzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL2lkYi1rZXl2YWwvZGlzdC9pZGIta2V5dmFsLm1qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9qcy1jb29raWUvc3JjL2pzLmNvb2tpZS5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9sb2Rhc2gudGhyb3R0bGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvbG9nbGV2ZWwvbGliL2xvZ2xldmVsLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL3Byb21pc2UvbGliL2NvcmUuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvcHJvbWlzZS9saWIvZXM2LWV4dGVuc2lvbnMuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvcHJvbWlzZS9saWIvcmVqZWN0aW9uLXRyYWNraW5nLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL3B1bnljb2RlL3B1bnljb2RlLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL3F1ZXJ5c3RyaW5nLWVzMy9kZWNvZGUuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvcXVlcnlzdHJpbmctZXMzL2VuY29kZS5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9xdWVyeXN0cmluZy1lczMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvcm9sbGJhci9kaXN0L3JvbGxiYXIudW1kLm1pbi5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL3VybHMuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9jamllc19hcHBpZXIvRG9jdW1lbnRzL1Byb2dyYW1taW5nL2FwcGllci9haXF1YS11aS9ub2RlX21vZHVsZXMvdXJsLXBvbHlmaWxsL3VybC1wb2x5ZmlsbC5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2NqaWVzX2FwcGllci9Eb2N1bWVudHMvUHJvZ3JhbW1pbmcvYXBwaWVyL2FpcXVhLXVpL25vZGVfbW9kdWxlcy91cmwvdXJsLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL3VybC91dGlsLmpzIiwid2VicGFjazovLy8vVXNlcnMvY2ppZXNfYXBwaWVyL0RvY3VtZW50cy9Qcm9ncmFtbWluZy9hcHBpZXIvYWlxdWEtdWkvbm9kZV9tb2R1bGVzL3doYXR3Zy1mZXRjaC9mZXRjaC5qcyIsIndlYnBhY2s6Ly8vLi9jb25maWcvcG9seWZpbGxzLmpzIiwid2VicGFjazovLy8uL2xpYi9RR3JhcGguanMiLCJ3ZWJwYWNrOi8vLy4vbGliL1dpdGhBcHBTZGtNb2RlLmpzIiwid2VicGFjazovLy8uL2xpYi9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vLy4vbGliL2luX3dlYi9idWlsZFBhZ2VWaWV3ZWRFdmVudC5qcyIsIndlYnBhY2s6Ly8vLi9saWIvaW5fd2ViL2V4aXRJbnRlbnRIYW5kbGVyLmpzIiwid2VicGFjazovLy8uL2xpYi9pbl93ZWIvZmV0Y2hJbldlYkRhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vbGliL2luX3dlYi9pZGxlSGFuZGxlci5qcyIsIndlYnBhY2s6Ly8vLi9saWIvaW5fd2ViL2lud2ViX2h0bWxfcG9wdXAvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbGliL2luX3dlYi9pbndlYl9odG1sX3BvcHVwL2lud2ViX2h0bWxfcG9wdXAuY3NzPzI4ZWEiLCJ3ZWJwYWNrOi8vLy4vbGliL2luX3dlYi9pbndlYl9odG1sX3BvcHVwL2lud2ViX2h0bWxfcG9wdXAuanMiLCJ3ZWJwYWNrOi8vLy4vbGliL2luX3dlYi9pbndlYl9sZWFkX3BvcHVwL2luZGV4LmpzIiwid2VicGFjazovLy8uL2xpYi9pbl93ZWIvaW53ZWJfbGVhZF9wb3B1cC9pbndlYl9sZWFkX3BvcHVwLmNzcz9hZjA2Iiwid2VicGFjazovLy8uL2xpYi9pbl93ZWIvaW53ZWJfbGVhZF9wb3B1cC9pbndlYl9sZWFkX3BvcHVwLmpzIiwid2VicGFjazovLy8uL2xpYi9pbl93ZWIvbWF0Y2hFdmVudFBhcmFtZXRlci5qcyIsIndlYnBhY2s6Ly8vLi9saWIvaW5fd2ViL29wZW5JbldlYlBvcHVwLmpzIiwid2VicGFjazovLy8uL2xpYi9pbl93ZWIvc2Nyb2xsUGVyY2VudEhhbmRsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbGliL2luX3dlYi90cmlnZ2VySW5XZWJDYW1wYWlnbi5qcyIsIndlYnBhY2s6Ly8vLi9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbGliL21pZ3JhdGlvbnMvbWlncmF0ZUN5bXBDb29raWUuanMiLCJ3ZWJwYWNrOi8vLy4vbGliL21pZ3JhdGlvbnMvbWlncmF0ZVdVc2VySWQuanMiLCJ3ZWJwYWNrOi8vLy4vbGliL21pZ3JhdGlvbnMvcnVuTWlncmF0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9saWIvcHVzaF9wcm9tcHRzL2N5bV9wcm9tcHQvY3ltX3Byb21wdC5jc3M/MGZhZiIsIndlYnBhY2s6Ly8vLi9saWIvcHVzaF9wcm9tcHRzL2N5bV9wcm9tcHQvY3ltX3Byb21wdC5qcyIsIndlYnBhY2s6Ly8vLi9saWIvcHVzaF9wcm9tcHRzL2N5bV9wcm9tcHQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbGliL3B1c2hfcHJvbXB0cy9mYWtlX3Byb21wdC9mYWtlX3Byb21wdC5jc3M/YzFmYiIsIndlYnBhY2s6Ly8vLi9saWIvcHVzaF9wcm9tcHRzL2Zha2VfcHJvbXB0L2Zha2VfcHJvbXB0LmpzIiwid2VicGFjazovLy8uL2xpYi9wdXNoX3Byb21wdHMvZmFrZV9wcm9tcHQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbGliL3B1c2hfcHJvbXB0cy9vbl9zdWJzY3JpYmVkX3BvcHVwL2luZGV4LmpzIiwid2VicGFjazovLy8uL2xpYi9wdXNoX3Byb21wdHMvb25fc3Vic2NyaWJlZF9wb3B1cC9vbl9zdWJzY3JpYmVkX3BvcHVwLmNzcz9mM2QxIiwid2VicGFjazovLy8uL2xpYi9wdXNoX3Byb21wdHMvb25fc3Vic2NyaWJlZF9wb3B1cC9vbl9zdWJzY3JpYmVkX3BvcHVwLmpzIiwid2VicGFjazovLy8uL2xpYi9wdXNoX3Byb21wdHMvb3ZlcmxheV9wcm9tcHQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbGliL3B1c2hfcHJvbXB0cy9vdmVybGF5X3Byb21wdC9vdmVybGF5X3Byb21wdC5jc3M/OWNkNCIsIndlYnBhY2s6Ly8vLi9saWIvcHVzaF9wcm9tcHRzL292ZXJsYXlfcHJvbXB0L292ZXJsYXlfcHJvbXB0LmpzIiwid2VicGFjazovLy8uL2xpYi9yZWNvbW1lbmRhdGlvbi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9saWIvcmVjb21tZW5kYXRpb24vcmVjb21tZW5kYXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbGliL3JlY29tbWVuZGF0aW9uL3dpZGdldC5jc3M/Y2FmZSIsIndlYnBhY2s6Ly8vLi9saWIvcmVjb21tZW5kYXRpb24vd2lkZ2V0LmpzIiwid2VicGFjazovLy8uL2xpYi90aGlyZF9wYXJ0eS9nZXRTY3JvbGxQZXJjZW50LmpzIiwid2VicGFjazovLy8uL2xpYi90aGlyZF9wYXJ0eS9pc1ByaXZhdGVNb2RlLmpzIiwid2VicGFjazovLy8uL2xpYi90aGlyZF9wYXJ0eS91YS1wYXJzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbGliL3V0aWxzL2F0dHJpYnV0aW9uLmpzIiwid2VicGFjazovLy8uL2xpYi91dGlscy9jb29raWUuanMiLCJ3ZWJwYWNrOi8vLy4vbGliL3V0aWxzL2RhdGVzLmpzIiwid2VicGFjazovLy8uL2xpYi91dGlscy9kZWxheS5qcyIsIndlYnBhY2s6Ly8vLi9saWIvdXRpbHMvZmlyc3RfdGltZS5qcyIsIndlYnBhY2s6Ly8vLi9saWIvdXRpbHMvbG9nLmpzIiwid2VicGFjazovLy8uL2xpYi91dGlscy9tYWtlUmVxdWVzdC5qcyIsIndlYnBhY2s6Ly8vLi9saWIvdXRpbHMvcGFyc2VVdG1QYXJhbXMuanMiLCJ3ZWJwYWNrOi8vLy4vbGliL3V0aWxzL3JvbGxiYXIuanMiLCJ3ZWJwYWNrOi8vLy4vbGliL3V0aWxzL3RpbWUuanMiLCJ3ZWJwYWNrOi8vLy4vbGliL3V0aWxzL3RvcERvbWFpbi5qcyIsIndlYnBhY2s6Ly8vLi9saWIvdXRpbHMvdXNlcl9pZC5qcyIsIndlYnBhY2s6Ly8vLi9saWIvdXRpbHMvdmVyc2lvbi5qcyIsIndlYnBhY2s6Ly8vLi9saWIvdXRpbHMvd2l0aEFwcFNkay5qcyIsIndlYnBhY2s6Ly8vLi9saWIvd2ViX3B1c2gvaW5pdFNpbXBsZVB1c2guanMiLCJ3ZWJwYWNrOi8vLy4vbGliL3dlYl9wdXNoL2xvYWRNYW5pZmVzdC5qcyIsIndlYnBhY2s6Ly8vLi9saWIvd2ViX3B1c2gvbG9hZE5vdGlmeUlmcmFtZS5qcyIsIndlYnBhY2s6Ly8vLi9saWIvd2ViX3B1c2gvcmVnaXN0ZXJTZXJ2aWNlV29ya2VyLmpzIiwid2VicGFjazovLy8uL2xpYi93ZWJfcHVzaC9zaG91bGRFbmFibGVQdXNoLmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9hbWQtb3B0aW9ucy5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8vIFVzZSB0aGUgZmFzdGVzdCBtZWFucyBwb3NzaWJsZSB0byBleGVjdXRlIGEgdGFzayBpbiBpdHMgb3duIHR1cm4sIHdpdGhcbi8vIHByaW9yaXR5IG92ZXIgb3RoZXIgZXZlbnRzIGluY2x1ZGluZyBJTywgYW5pbWF0aW9uLCByZWZsb3csIGFuZCByZWRyYXdcbi8vIGV2ZW50cyBpbiBicm93c2Vycy5cbi8vXG4vLyBBbiBleGNlcHRpb24gdGhyb3duIGJ5IGEgdGFzayB3aWxsIHBlcm1hbmVudGx5IGludGVycnVwdCB0aGUgcHJvY2Vzc2luZyBvZlxuLy8gc3Vic2VxdWVudCB0YXNrcy4gVGhlIGhpZ2hlciBsZXZlbCBgYXNhcGAgZnVuY3Rpb24gZW5zdXJlcyB0aGF0IGlmIGFuXG4vLyBleGNlcHRpb24gaXMgdGhyb3duIGJ5IGEgdGFzaywgdGhhdCB0aGUgdGFzayBxdWV1ZSB3aWxsIGNvbnRpbnVlIGZsdXNoaW5nIGFzXG4vLyBzb29uIGFzIHBvc3NpYmxlLCBidXQgaWYgeW91IHVzZSBgcmF3QXNhcGAgZGlyZWN0bHksIHlvdSBhcmUgcmVzcG9uc2libGUgdG9cbi8vIGVpdGhlciBlbnN1cmUgdGhhdCBubyBleGNlcHRpb25zIGFyZSB0aHJvd24gZnJvbSB5b3VyIHRhc2ssIG9yIHRvIG1hbnVhbGx5XG4vLyBjYWxsIGByYXdBc2FwLnJlcXVlc3RGbHVzaGAgaWYgYW4gZXhjZXB0aW9uIGlzIHRocm93bi5cbm1vZHVsZS5leHBvcnRzID0gcmF3QXNhcDtcbmZ1bmN0aW9uIHJhd0FzYXAodGFzaykge1xuICAgIGlmICghcXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHJlcXVlc3RGbHVzaCgpO1xuICAgICAgICBmbHVzaGluZyA9IHRydWU7XG4gICAgfVxuICAgIC8vIEVxdWl2YWxlbnQgdG8gcHVzaCwgYnV0IGF2b2lkcyBhIGZ1bmN0aW9uIGNhbGwuXG4gICAgcXVldWVbcXVldWUubGVuZ3RoXSA9IHRhc2s7XG59XG5cbnZhciBxdWV1ZSA9IFtdO1xuLy8gT25jZSBhIGZsdXNoIGhhcyBiZWVuIHJlcXVlc3RlZCwgbm8gZnVydGhlciBjYWxscyB0byBgcmVxdWVzdEZsdXNoYCBhcmVcbi8vIG5lY2Vzc2FyeSB1bnRpbCB0aGUgbmV4dCBgZmx1c2hgIGNvbXBsZXRlcy5cbnZhciBmbHVzaGluZyA9IGZhbHNlO1xuLy8gYHJlcXVlc3RGbHVzaGAgaXMgYW4gaW1wbGVtZW50YXRpb24tc3BlY2lmaWMgbWV0aG9kIHRoYXQgYXR0ZW1wdHMgdG8ga2lja1xuLy8gb2ZmIGEgYGZsdXNoYCBldmVudCBhcyBxdWlja2x5IGFzIHBvc3NpYmxlLiBgZmx1c2hgIHdpbGwgYXR0ZW1wdCB0byBleGhhdXN0XG4vLyB0aGUgZXZlbnQgcXVldWUgYmVmb3JlIHlpZWxkaW5nIHRvIHRoZSBicm93c2VyJ3Mgb3duIGV2ZW50IGxvb3AuXG52YXIgcmVxdWVzdEZsdXNoO1xuLy8gVGhlIHBvc2l0aW9uIG9mIHRoZSBuZXh0IHRhc2sgdG8gZXhlY3V0ZSBpbiB0aGUgdGFzayBxdWV1ZS4gVGhpcyBpc1xuLy8gcHJlc2VydmVkIGJldHdlZW4gY2FsbHMgdG8gYGZsdXNoYCBzbyB0aGF0IGl0IGNhbiBiZSByZXN1bWVkIGlmXG4vLyBhIHRhc2sgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbnZhciBpbmRleCA9IDA7XG4vLyBJZiBhIHRhc2sgc2NoZWR1bGVzIGFkZGl0aW9uYWwgdGFza3MgcmVjdXJzaXZlbHksIHRoZSB0YXNrIHF1ZXVlIGNhbiBncm93XG4vLyB1bmJvdW5kZWQuIFRvIHByZXZlbnQgbWVtb3J5IGV4aGF1c3Rpb24sIHRoZSB0YXNrIHF1ZXVlIHdpbGwgcGVyaW9kaWNhbGx5XG4vLyB0cnVuY2F0ZSBhbHJlYWR5LWNvbXBsZXRlZCB0YXNrcy5cbnZhciBjYXBhY2l0eSA9IDEwMjQ7XG5cbi8vIFRoZSBmbHVzaCBmdW5jdGlvbiBwcm9jZXNzZXMgYWxsIHRhc2tzIHRoYXQgaGF2ZSBiZWVuIHNjaGVkdWxlZCB3aXRoXG4vLyBgcmF3QXNhcGAgdW5sZXNzIGFuZCB1bnRpbCBvbmUgb2YgdGhvc2UgdGFza3MgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbi8vIElmIGEgdGFzayB0aHJvd3MgYW4gZXhjZXB0aW9uLCBgZmx1c2hgIGVuc3VyZXMgdGhhdCBpdHMgc3RhdGUgd2lsbCByZW1haW5cbi8vIGNvbnNpc3RlbnQgYW5kIHdpbGwgcmVzdW1lIHdoZXJlIGl0IGxlZnQgb2ZmIHdoZW4gY2FsbGVkIGFnYWluLlxuLy8gSG93ZXZlciwgYGZsdXNoYCBkb2VzIG5vdCBtYWtlIGFueSBhcnJhbmdlbWVudHMgdG8gYmUgY2FsbGVkIGFnYWluIGlmIGFuXG4vLyBleGNlcHRpb24gaXMgdGhyb3duLlxuZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgd2hpbGUgKGluZGV4IDwgcXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHZhciBjdXJyZW50SW5kZXggPSBpbmRleDtcbiAgICAgICAgLy8gQWR2YW5jZSB0aGUgaW5kZXggYmVmb3JlIGNhbGxpbmcgdGhlIHRhc2suIFRoaXMgZW5zdXJlcyB0aGF0IHdlIHdpbGxcbiAgICAgICAgLy8gYmVnaW4gZmx1c2hpbmcgb24gdGhlIG5leHQgdGFzayB0aGUgdGFzayB0aHJvd3MgYW4gZXJyb3IuXG4gICAgICAgIGluZGV4ID0gaW5kZXggKyAxO1xuICAgICAgICBxdWV1ZVtjdXJyZW50SW5kZXhdLmNhbGwoKTtcbiAgICAgICAgLy8gUHJldmVudCBsZWFraW5nIG1lbW9yeSBmb3IgbG9uZyBjaGFpbnMgb2YgcmVjdXJzaXZlIGNhbGxzIHRvIGBhc2FwYC5cbiAgICAgICAgLy8gSWYgd2UgY2FsbCBgYXNhcGAgd2l0aGluIHRhc2tzIHNjaGVkdWxlZCBieSBgYXNhcGAsIHRoZSBxdWV1ZSB3aWxsXG4gICAgICAgIC8vIGdyb3csIGJ1dCB0byBhdm9pZCBhbiBPKG4pIHdhbGsgZm9yIGV2ZXJ5IHRhc2sgd2UgZXhlY3V0ZSwgd2UgZG9uJ3RcbiAgICAgICAgLy8gc2hpZnQgdGFza3Mgb2ZmIHRoZSBxdWV1ZSBhZnRlciB0aGV5IGhhdmUgYmVlbiBleGVjdXRlZC5cbiAgICAgICAgLy8gSW5zdGVhZCwgd2UgcGVyaW9kaWNhbGx5IHNoaWZ0IDEwMjQgdGFza3Mgb2ZmIHRoZSBxdWV1ZS5cbiAgICAgICAgaWYgKGluZGV4ID4gY2FwYWNpdHkpIHtcbiAgICAgICAgICAgIC8vIE1hbnVhbGx5IHNoaWZ0IGFsbCB2YWx1ZXMgc3RhcnRpbmcgYXQgdGhlIGluZGV4IGJhY2sgdG8gdGhlXG4gICAgICAgICAgICAvLyBiZWdpbm5pbmcgb2YgdGhlIHF1ZXVlLlxuICAgICAgICAgICAgZm9yICh2YXIgc2NhbiA9IDAsIG5ld0xlbmd0aCA9IHF1ZXVlLmxlbmd0aCAtIGluZGV4OyBzY2FuIDwgbmV3TGVuZ3RoOyBzY2FuKyspIHtcbiAgICAgICAgICAgICAgICBxdWV1ZVtzY2FuXSA9IHF1ZXVlW3NjYW4gKyBpbmRleF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBxdWV1ZS5sZW5ndGggLT0gaW5kZXg7XG4gICAgICAgICAgICBpbmRleCA9IDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUubGVuZ3RoID0gMDtcbiAgICBpbmRleCA9IDA7XG4gICAgZmx1c2hpbmcgPSBmYWxzZTtcbn1cblxuLy8gYHJlcXVlc3RGbHVzaGAgaXMgaW1wbGVtZW50ZWQgdXNpbmcgYSBzdHJhdGVneSBiYXNlZCBvbiBkYXRhIGNvbGxlY3RlZCBmcm9tXG4vLyBldmVyeSBhdmFpbGFibGUgU2F1Y2VMYWJzIFNlbGVuaXVtIHdlYiBkcml2ZXIgd29ya2VyIGF0IHRpbWUgb2Ygd3JpdGluZy5cbi8vIGh0dHBzOi8vZG9jcy5nb29nbGUuY29tL3NwcmVhZHNoZWV0cy9kLzFtRy01VVlHdXA1cXhHZEVNV2toUDZCV0N6MDUzTlViMkUxUW9VVFUxNnVBL2VkaXQjZ2lkPTc4MzcyNDU5M1xuXG4vLyBTYWZhcmkgNiBhbmQgNi4xIGZvciBkZXNrdG9wLCBpUGFkLCBhbmQgaVBob25lIGFyZSB0aGUgb25seSBicm93c2VycyB0aGF0XG4vLyBoYXZlIFdlYktpdE11dGF0aW9uT2JzZXJ2ZXIgYnV0IG5vdCB1bi1wcmVmaXhlZCBNdXRhdGlvbk9ic2VydmVyLlxuLy8gTXVzdCB1c2UgYGdsb2JhbGAgb3IgYHNlbGZgIGluc3RlYWQgb2YgYHdpbmRvd2AgdG8gd29yayBpbiBib3RoIGZyYW1lcyBhbmQgd2ViXG4vLyB3b3JrZXJzLiBgZ2xvYmFsYCBpcyBhIHByb3Zpc2lvbiBvZiBCcm93c2VyaWZ5LCBNciwgTXJzLCBvciBNb3AuXG5cbi8qIGdsb2JhbHMgc2VsZiAqL1xudmFyIHNjb3BlID0gdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHNlbGY7XG52YXIgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPSBzY29wZS5NdXRhdGlvbk9ic2VydmVyIHx8IHNjb3BlLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7XG5cbi8vIE11dGF0aW9uT2JzZXJ2ZXJzIGFyZSBkZXNpcmFibGUgYmVjYXVzZSB0aGV5IGhhdmUgaGlnaCBwcmlvcml0eSBhbmQgd29ya1xuLy8gcmVsaWFibHkgZXZlcnl3aGVyZSB0aGV5IGFyZSBpbXBsZW1lbnRlZC5cbi8vIFRoZXkgYXJlIGltcGxlbWVudGVkIGluIGFsbCBtb2Rlcm4gYnJvd3NlcnMuXG4vL1xuLy8gLSBBbmRyb2lkIDQtNC4zXG4vLyAtIENocm9tZSAyNi0zNFxuLy8gLSBGaXJlZm94IDE0LTI5XG4vLyAtIEludGVybmV0IEV4cGxvcmVyIDExXG4vLyAtIGlQYWQgU2FmYXJpIDYtNy4xXG4vLyAtIGlQaG9uZSBTYWZhcmkgNy03LjFcbi8vIC0gU2FmYXJpIDYtN1xuaWYgKHR5cGVvZiBCcm93c2VyTXV0YXRpb25PYnNlcnZlciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgcmVxdWVzdEZsdXNoID0gbWFrZVJlcXVlc3RDYWxsRnJvbU11dGF0aW9uT2JzZXJ2ZXIoZmx1c2gpO1xuXG4vLyBNZXNzYWdlQ2hhbm5lbHMgYXJlIGRlc2lyYWJsZSBiZWNhdXNlIHRoZXkgZ2l2ZSBkaXJlY3QgYWNjZXNzIHRvIHRoZSBIVE1MXG4vLyB0YXNrIHF1ZXVlLCBhcmUgaW1wbGVtZW50ZWQgaW4gSW50ZXJuZXQgRXhwbG9yZXIgMTAsIFNhZmFyaSA1LjAtMSwgYW5kIE9wZXJhXG4vLyAxMS0xMiwgYW5kIGluIHdlYiB3b3JrZXJzIGluIG1hbnkgZW5naW5lcy5cbi8vIEFsdGhvdWdoIG1lc3NhZ2UgY2hhbm5lbHMgeWllbGQgdG8gYW55IHF1ZXVlZCByZW5kZXJpbmcgYW5kIElPIHRhc2tzLCB0aGV5XG4vLyB3b3VsZCBiZSBiZXR0ZXIgdGhhbiBpbXBvc2luZyB0aGUgNG1zIGRlbGF5IG9mIHRpbWVycy5cbi8vIEhvd2V2ZXIsIHRoZXkgZG8gbm90IHdvcmsgcmVsaWFibHkgaW4gSW50ZXJuZXQgRXhwbG9yZXIgb3IgU2FmYXJpLlxuXG4vLyBJbnRlcm5ldCBFeHBsb3JlciAxMCBpcyB0aGUgb25seSBicm93c2VyIHRoYXQgaGFzIHNldEltbWVkaWF0ZSBidXQgZG9lc1xuLy8gbm90IGhhdmUgTXV0YXRpb25PYnNlcnZlcnMuXG4vLyBBbHRob3VnaCBzZXRJbW1lZGlhdGUgeWllbGRzIHRvIHRoZSBicm93c2VyJ3MgcmVuZGVyZXIsIGl0IHdvdWxkIGJlXG4vLyBwcmVmZXJyYWJsZSB0byBmYWxsaW5nIGJhY2sgdG8gc2V0VGltZW91dCBzaW5jZSBpdCBkb2VzIG5vdCBoYXZlXG4vLyB0aGUgbWluaW11bSA0bXMgcGVuYWx0eS5cbi8vIFVuZm9ydHVuYXRlbHkgdGhlcmUgYXBwZWFycyB0byBiZSBhIGJ1ZyBpbiBJbnRlcm5ldCBFeHBsb3JlciAxMCBNb2JpbGUgKGFuZFxuLy8gRGVza3RvcCB0byBhIGxlc3NlciBleHRlbnQpIHRoYXQgcmVuZGVycyBib3RoIHNldEltbWVkaWF0ZSBhbmRcbi8vIE1lc3NhZ2VDaGFubmVsIHVzZWxlc3MgZm9yIHRoZSBwdXJwb3NlcyBvZiBBU0FQLlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2tyaXNrb3dhbC9xL2lzc3Vlcy8zOTZcblxuLy8gVGltZXJzIGFyZSBpbXBsZW1lbnRlZCB1bml2ZXJzYWxseS5cbi8vIFdlIGZhbGwgYmFjayB0byB0aW1lcnMgaW4gd29ya2VycyBpbiBtb3N0IGVuZ2luZXMsIGFuZCBpbiBmb3JlZ3JvdW5kXG4vLyBjb250ZXh0cyBpbiB0aGUgZm9sbG93aW5nIGJyb3dzZXJzLlxuLy8gSG93ZXZlciwgbm90ZSB0aGF0IGV2ZW4gdGhpcyBzaW1wbGUgY2FzZSByZXF1aXJlcyBudWFuY2VzIHRvIG9wZXJhdGUgaW4gYVxuLy8gYnJvYWQgc3BlY3RydW0gb2YgYnJvd3NlcnMuXG4vL1xuLy8gLSBGaXJlZm94IDMtMTNcbi8vIC0gSW50ZXJuZXQgRXhwbG9yZXIgNi05XG4vLyAtIGlQYWQgU2FmYXJpIDQuM1xuLy8gLSBMeW54IDIuOC43XG59IGVsc2Uge1xuICAgIHJlcXVlc3RGbHVzaCA9IG1ha2VSZXF1ZXN0Q2FsbEZyb21UaW1lcihmbHVzaCk7XG59XG5cbi8vIGByZXF1ZXN0Rmx1c2hgIHJlcXVlc3RzIHRoYXQgdGhlIGhpZ2ggcHJpb3JpdHkgZXZlbnQgcXVldWUgYmUgZmx1c2hlZCBhc1xuLy8gc29vbiBhcyBwb3NzaWJsZS5cbi8vIFRoaXMgaXMgdXNlZnVsIHRvIHByZXZlbnQgYW4gZXJyb3IgdGhyb3duIGluIGEgdGFzayBmcm9tIHN0YWxsaW5nIHRoZSBldmVudFxuLy8gcXVldWUgaWYgdGhlIGV4Y2VwdGlvbiBoYW5kbGVkIGJ5IE5vZGUuanPigJlzXG4vLyBgcHJvY2Vzcy5vbihcInVuY2F1Z2h0RXhjZXB0aW9uXCIpYCBvciBieSBhIGRvbWFpbi5cbnJhd0FzYXAucmVxdWVzdEZsdXNoID0gcmVxdWVzdEZsdXNoO1xuXG4vLyBUbyByZXF1ZXN0IGEgaGlnaCBwcmlvcml0eSBldmVudCwgd2UgaW5kdWNlIGEgbXV0YXRpb24gb2JzZXJ2ZXIgYnkgdG9nZ2xpbmdcbi8vIHRoZSB0ZXh0IG9mIGEgdGV4dCBub2RlIGJldHdlZW4gXCIxXCIgYW5kIFwiLTFcIi5cbmZ1bmN0aW9uIG1ha2VSZXF1ZXN0Q2FsbEZyb21NdXRhdGlvbk9ic2VydmVyKGNhbGxiYWNrKSB7XG4gICAgdmFyIHRvZ2dsZSA9IDE7XG4gICAgdmFyIG9ic2VydmVyID0gbmV3IEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKGNhbGxiYWNrKTtcbiAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpO1xuICAgIG9ic2VydmVyLm9ic2VydmUobm9kZSwge2NoYXJhY3RlckRhdGE6IHRydWV9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24gcmVxdWVzdENhbGwoKSB7XG4gICAgICAgIHRvZ2dsZSA9IC10b2dnbGU7XG4gICAgICAgIG5vZGUuZGF0YSA9IHRvZ2dsZTtcbiAgICB9O1xufVxuXG4vLyBUaGUgbWVzc2FnZSBjaGFubmVsIHRlY2huaXF1ZSB3YXMgZGlzY292ZXJlZCBieSBNYWx0ZSBVYmwgYW5kIHdhcyB0aGVcbi8vIG9yaWdpbmFsIGZvdW5kYXRpb24gZm9yIHRoaXMgbGlicmFyeS5cbi8vIGh0dHA6Ly93d3cubm9uYmxvY2tpbmcuaW8vMjAxMS8wNi93aW5kb3duZXh0dGljay5odG1sXG5cbi8vIFNhZmFyaSA2LjAuNSAoYXQgbGVhc3QpIGludGVybWl0dGVudGx5IGZhaWxzIHRvIGNyZWF0ZSBtZXNzYWdlIHBvcnRzIG9uIGFcbi8vIHBhZ2UncyBmaXJzdCBsb2FkLiBUaGFua2Z1bGx5LCB0aGlzIHZlcnNpb24gb2YgU2FmYXJpIHN1cHBvcnRzXG4vLyBNdXRhdGlvbk9ic2VydmVycywgc28gd2UgZG9uJ3QgbmVlZCB0byBmYWxsIGJhY2sgaW4gdGhhdCBjYXNlLlxuXG4vLyBmdW5jdGlvbiBtYWtlUmVxdWVzdENhbGxGcm9tTWVzc2FnZUNoYW5uZWwoY2FsbGJhY2spIHtcbi8vICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuLy8gICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gY2FsbGJhY2s7XG4vLyAgICAgcmV0dXJuIGZ1bmN0aW9uIHJlcXVlc3RDYWxsKCkge1xuLy8gICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKDApO1xuLy8gICAgIH07XG4vLyB9XG5cbi8vIEZvciByZWFzb25zIGV4cGxhaW5lZCBhYm92ZSwgd2UgYXJlIGFsc28gdW5hYmxlIHRvIHVzZSBgc2V0SW1tZWRpYXRlYFxuLy8gdW5kZXIgYW55IGNpcmN1bXN0YW5jZXMuXG4vLyBFdmVuIGlmIHdlIHdlcmUsIHRoZXJlIGlzIGFub3RoZXIgYnVnIGluIEludGVybmV0IEV4cGxvcmVyIDEwLlxuLy8gSXQgaXMgbm90IHN1ZmZpY2llbnQgdG8gYXNzaWduIGBzZXRJbW1lZGlhdGVgIHRvIGByZXF1ZXN0Rmx1c2hgIGJlY2F1c2Vcbi8vIGBzZXRJbW1lZGlhdGVgIG11c3QgYmUgY2FsbGVkICpieSBuYW1lKiBhbmQgdGhlcmVmb3JlIG11c3QgYmUgd3JhcHBlZCBpbiBhXG4vLyBjbG9zdXJlLlxuLy8gTmV2ZXIgZm9yZ2V0LlxuXG4vLyBmdW5jdGlvbiBtYWtlUmVxdWVzdENhbGxGcm9tU2V0SW1tZWRpYXRlKGNhbGxiYWNrKSB7XG4vLyAgICAgcmV0dXJuIGZ1bmN0aW9uIHJlcXVlc3RDYWxsKCkge1xuLy8gICAgICAgICBzZXRJbW1lZGlhdGUoY2FsbGJhY2spO1xuLy8gICAgIH07XG4vLyB9XG5cbi8vIFNhZmFyaSA2LjAgaGFzIGEgcHJvYmxlbSB3aGVyZSB0aW1lcnMgd2lsbCBnZXQgbG9zdCB3aGlsZSB0aGUgdXNlciBpc1xuLy8gc2Nyb2xsaW5nLiBUaGlzIHByb2JsZW0gZG9lcyBub3QgaW1wYWN0IEFTQVAgYmVjYXVzZSBTYWZhcmkgNi4wIHN1cHBvcnRzXG4vLyBtdXRhdGlvbiBvYnNlcnZlcnMsIHNvIHRoYXQgaW1wbGVtZW50YXRpb24gaXMgdXNlZCBpbnN0ZWFkLlxuLy8gSG93ZXZlciwgaWYgd2UgZXZlciBlbGVjdCB0byB1c2UgdGltZXJzIGluIFNhZmFyaSwgdGhlIHByZXZhbGVudCB3b3JrLWFyb3VuZFxuLy8gaXMgdG8gYWRkIGEgc2Nyb2xsIGV2ZW50IGxpc3RlbmVyIHRoYXQgY2FsbHMgZm9yIGEgZmx1c2guXG5cbi8vIGBzZXRUaW1lb3V0YCBkb2VzIG5vdCBjYWxsIHRoZSBwYXNzZWQgY2FsbGJhY2sgaWYgdGhlIGRlbGF5IGlzIGxlc3MgdGhhblxuLy8gYXBwcm94aW1hdGVseSA3IGluIHdlYiB3b3JrZXJzIGluIEZpcmVmb3ggOCB0aHJvdWdoIDE4LCBhbmQgc29tZXRpbWVzIG5vdFxuLy8gZXZlbiB0aGVuLlxuXG5mdW5jdGlvbiBtYWtlUmVxdWVzdENhbGxGcm9tVGltZXIoY2FsbGJhY2spIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gcmVxdWVzdENhbGwoKSB7XG4gICAgICAgIC8vIFdlIGRpc3BhdGNoIGEgdGltZW91dCB3aXRoIGEgc3BlY2lmaWVkIGRlbGF5IG9mIDAgZm9yIGVuZ2luZXMgdGhhdFxuICAgICAgICAvLyBjYW4gcmVsaWFibHkgYWNjb21tb2RhdGUgdGhhdCByZXF1ZXN0LiBUaGlzIHdpbGwgdXN1YWxseSBiZSBzbmFwcGVkXG4gICAgICAgIC8vIHRvIGEgNCBtaWxpc2Vjb25kIGRlbGF5LCBidXQgb25jZSB3ZSdyZSBmbHVzaGluZywgdGhlcmUncyBubyBkZWxheVxuICAgICAgICAvLyBiZXR3ZWVuIGV2ZW50cy5cbiAgICAgICAgdmFyIHRpbWVvdXRIYW5kbGUgPSBzZXRUaW1lb3V0KGhhbmRsZVRpbWVyLCAwKTtcbiAgICAgICAgLy8gSG93ZXZlciwgc2luY2UgdGhpcyB0aW1lciBnZXRzIGZyZXF1ZW50bHkgZHJvcHBlZCBpbiBGaXJlZm94XG4gICAgICAgIC8vIHdvcmtlcnMsIHdlIGVubGlzdCBhbiBpbnRlcnZhbCBoYW5kbGUgdGhhdCB3aWxsIHRyeSB0byBmaXJlXG4gICAgICAgIC8vIGFuIGV2ZW50IDIwIHRpbWVzIHBlciBzZWNvbmQgdW50aWwgaXQgc3VjY2VlZHMuXG4gICAgICAgIHZhciBpbnRlcnZhbEhhbmRsZSA9IHNldEludGVydmFsKGhhbmRsZVRpbWVyLCA1MCk7XG5cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlVGltZXIoKSB7XG4gICAgICAgICAgICAvLyBXaGljaGV2ZXIgdGltZXIgc3VjY2VlZHMgd2lsbCBjYW5jZWwgYm90aCB0aW1lcnMgYW5kXG4gICAgICAgICAgICAvLyBleGVjdXRlIHRoZSBjYWxsYmFjay5cbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SGFuZGxlKTtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxIYW5kbGUpO1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8vIFRoaXMgaXMgZm9yIGBhc2FwLmpzYCBvbmx5LlxuLy8gSXRzIG5hbWUgd2lsbCBiZSBwZXJpb2RpY2FsbHkgcmFuZG9taXplZCB0byBicmVhayBhbnkgY29kZSB0aGF0IGRlcGVuZHMgb25cbi8vIGl0cyBleGlzdGVuY2UuXG5yYXdBc2FwLm1ha2VSZXF1ZXN0Q2FsbEZyb21UaW1lciA9IG1ha2VSZXF1ZXN0Q2FsbEZyb21UaW1lcjtcblxuLy8gQVNBUCB3YXMgb3JpZ2luYWxseSBhIG5leHRUaWNrIHNoaW0gaW5jbHVkZWQgaW4gUS4gVGhpcyB3YXMgZmFjdG9yZWQgb3V0XG4vLyBpbnRvIHRoaXMgQVNBUCBwYWNrYWdlLiBJdCB3YXMgbGF0ZXIgYWRhcHRlZCB0byBSU1ZQIHdoaWNoIG1hZGUgZnVydGhlclxuLy8gYW1lbmRtZW50cy4gVGhlc2UgZGVjaXNpb25zLCBwYXJ0aWN1bGFybHkgdG8gbWFyZ2luYWxpemUgTWVzc2FnZUNoYW5uZWwgYW5kXG4vLyB0byBjYXB0dXJlIHRoZSBNdXRhdGlvbk9ic2VydmVyIGltcGxlbWVudGF0aW9uIGluIGEgY2xvc3VyZSwgd2VyZSBpbnRlZ3JhdGVkXG4vLyBiYWNrIGludG8gQVNBUCBwcm9wZXIuXG4vLyBodHRwczovL2dpdGh1Yi5jb20vdGlsZGVpby9yc3ZwLmpzL2Jsb2IvY2RkZjcyMzI1NDZhOWNmODU4NTI0Yjc1Y2RlNmY5ZWRmNzI2MjBhNy9saWIvcnN2cC9hc2FwLmpzXG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFycjJbaV0gPSBhcnJbaV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGFycjI7XG4gIH1cbn0iLCJmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7XG4gIHRyeSB7XG4gICAgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpO1xuICAgIHZhciB2YWx1ZSA9IGluZm8udmFsdWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVqZWN0KGVycm9yKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoaW5mby5kb25lKSB7XG4gICAgcmVzb2x2ZSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7XG5cbiAgICAgIGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJuZXh0XCIsIHZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gX3Rocm93KGVycikge1xuICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIFwidGhyb3dcIiwgZXJyKTtcbiAgICAgIH1cblxuICAgICAgX25leHQodW5kZWZpbmVkKTtcbiAgICB9KTtcbiAgfTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIG9iajtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHtcbiAgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSBcIltvYmplY3QgQXJndW1lbnRzXVwiKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTtcbn0iLCJpbXBvcnQgZGVmaW5lUHJvcGVydHkgZnJvbSBcIi4vZGVmaW5lUHJvcGVydHlcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307XG4gICAgdmFyIG93bktleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuXG4gICAgaWYgKHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBvd25LZXlzID0gb3duS2V5cy5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwgc3ltKS5lbnVtZXJhYmxlO1xuICAgICAgfSkpO1xuICAgIH1cblxuICAgIG93bktleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBkZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn0iLCJpbXBvcnQgb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSBmcm9tIFwiLi9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLCBleGNsdWRlZCkge1xuICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTtcbiAgdmFyIHRhcmdldCA9IG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCk7XG4gIHZhciBrZXksIGk7XG5cbiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcbiAgICB2YXIgc291cmNlU3ltYm9sS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VTeW1ib2xLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBrZXkgPSBzb3VyY2VTeW1ib2xLZXlzW2ldO1xuICAgICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTtcbiAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHNvdXJjZSwga2V5KSkgY29udGludWU7XG4gICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkge1xuICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTtcbiAgdmFyIHRhcmdldCA9IHt9O1xuICB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7XG4gIHZhciBrZXksIGk7XG5cbiAgZm9yIChpID0gMDsgaSA8IHNvdXJjZUtleXMubGVuZ3RoOyBpKyspIHtcbiAgICBrZXkgPSBzb3VyY2VLZXlzW2ldO1xuICAgIGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7XG4gICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59IiwiaW1wb3J0IGFycmF5V2l0aEhvbGVzIGZyb20gXCIuL2FycmF5V2l0aEhvbGVzXCI7XG5pbXBvcnQgaXRlcmFibGVUb0FycmF5IGZyb20gXCIuL2l0ZXJhYmxlVG9BcnJheVwiO1xuaW1wb3J0IG5vbkl0ZXJhYmxlUmVzdCBmcm9tIFwiLi9ub25JdGVyYWJsZVJlc3RcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF90b0FycmF5KGFycikge1xuICByZXR1cm4gYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBpdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBub25JdGVyYWJsZVJlc3QoKTtcbn0iLCJpbXBvcnQgYXJyYXlXaXRob3V0SG9sZXMgZnJvbSBcIi4vYXJyYXlXaXRob3V0SG9sZXNcIjtcbmltcG9ydCBpdGVyYWJsZVRvQXJyYXkgZnJvbSBcIi4vaXRlcmFibGVUb0FycmF5XCI7XG5pbXBvcnQgbm9uSXRlcmFibGVTcHJlYWQgZnJvbSBcIi4vbm9uSXRlcmFibGVTcHJlYWRcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHtcbiAgcmV0dXJuIGFycmF5V2l0aG91dEhvbGVzKGFycikgfHwgaXRlcmFibGVUb0FycmF5KGFycikgfHwgbm9uSXRlcmFibGVTcHJlYWQoKTtcbn0iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJyZWdlbmVyYXRvci1ydW50aW1lXCIpO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG52YXIgcnVudGltZSA9IChmdW5jdGlvbiAoZXhwb3J0cykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgT3AgPSBPYmplY3QucHJvdG90eXBlO1xuICB2YXIgaGFzT3duID0gT3AuaGFzT3duUHJvcGVydHk7XG4gIHZhciB1bmRlZmluZWQ7IC8vIE1vcmUgY29tcHJlc3NpYmxlIHRoYW4gdm9pZCAwLlxuICB2YXIgJFN5bWJvbCA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiA/IFN5bWJvbCA6IHt9O1xuICB2YXIgaXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLml0ZXJhdG9yIHx8IFwiQEBpdGVyYXRvclwiO1xuICB2YXIgYXN5bmNJdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuYXN5bmNJdGVyYXRvciB8fCBcIkBAYXN5bmNJdGVyYXRvclwiO1xuICB2YXIgdG9TdHJpbmdUYWdTeW1ib2wgPSAkU3ltYm9sLnRvU3RyaW5nVGFnIHx8IFwiQEB0b1N0cmluZ1RhZ1wiO1xuXG4gIGZ1bmN0aW9uIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpIHtcbiAgICAvLyBJZiBvdXRlckZuIHByb3ZpZGVkIGFuZCBvdXRlckZuLnByb3RvdHlwZSBpcyBhIEdlbmVyYXRvciwgdGhlbiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvci5cbiAgICB2YXIgcHJvdG9HZW5lcmF0b3IgPSBvdXRlckZuICYmIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yID8gb3V0ZXJGbiA6IEdlbmVyYXRvcjtcbiAgICB2YXIgZ2VuZXJhdG9yID0gT2JqZWN0LmNyZWF0ZShwcm90b0dlbmVyYXRvci5wcm90b3R5cGUpO1xuICAgIHZhciBjb250ZXh0ID0gbmV3IENvbnRleHQodHJ5TG9jc0xpc3QgfHwgW10pO1xuXG4gICAgLy8gVGhlIC5faW52b2tlIG1ldGhvZCB1bmlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlIC5uZXh0LFxuICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcy5cbiAgICBnZW5lcmF0b3IuX2ludm9rZSA9IG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZiwgY29udGV4dCk7XG5cbiAgICByZXR1cm4gZ2VuZXJhdG9yO1xuICB9XG4gIGV4cG9ydHMud3JhcCA9IHdyYXA7XG5cbiAgLy8gVHJ5L2NhdGNoIGhlbHBlciB0byBtaW5pbWl6ZSBkZW9wdGltaXphdGlvbnMuIFJldHVybnMgYSBjb21wbGV0aW9uXG4gIC8vIHJlY29yZCBsaWtlIGNvbnRleHQudHJ5RW50cmllc1tpXS5jb21wbGV0aW9uLiBUaGlzIGludGVyZmFjZSBjb3VsZFxuICAvLyBoYXZlIGJlZW4gKGFuZCB3YXMgcHJldmlvdXNseSkgZGVzaWduZWQgdG8gdGFrZSBhIGNsb3N1cmUgdG8gYmVcbiAgLy8gaW52b2tlZCB3aXRob3V0IGFyZ3VtZW50cywgYnV0IGluIGFsbCB0aGUgY2FzZXMgd2UgY2FyZSBhYm91dCB3ZVxuICAvLyBhbHJlYWR5IGhhdmUgYW4gZXhpc3RpbmcgbWV0aG9kIHdlIHdhbnQgdG8gY2FsbCwgc28gdGhlcmUncyBubyBuZWVkXG4gIC8vIHRvIGNyZWF0ZSBhIG5ldyBmdW5jdGlvbiBvYmplY3QuIFdlIGNhbiBldmVuIGdldCBhd2F5IHdpdGggYXNzdW1pbmdcbiAgLy8gdGhlIG1ldGhvZCB0YWtlcyBleGFjdGx5IG9uZSBhcmd1bWVudCwgc2luY2UgdGhhdCBoYXBwZW5zIHRvIGJlIHRydWVcbiAgLy8gaW4gZXZlcnkgY2FzZSwgc28gd2UgZG9uJ3QgaGF2ZSB0byB0b3VjaCB0aGUgYXJndW1lbnRzIG9iamVjdC4gVGhlXG4gIC8vIG9ubHkgYWRkaXRpb25hbCBhbGxvY2F0aW9uIHJlcXVpcmVkIGlzIHRoZSBjb21wbGV0aW9uIHJlY29yZCwgd2hpY2hcbiAgLy8gaGFzIGEgc3RhYmxlIHNoYXBlIGFuZCBzbyBob3BlZnVsbHkgc2hvdWxkIGJlIGNoZWFwIHRvIGFsbG9jYXRlLlxuICBmdW5jdGlvbiB0cnlDYXRjaChmbiwgb2JqLCBhcmcpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJub3JtYWxcIiwgYXJnOiBmbi5jYWxsKG9iaiwgYXJnKSB9O1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJ0aHJvd1wiLCBhcmc6IGVyciB9O1xuICAgIH1cbiAgfVxuXG4gIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0ID0gXCJzdXNwZW5kZWRTdGFydFwiO1xuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRZaWVsZCA9IFwic3VzcGVuZGVkWWllbGRcIjtcbiAgdmFyIEdlblN0YXRlRXhlY3V0aW5nID0gXCJleGVjdXRpbmdcIjtcbiAgdmFyIEdlblN0YXRlQ29tcGxldGVkID0gXCJjb21wbGV0ZWRcIjtcblxuICAvLyBSZXR1cm5pbmcgdGhpcyBvYmplY3QgZnJvbSB0aGUgaW5uZXJGbiBoYXMgdGhlIHNhbWUgZWZmZWN0IGFzXG4gIC8vIGJyZWFraW5nIG91dCBvZiB0aGUgZGlzcGF0Y2ggc3dpdGNoIHN0YXRlbWVudC5cbiAgdmFyIENvbnRpbnVlU2VudGluZWwgPSB7fTtcblxuICAvLyBEdW1teSBjb25zdHJ1Y3RvciBmdW5jdGlvbnMgdGhhdCB3ZSB1c2UgYXMgdGhlIC5jb25zdHJ1Y3RvciBhbmRcbiAgLy8gLmNvbnN0cnVjdG9yLnByb3RvdHlwZSBwcm9wZXJ0aWVzIGZvciBmdW5jdGlvbnMgdGhhdCByZXR1cm4gR2VuZXJhdG9yXG4gIC8vIG9iamVjdHMuIEZvciBmdWxsIHNwZWMgY29tcGxpYW5jZSwgeW91IG1heSB3aXNoIHRvIGNvbmZpZ3VyZSB5b3VyXG4gIC8vIG1pbmlmaWVyIG5vdCB0byBtYW5nbGUgdGhlIG5hbWVzIG9mIHRoZXNlIHR3byBmdW5jdGlvbnMuXG4gIGZ1bmN0aW9uIEdlbmVyYXRvcigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uKCkge31cbiAgZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUoKSB7fVxuXG4gIC8vIFRoaXMgaXMgYSBwb2x5ZmlsbCBmb3IgJUl0ZXJhdG9yUHJvdG90eXBlJSBmb3IgZW52aXJvbm1lbnRzIHRoYXRcbiAgLy8gZG9uJ3QgbmF0aXZlbHkgc3VwcG9ydCBpdC5cbiAgdmFyIEl0ZXJhdG9yUHJvdG90eXBlID0ge307XG4gIEl0ZXJhdG9yUHJvdG90eXBlW2l0ZXJhdG9yU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICB2YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG4gIHZhciBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvICYmIGdldFByb3RvKGdldFByb3RvKHZhbHVlcyhbXSkpKTtcbiAgaWYgKE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlICYmXG4gICAgICBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAhPT0gT3AgJiZcbiAgICAgIGhhc093bi5jYWxsKE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlLCBpdGVyYXRvclN5bWJvbCkpIHtcbiAgICAvLyBUaGlzIGVudmlyb25tZW50IGhhcyBhIG5hdGl2ZSAlSXRlcmF0b3JQcm90b3R5cGUlOyB1c2UgaXQgaW5zdGVhZFxuICAgIC8vIG9mIHRoZSBwb2x5ZmlsbC5cbiAgICBJdGVyYXRvclByb3RvdHlwZSA9IE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlO1xuICB9XG5cbiAgdmFyIEdwID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUucHJvdG90eXBlID1cbiAgICBHZW5lcmF0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShJdGVyYXRvclByb3RvdHlwZSk7XG4gIEdlbmVyYXRvckZ1bmN0aW9uLnByb3RvdHlwZSA9IEdwLmNvbnN0cnVjdG9yID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7XG4gIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLmNvbnN0cnVjdG9yID0gR2VuZXJhdG9yRnVuY3Rpb247XG4gIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlW3RvU3RyaW5nVGFnU3ltYm9sXSA9XG4gICAgR2VuZXJhdG9yRnVuY3Rpb24uZGlzcGxheU5hbWUgPSBcIkdlbmVyYXRvckZ1bmN0aW9uXCI7XG5cbiAgLy8gSGVscGVyIGZvciBkZWZpbmluZyB0aGUgLm5leHQsIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcyBvZiB0aGVcbiAgLy8gSXRlcmF0b3IgaW50ZXJmYWNlIGluIHRlcm1zIG9mIGEgc2luZ2xlIC5faW52b2tlIG1ldGhvZC5cbiAgZnVuY3Rpb24gZGVmaW5lSXRlcmF0b3JNZXRob2RzKHByb3RvdHlwZSkge1xuICAgIFtcIm5leHRcIiwgXCJ0aHJvd1wiLCBcInJldHVyblwiXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgcHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludm9rZShtZXRob2QsIGFyZyk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZXhwb3J0cy5pc0dlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24oZ2VuRnVuKSB7XG4gICAgdmFyIGN0b3IgPSB0eXBlb2YgZ2VuRnVuID09PSBcImZ1bmN0aW9uXCIgJiYgZ2VuRnVuLmNvbnN0cnVjdG9yO1xuICAgIHJldHVybiBjdG9yXG4gICAgICA/IGN0b3IgPT09IEdlbmVyYXRvckZ1bmN0aW9uIHx8XG4gICAgICAgIC8vIEZvciB0aGUgbmF0aXZlIEdlbmVyYXRvckZ1bmN0aW9uIGNvbnN0cnVjdG9yLCB0aGUgYmVzdCB3ZSBjYW5cbiAgICAgICAgLy8gZG8gaXMgdG8gY2hlY2sgaXRzIC5uYW1lIHByb3BlcnR5LlxuICAgICAgICAoY3Rvci5kaXNwbGF5TmFtZSB8fCBjdG9yLm5hbWUpID09PSBcIkdlbmVyYXRvckZ1bmN0aW9uXCJcbiAgICAgIDogZmFsc2U7XG4gIH07XG5cbiAgZXhwb3J0cy5tYXJrID0gZnVuY3Rpb24oZ2VuRnVuKSB7XG4gICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGdlbkZ1biwgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBnZW5GdW4uX19wcm90b19fID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7XG4gICAgICBpZiAoISh0b1N0cmluZ1RhZ1N5bWJvbCBpbiBnZW5GdW4pKSB7XG4gICAgICAgIGdlbkZ1blt0b1N0cmluZ1RhZ1N5bWJvbF0gPSBcIkdlbmVyYXRvckZ1bmN0aW9uXCI7XG4gICAgICB9XG4gICAgfVxuICAgIGdlbkZ1bi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEdwKTtcbiAgICByZXR1cm4gZ2VuRnVuO1xuICB9O1xuXG4gIC8vIFdpdGhpbiB0aGUgYm9keSBvZiBhbnkgYXN5bmMgZnVuY3Rpb24sIGBhd2FpdCB4YCBpcyB0cmFuc2Zvcm1lZCB0b1xuICAvLyBgeWllbGQgcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHgpYCwgc28gdGhhdCB0aGUgcnVudGltZSBjYW4gdGVzdFxuICAvLyBgaGFzT3duLmNhbGwodmFsdWUsIFwiX19hd2FpdFwiKWAgdG8gZGV0ZXJtaW5lIGlmIHRoZSB5aWVsZGVkIHZhbHVlIGlzXG4gIC8vIG1lYW50IHRvIGJlIGF3YWl0ZWQuXG4gIGV4cG9ydHMuYXdyYXAgPSBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4geyBfX2F3YWl0OiBhcmcgfTtcbiAgfTtcblxuICBmdW5jdGlvbiBBc3luY0l0ZXJhdG9yKGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goZ2VuZXJhdG9yW21ldGhvZF0sIGdlbmVyYXRvciwgYXJnKTtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHJlamVjdChyZWNvcmQuYXJnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciByZXN1bHQgPSByZWNvcmQuYXJnO1xuICAgICAgICB2YXIgdmFsdWUgPSByZXN1bHQudmFsdWU7XG4gICAgICAgIGlmICh2YWx1ZSAmJlxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbCh2YWx1ZSwgXCJfX2F3YWl0XCIpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2YWx1ZS5fX2F3YWl0KS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBpbnZva2UoXCJuZXh0XCIsIHZhbHVlLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgaW52b2tlKFwidGhyb3dcIiwgZXJyLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbih1bndyYXBwZWQpIHtcbiAgICAgICAgICAvLyBXaGVuIGEgeWllbGRlZCBQcm9taXNlIGlzIHJlc29sdmVkLCBpdHMgZmluYWwgdmFsdWUgYmVjb21lc1xuICAgICAgICAgIC8vIHRoZSAudmFsdWUgb2YgdGhlIFByb21pc2U8e3ZhbHVlLGRvbmV9PiByZXN1bHQgZm9yIHRoZVxuICAgICAgICAgIC8vIGN1cnJlbnQgaXRlcmF0aW9uLlxuICAgICAgICAgIHJlc3VsdC52YWx1ZSA9IHVud3JhcHBlZDtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgLy8gSWYgYSByZWplY3RlZCBQcm9taXNlIHdhcyB5aWVsZGVkLCB0aHJvdyB0aGUgcmVqZWN0aW9uIGJhY2tcbiAgICAgICAgICAvLyBpbnRvIHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gc28gaXQgY2FuIGJlIGhhbmRsZWQgdGhlcmUuXG4gICAgICAgICAgcmV0dXJuIGludm9rZShcInRocm93XCIsIGVycm9yLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcHJldmlvdXNQcm9taXNlO1xuXG4gICAgZnVuY3Rpb24gZW5xdWV1ZShtZXRob2QsIGFyZykge1xuICAgICAgZnVuY3Rpb24gY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJldmlvdXNQcm9taXNlID1cbiAgICAgICAgLy8gSWYgZW5xdWV1ZSBoYXMgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIHdlIHdhbnQgdG8gd2FpdCB1bnRpbFxuICAgICAgICAvLyBhbGwgcHJldmlvdXMgUHJvbWlzZXMgaGF2ZSBiZWVuIHJlc29sdmVkIGJlZm9yZSBjYWxsaW5nIGludm9rZSxcbiAgICAgICAgLy8gc28gdGhhdCByZXN1bHRzIGFyZSBhbHdheXMgZGVsaXZlcmVkIGluIHRoZSBjb3JyZWN0IG9yZGVyLiBJZlxuICAgICAgICAvLyBlbnF1ZXVlIGhhcyBub3QgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIGl0IGlzIGltcG9ydGFudCB0b1xuICAgICAgICAvLyBjYWxsIGludm9rZSBpbW1lZGlhdGVseSwgd2l0aG91dCB3YWl0aW5nIG9uIGEgY2FsbGJhY2sgdG8gZmlyZSxcbiAgICAgICAgLy8gc28gdGhhdCB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIGhhcyB0aGUgb3Bwb3J0dW5pdHkgdG8gZG9cbiAgICAgICAgLy8gYW55IG5lY2Vzc2FyeSBzZXR1cCBpbiBhIHByZWRpY3RhYmxlIHdheS4gVGhpcyBwcmVkaWN0YWJpbGl0eVxuICAgICAgICAvLyBpcyB3aHkgdGhlIFByb21pc2UgY29uc3RydWN0b3Igc3luY2hyb25vdXNseSBpbnZva2VzIGl0c1xuICAgICAgICAvLyBleGVjdXRvciBjYWxsYmFjaywgYW5kIHdoeSBhc3luYyBmdW5jdGlvbnMgc3luY2hyb25vdXNseVxuICAgICAgICAvLyBleGVjdXRlIGNvZGUgYmVmb3JlIHRoZSBmaXJzdCBhd2FpdC4gU2luY2Ugd2UgaW1wbGVtZW50IHNpbXBsZVxuICAgICAgICAvLyBhc3luYyBmdW5jdGlvbnMgaW4gdGVybXMgb2YgYXN5bmMgZ2VuZXJhdG9ycywgaXQgaXMgZXNwZWNpYWxseVxuICAgICAgICAvLyBpbXBvcnRhbnQgdG8gZ2V0IHRoaXMgcmlnaHQsIGV2ZW4gdGhvdWdoIGl0IHJlcXVpcmVzIGNhcmUuXG4gICAgICAgIHByZXZpb3VzUHJvbWlzZSA/IHByZXZpb3VzUHJvbWlzZS50aGVuKFxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnLFxuICAgICAgICAgIC8vIEF2b2lkIHByb3BhZ2F0aW5nIGZhaWx1cmVzIHRvIFByb21pc2VzIHJldHVybmVkIGJ5IGxhdGVyXG4gICAgICAgICAgLy8gaW52b2NhdGlvbnMgb2YgdGhlIGl0ZXJhdG9yLlxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnXG4gICAgICAgICkgOiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpO1xuICAgIH1cblxuICAgIC8vIERlZmluZSB0aGUgdW5pZmllZCBoZWxwZXIgbWV0aG9kIHRoYXQgaXMgdXNlZCB0byBpbXBsZW1lbnQgLm5leHQsXG4gICAgLy8gLnRocm93LCBhbmQgLnJldHVybiAoc2VlIGRlZmluZUl0ZXJhdG9yTWV0aG9kcykuXG4gICAgdGhpcy5faW52b2tlID0gZW5xdWV1ZTtcbiAgfVxuXG4gIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSk7XG4gIEFzeW5jSXRlcmF0b3IucHJvdG90eXBlW2FzeW5jSXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBleHBvcnRzLkFzeW5jSXRlcmF0b3IgPSBBc3luY0l0ZXJhdG9yO1xuXG4gIC8vIE5vdGUgdGhhdCBzaW1wbGUgYXN5bmMgZnVuY3Rpb25zIGFyZSBpbXBsZW1lbnRlZCBvbiB0b3Agb2ZcbiAgLy8gQXN5bmNJdGVyYXRvciBvYmplY3RzOyB0aGV5IGp1c3QgcmV0dXJuIGEgUHJvbWlzZSBmb3IgdGhlIHZhbHVlIG9mXG4gIC8vIHRoZSBmaW5hbCByZXN1bHQgcHJvZHVjZWQgYnkgdGhlIGl0ZXJhdG9yLlxuICBleHBvcnRzLmFzeW5jID0gZnVuY3Rpb24oaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpIHtcbiAgICB2YXIgaXRlciA9IG5ldyBBc3luY0l0ZXJhdG9yKFxuICAgICAgd3JhcChpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdClcbiAgICApO1xuXG4gICAgcmV0dXJuIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbihvdXRlckZuKVxuICAgICAgPyBpdGVyIC8vIElmIG91dGVyRm4gaXMgYSBnZW5lcmF0b3IsIHJldHVybiB0aGUgZnVsbCBpdGVyYXRvci5cbiAgICAgIDogaXRlci5uZXh0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LmRvbmUgPyByZXN1bHQudmFsdWUgOiBpdGVyLm5leHQoKTtcbiAgICAgICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KSB7XG4gICAgdmFyIHN0YXRlID0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydDtcblxuICAgIHJldHVybiBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcpIHtcbiAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVFeGVjdXRpbmcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZ1wiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUNvbXBsZXRlZCkge1xuICAgICAgICBpZiAobWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICB0aHJvdyBhcmc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCZSBmb3JnaXZpbmcsIHBlciAyNS4zLjMuMy4zIG9mIHRoZSBzcGVjOlxuICAgICAgICAvLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtZ2VuZXJhdG9ycmVzdW1lXG4gICAgICAgIHJldHVybiBkb25lUmVzdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnRleHQubWV0aG9kID0gbWV0aG9kO1xuICAgICAgY29udGV4dC5hcmcgPSBhcmc7XG5cbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHZhciBkZWxlZ2F0ZSA9IGNvbnRleHQuZGVsZWdhdGU7XG4gICAgICAgIGlmIChkZWxlZ2F0ZSkge1xuICAgICAgICAgIHZhciBkZWxlZ2F0ZVJlc3VsdCA9IG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0ID09PSBDb250aW51ZVNlbnRpbmVsKSBjb250aW51ZTtcbiAgICAgICAgICAgIHJldHVybiBkZWxlZ2F0ZVJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgICAgLy8gU2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgICAgICBjb250ZXh0LnNlbnQgPSBjb250ZXh0Ll9zZW50ID0gY29udGV4dC5hcmc7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0KSB7XG4gICAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgICAgdGhyb3cgY29udGV4dC5hcmc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZyk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICAgIGNvbnRleHQuYWJydXB0KFwicmV0dXJuXCIsIGNvbnRleHQuYXJnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXRlID0gR2VuU3RhdGVFeGVjdXRpbmc7XG5cbiAgICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIpIHtcbiAgICAgICAgICAvLyBJZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGZyb20gaW5uZXJGbiwgd2UgbGVhdmUgc3RhdGUgPT09XG4gICAgICAgICAgLy8gR2VuU3RhdGVFeGVjdXRpbmcgYW5kIGxvb3AgYmFjayBmb3IgYW5vdGhlciBpbnZvY2F0aW9uLlxuICAgICAgICAgIHN0YXRlID0gY29udGV4dC5kb25lXG4gICAgICAgICAgICA/IEdlblN0YXRlQ29tcGxldGVkXG4gICAgICAgICAgICA6IEdlblN0YXRlU3VzcGVuZGVkWWllbGQ7XG5cbiAgICAgICAgICBpZiAocmVjb3JkLmFyZyA9PT0gQ29udGludWVTZW50aW5lbCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiByZWNvcmQuYXJnLFxuICAgICAgICAgICAgZG9uZTogY29udGV4dC5kb25lXG4gICAgICAgICAgfTtcblxuICAgICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgIC8vIERpc3BhdGNoIHRoZSBleGNlcHRpb24gYnkgbG9vcGluZyBiYWNrIGFyb3VuZCB0byB0aGVcbiAgICAgICAgICAvLyBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKSBjYWxsIGFib3ZlLlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvLyBDYWxsIGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXShjb250ZXh0LmFyZykgYW5kIGhhbmRsZSB0aGVcbiAgLy8gcmVzdWx0LCBlaXRoZXIgYnkgcmV0dXJuaW5nIGEgeyB2YWx1ZSwgZG9uZSB9IHJlc3VsdCBmcm9tIHRoZVxuICAvLyBkZWxlZ2F0ZSBpdGVyYXRvciwgb3IgYnkgbW9kaWZ5aW5nIGNvbnRleHQubWV0aG9kIGFuZCBjb250ZXh0LmFyZyxcbiAgLy8gc2V0dGluZyBjb250ZXh0LmRlbGVnYXRlIHRvIG51bGwsIGFuZCByZXR1cm5pbmcgdGhlIENvbnRpbnVlU2VudGluZWwuXG4gIGZ1bmN0aW9uIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIgbWV0aG9kID0gZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdO1xuICAgIGlmIChtZXRob2QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gQSAudGhyb3cgb3IgLnJldHVybiB3aGVuIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgbm8gLnRocm93XG4gICAgICAvLyBtZXRob2QgYWx3YXlzIHRlcm1pbmF0ZXMgdGhlIHlpZWxkKiBsb29wLlxuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIC8vIE5vdGU6IFtcInJldHVyblwiXSBtdXN0IGJlIHVzZWQgZm9yIEVTMyBwYXJzaW5nIGNvbXBhdGliaWxpdHkuXG4gICAgICAgIGlmIChkZWxlZ2F0ZS5pdGVyYXRvcltcInJldHVyblwiXSkge1xuICAgICAgICAgIC8vIElmIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgYSByZXR1cm4gbWV0aG9kLCBnaXZlIGl0IGFcbiAgICAgICAgICAvLyBjaGFuY2UgdG8gY2xlYW4gdXAuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuXG4gICAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIC8vIElmIG1heWJlSW52b2tlRGVsZWdhdGUoY29udGV4dCkgY2hhbmdlZCBjb250ZXh0Lm1ldGhvZCBmcm9tXG4gICAgICAgICAgICAvLyBcInJldHVyblwiIHRvIFwidGhyb3dcIiwgbGV0IHRoYXQgb3ZlcnJpZGUgdGhlIFR5cGVFcnJvciBiZWxvdy5cbiAgICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgXCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kXCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2gobWV0aG9kLCBkZWxlZ2F0ZS5pdGVyYXRvciwgY29udGV4dC5hcmcpO1xuXG4gICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgaW5mbyA9IHJlY29yZC5hcmc7XG5cbiAgICBpZiAoISBpbmZvKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0XCIpO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICBpZiAoaW5mby5kb25lKSB7XG4gICAgICAvLyBBc3NpZ24gdGhlIHJlc3VsdCBvZiB0aGUgZmluaXNoZWQgZGVsZWdhdGUgdG8gdGhlIHRlbXBvcmFyeVxuICAgICAgLy8gdmFyaWFibGUgc3BlY2lmaWVkIGJ5IGRlbGVnYXRlLnJlc3VsdE5hbWUgKHNlZSBkZWxlZ2F0ZVlpZWxkKS5cbiAgICAgIGNvbnRleHRbZGVsZWdhdGUucmVzdWx0TmFtZV0gPSBpbmZvLnZhbHVlO1xuXG4gICAgICAvLyBSZXN1bWUgZXhlY3V0aW9uIGF0IHRoZSBkZXNpcmVkIGxvY2F0aW9uIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0Lm5leHQgPSBkZWxlZ2F0ZS5uZXh0TG9jO1xuXG4gICAgICAvLyBJZiBjb250ZXh0Lm1ldGhvZCB3YXMgXCJ0aHJvd1wiIGJ1dCB0aGUgZGVsZWdhdGUgaGFuZGxlZCB0aGVcbiAgICAgIC8vIGV4Y2VwdGlvbiwgbGV0IHRoZSBvdXRlciBnZW5lcmF0b3IgcHJvY2VlZCBub3JtYWxseS4gSWZcbiAgICAgIC8vIGNvbnRleHQubWV0aG9kIHdhcyBcIm5leHRcIiwgZm9yZ2V0IGNvbnRleHQuYXJnIHNpbmNlIGl0IGhhcyBiZWVuXG4gICAgICAvLyBcImNvbnN1bWVkXCIgYnkgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yLiBJZiBjb250ZXh0Lm1ldGhvZCB3YXNcbiAgICAgIC8vIFwicmV0dXJuXCIsIGFsbG93IHRoZSBvcmlnaW5hbCAucmV0dXJuIGNhbGwgdG8gY29udGludWUgaW4gdGhlXG4gICAgICAvLyBvdXRlciBnZW5lcmF0b3IuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgIT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmUteWllbGQgdGhlIHJlc3VsdCByZXR1cm5lZCBieSB0aGUgZGVsZWdhdGUgbWV0aG9kLlxuICAgICAgcmV0dXJuIGluZm87XG4gICAgfVxuXG4gICAgLy8gVGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGlzIGZpbmlzaGVkLCBzbyBmb3JnZXQgaXQgYW5kIGNvbnRpbnVlIHdpdGhcbiAgICAvLyB0aGUgb3V0ZXIgZ2VuZXJhdG9yLlxuICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICB9XG5cbiAgLy8gRGVmaW5lIEdlbmVyYXRvci5wcm90b3R5cGUue25leHQsdGhyb3cscmV0dXJufSBpbiB0ZXJtcyBvZiB0aGVcbiAgLy8gdW5pZmllZCAuX2ludm9rZSBoZWxwZXIgbWV0aG9kLlxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoR3ApO1xuXG4gIEdwW3RvU3RyaW5nVGFnU3ltYm9sXSA9IFwiR2VuZXJhdG9yXCI7XG5cbiAgLy8gQSBHZW5lcmF0b3Igc2hvdWxkIGFsd2F5cyByZXR1cm4gaXRzZWxmIGFzIHRoZSBpdGVyYXRvciBvYmplY3Qgd2hlbiB0aGVcbiAgLy8gQEBpdGVyYXRvciBmdW5jdGlvbiBpcyBjYWxsZWQgb24gaXQuIFNvbWUgYnJvd3NlcnMnIGltcGxlbWVudGF0aW9ucyBvZiB0aGVcbiAgLy8gaXRlcmF0b3IgcHJvdG90eXBlIGNoYWluIGluY29ycmVjdGx5IGltcGxlbWVudCB0aGlzLCBjYXVzaW5nIHRoZSBHZW5lcmF0b3JcbiAgLy8gb2JqZWN0IHRvIG5vdCBiZSByZXR1cm5lZCBmcm9tIHRoaXMgY2FsbC4gVGhpcyBlbnN1cmVzIHRoYXQgZG9lc24ndCBoYXBwZW4uXG4gIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVnZW5lcmF0b3IvaXNzdWVzLzI3NCBmb3IgbW9yZSBkZXRhaWxzLlxuICBHcFtpdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBHcC50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIltvYmplY3QgR2VuZXJhdG9yXVwiO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHB1c2hUcnlFbnRyeShsb2NzKSB7XG4gICAgdmFyIGVudHJ5ID0geyB0cnlMb2M6IGxvY3NbMF0gfTtcblxuICAgIGlmICgxIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmNhdGNoTG9jID0gbG9jc1sxXTtcbiAgICB9XG5cbiAgICBpZiAoMiBpbiBsb2NzKSB7XG4gICAgICBlbnRyeS5maW5hbGx5TG9jID0gbG9jc1syXTtcbiAgICAgIGVudHJ5LmFmdGVyTG9jID0gbG9jc1szXTtcbiAgICB9XG5cbiAgICB0aGlzLnRyeUVudHJpZXMucHVzaChlbnRyeSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXNldFRyeUVudHJ5KGVudHJ5KSB7XG4gICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb24gfHwge307XG4gICAgcmVjb3JkLnR5cGUgPSBcIm5vcm1hbFwiO1xuICAgIGRlbGV0ZSByZWNvcmQuYXJnO1xuICAgIGVudHJ5LmNvbXBsZXRpb24gPSByZWNvcmQ7XG4gIH1cblxuICBmdW5jdGlvbiBDb250ZXh0KHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gVGhlIHJvb3QgZW50cnkgb2JqZWN0IChlZmZlY3RpdmVseSBhIHRyeSBzdGF0ZW1lbnQgd2l0aG91dCBhIGNhdGNoXG4gICAgLy8gb3IgYSBmaW5hbGx5IGJsb2NrKSBnaXZlcyB1cyBhIHBsYWNlIHRvIHN0b3JlIHZhbHVlcyB0aHJvd24gZnJvbVxuICAgIC8vIGxvY2F0aW9ucyB3aGVyZSB0aGVyZSBpcyBubyBlbmNsb3NpbmcgdHJ5IHN0YXRlbWVudC5cbiAgICB0aGlzLnRyeUVudHJpZXMgPSBbeyB0cnlMb2M6IFwicm9vdFwiIH1dO1xuICAgIHRyeUxvY3NMaXN0LmZvckVhY2gocHVzaFRyeUVudHJ5LCB0aGlzKTtcbiAgICB0aGlzLnJlc2V0KHRydWUpO1xuICB9XG5cbiAgZXhwb3J0cy5rZXlzID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICB9XG4gICAga2V5cy5yZXZlcnNlKCk7XG5cbiAgICAvLyBSYXRoZXIgdGhhbiByZXR1cm5pbmcgYW4gb2JqZWN0IHdpdGggYSBuZXh0IG1ldGhvZCwgd2Uga2VlcFxuICAgIC8vIHRoaW5ncyBzaW1wbGUgYW5kIHJldHVybiB0aGUgbmV4dCBmdW5jdGlvbiBpdHNlbGYuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICB3aGlsZSAoa2V5cy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXMucG9wKCk7XG4gICAgICAgIGlmIChrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgbmV4dC52YWx1ZSA9IGtleTtcbiAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUbyBhdm9pZCBjcmVhdGluZyBhbiBhZGRpdGlvbmFsIG9iamVjdCwgd2UganVzdCBoYW5nIHRoZSAudmFsdWVcbiAgICAgIC8vIGFuZCAuZG9uZSBwcm9wZXJ0aWVzIG9mZiB0aGUgbmV4dCBmdW5jdGlvbiBvYmplY3QgaXRzZWxmLiBUaGlzXG4gICAgICAvLyBhbHNvIGVuc3VyZXMgdGhhdCB0aGUgbWluaWZpZXIgd2lsbCBub3QgYW5vbnltaXplIHRoZSBmdW5jdGlvbi5cbiAgICAgIG5leHQuZG9uZSA9IHRydWU7XG4gICAgICByZXR1cm4gbmV4dDtcbiAgICB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIHZhbHVlcyhpdGVyYWJsZSkge1xuICAgIGlmIChpdGVyYWJsZSkge1xuICAgICAgdmFyIGl0ZXJhdG9yTWV0aG9kID0gaXRlcmFibGVbaXRlcmF0b3JTeW1ib2xdO1xuICAgICAgaWYgKGl0ZXJhdG9yTWV0aG9kKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRvck1ldGhvZC5jYWxsKGl0ZXJhYmxlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBpdGVyYWJsZS5uZXh0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhYmxlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzTmFOKGl0ZXJhYmxlLmxlbmd0aCkpIHtcbiAgICAgICAgdmFyIGkgPSAtMSwgbmV4dCA9IGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICAgICAgd2hpbGUgKCsraSA8IGl0ZXJhYmxlLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGhhc093bi5jYWxsKGl0ZXJhYmxlLCBpKSkge1xuICAgICAgICAgICAgICBuZXh0LnZhbHVlID0gaXRlcmFibGVbaV07XG4gICAgICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBuZXh0LnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG5leHQuZG9uZSA9IHRydWU7XG5cbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gbmV4dC5uZXh0ID0gbmV4dDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gYW4gaXRlcmF0b3Igd2l0aCBubyB2YWx1ZXMuXG4gICAgcmV0dXJuIHsgbmV4dDogZG9uZVJlc3VsdCB9O1xuICB9XG4gIGV4cG9ydHMudmFsdWVzID0gdmFsdWVzO1xuXG4gIGZ1bmN0aW9uIGRvbmVSZXN1bHQoKSB7XG4gICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICB9XG5cbiAgQ29udGV4dC5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IENvbnRleHQsXG5cbiAgICByZXNldDogZnVuY3Rpb24oc2tpcFRlbXBSZXNldCkge1xuICAgICAgdGhpcy5wcmV2ID0gMDtcbiAgICAgIHRoaXMubmV4dCA9IDA7XG4gICAgICAvLyBSZXNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwnc1xuICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgIHRoaXMuc2VudCA9IHRoaXMuX3NlbnQgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSBudWxsO1xuXG4gICAgICB0aGlzLm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQ7XG5cbiAgICAgIHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKHJlc2V0VHJ5RW50cnkpO1xuXG4gICAgICBpZiAoIXNraXBUZW1wUmVzZXQpIHtcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzKSB7XG4gICAgICAgICAgLy8gTm90IHN1cmUgYWJvdXQgdGhlIG9wdGltYWwgb3JkZXIgb2YgdGhlc2UgY29uZGl0aW9uczpcbiAgICAgICAgICBpZiAobmFtZS5jaGFyQXQoMCkgPT09IFwidFwiICYmXG4gICAgICAgICAgICAgIGhhc093bi5jYWxsKHRoaXMsIG5hbWUpICYmXG4gICAgICAgICAgICAgICFpc05hTigrbmFtZS5zbGljZSgxKSkpIHtcbiAgICAgICAgICAgIHRoaXNbbmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIHN0b3A6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcblxuICAgICAgdmFyIHJvb3RFbnRyeSA9IHRoaXMudHJ5RW50cmllc1swXTtcbiAgICAgIHZhciByb290UmVjb3JkID0gcm9vdEVudHJ5LmNvbXBsZXRpb247XG4gICAgICBpZiAocm9vdFJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgcm9vdFJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnJ2YWw7XG4gICAgfSxcblxuICAgIGRpc3BhdGNoRXhjZXB0aW9uOiBmdW5jdGlvbihleGNlcHRpb24pIHtcbiAgICAgIGlmICh0aGlzLmRvbmUpIHtcbiAgICAgICAgdGhyb3cgZXhjZXB0aW9uO1xuICAgICAgfVxuXG4gICAgICB2YXIgY29udGV4dCA9IHRoaXM7XG4gICAgICBmdW5jdGlvbiBoYW5kbGUobG9jLCBjYXVnaHQpIHtcbiAgICAgICAgcmVjb3JkLnR5cGUgPSBcInRocm93XCI7XG4gICAgICAgIHJlY29yZC5hcmcgPSBleGNlcHRpb247XG4gICAgICAgIGNvbnRleHQubmV4dCA9IGxvYztcblxuICAgICAgICBpZiAoY2F1Z2h0KSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGRpc3BhdGNoZWQgZXhjZXB0aW9uIHdhcyBjYXVnaHQgYnkgYSBjYXRjaCBibG9jayxcbiAgICAgICAgICAvLyB0aGVuIGxldCB0aGF0IGNhdGNoIGJsb2NrIGhhbmRsZSB0aGUgZXhjZXB0aW9uIG5vcm1hbGx5LlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gISEgY2F1Z2h0O1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gXCJyb290XCIpIHtcbiAgICAgICAgICAvLyBFeGNlcHRpb24gdGhyb3duIG91dHNpZGUgb2YgYW55IHRyeSBibG9jayB0aGF0IGNvdWxkIGhhbmRsZVxuICAgICAgICAgIC8vIGl0LCBzbyBzZXQgdGhlIGNvbXBsZXRpb24gdmFsdWUgb2YgdGhlIGVudGlyZSBmdW5jdGlvbiB0b1xuICAgICAgICAgIC8vIHRocm93IHRoZSBleGNlcHRpb24uXG4gICAgICAgICAgcmV0dXJuIGhhbmRsZShcImVuZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2KSB7XG4gICAgICAgICAgdmFyIGhhc0NhdGNoID0gaGFzT3duLmNhbGwoZW50cnksIFwiY2F0Y2hMb2NcIik7XG4gICAgICAgICAgdmFyIGhhc0ZpbmFsbHkgPSBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpO1xuXG4gICAgICAgICAgaWYgKGhhc0NhdGNoICYmIGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNDYXRjaCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNGaW5hbGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBhYnJ1cHQ6IGZ1bmN0aW9uKHR5cGUsIGFyZykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2ICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpICYmXG4gICAgICAgICAgICB0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgdmFyIGZpbmFsbHlFbnRyeSA9IGVudHJ5O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkgJiZcbiAgICAgICAgICAodHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgIHR5cGUgPT09IFwiY29udGludWVcIikgJiZcbiAgICAgICAgICBmaW5hbGx5RW50cnkudHJ5TG9jIDw9IGFyZyAmJlxuICAgICAgICAgIGFyZyA8PSBmaW5hbGx5RW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAvLyBJZ25vcmUgdGhlIGZpbmFsbHkgZW50cnkgaWYgY29udHJvbCBpcyBub3QganVtcGluZyB0byBhXG4gICAgICAgIC8vIGxvY2F0aW9uIG91dHNpZGUgdGhlIHRyeS9jYXRjaCBibG9jay5cbiAgICAgICAgZmluYWxseUVudHJ5ID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdmFyIHJlY29yZCA9IGZpbmFsbHlFbnRyeSA/IGZpbmFsbHlFbnRyeS5jb21wbGV0aW9uIDoge307XG4gICAgICByZWNvcmQudHlwZSA9IHR5cGU7XG4gICAgICByZWNvcmQuYXJnID0gYXJnO1xuXG4gICAgICBpZiAoZmluYWxseUVudHJ5KSB7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgIHRoaXMubmV4dCA9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jO1xuICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGUocmVjb3JkKTtcbiAgICB9LFxuXG4gICAgY29tcGxldGU6IGZ1bmN0aW9uKHJlY29yZCwgYWZ0ZXJMb2MpIHtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgcmVjb3JkLnR5cGUgPT09IFwiY29udGludWVcIikge1xuICAgICAgICB0aGlzLm5leHQgPSByZWNvcmQuYXJnO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICB0aGlzLnJ2YWwgPSB0aGlzLmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJyZXR1cm5cIjtcbiAgICAgICAgdGhpcy5uZXh0ID0gXCJlbmRcIjtcbiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIgJiYgYWZ0ZXJMb2MpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gYWZ0ZXJMb2M7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH0sXG5cbiAgICBmaW5pc2g6IGZ1bmN0aW9uKGZpbmFsbHlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkuZmluYWxseUxvYyA9PT0gZmluYWxseUxvYykge1xuICAgICAgICAgIHRoaXMuY29tcGxldGUoZW50cnkuY29tcGxldGlvbiwgZW50cnkuYWZ0ZXJMb2MpO1xuICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIFwiY2F0Y2hcIjogZnVuY3Rpb24odHJ5TG9jKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gdHJ5TG9jKSB7XG4gICAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG4gICAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIHZhciB0aHJvd24gPSByZWNvcmQuYXJnO1xuICAgICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0aHJvd247XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGhlIGNvbnRleHQuY2F0Y2ggbWV0aG9kIG11c3Qgb25seSBiZSBjYWxsZWQgd2l0aCBhIGxvY2F0aW9uXG4gICAgICAvLyBhcmd1bWVudCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEga25vd24gY2F0Y2ggYmxvY2suXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHRcIik7XG4gICAgfSxcblxuICAgIGRlbGVnYXRlWWllbGQ6IGZ1bmN0aW9uKGl0ZXJhYmxlLCByZXN1bHROYW1lLCBuZXh0TG9jKSB7XG4gICAgICB0aGlzLmRlbGVnYXRlID0ge1xuICAgICAgICBpdGVyYXRvcjogdmFsdWVzKGl0ZXJhYmxlKSxcbiAgICAgICAgcmVzdWx0TmFtZTogcmVzdWx0TmFtZSxcbiAgICAgICAgbmV4dExvYzogbmV4dExvY1xuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMubWV0aG9kID09PSBcIm5leHRcIikge1xuICAgICAgICAvLyBEZWxpYmVyYXRlbHkgZm9yZ2V0IHRoZSBsYXN0IHNlbnQgdmFsdWUgc28gdGhhdCB3ZSBkb24ndFxuICAgICAgICAvLyBhY2NpZGVudGFsbHkgcGFzcyBpdCBvbiB0byB0aGUgZGVsZWdhdGUuXG4gICAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG4gIH07XG5cbiAgLy8gUmVnYXJkbGVzcyBvZiB3aGV0aGVyIHRoaXMgc2NyaXB0IGlzIGV4ZWN1dGluZyBhcyBhIENvbW1vbkpTIG1vZHVsZVxuICAvLyBvciBub3QsIHJldHVybiB0aGUgcnVudGltZSBvYmplY3Qgc28gdGhhdCB3ZSBjYW4gZGVjbGFyZSB0aGUgdmFyaWFibGVcbiAgLy8gcmVnZW5lcmF0b3JSdW50aW1lIGluIHRoZSBvdXRlciBzY29wZSwgd2hpY2ggYWxsb3dzIHRoaXMgbW9kdWxlIHRvIGJlXG4gIC8vIGluamVjdGVkIGVhc2lseSBieSBgYmluL3JlZ2VuZXJhdG9yIC0taW5jbHVkZS1ydW50aW1lIHNjcmlwdC5qc2AuXG4gIHJldHVybiBleHBvcnRzO1xuXG59KFxuICAvLyBJZiB0aGlzIHNjcmlwdCBpcyBleGVjdXRpbmcgYXMgYSBDb21tb25KUyBtb2R1bGUsIHVzZSBtb2R1bGUuZXhwb3J0c1xuICAvLyBhcyB0aGUgcmVnZW5lcmF0b3JSdW50aW1lIG5hbWVzcGFjZS4gT3RoZXJ3aXNlIGNyZWF0ZSBhIG5ldyBlbXB0eVxuICAvLyBvYmplY3QuIEVpdGhlciB3YXksIHRoZSByZXN1bHRpbmcgb2JqZWN0IHdpbGwgYmUgdXNlZCB0byBpbml0aWFsaXplXG4gIC8vIHRoZSByZWdlbmVyYXRvclJ1bnRpbWUgdmFyaWFibGUgYXQgdGhlIHRvcCBvZiB0aGlzIGZpbGUuXG4gIHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgPyBtb2R1bGUuZXhwb3J0cyA6IHt9XG4pKTtcblxudHJ5IHtcbiAgcmVnZW5lcmF0b3JSdW50aW1lID0gcnVudGltZTtcbn0gY2F0Y2ggKGFjY2lkZW50YWxTdHJpY3RNb2RlKSB7XG4gIC8vIFRoaXMgbW9kdWxlIHNob3VsZCBub3QgYmUgcnVubmluZyBpbiBzdHJpY3QgbW9kZSwgc28gdGhlIGFib3ZlXG4gIC8vIGFzc2lnbm1lbnQgc2hvdWxkIGFsd2F5cyB3b3JrIHVubGVzcyBzb21ldGhpbmcgaXMgbWlzY29uZmlndXJlZC4gSnVzdFxuICAvLyBpbiBjYXNlIHJ1bnRpbWUuanMgYWNjaWRlbnRhbGx5IHJ1bnMgaW4gc3RyaWN0IG1vZGUsIHdlIGNhbiBlc2NhcGVcbiAgLy8gc3RyaWN0IG1vZGUgdXNpbmcgYSBnbG9iYWwgRnVuY3Rpb24gY2FsbC4gVGhpcyBjb3VsZCBjb25jZWl2YWJseSBmYWlsXG4gIC8vIGlmIGEgQ29udGVudCBTZWN1cml0eSBQb2xpY3kgZm9yYmlkcyB1c2luZyBGdW5jdGlvbiwgYnV0IGluIHRoYXQgY2FzZVxuICAvLyB0aGUgcHJvcGVyIHNvbHV0aW9uIGlzIHRvIGZpeCB0aGUgYWNjaWRlbnRhbCBzdHJpY3QgbW9kZSBwcm9ibGVtLiBJZlxuICAvLyB5b3UndmUgbWlzY29uZmlndXJlZCB5b3VyIGJ1bmRsZXIgdG8gZm9yY2Ugc3RyaWN0IG1vZGUgYW5kIGFwcGxpZWQgYVxuICAvLyBDU1AgdG8gZm9yYmlkIEZ1bmN0aW9uLCBhbmQgeW91J3JlIG5vdCB3aWxsaW5nIHRvIGZpeCBlaXRoZXIgb2YgdGhvc2VcbiAgLy8gcHJvYmxlbXMsIHBsZWFzZSBkZXRhaWwgeW91ciB1bmlxdWUgcHJlZGljYW1lbnQgaW4gYSBHaXRIdWIgaXNzdWUuXG4gIEZ1bmN0aW9uKFwiclwiLCBcInJlZ2VuZXJhdG9yUnVudGltZSA9IHJcIikocnVudGltZSk7XG59XG4iLCIvKiBnbG9iYWwgZGVmaW5lICovXG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShbXSwgZmFjdG9yeSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gIH0gZWxzZSB7XG4gICAgcm9vdC5jb21wYXJlVmVyc2lvbnMgPSBmYWN0b3J5KCk7XG4gIH1cbn0odGhpcywgZnVuY3Rpb24gKCkge1xuXG4gIHZhciBzZW12ZXIgPSAvXnY/KD86XFxkKykoXFwuKD86W3gqXXxcXGQrKShcXC4oPzpbeCpdfFxcZCspKFxcLig/Olt4Kl18XFxkKykpPyg/Oi1bXFxkYS16XFwtXSsoPzpcXC5bXFxkYS16XFwtXSspKik/KD86XFwrW1xcZGEtelxcLV0rKD86XFwuW1xcZGEtelxcLV0rKSopPyk/KT8kL2k7XG5cbiAgZnVuY3Rpb24gaW5kZXhPckVuZChzdHIsIHEpIHtcbiAgICByZXR1cm4gc3RyLmluZGV4T2YocSkgPT09IC0xID8gc3RyLmxlbmd0aCA6IHN0ci5pbmRleE9mKHEpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3BsaXQodikge1xuICAgIHZhciBjID0gdi5yZXBsYWNlKC9edi8sICcnKS5yZXBsYWNlKC9cXCsuKiQvLCAnJyk7XG4gICAgdmFyIHBhdGNoSW5kZXggPSBpbmRleE9yRW5kKGMsICctJyk7XG4gICAgdmFyIGFyciA9IGMuc3Vic3RyaW5nKDAsIHBhdGNoSW5kZXgpLnNwbGl0KCcuJyk7XG4gICAgYXJyLnB1c2goYy5zdWJzdHJpbmcocGF0Y2hJbmRleCArIDEpKTtcbiAgICByZXR1cm4gYXJyO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJ5UGFyc2Uodikge1xuICAgIHJldHVybiBpc05hTihOdW1iZXIodikpID8gdiA6IE51bWJlcih2KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHZlcnNpb24pIHtcbiAgICBpZiAodHlwZW9mIHZlcnNpb24gIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGFyZ3VtZW50IGV4cGVjdGVkIHN0cmluZycpO1xuICAgIH1cbiAgICBpZiAoIXNlbXZlci50ZXN0KHZlcnNpb24pKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXJndW1lbnQgbm90IHZhbGlkIHNlbXZlciAoXFwnJyt2ZXJzaW9uKydcXCcgcmVjZWl2ZWQpJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGNvbXBhcmVWZXJzaW9ucyh2MSwgdjIpIHtcbiAgICBbdjEsIHYyXS5mb3JFYWNoKHZhbGlkYXRlKTtcblxuICAgIHZhciBzMSA9IHNwbGl0KHYxKTtcbiAgICB2YXIgczIgPSBzcGxpdCh2Mik7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IE1hdGgubWF4KHMxLmxlbmd0aCAtIDEsIHMyLmxlbmd0aCAtIDEpOyBpKyspIHtcbiAgICAgIHZhciBuMSA9IHBhcnNlSW50KHMxW2ldIHx8IDAsIDEwKTtcbiAgICAgIHZhciBuMiA9IHBhcnNlSW50KHMyW2ldIHx8IDAsIDEwKTtcblxuICAgICAgaWYgKG4xID4gbjIpIHJldHVybiAxO1xuICAgICAgaWYgKG4yID4gbjEpIHJldHVybiAtMTtcbiAgICB9XG5cbiAgICB2YXIgc3AxID0gczFbczEubGVuZ3RoIC0gMV07XG4gICAgdmFyIHNwMiA9IHMyW3MyLmxlbmd0aCAtIDFdO1xuXG4gICAgaWYgKHNwMSAmJiBzcDIpIHtcbiAgICAgIHZhciBwMSA9IHNwMS5zcGxpdCgnLicpLm1hcCh0cnlQYXJzZSk7XG4gICAgICB2YXIgcDIgPSBzcDIuc3BsaXQoJy4nKS5tYXAodHJ5UGFyc2UpO1xuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgTWF0aC5tYXgocDEubGVuZ3RoLCBwMi5sZW5ndGgpOyBpKyspIHtcbiAgICAgICAgaWYgKHAxW2ldID09PSB1bmRlZmluZWQgfHwgdHlwZW9mIHAyW2ldID09PSAnc3RyaW5nJyAmJiB0eXBlb2YgcDFbaV0gPT09ICdudW1iZXInKSByZXR1cm4gLTE7XG4gICAgICAgIGlmIChwMltpXSA9PT0gdW5kZWZpbmVkIHx8IHR5cGVvZiBwMVtpXSA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIHAyW2ldID09PSAnbnVtYmVyJykgcmV0dXJuIDE7XG5cbiAgICAgICAgaWYgKHAxW2ldID4gcDJbaV0pIHJldHVybiAxO1xuICAgICAgICBpZiAocDJbaV0gPiBwMVtpXSkgcmV0dXJuIC0xO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc3AxIHx8IHNwMikge1xuICAgICAgcmV0dXJuIHNwMSA/IC0xIDogMTtcbiAgICB9XG5cbiAgICByZXR1cm4gMDtcbiAgfTtcblxufSkpO1xuIiwiXG4vKipcbiAqIEV4cG9zZSBgRW1pdHRlcmAuXG4gKi9cblxuaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gRW1pdHRlcjtcbn1cblxuLyoqXG4gKiBJbml0aWFsaXplIGEgbmV3IGBFbWl0dGVyYC5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIEVtaXR0ZXIob2JqKSB7XG4gIGlmIChvYmopIHJldHVybiBtaXhpbihvYmopO1xufTtcblxuLyoqXG4gKiBNaXhpbiB0aGUgZW1pdHRlciBwcm9wZXJ0aWVzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIG1peGluKG9iaikge1xuICBmb3IgKHZhciBrZXkgaW4gRW1pdHRlci5wcm90b3R5cGUpIHtcbiAgICBvYmpba2V5XSA9IEVtaXR0ZXIucHJvdG90eXBlW2tleV07XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cblxuLyoqXG4gKiBMaXN0ZW4gb24gdGhlIGdpdmVuIGBldmVudGAgd2l0aCBgZm5gLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEByZXR1cm4ge0VtaXR0ZXJ9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkVtaXR0ZXIucHJvdG90eXBlLm9uID1cbkVtaXR0ZXIucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCwgZm4pe1xuICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XG4gICh0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdID0gdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XSB8fCBbXSlcbiAgICAucHVzaChmbik7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBBZGRzIGFuIGBldmVudGAgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGludm9rZWQgYSBzaW5nbGVcbiAqIHRpbWUgdGhlbiBhdXRvbWF0aWNhbGx5IHJlbW92ZWQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHJldHVybiB7RW1pdHRlcn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuRW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7XG4gIGZ1bmN0aW9uIG9uKCkge1xuICAgIHRoaXMub2ZmKGV2ZW50LCBvbik7XG4gICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIG9uLmZuID0gZm47XG4gIHRoaXMub24oZXZlbnQsIG9uKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFJlbW92ZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgZm9yIGBldmVudGAgb3IgYWxsXG4gKiByZWdpc3RlcmVkIGNhbGxiYWNrcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcmV0dXJuIHtFbWl0dGVyfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5FbWl0dGVyLnByb3RvdHlwZS5vZmYgPVxuRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPVxuRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID1cbkVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCwgZm4pe1xuICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XG5cbiAgLy8gYWxsXG4gIGlmICgwID09IGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICB0aGlzLl9jYWxsYmFja3MgPSB7fTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIHNwZWNpZmljIGV2ZW50XG4gIHZhciBjYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdO1xuICBpZiAoIWNhbGxiYWNrcykgcmV0dXJuIHRoaXM7XG5cbiAgLy8gcmVtb3ZlIGFsbCBoYW5kbGVyc1xuICBpZiAoMSA9PSBhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyByZW1vdmUgc3BlY2lmaWMgaGFuZGxlclxuICB2YXIgY2I7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgY2IgPSBjYWxsYmFja3NbaV07XG4gICAgaWYgKGNiID09PSBmbiB8fCBjYi5mbiA9PT0gZm4pIHtcbiAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaSwgMSk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvLyBSZW1vdmUgZXZlbnQgc3BlY2lmaWMgYXJyYXlzIGZvciBldmVudCB0eXBlcyB0aGF0IG5vXG4gIC8vIG9uZSBpcyBzdWJzY3JpYmVkIGZvciB0byBhdm9pZCBtZW1vcnkgbGVhay5cbiAgaWYgKGNhbGxiYWNrcy5sZW5ndGggPT09IDApIHtcbiAgICBkZWxldGUgdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBFbWl0IGBldmVudGAgd2l0aCB0aGUgZ2l2ZW4gYXJncy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7TWl4ZWR9IC4uLlxuICogQHJldHVybiB7RW1pdHRlcn1cbiAqL1xuXG5FbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24oZXZlbnQpe1xuICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XG4gIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpXG4gICAgLCBjYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdO1xuXG4gIGlmIChjYWxsYmFja3MpIHtcbiAgICBjYWxsYmFja3MgPSBjYWxsYmFja3Muc2xpY2UoMCk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNhbGxiYWNrcy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgICAgY2FsbGJhY2tzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gYXJyYXkgb2YgY2FsbGJhY2tzIGZvciBgZXZlbnRgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHJldHVybiB7QXJyYXl9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xuICByZXR1cm4gdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XSB8fCBbXTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhpcyBlbWl0dGVyIGhhcyBgZXZlbnRgIGhhbmRsZXJzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuRW1pdHRlci5wcm90b3R5cGUuaGFzTGlzdGVuZXJzID0gZnVuY3Rpb24oZXZlbnQpe1xuICByZXR1cm4gISEgdGhpcy5saXN0ZW5lcnMoZXZlbnQpLmxlbmd0aDtcbn07XG4iLCJyZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3InKTtcbnJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2LmFycmF5LmZyb20nKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9fY29yZScpLkFycmF5LmZyb207XG4iLCJyZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNy5hcnJheS5pbmNsdWRlcycpO1xubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLi8uLi9tb2R1bGVzL19jb3JlJykuQXJyYXkuaW5jbHVkZXM7XG4iLCJyZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuYXNzaWduJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uLy4uL21vZHVsZXMvX2NvcmUnKS5PYmplY3QuYXNzaWduO1xuIiwicmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lczYuc3RyaW5nLmluY2x1ZGVzJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uLy4uL21vZHVsZXMvX2NvcmUnKS5TdHJpbmcuaW5jbHVkZXM7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkge1xuICBpZiAodHlwZW9mIGl0ICE9ICdmdW5jdGlvbicpIHRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGEgZnVuY3Rpb24hJyk7XG4gIHJldHVybiBpdDtcbn07XG4iLCIvLyAyMi4xLjMuMzEgQXJyYXkucHJvdG90eXBlW0BAdW5zY29wYWJsZXNdXG52YXIgVU5TQ09QQUJMRVMgPSByZXF1aXJlKCcuL193a3MnKSgndW5zY29wYWJsZXMnKTtcbnZhciBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlO1xuaWYgKEFycmF5UHJvdG9bVU5TQ09QQUJMRVNdID09IHVuZGVmaW5lZCkgcmVxdWlyZSgnLi9faGlkZScpKEFycmF5UHJvdG8sIFVOU0NPUEFCTEVTLCB7fSk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgQXJyYXlQcm90b1tVTlNDT1BBQkxFU11ba2V5XSA9IHRydWU7XG59O1xuIiwidmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0Jyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkge1xuICBpZiAoIWlzT2JqZWN0KGl0KSkgdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYW4gb2JqZWN0IScpO1xuICByZXR1cm4gaXQ7XG59O1xuIiwiLy8gZmFsc2UgLT4gQXJyYXkjaW5kZXhPZlxuLy8gdHJ1ZSAgLT4gQXJyYXkjaW5jbHVkZXNcbnZhciB0b0lPYmplY3QgPSByZXF1aXJlKCcuL190by1pb2JqZWN0Jyk7XG52YXIgdG9MZW5ndGggPSByZXF1aXJlKCcuL190by1sZW5ndGgnKTtcbnZhciB0b0Fic29sdXRlSW5kZXggPSByZXF1aXJlKCcuL190by1hYnNvbHV0ZS1pbmRleCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoSVNfSU5DTFVERVMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgkdGhpcywgZWwsIGZyb21JbmRleCkge1xuICAgIHZhciBPID0gdG9JT2JqZWN0KCR0aGlzKTtcbiAgICB2YXIgbGVuZ3RoID0gdG9MZW5ndGgoTy5sZW5ndGgpO1xuICAgIHZhciBpbmRleCA9IHRvQWJzb2x1dGVJbmRleChmcm9tSW5kZXgsIGxlbmd0aCk7XG4gICAgdmFyIHZhbHVlO1xuICAgIC8vIEFycmF5I2luY2x1ZGVzIHVzZXMgU2FtZVZhbHVlWmVybyBlcXVhbGl0eSBhbGdvcml0aG1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlXG4gICAgaWYgKElTX0lOQ0xVREVTICYmIGVsICE9IGVsKSB3aGlsZSAobGVuZ3RoID4gaW5kZXgpIHtcbiAgICAgIHZhbHVlID0gT1tpbmRleCsrXTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmVcbiAgICAgIGlmICh2YWx1ZSAhPSB2YWx1ZSkgcmV0dXJuIHRydWU7XG4gICAgLy8gQXJyYXkjaW5kZXhPZiBpZ25vcmVzIGhvbGVzLCBBcnJheSNpbmNsdWRlcyAtIG5vdFxuICAgIH0gZWxzZSBmb3IgKDtsZW5ndGggPiBpbmRleDsgaW5kZXgrKykgaWYgKElTX0lOQ0xVREVTIHx8IGluZGV4IGluIE8pIHtcbiAgICAgIGlmIChPW2luZGV4XSA9PT0gZWwpIHJldHVybiBJU19JTkNMVURFUyB8fCBpbmRleCB8fCAwO1xuICAgIH0gcmV0dXJuICFJU19JTkNMVURFUyAmJiAtMTtcbiAgfTtcbn07XG4iLCIvLyBnZXR0aW5nIHRhZyBmcm9tIDE5LjEuMy42IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcoKVxudmFyIGNvZiA9IHJlcXVpcmUoJy4vX2NvZicpO1xudmFyIFRBRyA9IHJlcXVpcmUoJy4vX3drcycpKCd0b1N0cmluZ1RhZycpO1xuLy8gRVMzIHdyb25nIGhlcmVcbnZhciBBUkcgPSBjb2YoZnVuY3Rpb24gKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpID09ICdBcmd1bWVudHMnO1xuXG4vLyBmYWxsYmFjayBmb3IgSUUxMSBTY3JpcHQgQWNjZXNzIERlbmllZCBlcnJvclxudmFyIHRyeUdldCA9IGZ1bmN0aW9uIChpdCwga2V5KSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGl0W2tleV07XG4gIH0gY2F0Y2ggKGUpIHsgLyogZW1wdHkgKi8gfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgdmFyIE8sIFQsIEI7XG4gIHJldHVybiBpdCA9PT0gdW5kZWZpbmVkID8gJ1VuZGVmaW5lZCcgOiBpdCA9PT0gbnVsbCA/ICdOdWxsJ1xuICAgIC8vIEBAdG9TdHJpbmdUYWcgY2FzZVxuICAgIDogdHlwZW9mIChUID0gdHJ5R2V0KE8gPSBPYmplY3QoaXQpLCBUQUcpKSA9PSAnc3RyaW5nJyA/IFRcbiAgICAvLyBidWlsdGluVGFnIGNhc2VcbiAgICA6IEFSRyA/IGNvZihPKVxuICAgIC8vIEVTMyBhcmd1bWVudHMgZmFsbGJhY2tcbiAgICA6IChCID0gY29mKE8pKSA9PSAnT2JqZWN0JyAmJiB0eXBlb2YgTy5jYWxsZWUgPT0gJ2Z1bmN0aW9uJyA/ICdBcmd1bWVudHMnIDogQjtcbn07XG4iLCJ2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoaXQpLnNsaWNlKDgsIC0xKTtcbn07XG4iLCJ2YXIgY29yZSA9IG1vZHVsZS5leHBvcnRzID0geyB2ZXJzaW9uOiAnMi41LjcnIH07XG5pZiAodHlwZW9mIF9fZSA9PSAnbnVtYmVyJykgX19lID0gY29yZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuIiwiJ3VzZSBzdHJpY3QnO1xudmFyICRkZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpO1xudmFyIGNyZWF0ZURlc2MgPSByZXF1aXJlKCcuL19wcm9wZXJ0eS1kZXNjJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iamVjdCwgaW5kZXgsIHZhbHVlKSB7XG4gIGlmIChpbmRleCBpbiBvYmplY3QpICRkZWZpbmVQcm9wZXJ0eS5mKG9iamVjdCwgaW5kZXgsIGNyZWF0ZURlc2MoMCwgdmFsdWUpKTtcbiAgZWxzZSBvYmplY3RbaW5kZXhdID0gdmFsdWU7XG59O1xuIiwiLy8gb3B0aW9uYWwgLyBzaW1wbGUgY29udGV4dCBiaW5kaW5nXG52YXIgYUZ1bmN0aW9uID0gcmVxdWlyZSgnLi9fYS1mdW5jdGlvbicpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZm4sIHRoYXQsIGxlbmd0aCkge1xuICBhRnVuY3Rpb24oZm4pO1xuICBpZiAodGhhdCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZm47XG4gIHN3aXRjaCAobGVuZ3RoKSB7XG4gICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24gKGEpIHtcbiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEpO1xuICAgIH07XG4gICAgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEsIGIpO1xuICAgIH07XG4gICAgY2FzZSAzOiByZXR1cm4gZnVuY3Rpb24gKGEsIGIsIGMpIHtcbiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEsIGIsIGMpO1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uICgvKiAuLi5hcmdzICovKSB7XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7XG4gIH07XG59O1xuIiwiLy8gNy4yLjEgUmVxdWlyZU9iamVjdENvZXJjaWJsZShhcmd1bWVudClcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIGlmIChpdCA9PSB1bmRlZmluZWQpIHRocm93IFR5cGVFcnJvcihcIkNhbid0IGNhbGwgbWV0aG9kIG9uICBcIiArIGl0KTtcbiAgcmV0dXJuIGl0O1xufTtcbiIsIi8vIFRoYW5rJ3MgSUU4IGZvciBoaXMgZnVubnkgZGVmaW5lUHJvcGVydHlcbm1vZHVsZS5leHBvcnRzID0gIXJlcXVpcmUoJy4vX2ZhaWxzJykoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAnYScsIHsgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiA3OyB9IH0pLmEgIT0gNztcbn0pO1xuIiwidmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0Jyk7XG52YXIgZG9jdW1lbnQgPSByZXF1aXJlKCcuL19nbG9iYWwnKS5kb2N1bWVudDtcbi8vIHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50IGlzICdvYmplY3QnIGluIG9sZCBJRVxudmFyIGlzID0gaXNPYmplY3QoZG9jdW1lbnQpICYmIGlzT2JqZWN0KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIGlzID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChpdCkgOiB7fTtcbn07XG4iLCIvLyBJRSA4LSBkb24ndCBlbnVtIGJ1ZyBrZXlzXG5tb2R1bGUuZXhwb3J0cyA9IChcbiAgJ2NvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZidcbikuc3BsaXQoJywnKTtcbiIsInZhciBnbG9iYWwgPSByZXF1aXJlKCcuL19nbG9iYWwnKTtcbnZhciBjb3JlID0gcmVxdWlyZSgnLi9fY29yZScpO1xudmFyIGhpZGUgPSByZXF1aXJlKCcuL19oaWRlJyk7XG52YXIgcmVkZWZpbmUgPSByZXF1aXJlKCcuL19yZWRlZmluZScpO1xudmFyIGN0eCA9IHJlcXVpcmUoJy4vX2N0eCcpO1xudmFyIFBST1RPVFlQRSA9ICdwcm90b3R5cGUnO1xuXG52YXIgJGV4cG9ydCA9IGZ1bmN0aW9uICh0eXBlLCBuYW1lLCBzb3VyY2UpIHtcbiAgdmFyIElTX0ZPUkNFRCA9IHR5cGUgJiAkZXhwb3J0LkY7XG4gIHZhciBJU19HTE9CQUwgPSB0eXBlICYgJGV4cG9ydC5HO1xuICB2YXIgSVNfU1RBVElDID0gdHlwZSAmICRleHBvcnQuUztcbiAgdmFyIElTX1BST1RPID0gdHlwZSAmICRleHBvcnQuUDtcbiAgdmFyIElTX0JJTkQgPSB0eXBlICYgJGV4cG9ydC5CO1xuICB2YXIgdGFyZ2V0ID0gSVNfR0xPQkFMID8gZ2xvYmFsIDogSVNfU1RBVElDID8gZ2xvYmFsW25hbWVdIHx8IChnbG9iYWxbbmFtZV0gPSB7fSkgOiAoZ2xvYmFsW25hbWVdIHx8IHt9KVtQUk9UT1RZUEVdO1xuICB2YXIgZXhwb3J0cyA9IElTX0dMT0JBTCA/IGNvcmUgOiBjb3JlW25hbWVdIHx8IChjb3JlW25hbWVdID0ge30pO1xuICB2YXIgZXhwUHJvdG8gPSBleHBvcnRzW1BST1RPVFlQRV0gfHwgKGV4cG9ydHNbUFJPVE9UWVBFXSA9IHt9KTtcbiAgdmFyIGtleSwgb3duLCBvdXQsIGV4cDtcbiAgaWYgKElTX0dMT0JBTCkgc291cmNlID0gbmFtZTtcbiAgZm9yIChrZXkgaW4gc291cmNlKSB7XG4gICAgLy8gY29udGFpbnMgaW4gbmF0aXZlXG4gICAgb3duID0gIUlTX0ZPUkNFRCAmJiB0YXJnZXQgJiYgdGFyZ2V0W2tleV0gIT09IHVuZGVmaW5lZDtcbiAgICAvLyBleHBvcnQgbmF0aXZlIG9yIHBhc3NlZFxuICAgIG91dCA9IChvd24gPyB0YXJnZXQgOiBzb3VyY2UpW2tleV07XG4gICAgLy8gYmluZCB0aW1lcnMgdG8gZ2xvYmFsIGZvciBjYWxsIGZyb20gZXhwb3J0IGNvbnRleHRcbiAgICBleHAgPSBJU19CSU5EICYmIG93biA/IGN0eChvdXQsIGdsb2JhbCkgOiBJU19QUk9UTyAmJiB0eXBlb2Ygb3V0ID09ICdmdW5jdGlvbicgPyBjdHgoRnVuY3Rpb24uY2FsbCwgb3V0KSA6IG91dDtcbiAgICAvLyBleHRlbmQgZ2xvYmFsXG4gICAgaWYgKHRhcmdldCkgcmVkZWZpbmUodGFyZ2V0LCBrZXksIG91dCwgdHlwZSAmICRleHBvcnQuVSk7XG4gICAgLy8gZXhwb3J0XG4gICAgaWYgKGV4cG9ydHNba2V5XSAhPSBvdXQpIGhpZGUoZXhwb3J0cywga2V5LCBleHApO1xuICAgIGlmIChJU19QUk9UTyAmJiBleHBQcm90b1trZXldICE9IG91dCkgZXhwUHJvdG9ba2V5XSA9IG91dDtcbiAgfVxufTtcbmdsb2JhbC5jb3JlID0gY29yZTtcbi8vIHR5cGUgYml0bWFwXG4kZXhwb3J0LkYgPSAxOyAgIC8vIGZvcmNlZFxuJGV4cG9ydC5HID0gMjsgICAvLyBnbG9iYWxcbiRleHBvcnQuUyA9IDQ7ICAgLy8gc3RhdGljXG4kZXhwb3J0LlAgPSA4OyAgIC8vIHByb3RvXG4kZXhwb3J0LkIgPSAxNjsgIC8vIGJpbmRcbiRleHBvcnQuVyA9IDMyOyAgLy8gd3JhcFxuJGV4cG9ydC5VID0gNjQ7ICAvLyBzYWZlXG4kZXhwb3J0LlIgPSAxMjg7IC8vIHJlYWwgcHJvdG8gbWV0aG9kIGZvciBgbGlicmFyeWBcbm1vZHVsZS5leHBvcnRzID0gJGV4cG9ydDtcbiIsInZhciBNQVRDSCA9IHJlcXVpcmUoJy4vX3drcycpKCdtYXRjaCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoS0VZKSB7XG4gIHZhciByZSA9IC8uLztcbiAgdHJ5IHtcbiAgICAnLy4vJ1tLRVldKHJlKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRyeSB7XG4gICAgICByZVtNQVRDSF0gPSBmYWxzZTtcbiAgICAgIHJldHVybiAhJy8uLydbS0VZXShyZSk7XG4gICAgfSBjYXRjaCAoZikgeyAvKiBlbXB0eSAqLyB9XG4gIH0gcmV0dXJuIHRydWU7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZXhlYykge1xuICB0cnkge1xuICAgIHJldHVybiAhIWV4ZWMoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xuIiwiLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzg2I2lzc3VlY29tbWVudC0xMTU3NTkwMjhcbnZhciBnbG9iYWwgPSBtb2R1bGUuZXhwb3J0cyA9IHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lk1hdGggPT0gTWF0aFxuICA/IHdpbmRvdyA6IHR5cGVvZiBzZWxmICE9ICd1bmRlZmluZWQnICYmIHNlbGYuTWF0aCA9PSBNYXRoID8gc2VsZlxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmV3LWZ1bmNcbiAgOiBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuaWYgKHR5cGVvZiBfX2cgPT0gJ251bWJlcicpIF9fZyA9IGdsb2JhbDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuIiwidmFyIGhhc093blByb3BlcnR5ID0ge30uaGFzT3duUHJvcGVydHk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCwga2V5KSB7XG4gIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGl0LCBrZXkpO1xufTtcbiIsInZhciBkUCA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpO1xudmFyIGNyZWF0ZURlc2MgPSByZXF1aXJlKCcuL19wcm9wZXJ0eS1kZXNjJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykgPyBmdW5jdGlvbiAob2JqZWN0LCBrZXksIHZhbHVlKSB7XG4gIHJldHVybiBkUC5mKG9iamVjdCwga2V5LCBjcmVhdGVEZXNjKDEsIHZhbHVlKSk7XG59IDogZnVuY3Rpb24gKG9iamVjdCwga2V5LCB2YWx1ZSkge1xuICBvYmplY3Rba2V5XSA9IHZhbHVlO1xuICByZXR1cm4gb2JqZWN0O1xufTtcbiIsInZhciBkb2N1bWVudCA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpLmRvY3VtZW50O1xubW9kdWxlLmV4cG9ydHMgPSBkb2N1bWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4iLCJtb2R1bGUuZXhwb3J0cyA9ICFyZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpICYmICFyZXF1aXJlKCcuL19mYWlscycpKGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZXF1aXJlKCcuL19kb20tY3JlYXRlJykoJ2RpdicpLCAnYScsIHsgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiA3OyB9IH0pLmEgIT0gNztcbn0pO1xuIiwiLy8gZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBhbmQgbm9uLWVudW1lcmFibGUgb2xkIFY4IHN0cmluZ3NcbnZhciBjb2YgPSByZXF1aXJlKCcuL19jb2YnKTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnNcbm1vZHVsZS5leHBvcnRzID0gT2JqZWN0KCd6JykucHJvcGVydHlJc0VudW1lcmFibGUoMCkgPyBPYmplY3QgOiBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIGNvZihpdCkgPT0gJ1N0cmluZycgPyBpdC5zcGxpdCgnJykgOiBPYmplY3QoaXQpO1xufTtcbiIsIi8vIGNoZWNrIG9uIGRlZmF1bHQgQXJyYXkgaXRlcmF0b3JcbnZhciBJdGVyYXRvcnMgPSByZXF1aXJlKCcuL19pdGVyYXRvcnMnKTtcbnZhciBJVEVSQVRPUiA9IHJlcXVpcmUoJy4vX3drcycpKCdpdGVyYXRvcicpO1xudmFyIEFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBpdCAhPT0gdW5kZWZpbmVkICYmIChJdGVyYXRvcnMuQXJyYXkgPT09IGl0IHx8IEFycmF5UHJvdG9bSVRFUkFUT1JdID09PSBpdCk7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIHR5cGVvZiBpdCA9PT0gJ29iamVjdCcgPyBpdCAhPT0gbnVsbCA6IHR5cGVvZiBpdCA9PT0gJ2Z1bmN0aW9uJztcbn07XG4iLCIvLyA3LjIuOCBJc1JlZ0V4cChhcmd1bWVudClcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpO1xudmFyIGNvZiA9IHJlcXVpcmUoJy4vX2NvZicpO1xudmFyIE1BVENIID0gcmVxdWlyZSgnLi9fd2tzJykoJ21hdGNoJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkge1xuICB2YXIgaXNSZWdFeHA7XG4gIHJldHVybiBpc09iamVjdChpdCkgJiYgKChpc1JlZ0V4cCA9IGl0W01BVENIXSkgIT09IHVuZGVmaW5lZCA/ICEhaXNSZWdFeHAgOiBjb2YoaXQpID09ICdSZWdFeHAnKTtcbn07XG4iLCIvLyBjYWxsIHNvbWV0aGluZyBvbiBpdGVyYXRvciBzdGVwIHdpdGggc2FmZSBjbG9zaW5nIG9uIGVycm9yXG52YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0ZXJhdG9yLCBmbiwgdmFsdWUsIGVudHJpZXMpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZW50cmllcyA/IGZuKGFuT2JqZWN0KHZhbHVlKVswXSwgdmFsdWVbMV0pIDogZm4odmFsdWUpO1xuICAvLyA3LjQuNiBJdGVyYXRvckNsb3NlKGl0ZXJhdG9yLCBjb21wbGV0aW9uKVxuICB9IGNhdGNoIChlKSB7XG4gICAgdmFyIHJldCA9IGl0ZXJhdG9yWydyZXR1cm4nXTtcbiAgICBpZiAocmV0ICE9PSB1bmRlZmluZWQpIGFuT2JqZWN0KHJldC5jYWxsKGl0ZXJhdG9yKSk7XG4gICAgdGhyb3cgZTtcbiAgfVxufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBjcmVhdGUgPSByZXF1aXJlKCcuL19vYmplY3QtY3JlYXRlJyk7XG52YXIgZGVzY3JpcHRvciA9IHJlcXVpcmUoJy4vX3Byb3BlcnR5LWRlc2MnKTtcbnZhciBzZXRUb1N0cmluZ1RhZyA9IHJlcXVpcmUoJy4vX3NldC10by1zdHJpbmctdGFnJyk7XG52YXIgSXRlcmF0b3JQcm90b3R5cGUgPSB7fTtcblxuLy8gMjUuMS4yLjEuMSAlSXRlcmF0b3JQcm90b3R5cGUlW0BAaXRlcmF0b3JdKClcbnJlcXVpcmUoJy4vX2hpZGUnKShJdGVyYXRvclByb3RvdHlwZSwgcmVxdWlyZSgnLi9fd2tzJykoJ2l0ZXJhdG9yJyksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgTkFNRSwgbmV4dCkge1xuICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSBjcmVhdGUoSXRlcmF0b3JQcm90b3R5cGUsIHsgbmV4dDogZGVzY3JpcHRvcigxLCBuZXh0KSB9KTtcbiAgc2V0VG9TdHJpbmdUYWcoQ29uc3RydWN0b3IsIE5BTUUgKyAnIEl0ZXJhdG9yJyk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIExJQlJBUlkgPSByZXF1aXJlKCcuL19saWJyYXJ5Jyk7XG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpO1xudmFyIHJlZGVmaW5lID0gcmVxdWlyZSgnLi9fcmVkZWZpbmUnKTtcbnZhciBoaWRlID0gcmVxdWlyZSgnLi9faGlkZScpO1xudmFyIEl0ZXJhdG9ycyA9IHJlcXVpcmUoJy4vX2l0ZXJhdG9ycycpO1xudmFyICRpdGVyQ3JlYXRlID0gcmVxdWlyZSgnLi9faXRlci1jcmVhdGUnKTtcbnZhciBzZXRUb1N0cmluZ1RhZyA9IHJlcXVpcmUoJy4vX3NldC10by1zdHJpbmctdGFnJyk7XG52YXIgZ2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKCcuL19vYmplY3QtZ3BvJyk7XG52YXIgSVRFUkFUT1IgPSByZXF1aXJlKCcuL193a3MnKSgnaXRlcmF0b3InKTtcbnZhciBCVUdHWSA9ICEoW10ua2V5cyAmJiAnbmV4dCcgaW4gW10ua2V5cygpKTsgLy8gU2FmYXJpIGhhcyBidWdneSBpdGVyYXRvcnMgdy9vIGBuZXh0YFxudmFyIEZGX0lURVJBVE9SID0gJ0BAaXRlcmF0b3InO1xudmFyIEtFWVMgPSAna2V5cyc7XG52YXIgVkFMVUVTID0gJ3ZhbHVlcyc7XG5cbnZhciByZXR1cm5UaGlzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoQmFzZSwgTkFNRSwgQ29uc3RydWN0b3IsIG5leHQsIERFRkFVTFQsIElTX1NFVCwgRk9SQ0VEKSB7XG4gICRpdGVyQ3JlYXRlKENvbnN0cnVjdG9yLCBOQU1FLCBuZXh0KTtcbiAgdmFyIGdldE1ldGhvZCA9IGZ1bmN0aW9uIChraW5kKSB7XG4gICAgaWYgKCFCVUdHWSAmJiBraW5kIGluIHByb3RvKSByZXR1cm4gcHJvdG9ba2luZF07XG4gICAgc3dpdGNoIChraW5kKSB7XG4gICAgICBjYXNlIEtFWVM6IHJldHVybiBmdW5jdGlvbiBrZXlzKCkgeyByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOyB9O1xuICAgICAgY2FzZSBWQUxVRVM6IHJldHVybiBmdW5jdGlvbiB2YWx1ZXMoKSB7IHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7IH07XG4gICAgfSByZXR1cm4gZnVuY3Rpb24gZW50cmllcygpIHsgcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0aGlzLCBraW5kKTsgfTtcbiAgfTtcbiAgdmFyIFRBRyA9IE5BTUUgKyAnIEl0ZXJhdG9yJztcbiAgdmFyIERFRl9WQUxVRVMgPSBERUZBVUxUID09IFZBTFVFUztcbiAgdmFyIFZBTFVFU19CVUcgPSBmYWxzZTtcbiAgdmFyIHByb3RvID0gQmFzZS5wcm90b3R5cGU7XG4gIHZhciAkbmF0aXZlID0gcHJvdG9bSVRFUkFUT1JdIHx8IHByb3RvW0ZGX0lURVJBVE9SXSB8fCBERUZBVUxUICYmIHByb3RvW0RFRkFVTFRdO1xuICB2YXIgJGRlZmF1bHQgPSAkbmF0aXZlIHx8IGdldE1ldGhvZChERUZBVUxUKTtcbiAgdmFyICRlbnRyaWVzID0gREVGQVVMVCA/ICFERUZfVkFMVUVTID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoJ2VudHJpZXMnKSA6IHVuZGVmaW5lZDtcbiAgdmFyICRhbnlOYXRpdmUgPSBOQU1FID09ICdBcnJheScgPyBwcm90by5lbnRyaWVzIHx8ICRuYXRpdmUgOiAkbmF0aXZlO1xuICB2YXIgbWV0aG9kcywga2V5LCBJdGVyYXRvclByb3RvdHlwZTtcbiAgLy8gRml4IG5hdGl2ZVxuICBpZiAoJGFueU5hdGl2ZSkge1xuICAgIEl0ZXJhdG9yUHJvdG90eXBlID0gZ2V0UHJvdG90eXBlT2YoJGFueU5hdGl2ZS5jYWxsKG5ldyBCYXNlKCkpKTtcbiAgICBpZiAoSXRlcmF0b3JQcm90b3R5cGUgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgSXRlcmF0b3JQcm90b3R5cGUubmV4dCkge1xuICAgICAgLy8gU2V0IEBAdG9TdHJpbmdUYWcgdG8gbmF0aXZlIGl0ZXJhdG9yc1xuICAgICAgc2V0VG9TdHJpbmdUYWcoSXRlcmF0b3JQcm90b3R5cGUsIFRBRywgdHJ1ZSk7XG4gICAgICAvLyBmaXggZm9yIHNvbWUgb2xkIGVuZ2luZXNcbiAgICAgIGlmICghTElCUkFSWSAmJiB0eXBlb2YgSXRlcmF0b3JQcm90b3R5cGVbSVRFUkFUT1JdICE9ICdmdW5jdGlvbicpIGhpZGUoSXRlcmF0b3JQcm90b3R5cGUsIElURVJBVE9SLCByZXR1cm5UaGlzKTtcbiAgICB9XG4gIH1cbiAgLy8gZml4IEFycmF5I3t2YWx1ZXMsIEBAaXRlcmF0b3J9Lm5hbWUgaW4gVjggLyBGRlxuICBpZiAoREVGX1ZBTFVFUyAmJiAkbmF0aXZlICYmICRuYXRpdmUubmFtZSAhPT0gVkFMVUVTKSB7XG4gICAgVkFMVUVTX0JVRyA9IHRydWU7XG4gICAgJGRlZmF1bHQgPSBmdW5jdGlvbiB2YWx1ZXMoKSB7IHJldHVybiAkbmF0aXZlLmNhbGwodGhpcyk7IH07XG4gIH1cbiAgLy8gRGVmaW5lIGl0ZXJhdG9yXG4gIGlmICgoIUxJQlJBUlkgfHwgRk9SQ0VEKSAmJiAoQlVHR1kgfHwgVkFMVUVTX0JVRyB8fCAhcHJvdG9bSVRFUkFUT1JdKSkge1xuICAgIGhpZGUocHJvdG8sIElURVJBVE9SLCAkZGVmYXVsdCk7XG4gIH1cbiAgLy8gUGx1ZyBmb3IgbGlicmFyeVxuICBJdGVyYXRvcnNbTkFNRV0gPSAkZGVmYXVsdDtcbiAgSXRlcmF0b3JzW1RBR10gPSByZXR1cm5UaGlzO1xuICBpZiAoREVGQVVMVCkge1xuICAgIG1ldGhvZHMgPSB7XG4gICAgICB2YWx1ZXM6IERFRl9WQUxVRVMgPyAkZGVmYXVsdCA6IGdldE1ldGhvZChWQUxVRVMpLFxuICAgICAga2V5czogSVNfU0VUID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoS0VZUyksXG4gICAgICBlbnRyaWVzOiAkZW50cmllc1xuICAgIH07XG4gICAgaWYgKEZPUkNFRCkgZm9yIChrZXkgaW4gbWV0aG9kcykge1xuICAgICAgaWYgKCEoa2V5IGluIHByb3RvKSkgcmVkZWZpbmUocHJvdG8sIGtleSwgbWV0aG9kc1trZXldKTtcbiAgICB9IGVsc2UgJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAoQlVHR1kgfHwgVkFMVUVTX0JVRyksIE5BTUUsIG1ldGhvZHMpO1xuICB9XG4gIHJldHVybiBtZXRob2RzO1xufTtcbiIsInZhciBJVEVSQVRPUiA9IHJlcXVpcmUoJy4vX3drcycpKCdpdGVyYXRvcicpO1xudmFyIFNBRkVfQ0xPU0lORyA9IGZhbHNlO1xuXG50cnkge1xuICB2YXIgcml0ZXIgPSBbN11bSVRFUkFUT1JdKCk7XG4gIHJpdGVyWydyZXR1cm4nXSA9IGZ1bmN0aW9uICgpIHsgU0FGRV9DTE9TSU5HID0gdHJ1ZTsgfTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXRocm93LWxpdGVyYWxcbiAgQXJyYXkuZnJvbShyaXRlciwgZnVuY3Rpb24gKCkgeyB0aHJvdyAyOyB9KTtcbn0gY2F0Y2ggKGUpIHsgLyogZW1wdHkgKi8gfVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChleGVjLCBza2lwQ2xvc2luZykge1xuICBpZiAoIXNraXBDbG9zaW5nICYmICFTQUZFX0NMT1NJTkcpIHJldHVybiBmYWxzZTtcbiAgdmFyIHNhZmUgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICB2YXIgYXJyID0gWzddO1xuICAgIHZhciBpdGVyID0gYXJyW0lURVJBVE9SXSgpO1xuICAgIGl0ZXIubmV4dCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHsgZG9uZTogc2FmZSA9IHRydWUgfTsgfTtcbiAgICBhcnJbSVRFUkFUT1JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gaXRlcjsgfTtcbiAgICBleGVjKGFycik7XG4gIH0gY2F0Y2ggKGUpIHsgLyogZW1wdHkgKi8gfVxuICByZXR1cm4gc2FmZTtcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHt9O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmYWxzZTtcbiIsIid1c2Ugc3RyaWN0Jztcbi8vIDE5LjEuMi4xIE9iamVjdC5hc3NpZ24odGFyZ2V0LCBzb3VyY2UsIC4uLilcbnZhciBnZXRLZXlzID0gcmVxdWlyZSgnLi9fb2JqZWN0LWtleXMnKTtcbnZhciBnT1BTID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdvcHMnKTtcbnZhciBwSUUgPSByZXF1aXJlKCcuL19vYmplY3QtcGllJyk7XG52YXIgdG9PYmplY3QgPSByZXF1aXJlKCcuL190by1vYmplY3QnKTtcbnZhciBJT2JqZWN0ID0gcmVxdWlyZSgnLi9faW9iamVjdCcpO1xudmFyICRhc3NpZ24gPSBPYmplY3QuYXNzaWduO1xuXG4vLyBzaG91bGQgd29yayB3aXRoIHN5bWJvbHMgYW5kIHNob3VsZCBoYXZlIGRldGVybWluaXN0aWMgcHJvcGVydHkgb3JkZXIgKFY4IGJ1Zylcbm1vZHVsZS5leHBvcnRzID0gISRhc3NpZ24gfHwgcmVxdWlyZSgnLi9fZmFpbHMnKShmdW5jdGlvbiAoKSB7XG4gIHZhciBBID0ge307XG4gIHZhciBCID0ge307XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICB2YXIgUyA9IFN5bWJvbCgpO1xuICB2YXIgSyA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdCc7XG4gIEFbU10gPSA3O1xuICBLLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7IEJba10gPSBrOyB9KTtcbiAgcmV0dXJuICRhc3NpZ24oe30sIEEpW1NdICE9IDcgfHwgT2JqZWN0LmtleXMoJGFzc2lnbih7fSwgQikpLmpvaW4oJycpICE9IEs7XG59KSA/IGZ1bmN0aW9uIGFzc2lnbih0YXJnZXQsIHNvdXJjZSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gIHZhciBUID0gdG9PYmplY3QodGFyZ2V0KTtcbiAgdmFyIGFMZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICB2YXIgaW5kZXggPSAxO1xuICB2YXIgZ2V0U3ltYm9scyA9IGdPUFMuZjtcbiAgdmFyIGlzRW51bSA9IHBJRS5mO1xuICB3aGlsZSAoYUxlbiA+IGluZGV4KSB7XG4gICAgdmFyIFMgPSBJT2JqZWN0KGFyZ3VtZW50c1tpbmRleCsrXSk7XG4gICAgdmFyIGtleXMgPSBnZXRTeW1ib2xzID8gZ2V0S2V5cyhTKS5jb25jYXQoZ2V0U3ltYm9scyhTKSkgOiBnZXRLZXlzKFMpO1xuICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgaiA9IDA7XG4gICAgdmFyIGtleTtcbiAgICB3aGlsZSAobGVuZ3RoID4gaikgaWYgKGlzRW51bS5jYWxsKFMsIGtleSA9IGtleXNbaisrXSkpIFRba2V5XSA9IFNba2V5XTtcbiAgfSByZXR1cm4gVDtcbn0gOiAkYXNzaWduO1xuIiwiLy8gMTkuMS4yLjIgLyAxNS4yLjMuNSBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pXG52YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKTtcbnZhciBkUHMgPSByZXF1aXJlKCcuL19vYmplY3QtZHBzJyk7XG52YXIgZW51bUJ1Z0tleXMgPSByZXF1aXJlKCcuL19lbnVtLWJ1Zy1rZXlzJyk7XG52YXIgSUVfUFJPVE8gPSByZXF1aXJlKCcuL19zaGFyZWQta2V5JykoJ0lFX1BST1RPJyk7XG52YXIgRW1wdHkgPSBmdW5jdGlvbiAoKSB7IC8qIGVtcHR5ICovIH07XG52YXIgUFJPVE9UWVBFID0gJ3Byb3RvdHlwZSc7XG5cbi8vIENyZWF0ZSBvYmplY3Qgd2l0aCBmYWtlIGBudWxsYCBwcm90b3R5cGU6IHVzZSBpZnJhbWUgT2JqZWN0IHdpdGggY2xlYXJlZCBwcm90b3R5cGVcbnZhciBjcmVhdGVEaWN0ID0gZnVuY3Rpb24gKCkge1xuICAvLyBUaHJhc2gsIHdhc3RlIGFuZCBzb2RvbXk6IElFIEdDIGJ1Z1xuICB2YXIgaWZyYW1lID0gcmVxdWlyZSgnLi9fZG9tLWNyZWF0ZScpKCdpZnJhbWUnKTtcbiAgdmFyIGkgPSBlbnVtQnVnS2V5cy5sZW5ndGg7XG4gIHZhciBsdCA9ICc8JztcbiAgdmFyIGd0ID0gJz4nO1xuICB2YXIgaWZyYW1lRG9jdW1lbnQ7XG4gIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICByZXF1aXJlKCcuL19odG1sJykuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcbiAgaWZyYW1lLnNyYyA9ICdqYXZhc2NyaXB0Oic7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2NyaXB0LXVybFxuICAvLyBjcmVhdGVEaWN0ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuT2JqZWN0O1xuICAvLyBodG1sLnJlbW92ZUNoaWxkKGlmcmFtZSk7XG4gIGlmcmFtZURvY3VtZW50ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7XG4gIGlmcmFtZURvY3VtZW50Lm9wZW4oKTtcbiAgaWZyYW1lRG9jdW1lbnQud3JpdGUobHQgKyAnc2NyaXB0JyArIGd0ICsgJ2RvY3VtZW50LkY9T2JqZWN0JyArIGx0ICsgJy9zY3JpcHQnICsgZ3QpO1xuICBpZnJhbWVEb2N1bWVudC5jbG9zZSgpO1xuICBjcmVhdGVEaWN0ID0gaWZyYW1lRG9jdW1lbnQuRjtcbiAgd2hpbGUgKGktLSkgZGVsZXRlIGNyZWF0ZURpY3RbUFJPVE9UWVBFXVtlbnVtQnVnS2V5c1tpXV07XG4gIHJldHVybiBjcmVhdGVEaWN0KCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5jcmVhdGUgfHwgZnVuY3Rpb24gY3JlYXRlKE8sIFByb3BlcnRpZXMpIHtcbiAgdmFyIHJlc3VsdDtcbiAgaWYgKE8gIT09IG51bGwpIHtcbiAgICBFbXB0eVtQUk9UT1RZUEVdID0gYW5PYmplY3QoTyk7XG4gICAgcmVzdWx0ID0gbmV3IEVtcHR5KCk7XG4gICAgRW1wdHlbUFJPVE9UWVBFXSA9IG51bGw7XG4gICAgLy8gYWRkIFwiX19wcm90b19fXCIgZm9yIE9iamVjdC5nZXRQcm90b3R5cGVPZiBwb2x5ZmlsbFxuICAgIHJlc3VsdFtJRV9QUk9UT10gPSBPO1xuICB9IGVsc2UgcmVzdWx0ID0gY3JlYXRlRGljdCgpO1xuICByZXR1cm4gUHJvcGVydGllcyA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogZFBzKHJlc3VsdCwgUHJvcGVydGllcyk7XG59O1xuIiwidmFyIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0Jyk7XG52YXIgSUU4X0RPTV9ERUZJTkUgPSByZXF1aXJlKCcuL19pZTgtZG9tLWRlZmluZScpO1xudmFyIHRvUHJpbWl0aXZlID0gcmVxdWlyZSgnLi9fdG8tcHJpbWl0aXZlJyk7XG52YXIgZFAgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG5cbmV4cG9ydHMuZiA9IHJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkgOiBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKSB7XG4gIGFuT2JqZWN0KE8pO1xuICBQID0gdG9QcmltaXRpdmUoUCwgdHJ1ZSk7XG4gIGFuT2JqZWN0KEF0dHJpYnV0ZXMpO1xuICBpZiAoSUU4X0RPTV9ERUZJTkUpIHRyeSB7XG4gICAgcmV0dXJuIGRQKE8sIFAsIEF0dHJpYnV0ZXMpO1xuICB9IGNhdGNoIChlKSB7IC8qIGVtcHR5ICovIH1cbiAgaWYgKCdnZXQnIGluIEF0dHJpYnV0ZXMgfHwgJ3NldCcgaW4gQXR0cmlidXRlcykgdGhyb3cgVHlwZUVycm9yKCdBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCEnKTtcbiAgaWYgKCd2YWx1ZScgaW4gQXR0cmlidXRlcykgT1tQXSA9IEF0dHJpYnV0ZXMudmFsdWU7XG4gIHJldHVybiBPO1xufTtcbiIsInZhciBkUCA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpO1xudmFyIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0Jyk7XG52YXIgZ2V0S2V5cyA9IHJlcXVpcmUoJy4vX29iamVjdC1rZXlzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKSA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzIDogZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhPLCBQcm9wZXJ0aWVzKSB7XG4gIGFuT2JqZWN0KE8pO1xuICB2YXIga2V5cyA9IGdldEtleXMoUHJvcGVydGllcyk7XG4gIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgdmFyIGkgPSAwO1xuICB2YXIgUDtcbiAgd2hpbGUgKGxlbmd0aCA+IGkpIGRQLmYoTywgUCA9IGtleXNbaSsrXSwgUHJvcGVydGllc1tQXSk7XG4gIHJldHVybiBPO1xufTtcbiIsImV4cG9ydHMuZiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7XG4iLCIvLyAxOS4xLjIuOSAvIDE1LjIuMy4yIE9iamVjdC5nZXRQcm90b3R5cGVPZihPKVxudmFyIGhhcyA9IHJlcXVpcmUoJy4vX2hhcycpO1xudmFyIHRvT2JqZWN0ID0gcmVxdWlyZSgnLi9fdG8tb2JqZWN0Jyk7XG52YXIgSUVfUFJPVE8gPSByZXF1aXJlKCcuL19zaGFyZWQta2V5JykoJ0lFX1BST1RPJyk7XG52YXIgT2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiAoTykge1xuICBPID0gdG9PYmplY3QoTyk7XG4gIGlmIChoYXMoTywgSUVfUFJPVE8pKSByZXR1cm4gT1tJRV9QUk9UT107XG4gIGlmICh0eXBlb2YgTy5jb25zdHJ1Y3RvciA9PSAnZnVuY3Rpb24nICYmIE8gaW5zdGFuY2VvZiBPLmNvbnN0cnVjdG9yKSB7XG4gICAgcmV0dXJuIE8uY29uc3RydWN0b3IucHJvdG90eXBlO1xuICB9IHJldHVybiBPIGluc3RhbmNlb2YgT2JqZWN0ID8gT2JqZWN0UHJvdG8gOiBudWxsO1xufTtcbiIsInZhciBoYXMgPSByZXF1aXJlKCcuL19oYXMnKTtcbnZhciB0b0lPYmplY3QgPSByZXF1aXJlKCcuL190by1pb2JqZWN0Jyk7XG52YXIgYXJyYXlJbmRleE9mID0gcmVxdWlyZSgnLi9fYXJyYXktaW5jbHVkZXMnKShmYWxzZSk7XG52YXIgSUVfUFJPVE8gPSByZXF1aXJlKCcuL19zaGFyZWQta2V5JykoJ0lFX1BST1RPJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iamVjdCwgbmFtZXMpIHtcbiAgdmFyIE8gPSB0b0lPYmplY3Qob2JqZWN0KTtcbiAgdmFyIGkgPSAwO1xuICB2YXIgcmVzdWx0ID0gW107XG4gIHZhciBrZXk7XG4gIGZvciAoa2V5IGluIE8pIGlmIChrZXkgIT0gSUVfUFJPVE8pIGhhcyhPLCBrZXkpICYmIHJlc3VsdC5wdXNoKGtleSk7XG4gIC8vIERvbid0IGVudW0gYnVnICYgaGlkZGVuIGtleXNcbiAgd2hpbGUgKG5hbWVzLmxlbmd0aCA+IGkpIGlmIChoYXMoTywga2V5ID0gbmFtZXNbaSsrXSkpIHtcbiAgICB+YXJyYXlJbmRleE9mKHJlc3VsdCwga2V5KSB8fCByZXN1bHQucHVzaChrZXkpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59O1xuIiwiLy8gMTkuMS4yLjE0IC8gMTUuMi4zLjE0IE9iamVjdC5rZXlzKE8pXG52YXIgJGtleXMgPSByZXF1aXJlKCcuL19vYmplY3Qta2V5cy1pbnRlcm5hbCcpO1xudmFyIGVudW1CdWdLZXlzID0gcmVxdWlyZSgnLi9fZW51bS1idWcta2V5cycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIGtleXMoTykge1xuICByZXR1cm4gJGtleXMoTywgZW51bUJ1Z0tleXMpO1xufTtcbiIsImV4cG9ydHMuZiA9IHt9LnByb3BlcnR5SXNFbnVtZXJhYmxlO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYml0bWFwLCB2YWx1ZSkge1xuICByZXR1cm4ge1xuICAgIGVudW1lcmFibGU6ICEoYml0bWFwICYgMSksXG4gICAgY29uZmlndXJhYmxlOiAhKGJpdG1hcCAmIDIpLFxuICAgIHdyaXRhYmxlOiAhKGJpdG1hcCAmIDQpLFxuICAgIHZhbHVlOiB2YWx1ZVxuICB9O1xufTtcbiIsInZhciBnbG9iYWwgPSByZXF1aXJlKCcuL19nbG9iYWwnKTtcbnZhciBoaWRlID0gcmVxdWlyZSgnLi9faGlkZScpO1xudmFyIGhhcyA9IHJlcXVpcmUoJy4vX2hhcycpO1xudmFyIFNSQyA9IHJlcXVpcmUoJy4vX3VpZCcpKCdzcmMnKTtcbnZhciBUT19TVFJJTkcgPSAndG9TdHJpbmcnO1xudmFyICR0b1N0cmluZyA9IEZ1bmN0aW9uW1RPX1NUUklOR107XG52YXIgVFBMID0gKCcnICsgJHRvU3RyaW5nKS5zcGxpdChUT19TVFJJTkcpO1xuXG5yZXF1aXJlKCcuL19jb3JlJykuaW5zcGVjdFNvdXJjZSA9IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gJHRvU3RyaW5nLmNhbGwoaXQpO1xufTtcblxuKG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKE8sIGtleSwgdmFsLCBzYWZlKSB7XG4gIHZhciBpc0Z1bmN0aW9uID0gdHlwZW9mIHZhbCA9PSAnZnVuY3Rpb24nO1xuICBpZiAoaXNGdW5jdGlvbikgaGFzKHZhbCwgJ25hbWUnKSB8fCBoaWRlKHZhbCwgJ25hbWUnLCBrZXkpO1xuICBpZiAoT1trZXldID09PSB2YWwpIHJldHVybjtcbiAgaWYgKGlzRnVuY3Rpb24pIGhhcyh2YWwsIFNSQykgfHwgaGlkZSh2YWwsIFNSQywgT1trZXldID8gJycgKyBPW2tleV0gOiBUUEwuam9pbihTdHJpbmcoa2V5KSkpO1xuICBpZiAoTyA9PT0gZ2xvYmFsKSB7XG4gICAgT1trZXldID0gdmFsO1xuICB9IGVsc2UgaWYgKCFzYWZlKSB7XG4gICAgZGVsZXRlIE9ba2V5XTtcbiAgICBoaWRlKE8sIGtleSwgdmFsKTtcbiAgfSBlbHNlIGlmIChPW2tleV0pIHtcbiAgICBPW2tleV0gPSB2YWw7XG4gIH0gZWxzZSB7XG4gICAgaGlkZShPLCBrZXksIHZhbCk7XG4gIH1cbi8vIGFkZCBmYWtlIEZ1bmN0aW9uI3RvU3RyaW5nIGZvciBjb3JyZWN0IHdvcmsgd3JhcHBlZCBtZXRob2RzIC8gY29uc3RydWN0b3JzIHdpdGggbWV0aG9kcyBsaWtlIExvRGFzaCBpc05hdGl2ZVxufSkoRnVuY3Rpb24ucHJvdG90eXBlLCBUT19TVFJJTkcsIGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICByZXR1cm4gdHlwZW9mIHRoaXMgPT0gJ2Z1bmN0aW9uJyAmJiB0aGlzW1NSQ10gfHwgJHRvU3RyaW5nLmNhbGwodGhpcyk7XG59KTtcbiIsInZhciBkZWYgPSByZXF1aXJlKCcuL19vYmplY3QtZHAnKS5mO1xudmFyIGhhcyA9IHJlcXVpcmUoJy4vX2hhcycpO1xudmFyIFRBRyA9IHJlcXVpcmUoJy4vX3drcycpKCd0b1N0cmluZ1RhZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCwgdGFnLCBzdGF0KSB7XG4gIGlmIChpdCAmJiAhaGFzKGl0ID0gc3RhdCA/IGl0IDogaXQucHJvdG90eXBlLCBUQUcpKSBkZWYoaXQsIFRBRywgeyBjb25maWd1cmFibGU6IHRydWUsIHZhbHVlOiB0YWcgfSk7XG59O1xuIiwidmFyIHNoYXJlZCA9IHJlcXVpcmUoJy4vX3NoYXJlZCcpKCdrZXlzJyk7XG52YXIgdWlkID0gcmVxdWlyZSgnLi9fdWlkJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgcmV0dXJuIHNoYXJlZFtrZXldIHx8IChzaGFyZWRba2V5XSA9IHVpZChrZXkpKTtcbn07XG4iLCJ2YXIgY29yZSA9IHJlcXVpcmUoJy4vX2NvcmUnKTtcbnZhciBnbG9iYWwgPSByZXF1aXJlKCcuL19nbG9iYWwnKTtcbnZhciBTSEFSRUQgPSAnX19jb3JlLWpzX3NoYXJlZF9fJztcbnZhciBzdG9yZSA9IGdsb2JhbFtTSEFSRURdIHx8IChnbG9iYWxbU0hBUkVEXSA9IHt9KTtcblxuKG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgcmV0dXJuIHN0b3JlW2tleV0gfHwgKHN0b3JlW2tleV0gPSB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiB7fSk7XG59KSgndmVyc2lvbnMnLCBbXSkucHVzaCh7XG4gIHZlcnNpb246IGNvcmUudmVyc2lvbixcbiAgbW9kZTogcmVxdWlyZSgnLi9fbGlicmFyeScpID8gJ3B1cmUnIDogJ2dsb2JhbCcsXG4gIGNvcHlyaWdodDogJ8KpIDIwMTggRGVuaXMgUHVzaGthcmV2ICh6bG9pcm9jay5ydSknXG59KTtcbiIsInZhciB0b0ludGVnZXIgPSByZXF1aXJlKCcuL190by1pbnRlZ2VyJyk7XG52YXIgZGVmaW5lZCA9IHJlcXVpcmUoJy4vX2RlZmluZWQnKTtcbi8vIHRydWUgIC0+IFN0cmluZyNhdFxuLy8gZmFsc2UgLT4gU3RyaW5nI2NvZGVQb2ludEF0XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChUT19TVFJJTkcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICh0aGF0LCBwb3MpIHtcbiAgICB2YXIgcyA9IFN0cmluZyhkZWZpbmVkKHRoYXQpKTtcbiAgICB2YXIgaSA9IHRvSW50ZWdlcihwb3MpO1xuICAgIHZhciBsID0gcy5sZW5ndGg7XG4gICAgdmFyIGEsIGI7XG4gICAgaWYgKGkgPCAwIHx8IGkgPj0gbCkgcmV0dXJuIFRPX1NUUklORyA/ICcnIDogdW5kZWZpbmVkO1xuICAgIGEgPSBzLmNoYXJDb2RlQXQoaSk7XG4gICAgcmV0dXJuIGEgPCAweGQ4MDAgfHwgYSA+IDB4ZGJmZiB8fCBpICsgMSA9PT0gbCB8fCAoYiA9IHMuY2hhckNvZGVBdChpICsgMSkpIDwgMHhkYzAwIHx8IGIgPiAweGRmZmZcbiAgICAgID8gVE9fU1RSSU5HID8gcy5jaGFyQXQoaSkgOiBhXG4gICAgICA6IFRPX1NUUklORyA/IHMuc2xpY2UoaSwgaSArIDIpIDogKGEgLSAweGQ4MDAgPDwgMTApICsgKGIgLSAweGRjMDApICsgMHgxMDAwMDtcbiAgfTtcbn07XG4iLCIvLyBoZWxwZXIgZm9yIFN0cmluZyN7c3RhcnRzV2l0aCwgZW5kc1dpdGgsIGluY2x1ZGVzfVxudmFyIGlzUmVnRXhwID0gcmVxdWlyZSgnLi9faXMtcmVnZXhwJyk7XG52YXIgZGVmaW5lZCA9IHJlcXVpcmUoJy4vX2RlZmluZWQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodGhhdCwgc2VhcmNoU3RyaW5nLCBOQU1FKSB7XG4gIGlmIChpc1JlZ0V4cChzZWFyY2hTdHJpbmcpKSB0aHJvdyBUeXBlRXJyb3IoJ1N0cmluZyMnICsgTkFNRSArIFwiIGRvZXNuJ3QgYWNjZXB0IHJlZ2V4IVwiKTtcbiAgcmV0dXJuIFN0cmluZyhkZWZpbmVkKHRoYXQpKTtcbn07XG4iLCJ2YXIgdG9JbnRlZ2VyID0gcmVxdWlyZSgnLi9fdG8taW50ZWdlcicpO1xudmFyIG1heCA9IE1hdGgubWF4O1xudmFyIG1pbiA9IE1hdGgubWluO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaW5kZXgsIGxlbmd0aCkge1xuICBpbmRleCA9IHRvSW50ZWdlcihpbmRleCk7XG4gIHJldHVybiBpbmRleCA8IDAgPyBtYXgoaW5kZXggKyBsZW5ndGgsIDApIDogbWluKGluZGV4LCBsZW5ndGgpO1xufTtcbiIsIi8vIDcuMS40IFRvSW50ZWdlclxudmFyIGNlaWwgPSBNYXRoLmNlaWw7XG52YXIgZmxvb3IgPSBNYXRoLmZsb29yO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIGlzTmFOKGl0ID0gK2l0KSA/IDAgOiAoaXQgPiAwID8gZmxvb3IgOiBjZWlsKShpdCk7XG59O1xuIiwiLy8gdG8gaW5kZXhlZCBvYmplY3QsIHRvT2JqZWN0IHdpdGggZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBzdHJpbmdzXG52YXIgSU9iamVjdCA9IHJlcXVpcmUoJy4vX2lvYmplY3QnKTtcbnZhciBkZWZpbmVkID0gcmVxdWlyZSgnLi9fZGVmaW5lZCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIElPYmplY3QoZGVmaW5lZChpdCkpO1xufTtcbiIsIi8vIDcuMS4xNSBUb0xlbmd0aFxudmFyIHRvSW50ZWdlciA9IHJlcXVpcmUoJy4vX3RvLWludGVnZXInKTtcbnZhciBtaW4gPSBNYXRoLm1pbjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBpdCA+IDAgPyBtaW4odG9JbnRlZ2VyKGl0KSwgMHgxZmZmZmZmZmZmZmZmZikgOiAwOyAvLyBwb3coMiwgNTMpIC0gMSA9PSA5MDA3MTk5MjU0NzQwOTkxXG59O1xuIiwiLy8gNy4xLjEzIFRvT2JqZWN0KGFyZ3VtZW50KVxudmFyIGRlZmluZWQgPSByZXF1aXJlKCcuL19kZWZpbmVkJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gT2JqZWN0KGRlZmluZWQoaXQpKTtcbn07XG4iLCIvLyA3LjEuMSBUb1ByaW1pdGl2ZShpbnB1dCBbLCBQcmVmZXJyZWRUeXBlXSlcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpO1xuLy8gaW5zdGVhZCBvZiB0aGUgRVM2IHNwZWMgdmVyc2lvbiwgd2UgZGlkbid0IGltcGxlbWVudCBAQHRvUHJpbWl0aXZlIGNhc2Vcbi8vIGFuZCB0aGUgc2Vjb25kIGFyZ3VtZW50IC0gZmxhZyAtIHByZWZlcnJlZCB0eXBlIGlzIGEgc3RyaW5nXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCwgUykge1xuICBpZiAoIWlzT2JqZWN0KGl0KSkgcmV0dXJuIGl0O1xuICB2YXIgZm4sIHZhbDtcbiAgaWYgKFMgJiYgdHlwZW9mIChmbiA9IGl0LnRvU3RyaW5nKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpIHJldHVybiB2YWw7XG4gIGlmICh0eXBlb2YgKGZuID0gaXQudmFsdWVPZikgPT0gJ2Z1bmN0aW9uJyAmJiAhaXNPYmplY3QodmFsID0gZm4uY2FsbChpdCkpKSByZXR1cm4gdmFsO1xuICBpZiAoIVMgJiYgdHlwZW9mIChmbiA9IGl0LnRvU3RyaW5nKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpIHJldHVybiB2YWw7XG4gIHRocm93IFR5cGVFcnJvcihcIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZVwiKTtcbn07XG4iLCJ2YXIgaWQgPSAwO1xudmFyIHB4ID0gTWF0aC5yYW5kb20oKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGtleSkge1xuICByZXR1cm4gJ1N5bWJvbCgnLmNvbmNhdChrZXkgPT09IHVuZGVmaW5lZCA/ICcnIDoga2V5LCAnKV8nLCAoKytpZCArIHB4KS50b1N0cmluZygzNikpO1xufTtcbiIsInZhciBzdG9yZSA9IHJlcXVpcmUoJy4vX3NoYXJlZCcpKCd3a3MnKTtcbnZhciB1aWQgPSByZXF1aXJlKCcuL191aWQnKTtcbnZhciBTeW1ib2wgPSByZXF1aXJlKCcuL19nbG9iYWwnKS5TeW1ib2w7XG52YXIgVVNFX1NZTUJPTCA9IHR5cGVvZiBTeW1ib2wgPT0gJ2Z1bmN0aW9uJztcblxudmFyICRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobmFtZSkge1xuICByZXR1cm4gc3RvcmVbbmFtZV0gfHwgKHN0b3JlW25hbWVdID1cbiAgICBVU0VfU1lNQk9MICYmIFN5bWJvbFtuYW1lXSB8fCAoVVNFX1NZTUJPTCA/IFN5bWJvbCA6IHVpZCkoJ1N5bWJvbC4nICsgbmFtZSkpO1xufTtcblxuJGV4cG9ydHMuc3RvcmUgPSBzdG9yZTtcbiIsInZhciBjbGFzc29mID0gcmVxdWlyZSgnLi9fY2xhc3NvZicpO1xudmFyIElURVJBVE9SID0gcmVxdWlyZSgnLi9fd2tzJykoJ2l0ZXJhdG9yJyk7XG52YXIgSXRlcmF0b3JzID0gcmVxdWlyZSgnLi9faXRlcmF0b3JzJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vX2NvcmUnKS5nZXRJdGVyYXRvck1ldGhvZCA9IGZ1bmN0aW9uIChpdCkge1xuICBpZiAoaXQgIT0gdW5kZWZpbmVkKSByZXR1cm4gaXRbSVRFUkFUT1JdXG4gICAgfHwgaXRbJ0BAaXRlcmF0b3InXVxuICAgIHx8IEl0ZXJhdG9yc1tjbGFzc29mKGl0KV07XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGN0eCA9IHJlcXVpcmUoJy4vX2N0eCcpO1xudmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTtcbnZhciB0b09iamVjdCA9IHJlcXVpcmUoJy4vX3RvLW9iamVjdCcpO1xudmFyIGNhbGwgPSByZXF1aXJlKCcuL19pdGVyLWNhbGwnKTtcbnZhciBpc0FycmF5SXRlciA9IHJlcXVpcmUoJy4vX2lzLWFycmF5LWl0ZXInKTtcbnZhciB0b0xlbmd0aCA9IHJlcXVpcmUoJy4vX3RvLWxlbmd0aCcpO1xudmFyIGNyZWF0ZVByb3BlcnR5ID0gcmVxdWlyZSgnLi9fY3JlYXRlLXByb3BlcnR5Jyk7XG52YXIgZ2V0SXRlckZuID0gcmVxdWlyZSgnLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QnKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhcmVxdWlyZSgnLi9faXRlci1kZXRlY3QnKShmdW5jdGlvbiAoaXRlcikgeyBBcnJheS5mcm9tKGl0ZXIpOyB9KSwgJ0FycmF5Jywge1xuICAvLyAyMi4xLjIuMSBBcnJheS5mcm9tKGFycmF5TGlrZSwgbWFwZm4gPSB1bmRlZmluZWQsIHRoaXNBcmcgPSB1bmRlZmluZWQpXG4gIGZyb206IGZ1bmN0aW9uIGZyb20oYXJyYXlMaWtlIC8qICwgbWFwZm4gPSB1bmRlZmluZWQsIHRoaXNBcmcgPSB1bmRlZmluZWQgKi8pIHtcbiAgICB2YXIgTyA9IHRvT2JqZWN0KGFycmF5TGlrZSk7XG4gICAgdmFyIEMgPSB0eXBlb2YgdGhpcyA9PSAnZnVuY3Rpb24nID8gdGhpcyA6IEFycmF5O1xuICAgIHZhciBhTGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICB2YXIgbWFwZm4gPSBhTGVuID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDtcbiAgICB2YXIgbWFwcGluZyA9IG1hcGZuICE9PSB1bmRlZmluZWQ7XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICB2YXIgaXRlckZuID0gZ2V0SXRlckZuKE8pO1xuICAgIHZhciBsZW5ndGgsIHJlc3VsdCwgc3RlcCwgaXRlcmF0b3I7XG4gICAgaWYgKG1hcHBpbmcpIG1hcGZuID0gY3R4KG1hcGZuLCBhTGVuID4gMiA/IGFyZ3VtZW50c1syXSA6IHVuZGVmaW5lZCwgMik7XG4gICAgLy8gaWYgb2JqZWN0IGlzbid0IGl0ZXJhYmxlIG9yIGl0J3MgYXJyYXkgd2l0aCBkZWZhdWx0IGl0ZXJhdG9yIC0gdXNlIHNpbXBsZSBjYXNlXG4gICAgaWYgKGl0ZXJGbiAhPSB1bmRlZmluZWQgJiYgIShDID09IEFycmF5ICYmIGlzQXJyYXlJdGVyKGl0ZXJGbikpKSB7XG4gICAgICBmb3IgKGl0ZXJhdG9yID0gaXRlckZuLmNhbGwoTyksIHJlc3VsdCA9IG5ldyBDKCk7ICEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZTsgaW5kZXgrKykge1xuICAgICAgICBjcmVhdGVQcm9wZXJ0eShyZXN1bHQsIGluZGV4LCBtYXBwaW5nID8gY2FsbChpdGVyYXRvciwgbWFwZm4sIFtzdGVwLnZhbHVlLCBpbmRleF0sIHRydWUpIDogc3RlcC52YWx1ZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxlbmd0aCA9IHRvTGVuZ3RoKE8ubGVuZ3RoKTtcbiAgICAgIGZvciAocmVzdWx0ID0gbmV3IEMobGVuZ3RoKTsgbGVuZ3RoID4gaW5kZXg7IGluZGV4KyspIHtcbiAgICAgICAgY3JlYXRlUHJvcGVydHkocmVzdWx0LCBpbmRleCwgbWFwcGluZyA/IG1hcGZuKE9baW5kZXhdLCBpbmRleCkgOiBPW2luZGV4XSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJlc3VsdC5sZW5ndGggPSBpbmRleDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59KTtcbiIsIi8vIDE5LjEuMy4xIE9iamVjdC5hc3NpZ24odGFyZ2V0LCBzb3VyY2UpXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpO1xuXG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiwgJ09iamVjdCcsIHsgYXNzaWduOiByZXF1aXJlKCcuL19vYmplY3QtYXNzaWduJykgfSk7XG4iLCIvLyAyMS4xLjMuNyBTdHJpbmcucHJvdG90eXBlLmluY2x1ZGVzKHNlYXJjaFN0cmluZywgcG9zaXRpb24gPSAwKVxuJ3VzZSBzdHJpY3QnO1xudmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTtcbnZhciBjb250ZXh0ID0gcmVxdWlyZSgnLi9fc3RyaW5nLWNvbnRleHQnKTtcbnZhciBJTkNMVURFUyA9ICdpbmNsdWRlcyc7XG5cbiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogcmVxdWlyZSgnLi9fZmFpbHMtaXMtcmVnZXhwJykoSU5DTFVERVMpLCAnU3RyaW5nJywge1xuICBpbmNsdWRlczogZnVuY3Rpb24gaW5jbHVkZXMoc2VhcmNoU3RyaW5nIC8qICwgcG9zaXRpb24gPSAwICovKSB7XG4gICAgcmV0dXJuICEhfmNvbnRleHQodGhpcywgc2VhcmNoU3RyaW5nLCBJTkNMVURFUylcbiAgICAgIC5pbmRleE9mKHNlYXJjaFN0cmluZywgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpO1xuICB9XG59KTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciAkYXQgPSByZXF1aXJlKCcuL19zdHJpbmctYXQnKSh0cnVlKTtcblxuLy8gMjEuMS4zLjI3IFN0cmluZy5wcm90b3R5cGVbQEBpdGVyYXRvcl0oKVxucmVxdWlyZSgnLi9faXRlci1kZWZpbmUnKShTdHJpbmcsICdTdHJpbmcnLCBmdW5jdGlvbiAoaXRlcmF0ZWQpIHtcbiAgdGhpcy5fdCA9IFN0cmluZyhpdGVyYXRlZCk7IC8vIHRhcmdldFxuICB0aGlzLl9pID0gMDsgICAgICAgICAgICAgICAgLy8gbmV4dCBpbmRleFxuLy8gMjEuMS41LjIuMSAlU3RyaW5nSXRlcmF0b3JQcm90b3R5cGUlLm5leHQoKVxufSwgZnVuY3Rpb24gKCkge1xuICB2YXIgTyA9IHRoaXMuX3Q7XG4gIHZhciBpbmRleCA9IHRoaXMuX2k7XG4gIHZhciBwb2ludDtcbiAgaWYgKGluZGV4ID49IE8ubGVuZ3RoKSByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gIHBvaW50ID0gJGF0KE8sIGluZGV4KTtcbiAgdGhpcy5faSArPSBwb2ludC5sZW5ndGg7XG4gIHJldHVybiB7IHZhbHVlOiBwb2ludCwgZG9uZTogZmFsc2UgfTtcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvQXJyYXkucHJvdG90eXBlLmluY2x1ZGVzXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpO1xudmFyICRpbmNsdWRlcyA9IHJlcXVpcmUoJy4vX2FycmF5LWluY2x1ZGVzJykodHJ1ZSk7XG5cbiRleHBvcnQoJGV4cG9ydC5QLCAnQXJyYXknLCB7XG4gIGluY2x1ZGVzOiBmdW5jdGlvbiBpbmNsdWRlcyhlbCAvKiAsIGZyb21JbmRleCA9IDAgKi8pIHtcbiAgICByZXR1cm4gJGluY2x1ZGVzKHRoaXMsIGVsLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG4gIH1cbn0pO1xuXG5yZXF1aXJlKCcuL19hZGQtdG8tdW5zY29wYWJsZXMnKSgnaW5jbHVkZXMnKTtcbiIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoZmFsc2UpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmFpcS1wb3B1cC0zajB3antwb3NpdGlvbjpmaXhlZDt0b3A6MDtib3R0b206MDtsZWZ0OjA7cmlnaHQ6MDt6LWluZGV4Ojk5OTk5OTt0ZXh0LWFsaWduOmNlbnRlcjt3aGl0ZS1zcGFjZTpub3dyYXA7LXdlYmtpdC1hbmltYXRpb24tbmFtZTphaXEtb25Qb3B1cEZhZGVJbi0yLVJ4UTthbmltYXRpb24tbmFtZTphaXEtb25Qb3B1cEZhZGVJbi0yLVJ4UTstd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjouM3M7YW5pbWF0aW9uLWR1cmF0aW9uOi4zczstd2Via2l0LWFuaW1hdGlvbi1maWxsLW1vZGU6Zm9yd2FyZHM7YW5pbWF0aW9uLWZpbGwtbW9kZTpmb3J3YXJkc30uYWlxLXBvcHVwLTNqMHdqLC5haXEtcG9wdXAtc2Nyb2xsLTJXSUlLey13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveH0uYWlxLXBvcHVwLXNjcm9sbC0yV0lJS3t3aWR0aDoxMDAlO2hlaWdodDoxMDAlO3BhZGRpbmc6MzBweCAxMHB4O292ZXJmbG93LXk6YXV0bzstd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzp0b3VjaH0uYWlxLXBvcHVwLXNjcm9sbC0yV0lJSzpiZWZvcmV7Y29udGVudDpcXFwiXFxcIjtkaXNwbGF5OmlubGluZS1ibG9jaztoZWlnaHQ6MTAwJTt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7bWFyZ2luLXJpZ2h0Oi0uMjVlbX0uYWlxLW92ZXJsYXktNmhSSnR7cG9zaXRpb246Zml4ZWQ7bGVmdDowO3RvcDowO3JpZ2h0OjA7Ym90dG9tOjA7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLC43KTt6LWluZGV4Oi0xO3BvaW50ZXItZXZlbnRzOm5vbmV9LmFpcS1jbG9zZS1idXR0b24tM1VBV057cG9zaXRpb246YWJzb2x1dGU7dG9wOjEwcHg7cmlnaHQ6MTBweDt3aWR0aDoyNHB4O2hlaWdodDoyNHB4O2JhY2tncm91bmQtY29sb3I6I2ZmZjtjb2xvcjojMDAwO2JvcmRlci1yYWRpdXM6NTAlO2N1cnNvcjpwb2ludGVyfS5haXEtY2xvc2UtYnV0dG9uLTNVQVdOOmJlZm9yZXt0b3A6NnB4Oy13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSg0NWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSg0NWRlZyk7LXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOmxlZnQ7dHJhbnNmb3JtLW9yaWdpbjpsZWZ0fS5haXEtY2xvc2UtYnV0dG9uLTNVQVdOOmFmdGVyLC5haXEtY2xvc2UtYnV0dG9uLTNVQVdOOmJlZm9yZXtjb250ZW50OlxcXCJcXFwiO3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6N3B4O3dpZHRoOjYwJTtoZWlnaHQ6MnB4O2JhY2tncm91bmQ6Y3VycmVudENvbG9yfS5haXEtY2xvc2UtYnV0dG9uLTNVQVdOOmFmdGVye2JvdHRvbTo2cHg7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDMxNWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgzMTVkZWcpOy13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjpsZWZ0O3RyYW5zZm9ybS1vcmlnaW46bGVmdH0uYWlxLWNvbnRhaW5lci0xdzN1b3tkaXNwbGF5Oi13ZWJraXQtaW5saW5lLWJveDtkaXNwbGF5Oi1tcy1pbmxpbmUtZmxleGJveDtkaXNwbGF5OmlubGluZS1mbGV4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTttYXgtd2lkdGg6MTAwJTt0ZXh0LWFsaWduOnN0YXJ0O3Bvc2l0aW9uOnJlbGF0aXZlfUAtd2Via2l0LWtleWZyYW1lcyBhaXEtb25Qb3B1cEZhZGVJbi0yLVJ4UXswJXtvcGFjaXR5OjB9dG97b3BhY2l0eToxfX1Aa2V5ZnJhbWVzIGFpcS1vblBvcHVwRmFkZUluLTItUnhRezAle29wYWNpdHk6MH10b3tvcGFjaXR5OjF9fVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcbmV4cG9ydHMubG9jYWxzID0ge1xuXHRcInBvcHVwXCI6IFwiYWlxLXBvcHVwLTNqMHdqXCIsXG5cdFwib25Qb3B1cEZhZGVJblwiOiBcImFpcS1vblBvcHVwRmFkZUluLTItUnhRXCIsXG5cdFwicG9wdXAtc2Nyb2xsXCI6IFwiYWlxLXBvcHVwLXNjcm9sbC0yV0lJS1wiLFxuXHRcIm92ZXJsYXlcIjogXCJhaXEtb3ZlcmxheS02aFJKdFwiLFxuXHRcImNsb3NlLWJ1dHRvblwiOiBcImFpcS1jbG9zZS1idXR0b24tM1VBV05cIixcblx0XCJjb250YWluZXJcIjogXCJhaXEtY29udGFpbmVyLTF3M3VvXCJcbn07IiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKShmYWxzZSk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYWlxLXBvcHVwLTJuMmpse3Bvc2l0aW9uOmZpeGVkO3RvcDowO2JvdHRvbTowO2xlZnQ6MDtyaWdodDowO3otaW5kZXg6OTk5OTk5O3RleHQtYWxpZ246Y2VudGVyO3doaXRlLXNwYWNlOm5vd3JhcDstd2Via2l0LWFuaW1hdGlvbi1uYW1lOmFpcS1vblBvcHVwRmFkZUluLTNmSTBmO2FuaW1hdGlvbi1uYW1lOmFpcS1vblBvcHVwRmFkZUluLTNmSTBmOy13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uOi4zczthbmltYXRpb24tZHVyYXRpb246LjNzOy13ZWJraXQtYW5pbWF0aW9uLWZpbGwtbW9kZTpmb3J3YXJkczthbmltYXRpb24tZmlsbC1tb2RlOmZvcndhcmRzfS5haXEtcG9wdXAtMm4yamwsLmFpcS1wb3B1cC1zY3JvbGwtNkZ6VzV7LXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNpemluZzpib3JkZXItYm94fS5haXEtcG9wdXAtc2Nyb2xsLTZGelc1e3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7cGFkZGluZzozMHB4IDVweDtvdmVyZmxvdy15OmF1dG87LXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6dG91Y2h9LmFpcS1wb3B1cC1zY3JvbGwtNkZ6VzU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXCI7ZGlzcGxheTppbmxpbmUtYmxvY2s7aGVpZ2h0OjEwMCU7dmVydGljYWwtYWxpZ246bWlkZGxlO21hcmdpbi1yaWdodDotLjI1ZW19LmFpcS1vdmVybGF5LTNWVllTe3Bvc2l0aW9uOmZpeGVkO2xlZnQ6MDt0b3A6MDtyaWdodDowO2JvdHRvbTowO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwuNyk7ei1pbmRleDotMTtwb2ludGVyLWV2ZW50czpub25lfS5haXEtYmFubmVyLTJXandfe2hlaWdodDoxOTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOjUwJSA1MCU7YmFja2dyb3VuZC1zaXplOmNvdmVyfS5haXEtY2xvc2UtYnV0dG9uLTFjQTJxe3Bvc2l0aW9uOmFic29sdXRlO3RvcDoxMHB4O3JpZ2h0OjEwcHg7d2lkdGg6MjRweDtoZWlnaHQ6MjRweDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Y29sb3I6IzAwMDtib3JkZXItcmFkaXVzOjUwJTtjdXJzb3I6cG9pbnRlcn0uYWlxLWNsb3NlLWJ1dHRvbi0xY0EycTpiZWZvcmV7dG9wOjZweDstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoNDVkZWcpO3RyYW5zZm9ybTpyb3RhdGUoNDVkZWcpOy13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjpsZWZ0O3RyYW5zZm9ybS1vcmlnaW46bGVmdH0uYWlxLWNsb3NlLWJ1dHRvbi0xY0EycTphZnRlciwuYWlxLWNsb3NlLWJ1dHRvbi0xY0EycTpiZWZvcmV7Y29udGVudDpcXFwiXFxcIjtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjdweDt3aWR0aDo2MCU7aGVpZ2h0OjJweDtiYWNrZ3JvdW5kOmN1cnJlbnRDb2xvcn0uYWlxLWNsb3NlLWJ1dHRvbi0xY0EycTphZnRlcntib3R0b206NnB4Oy13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgzMTVkZWcpO3RyYW5zZm9ybTpyb3RhdGUoMzE1ZGVnKTstd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46bGVmdDt0cmFuc2Zvcm0tb3JpZ2luOmxlZnR9LmFpcS1jb250YWluZXItMW53V2N7ZGlzcGxheTppbmxpbmUtYmxvY2s7dmVydGljYWwtYWxpZ246bWlkZGxlO3dpZHRoOjEwMCU7bWF4LXdpZHRoOjM0MHB4O3RleHQtYWxpZ246c3RhcnQ7cG9zaXRpb246cmVsYXRpdmU7Ym9yZGVyLXJhZGl1czo2cHg7LXdlYmtpdC1ib3gtc2hhZG93OjAgMnB4IDEycHggMCByZ2JhKDAsMCwwLC41KTtib3gtc2hhZG93OjAgMnB4IDEycHggMCByZ2JhKDAsMCwwLC41KTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7b3ZlcmZsb3c6aGlkZGVufUAtd2Via2l0LWtleWZyYW1lcyBhaXEtb25Qb3B1cEZhZGVJbi0zZkkwZnswJXtvcGFjaXR5OjB9dG97b3BhY2l0eToxfX1Aa2V5ZnJhbWVzIGFpcS1vblBvcHVwRmFkZUluLTNmSTBmezAle29wYWNpdHk6MH10b3tvcGFjaXR5OjF9fS5haXEtdGl0bGUtZGVfdi17Zm9udC1zaXplOjIwcHg7Zm9udC13ZWlnaHQ6NjAwO21hcmdpbjozMHB4IDIwcHggMTBweH0uYWlxLW1lc3NhZ2UtMTdoTnosLmFpcS10aXRsZS1kZV92LXtmb250LWZhbWlseTpPcGVuU2Fucztmb250LXN0eWxlOm5vcm1hbDtmb250LXN0cmV0Y2g6bm9ybWFsO2xpbmUtaGVpZ2h0Om5vcm1hbDtsZXR0ZXItc3BhY2luZzpub3JtYWw7dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6IzAwMDt3aGl0ZS1zcGFjZTpub3JtYWx9LmFpcS1tZXNzYWdlLTE3aE56e2ZvbnQtc2l6ZToxNHB4O2ZvbnQtd2VpZ2h0OjQwMDttYXJnaW46MTBweCAyMHB4IDMwcHh9LmFpcS1pbnB1dC1ibG9jay0xTGdILXtoZWlnaHQ6NzBweDttYXJnaW46MCAyMHB4O3Bvc2l0aW9uOnJlbGF0aXZlfS5haXEtaW5wdXQtNEdXeHV7ZGlzcGxheTpibG9jazt3aWR0aDoxMDAlO2hlaWdodDo0MHB4O2xpbmUtaGVpZ2h0OjQwcHg7Ym9yZGVyLXJhZGl1czo1cHg7Ym9yZGVyOjFweCBzb2xpZCAjOTc5Nzk3O2JhY2tncm91bmQtY29sb3I6I2ZmZjstd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3g7cGFkZGluZzowIDIwcHg7Zm9udC1mYW1pbHk6T3BlblNhbnM7Zm9udC1zaXplOjE0cHg7Zm9udC13ZWlnaHQ6NDAwO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtc3RyZXRjaDpub3JtYWw7bGluZS1oZWlnaHQ6bm9ybWFsO2xldHRlci1zcGFjaW5nOm5vcm1hbDtjb2xvcjpyZ2JhKDAsMCwwLC42KX0uYWlxLWlucHV0LWVycm9yLTNEaUVze2JvcmRlci1jb2xvcjojZmY1NjU2fS5haXEtaW5wdXQtZXJyb3ItM0RpRXN+LmFpcS1lcnJvci1MaExWbHtkaXNwbGF5OmJsb2NrfS5haXEtc2VsZWN0LTFLRHpCey13ZWJraXQtYXBwZWFyYW5jZTpub25lOy1tb3otYXBwZWFyYW5jZTpub25lO2FwcGVhcmFuY2U6bm9uZX0uYWlxLWlucHV0LWJsb2NrLTFMZ0gtLmFpcS1zZWxlY3QtYmxvY2stOWhXZG06YWZ0ZXJ7Y29udGVudDpcXFwiXFxcIjtkaXNwbGF5OmlubGluZS1ibG9jazt3aWR0aDowO2hlaWdodDowO2JvcmRlci1jb2xvcjpyZ2JhKDAsMCwwLC42KSB0cmFuc3BhcmVudCB0cmFuc3BhcmVudDtib3JkZXItc3R5bGU6c29saWQ7Ym9yZGVyLXdpZHRoOjVweCA1cHggMDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MThweDtyaWdodDoxOHB4fS5haXEtZXJyb3ItTGhMVmwsb3B0aW9uOmRpc2FibGVke2Rpc3BsYXk6bm9uZX0uYWlxLWVycm9yLUxoTFZse2ZvbnQtZmFtaWx5Ok9wZW5TYW5zO2ZvbnQtc2l6ZToxMHB4O2ZvbnQtd2VpZ2h0OjQwMDtmb250LXN0eWxlOml0YWxpYztmb250LXN0cmV0Y2g6bm9ybWFsO2xpbmUtaGVpZ2h0Om5vcm1hbDtsZXR0ZXItc3BhY2luZzpub3JtYWw7Y29sb3I6I2ZmNTY1NjttYXJnaW46NXB4IDAgMDt3aGl0ZS1zcGFjZTpub3JtYWx9LmFpcS1lcnJvci0tc2hvdy0ydWpUU3tkaXNwbGF5OmJsb2NrfS5haXEtYWdyZWVtZW50LTE1cGV4e21hcmdpbjowIDIwcHggMTBweDttaW4taGVpZ2h0OjU3cHg7cG9zaXRpb246cmVsYXRpdmU7cGFkZGluZy1sZWZ0OjM1cHh9LmFpcS1hZ3JlZW1lbnQtMTVwZXggbGFiZWx7ZGlzcGxheTppbmxpbmUtYmxvY2s7d2lkdGg6MjVweDtoZWlnaHQ6MjVweDtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7Y3Vyc29yOnBvaW50ZXJ9LmFpcS1hZ3JlZW1lbnQtMTVwZXggaW5wdXRbdHlwZT1jaGVja2JveF17cG9zaXRpb246YWJzb2x1dGU7b3BhY2l0eTowfS5haXEtYWdyZWVtZW50LTE1cGV4IGl7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO3dpZHRoOjIycHg7aGVpZ2h0OjIycHg7Ym9yZGVyLXJhZGl1czoycHg7Ym9yZGVyOjFweCBzb2xpZCAjOTc5Nzk3O2JhY2tncm91bmQtY29sb3I6I2ZmZn0uYWlxLWFncmVlbWVudC0xNXBleCBpOmJlZm9yZXtjb250ZW50OlxcXCJcXFwiO3Bvc2l0aW9uOmFic29sdXRlO2Rpc3BsYXk6bm9uZTtsZWZ0OjdweDt0b3A6MnB4O3dpZHRoOjdweDtoZWlnaHQ6MTJweDtib3JkZXI6c29saWQgIzAwMDtib3JkZXItd2lkdGg6MCAzcHggM3B4IDA7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDQ1ZGVnKTt0cmFuc2Zvcm06cm90YXRlKDQ1ZGVnKX0uYWlxLWFncmVlbWVudC0xNXBleCBpbnB1dFt0eXBlPWNoZWNrYm94XTpjaGVja2Vkfmk6YmVmb3Jle2Rpc3BsYXk6YmxvY2t9LmFpcS1hZ3JlZW1lbnQtMTVwZXggYXtjb2xvcjojMDA5MGZmO3RleHQtZGVjb3JhdGlvbjpub25lfS5haXEtYWdyZWVtZW50LTE1cGV4IC5haXEtdGV4dC1mM2pSQywuYWlxLWFncmVlbWVudC0xNXBleCBhe2Rpc3BsYXk6aW5saW5lLWJsb2NrO3doaXRlLXNwYWNlOm5vcm1hbDtmb250LWZhbWlseTpPcGVuU2Fucztmb250LXNpemU6MTJweDtmb250LXdlaWdodDo0MDA7Zm9udC1zdHlsZTpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDtsaW5lLWhlaWdodDpub3JtYWw7bGV0dGVyLXNwYWNpbmc6bm9ybWFsfS5haXEtYWdyZWVtZW50LTE1cGV4IC5haXEtdGV4dC1mM2pSQ3tjb2xvcjojMDAwfS5haXEtc3VibWl0LWJ1dHRvbi0zODcyeHtmb250LWZhbWlseTpPcGVuU2Fucztmb250LXNpemU6MTRweDtmb250LXdlaWdodDo2MDA7Zm9udC1zdHlsZTpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDtsZXR0ZXItc3BhY2luZzpub3JtYWw7dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6I2ZmZjtsaW5lLWhlaWdodDo0MHB4O2JvcmRlci1yYWRpdXM6NXB4O2JhY2tncm91bmQtY29sb3I6IzAwOTBmZjtjdXJzb3I6cG9pbnRlcjttYXJnaW46MzBweCAyMHB4fVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcbmV4cG9ydHMubG9jYWxzID0ge1xuXHRcInBvcHVwXCI6IFwiYWlxLXBvcHVwLTJuMmpsXCIsXG5cdFwib25Qb3B1cEZhZGVJblwiOiBcImFpcS1vblBvcHVwRmFkZUluLTNmSTBmXCIsXG5cdFwicG9wdXAtc2Nyb2xsXCI6IFwiYWlxLXBvcHVwLXNjcm9sbC02RnpXNVwiLFxuXHRcIm92ZXJsYXlcIjogXCJhaXEtb3ZlcmxheS0zVlZZU1wiLFxuXHRcImJhbm5lclwiOiBcImFpcS1iYW5uZXItMldqd19cIixcblx0XCJjbG9zZS1idXR0b25cIjogXCJhaXEtY2xvc2UtYnV0dG9uLTFjQTJxXCIsXG5cdFwiY29udGFpbmVyXCI6IFwiYWlxLWNvbnRhaW5lci0xbndXY1wiLFxuXHRcInRpdGxlXCI6IFwiYWlxLXRpdGxlLWRlX3YtXCIsXG5cdFwibWVzc2FnZVwiOiBcImFpcS1tZXNzYWdlLTE3aE56XCIsXG5cdFwiaW5wdXQtYmxvY2tcIjogXCJhaXEtaW5wdXQtYmxvY2stMUxnSC1cIixcblx0XCJpbnB1dFwiOiBcImFpcS1pbnB1dC00R1d4dVwiLFxuXHRcImlucHV0LWVycm9yXCI6IFwiYWlxLWlucHV0LWVycm9yLTNEaUVzXCIsXG5cdFwiZXJyb3JcIjogXCJhaXEtZXJyb3ItTGhMVmxcIixcblx0XCJzZWxlY3RcIjogXCJhaXEtc2VsZWN0LTFLRHpCXCIsXG5cdFwic2VsZWN0LWJsb2NrXCI6IFwiYWlxLXNlbGVjdC1ibG9jay05aFdkbVwiLFxuXHRcImVycm9yLS1zaG93XCI6IFwiYWlxLWVycm9yLS1zaG93LTJ1alRTXCIsXG5cdFwiYWdyZWVtZW50XCI6IFwiYWlxLWFncmVlbWVudC0xNXBleFwiLFxuXHRcInRleHRcIjogXCJhaXEtdGV4dC1mM2pSQ1wiLFxuXHRcInN1Ym1pdC1idXR0b25cIjogXCJhaXEtc3VibWl0LWJ1dHRvbi0zODcyeFwiXG59OyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoZmFsc2UpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmFpcS1jeW1wLTEzLVZke3Bvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDtoZWlnaHQ6MTAwJTt6LWluZGV4OjIxNDc0ODQwMDB9LmFpcS1jeW1wLTEzLVZkLC5haXEtY3ltcC0xMy1WZCAqey13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveH0uYWlxLW92ZXJsYXktMUVpOEZ7cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO3dpZHRoOjEwMHZ3O2hlaWdodDoxMDB2aDtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsLjcpOy13ZWJraXQtdHJhbnNpdGlvbjpvcGFjaXR5IC4zcyBlYXNlO3RyYW5zaXRpb246b3BhY2l0eSAuM3MgZWFzZTstd2Via2l0LWFuaW1hdGlvbjphaXEtY3ltUHJvbXB0T3ZlcmxheUZhZGVJbi0yNEFHSCAuM3MgZWFzZTthbmltYXRpb246YWlxLWN5bVByb21wdE92ZXJsYXlGYWRlSW4tMjRBR0ggLjNzIGVhc2U7ei1pbmRleDotMTtwb2ludGVyLWV2ZW50czpub25lfS5haXEtY3ltcC0xMy1WZC5haXEtaXMtY2xvc2luZy0zTnBLcCAuYWlxLW92ZXJsYXktMUVpOEZ7b3BhY2l0eTowfS5haXEtY29udGFpbmVyLTNOc24we3Bvc2l0aW9uOmFic29sdXRlO3RvcDoxM3B4O2xlZnQ6NzZweDt3aWR0aDozNTRweDtwYWRkaW5nOjEzcHg7ZGlzcGxheTotd2Via2l0LWJveDtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDstd2Via2l0LWJveC1vcmllbnQ6aG9yaXpvbnRhbDstd2Via2l0LWJveC1kaXJlY3Rpb246bm9ybWFsOy1tcy1mbGV4LWRpcmVjdGlvbjpyb3c7ZmxleC1kaXJlY3Rpb246cm93O2NvbG9yOiMwMDA7YmFja2dyb3VuZC1jb2xvcjojZmZmOy13ZWJraXQtYm94LXNoYWRvdzowIDFweCAzcHggcmdiYSgwLDAsMCwuMyk7Ym94LXNoYWRvdzowIDFweCAzcHggcmdiYSgwLDAsMCwuMyk7Ym9yZGVyLXJhZGl1czozcHg7LXdlYmtpdC10cmFuc2l0aW9uOi13ZWJraXQtdHJhbnNmb3JtIC41cyBlYXNlO3RyYW5zaXRpb246LXdlYmtpdC10cmFuc2Zvcm0gLjVzIGVhc2U7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gLjVzIGVhc2U7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gLjVzIGVhc2UsLXdlYmtpdC10cmFuc2Zvcm0gLjVzIGVhc2U7LXdlYmtpdC1hbmltYXRpb246YWlxLWN5bVByb21wdFNsaWRlSW5Eb3duLUp5dUxyIC41cyBlYXNlO2FuaW1hdGlvbjphaXEtY3ltUHJvbXB0U2xpZGVJbkRvd24tSnl1THIgLjVzIGVhc2V9LmFpcS1jeW1wLTEzLVZkLmFpcS1pcy1jbG9zaW5nLTNOcEtwIC5haXEtY29udGFpbmVyLTNOc24wey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTIwMCUpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC0yMDAlKTtwb2ludGVyLWV2ZW50czpub25lfS5haXEtY2FyZXQtM1lpMDR7cG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOjEwMCU7bGVmdDo0MnB4O3dpZHRoOjA7aGVpZ2h0OjA7Y29sb3I6I2ZmZjtib3JkZXItY29sb3I6dHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgY3VycmVudGNvbG9yO2JvcmRlci1zdHlsZTpzb2xpZDtib3JkZXItd2lkdGg6MCA5cHggOXB4fS5haXEtbWVzc2FnZS0xMGZwcHstd2Via2l0LWJveC1mbGV4OjE7LW1zLWZsZXg6MTtmbGV4OjE7cGFkZGluZy1yaWdodDoxMHB4O2ZvbnQtc2l6ZToxNHB4O2xpbmUtaGVpZ2h0OjEuNDI7dGV4dC1hbGlnbjpzdGFydDtmb250LWZhbWlseTpIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZn0uYWlxLWNsb3NlLWJ1dHRvbi0yUGdKQXtwb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDoxNHB4O2hlaWdodDoxNHB4O21hcmdpbi10b3A6MnB4O2N1cnNvcjpwb2ludGVyO292ZXJmbG93OmhpZGRlbjtjb2xvcjpjdXJyZW50Q29sb3I7LXdlYmtpdC1hcHBlYXJhbmNlOm5vbmU7LW1vei1hcHBlYXJhbmNlOm5vbmU7YXBwZWFyYW5jZTpub25lO2JhY2tncm91bmQ6bm9uZTtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjB9LmFpcS1jbG9zZS1idXR0b24tMlBnSkE6YWZ0ZXIsLmFpcS1jbG9zZS1idXR0b24tMlBnSkE6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXCI7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDo1MCU7bWFyZ2luLWxlZnQ6LTFweDtoZWlnaHQ6MTAwJTt3aWR0aDoycHg7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDQ1ZGVnKTt0cmFuc2Zvcm06cm90YXRlKDQ1ZGVnKTtiYWNrZ3JvdW5kOmN1cnJlbnRDb2xvcn0uYWlxLWNsb3NlLWJ1dHRvbi0yUGdKQTphZnRlcnstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKTt0cmFuc2Zvcm06cm90YXRlKC00NWRlZyl9QC13ZWJraXQta2V5ZnJhbWVzIGFpcS1jeW1Qcm9tcHRTbGlkZUluRG93bi1KeXVMcnswJXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKC0xMDBweCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTEwMHB4KX10b3std2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKDApO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApfX1Aa2V5ZnJhbWVzIGFpcS1jeW1Qcm9tcHRTbGlkZUluRG93bi1KeXVMcnswJXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKC0xMDBweCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTEwMHB4KX10b3std2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKDApO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApfX1ALXdlYmtpdC1rZXlmcmFtZXMgYWlxLWN5bVByb21wdFNsaWRlSW5VcC0zNDU3c3swJXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKDEwMHB4KTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgxMDBweCl9dG97LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgwKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgwKX19QGtleWZyYW1lcyBhaXEtY3ltUHJvbXB0U2xpZGVJblVwLTM0NTdzezAley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoMTAwcHgpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDEwMHB4KX10b3std2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKDApO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApfX1ALXdlYmtpdC1rZXlmcmFtZXMgYWlxLWN5bVByb21wdE92ZXJsYXlGYWRlSW4tMjRBR0h7MCV7b3BhY2l0eTowfXRve29wYWNpdHk6MX19QGtleWZyYW1lcyBhaXEtY3ltUHJvbXB0T3ZlcmxheUZhZGVJbi0yNEFHSHswJXtvcGFjaXR5OjB9dG97b3BhY2l0eToxfX1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjUyMHB4KXsuYWlxLWNhcmV0LTNZaTA0LC5haXEtb3ZlcmxheS0xRWk4RntkaXNwbGF5Om5vbmV9LmFpcS1jb250YWluZXItM05zbjB7dG9wOmF1dG87Ym90dG9tOjA7bGVmdDowO3dpZHRoOjEwMHZ3Oy13ZWJraXQtYm94LXNoYWRvdzowIC0zcHggNnB4ICNjNWMyYzI7Ym94LXNoYWRvdzowIC0zcHggNnB4ICNjNWMyYzI7LXdlYmtpdC1hbmltYXRpb24tbmFtZTphaXEtY3ltUHJvbXB0U2xpZGVJblVwLTM0NTdzO2FuaW1hdGlvbi1uYW1lOmFpcS1jeW1Qcm9tcHRTbGlkZUluVXAtMzQ1N3N9LmFpcS1jeW1wLTEzLVZkLmFpcS1pcy1jbG9zaW5nLTNOcEtwIC5haXEtY29udGFpbmVyLTNOc24wey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoMjAwJSk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMjAwJSl9fVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcbmV4cG9ydHMubG9jYWxzID0ge1xuXHRcImN5bXBcIjogXCJhaXEtY3ltcC0xMy1WZFwiLFxuXHRcIm92ZXJsYXlcIjogXCJhaXEtb3ZlcmxheS0xRWk4RlwiLFxuXHRcImN5bVByb21wdE92ZXJsYXlGYWRlSW5cIjogXCJhaXEtY3ltUHJvbXB0T3ZlcmxheUZhZGVJbi0yNEFHSFwiLFxuXHRcImlzLWNsb3NpbmdcIjogXCJhaXEtaXMtY2xvc2luZy0zTnBLcFwiLFxuXHRcImNvbnRhaW5lclwiOiBcImFpcS1jb250YWluZXItM05zbjBcIixcblx0XCJjeW1Qcm9tcHRTbGlkZUluRG93blwiOiBcImFpcS1jeW1Qcm9tcHRTbGlkZUluRG93bi1KeXVMclwiLFxuXHRcImNhcmV0XCI6IFwiYWlxLWNhcmV0LTNZaTA0XCIsXG5cdFwibWVzc2FnZVwiOiBcImFpcS1tZXNzYWdlLTEwZnBwXCIsXG5cdFwiY2xvc2UtYnV0dG9uXCI6IFwiYWlxLWNsb3NlLWJ1dHRvbi0yUGdKQVwiLFxuXHRcImN5bVByb21wdFNsaWRlSW5VcFwiOiBcImFpcS1jeW1Qcm9tcHRTbGlkZUluVXAtMzQ1N3NcIlxufTsiLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKGZhbHNlKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5haXEtZmFrZS1wcm9tcHQtMTl4TTF7cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO2hlaWdodDoxMDAlO3otaW5kZXg6MjE0NzQ4MzAwMH0uYWlxLWZha2UtcHJvbXB0LTE5eE0xLC5haXEtZmFrZS1wcm9tcHQtMTl4TTEgKnstd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3h9LmFpcS1vdmVybGF5LTJoMV9ne3Bvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDB2dztoZWlnaHQ6MTAwdmg7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLC43KTstd2Via2l0LXRyYW5zaXRpb246b3BhY2l0eSAuM3MgZWFzZTt0cmFuc2l0aW9uOm9wYWNpdHkgLjNzIGVhc2U7LXdlYmtpdC1hbmltYXRpb246YWlxLWZha2VQcm9tcHRPdmVybGF5RmFkZUluLTFxWVNaIC4zcyBlYXNlO2FuaW1hdGlvbjphaXEtZmFrZVByb21wdE92ZXJsYXlGYWRlSW4tMXFZU1ogLjNzIGVhc2U7ei1pbmRleDotMTtwb2ludGVyLWV2ZW50czpub25lfS5haXEtZmFrZS1wcm9tcHQtMTl4TTEuYWlxLWlzLWNsb3NpbmctM3VodEMgLmFpcS1vdmVybGF5LTJoMV9ne29wYWNpdHk6MH0uYWlxLWNvbnRhaW5lci0ycXI0dHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0Ojc2cHg7d2lkdGg6MzU0cHg7Y29sb3I6IzAwMDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7LXdlYmtpdC1ib3gtc2hhZG93OjAgNHB4IDZweCAjYTlhMWExO2JveC1zaGFkb3c6MCA0cHggNnB4ICNhOWExYTE7Zm9udC1zaXplOjE2cHg7bGluZS1oZWlnaHQ6MTt0ZXh0LWFsaWduOnN0YXJ0O2ZvbnQtZmFtaWx5OkhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmOy13ZWJraXQtdHJhbnNpdGlvbjotd2Via2l0LXRyYW5zZm9ybSAuNXMgZWFzZTt0cmFuc2l0aW9uOi13ZWJraXQtdHJhbnNmb3JtIC41cyBlYXNlO3RyYW5zaXRpb246dHJhbnNmb3JtIC41cyBlYXNlO3RyYW5zaXRpb246dHJhbnNmb3JtIC41cyBlYXNlLC13ZWJraXQtdHJhbnNmb3JtIC41cyBlYXNlOy13ZWJraXQtYW5pbWF0aW9uOmFpcS1mYWtlUHJvbXB0U2xpZGVJbkRvd24tMk5TRHQgLjVzIGVhc2U7YW5pbWF0aW9uOmFpcS1mYWtlUHJvbXB0U2xpZGVJbkRvd24tMk5TRHQgLjVzIGVhc2V9LmFpcS1mYWtlLXByb21wdC0xOXhNMS5haXEtaXMtbWlkZGxlLTFQUm9aIC5haXEtY29udGFpbmVyLTJxcjR0e2xlZnQ6NTB2dzttYXJnaW4tbGVmdDotMTc3cHh9LmFpcS1mYWtlLXByb21wdC0xOXhNMS5haXEtaXMtY2xvc2luZy0zdWh0QyAuYWlxLWNvbnRhaW5lci0ycXI0dHstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKC0yMDAlKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtMjAwJSk7cG9pbnRlci1ldmVudHM6bm9uZX0uYWlxLWNvbnRlbnQtd3JhcHBlci0xa0IxT3tkaXNwbGF5Oi13ZWJraXQtYm94O2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4Oy13ZWJraXQtYm94LWFsaWduOnN0YXJ0Oy1tcy1mbGV4LWFsaWduOnN0YXJ0O2FsaWduLWl0ZW1zOmZsZXgtc3RhcnQ7cGFkZGluZzoxNnB4IDE2cHggMH0uYWlxLWZha2UtcHJvbXB0LTE5eE0xIC5haXEtaWNvbi0xeG8zYXt3aWR0aDozMnB4O2hlaWdodDozMnB4O21hcmdpbi1yaWdodDoxNHB4fS5haXEtY29udGVudC0yQzF1Unstd2Via2l0LWJveC1mbGV4OjE7LW1zLWZsZXg6MTtmbGV4OjE7bWF4LXdpZHRoOjg3JX0uYWlxLWNvbnRlbnQtMkMxdVIgaDN7bWFyZ2luOjAgMCAxcHg7Zm9udC1zaXplOjE2cHg7bGluZS1oZWlnaHQ6MjRweDtjb2xvcjppbmhlcml0fS5haXEtY29udGVudC0yQzF1UiBoMywuYWlxLWNvbnRlbnQtMkMxdVIgcHtmb250LXdlaWdodDo0MDA7dGV4dC1hbGlnbjpzdGFydDt3b3JkLWJyZWFrOmJyZWFrLWFsbH0uYWlxLWNvbnRlbnQtMkMxdVIgcHttYXJnaW46MDtmb250LXNpemU6MTRweDtsaW5lLWhlaWdodDoyMHB4O2NvbG9yOnJnYmEoMCwwLDAsLjYpfS5haXEtYWN0aW9uLWJ1dHRvbnMtMXkyUGF7bWFyZ2luLXRvcDoxNHB4O3BhZGRpbmc6MCAxNnB4IDE2cHg7b3ZlcmZsb3c6YXV0bzt0ZXh0LWFsaWduOnJpZ2h0O3doaXRlLXNwYWNlOm5vd3JhcH0uYWlxLWFjdGlvbi1idXR0b25zLTF5MlBhIGJ1dHRvbntkaXNwbGF5OmlubGluZS1ibG9jaztwYWRkaW5nOjhweCAxNnB4O2ZvbnQtc2l6ZToxNHB4O2xpbmUtaGVpZ2h0OjE7Zm9udC13ZWlnaHQ6NzAwO2N1cnNvcjpwb2ludGVyOy13ZWJraXQtYXBwZWFyYW5jZTpub25lOy1tb3otYXBwZWFyYW5jZTpub25lO2FwcGVhcmFuY2U6bm9uZTtiYWNrZ3JvdW5kOm5vbmU7Ym9yZGVyOm5vbmU7b3V0bGluZTpub25lO2JvcmRlci1yYWRpdXM6MDttYXJnaW46MDttaW4td2lkdGg6MH0uYWlxLWFjdGlvbi1idXR0b25zLTF5MlBhIC5haXEtY2xvc2UtYnV0dG9uLTJ6NC02e21hcmdpbi1yaWdodDoxNnB4O2NvbG9yOnJnYmEoMCwwLDAsLjQpfS5haXEtYWN0aW9uLWJ1dHRvbnMtMXkyUGEgLmFpcS1jb25maXJtLWJ1dHRvbi0zTGNoTntjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzAwNmRmMDtib3JkZXItcmFkaXVzOjNweH1ALXdlYmtpdC1rZXlmcmFtZXMgYWlxLWZha2VQcm9tcHRTbGlkZUluRG93bi0yTlNEdHswJXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKC0xMDBweCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTEwMHB4KX10b3std2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKDApO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApfX1Aa2V5ZnJhbWVzIGFpcS1mYWtlUHJvbXB0U2xpZGVJbkRvd24tMk5TRHR7MCV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgtMTAwcHgpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC0xMDBweCl9dG97LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgwKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgwKX19QC13ZWJraXQta2V5ZnJhbWVzIGFpcS1mYWtlUHJvbXB0U2xpZGVJblVwLWd1VlF4ezAley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoMTAwcHgpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDEwMHB4KX10b3std2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKDApO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApfX1Aa2V5ZnJhbWVzIGFpcS1mYWtlUHJvbXB0U2xpZGVJblVwLWd1VlF4ezAley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoMTAwcHgpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDEwMHB4KX10b3std2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKDApO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApfX1ALXdlYmtpdC1rZXlmcmFtZXMgYWlxLWZha2VQcm9tcHRPdmVybGF5RmFkZUluLTFxWVNaezAle29wYWNpdHk6MH10b3tvcGFjaXR5OjF9fUBrZXlmcmFtZXMgYWlxLWZha2VQcm9tcHRPdmVybGF5RmFkZUluLTFxWVNaezAle29wYWNpdHk6MH10b3tvcGFjaXR5OjF9fUBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6NTIwcHgpey5haXEtb3ZlcmxheS0yaDFfZ3tkaXNwbGF5Om5vbmV9LmFpcS1jb250YWluZXItMnFyNHR7dG9wOmF1dG87Ym90dG9tOjA7bGVmdDowO3dpZHRoOjEwMHZ3Oy13ZWJraXQtYm94LXNoYWRvdzowIC0zcHggNnB4ICNjNWMyYzI7Ym94LXNoYWRvdzowIC0zcHggNnB4ICNjNWMyYzI7LXdlYmtpdC1hbmltYXRpb24tbmFtZTphaXEtZmFrZVByb21wdFNsaWRlSW5VcC1ndVZReDthbmltYXRpb24tbmFtZTphaXEtZmFrZVByb21wdFNsaWRlSW5VcC1ndVZReH0uYWlxLWZha2UtcHJvbXB0LTE5eE0xLmFpcS1pcy1taWRkbGUtMVBSb1ogLmFpcS1jb250YWluZXItMnFyNHR7bGVmdDowO21hcmdpbi1sZWZ0OjB9LmFpcS1mYWtlLXByb21wdC0xOXhNMS5haXEtaXMtY2xvc2luZy0zdWh0QyAuYWlxLWNvbnRhaW5lci0ycXI0dHstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKDIwMCUpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDIwMCUpfX1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5leHBvcnRzLmxvY2FscyA9IHtcblx0XCJmYWtlLXByb21wdFwiOiBcImFpcS1mYWtlLXByb21wdC0xOXhNMVwiLFxuXHRcIm92ZXJsYXlcIjogXCJhaXEtb3ZlcmxheS0yaDFfZ1wiLFxuXHRcImZha2VQcm9tcHRPdmVybGF5RmFkZUluXCI6IFwiYWlxLWZha2VQcm9tcHRPdmVybGF5RmFkZUluLTFxWVNaXCIsXG5cdFwiaXMtY2xvc2luZ1wiOiBcImFpcS1pcy1jbG9zaW5nLTN1aHRDXCIsXG5cdFwiY29udGFpbmVyXCI6IFwiYWlxLWNvbnRhaW5lci0ycXI0dFwiLFxuXHRcImZha2VQcm9tcHRTbGlkZUluRG93blwiOiBcImFpcS1mYWtlUHJvbXB0U2xpZGVJbkRvd24tMk5TRHRcIixcblx0XCJpcy1taWRkbGVcIjogXCJhaXEtaXMtbWlkZGxlLTFQUm9aXCIsXG5cdFwiY29udGVudC13cmFwcGVyXCI6IFwiYWlxLWNvbnRlbnQtd3JhcHBlci0xa0IxT1wiLFxuXHRcImljb25cIjogXCJhaXEtaWNvbi0xeG8zYVwiLFxuXHRcImNvbnRlbnRcIjogXCJhaXEtY29udGVudC0yQzF1UlwiLFxuXHRcImFjdGlvbi1idXR0b25zXCI6IFwiYWlxLWFjdGlvbi1idXR0b25zLTF5MlBhXCIsXG5cdFwiY2xvc2UtYnV0dG9uXCI6IFwiYWlxLWNsb3NlLWJ1dHRvbi0yejQtNlwiLFxuXHRcImNvbmZpcm0tYnV0dG9uXCI6IFwiYWlxLWNvbmZpcm0tYnV0dG9uLTNMY2hOXCIsXG5cdFwiZmFrZVByb21wdFNsaWRlSW5VcFwiOiBcImFpcS1mYWtlUHJvbXB0U2xpZGVJblVwLWd1VlF4XCJcbn07IiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKShmYWxzZSk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYWlxLXBvcHVwLTNxenlle3Bvc2l0aW9uOmZpeGVkO3RvcDowO2JvdHRvbTowO2xlZnQ6MDtyaWdodDowO3otaW5kZXg6OTk5OTk5O3RleHQtYWxpZ246Y2VudGVyO3doaXRlLXNwYWNlOm5vd3JhcDstd2Via2l0LWFuaW1hdGlvbi1uYW1lOmFpcS1vblN1YnNjcmliZWRQb3B1cEZhZGVJbi0yVVhMVzthbmltYXRpb24tbmFtZTphaXEtb25TdWJzY3JpYmVkUG9wdXBGYWRlSW4tMlVYTFc7LXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb246LjNzO2FuaW1hdGlvbi1kdXJhdGlvbjouM3M7LXdlYmtpdC1hbmltYXRpb24tZmlsbC1tb2RlOmZvcndhcmRzO2FuaW1hdGlvbi1maWxsLW1vZGU6Zm9yd2FyZHN9LmFpcS1wb3B1cC0zcXp5ZSwuYWlxLXBvcHVwLXNjcm9sbC0xenRCVnstd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3h9LmFpcS1wb3B1cC1zY3JvbGwtMXp0QlZ7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtwYWRkaW5nOjMwcHggMTBweDtvdmVyZmxvdy15OmF1dG87LXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6dG91Y2h9LmFpcS1wb3B1cC1zY3JvbGwtMXp0QlY6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXCI7ZGlzcGxheTppbmxpbmUtYmxvY2s7aGVpZ2h0OjEwMCU7dmVydGljYWwtYWxpZ246bWlkZGxlO21hcmdpbi1yaWdodDotLjI1ZW19LmFpcS1vdmVybGF5LVNOZnNje3Bvc2l0aW9uOmZpeGVkO2xlZnQ6MDt0b3A6MDtyaWdodDowO2JvdHRvbTowO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwuNyk7ei1pbmRleDotMTtwb2ludGVyLWV2ZW50czpub25lfS5haXEtb3ZlcmxheS1TTmZzYysuYWlxLWNsb3NlLWJ1dHRvbi0xS1hWT3tjb2xvcjojZmZmfS5haXEtY2xvc2UtYnV0dG9uLTFLWFZPe3Bvc2l0aW9uOmZpeGVkO3RvcDoyMHB4O3JpZ2h0OjIwcHg7d2lkdGg6MjRweDtoZWlnaHQ6MjRweDtjdXJzb3I6cG9pbnRlcjtvdmVyZmxvdzpoaWRkZW47Y29sb3I6IzAwMDstd2Via2l0LWFwcGVhcmFuY2U6bm9uZTstbW96LWFwcGVhcmFuY2U6bm9uZTthcHBlYXJhbmNlOm5vbmU7YmFja2dyb3VuZDpub25lO2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6MDttYXJnaW46MDttaW4td2lkdGg6MH0uYWlxLWNsb3NlLWJ1dHRvbi0xS1hWTzpiZWZvcmV7dG9wOjA7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDQ1ZGVnKTt0cmFuc2Zvcm06cm90YXRlKDQ1ZGVnKTstd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46bGVmdDt0cmFuc2Zvcm0tb3JpZ2luOmxlZnR9LmFpcS1jbG9zZS1idXR0b24tMUtYVk86YWZ0ZXIsLmFpcS1jbG9zZS1idXR0b24tMUtYVk86YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXCI7cG9zaXRpb246YWJzb2x1dGU7bGVmdDowO3dpZHRoOjE1MCU7aGVpZ2h0OjJweDtiYWNrZ3JvdW5kOmN1cnJlbnRDb2xvcn0uYWlxLWNsb3NlLWJ1dHRvbi0xS1hWTzphZnRlcntib3R0b206MDstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMzE1ZGVnKTt0cmFuc2Zvcm06cm90YXRlKDMxNWRlZyk7LXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOmxlZnQ7dHJhbnNmb3JtLW9yaWdpbjpsZWZ0fS5haXEtY29udGFpbmVyLWw2Zlgwe2Rpc3BsYXk6aW5saW5lLWJsb2NrO3ZlcnRpY2FsLWFsaWduOm1pZGRsZTttYXgtd2lkdGg6MTAwJTt0ZXh0LWFsaWduOnN0YXJ0fUAtd2Via2l0LWtleWZyYW1lcyBhaXEtb25TdWJzY3JpYmVkUG9wdXBGYWRlSW4tMlVYTFd7MCV7b3BhY2l0eTowfXRve29wYWNpdHk6MX19QGtleWZyYW1lcyBhaXEtb25TdWJzY3JpYmVkUG9wdXBGYWRlSW4tMlVYTFd7MCV7b3BhY2l0eTowfXRve29wYWNpdHk6MX19XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuZXhwb3J0cy5sb2NhbHMgPSB7XG5cdFwicG9wdXBcIjogXCJhaXEtcG9wdXAtM3F6eWVcIixcblx0XCJvblN1YnNjcmliZWRQb3B1cEZhZGVJblwiOiBcImFpcS1vblN1YnNjcmliZWRQb3B1cEZhZGVJbi0yVVhMV1wiLFxuXHRcInBvcHVwLXNjcm9sbFwiOiBcImFpcS1wb3B1cC1zY3JvbGwtMXp0QlZcIixcblx0XCJvdmVybGF5XCI6IFwiYWlxLW92ZXJsYXktU05mc2NcIixcblx0XCJjbG9zZS1idXR0b25cIjogXCJhaXEtY2xvc2UtYnV0dG9uLTFLWFZPXCIsXG5cdFwiY29udGFpbmVyXCI6IFwiYWlxLWNvbnRhaW5lci1sNmZYMFwiXG59OyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoZmFsc2UpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmFpcS1vdmVybGF5LTFCVDN5e3Bvc2l0aW9uOmZpeGVkO3otaW5kZXg6OTk5OTk5OTk7bGVmdDowO3RvcDowO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC45KTtvdmVyZmxvdy14OmhpZGRlbn0uYWlxLWNvbnRlbnQtVkdxdGx7cG9zaXRpb246cmVsYXRpdmU7dG9wOjI1JTt3aWR0aDoxMDAlO21heC13aWR0aDo0NTBweDttYXJnaW46MzBweCBhdXRvIDA7dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6I2ZmZn0uYWlxLWNvbnRlbnQtVkdxdGwgaDZ7Zm9udC1zaXplOjE0cHg7Zm9udC13ZWlnaHQ6NDAwfS5haXEtY29udGVudC1WR3F0bCBoNHttYXJnaW46MTBweCAwO2ZvbnQtc2l6ZToyNHB4fS5haXEtY2xvc2UtYnV0dG9uLWVVUEVfe3Bvc2l0aW9uOmZpeGVkO3RvcDoyMHB4O3JpZ2h0OjIwcHg7d2lkdGg6MjRweDtoZWlnaHQ6MjRweDtjdXJzb3I6cG9pbnRlcjtvdmVyZmxvdzpoaWRkZW47Y29sb3I6I2ZmZjstd2Via2l0LWFwcGVhcmFuY2U6bm9uZTstbW96LWFwcGVhcmFuY2U6bm9uZTthcHBlYXJhbmNlOm5vbmU7YmFja2dyb3VuZDpub25lO2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6MH0uYWlxLWNsb3NlLWJ1dHRvbi1lVVBFXzpiZWZvcmV7dG9wOjA7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDQ1ZGVnKTt0cmFuc2Zvcm06cm90YXRlKDQ1ZGVnKTstd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46bGVmdDt0cmFuc2Zvcm0tb3JpZ2luOmxlZnR9LmFpcS1jbG9zZS1idXR0b24tZVVQRV86YWZ0ZXIsLmFpcS1jbG9zZS1idXR0b24tZVVQRV86YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXCI7cG9zaXRpb246YWJzb2x1dGU7bGVmdDowO3dpZHRoOjE1MCU7aGVpZ2h0OjJweDtiYWNrZ3JvdW5kOmN1cnJlbnRDb2xvcn0uYWlxLWNsb3NlLWJ1dHRvbi1lVVBFXzphZnRlcntib3R0b206MDstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMzE1ZGVnKTt0cmFuc2Zvcm06cm90YXRlKDMxNWRlZyk7LXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOmxlZnQ7dHJhbnNmb3JtLW9yaWdpbjpsZWZ0fVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcbmV4cG9ydHMubG9jYWxzID0ge1xuXHRcIm92ZXJsYXlcIjogXCJhaXEtb3ZlcmxheS0xQlQzeVwiLFxuXHRcImNvbnRlbnRcIjogXCJhaXEtY29udGVudC1WR3F0bFwiLFxuXHRcImNsb3NlLWJ1dHRvblwiOiBcImFpcS1jbG9zZS1idXR0b24tZVVQRV9cIlxufTsiLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKGZhbHNlKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5haXEtY29udGFpbmVyLUdwaHFHe21hcmdpbjowIGF1dG87LXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNpemluZzpib3JkZXItYm94O2Rpc3BsYXk6LXdlYmtpdC1ib3g7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7d2lkdGg6MTAwJTttaW4td2lkdGg6MTgwcHg7b3ZlcmZsb3c6aGlkZGVuO2ZvbnQtZmFtaWx5Ok9wZW4gU2Fuc30uYWlxLWNvbnRhaW5lci1HcGhxRyAuYWlxLXdyYXBwZXItMUtUOTF7LXdlYmtpdC1ib3gtZmxleDoxOy1tcy1mbGV4OjE7ZmxleDoxO2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToxMnB4O3RleHQtZGVjb3JhdGlvbjpub25lfS5haXEtY29udGFpbmVyLUdwaHFHIC5haXEtd3JhcHBlci0xS1Q5MTpob3ZlcntjdXJzb3I6cG9pbnRlcjstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxLjAyNSk7dHJhbnNmb3JtOnNjYWxlKDEuMDI1KTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlLWluLW91dDt0cmFuc2l0aW9uOmFsbCAuM3MgZWFzZS1pbi1vdXR9LmFpcS1jb250YWluZXItR3BocUcgLmFpcS13cmFwcGVyLTFLVDkxIC5haXEtdGh1bWJuYWlscy0ycnRvbnstbXMtZmxleC1wcmVmZXJyZWQtc2l6ZToxMDAlO2ZsZXgtYmFzaXM6MTAwJTttYXJnaW4tYm90dG9tOjVweDt3aWR0aDoxMDAlO2JhY2tncm91bmQtc2l6ZTpjb3ZlcjtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjo1MCV9LmFpcS1jb250YWluZXItR3BocUcgLmFpcS13cmFwcGVyLTFLVDkxIC5haXEtdGV4dC0xcnpXZXtjb2xvcjojMDAwfS5haXEtY29udGFpbmVyLUdwaHFHIC5haXEtd3JhcHBlci0xS1Q5MSAuYWlxLXRleHQtMXJ6V2UrLmFpcS10ZXh0LTFyeldle3BhZGRpbmctdG9wOjNweH0uYWlxLWNvbnRhaW5lci1HcGhxRyAuYWlxLXdyYXBwZXItMUtUOTEgLmFpcS10aXRsZS1odmpub3t0ZXh0LW92ZXJmbG93OmVsbGlwc2lzO292ZXJmbG93OmhpZGRlbjt3aGl0ZS1zcGFjZTpub3dyYXB9LmFpcS1jb250YWluZXItR3BocUcgLmFpcS13cmFwcGVyLTFLVDkxIC5haXEtcmV0YWlsUHJpY2UtMXZDc1p7dGV4dC1kZWNvcmF0aW9uOmxpbmUtdGhyb3VnaH1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5leHBvcnRzLmxvY2FscyA9IHtcblx0XCJjb250YWluZXJcIjogXCJhaXEtY29udGFpbmVyLUdwaHFHXCIsXG5cdFwid3JhcHBlclwiOiBcImFpcS13cmFwcGVyLTFLVDkxXCIsXG5cdFwidGh1bWJuYWlsc1wiOiBcImFpcS10aHVtYm5haWxzLTJydG9uXCIsXG5cdFwidGV4dFwiOiBcImFpcS10ZXh0LTFyeldlXCIsXG5cdFwidGl0bGVcIjogXCJhaXEtdGl0bGUtaHZqbm9cIixcblx0XCJyZXRhaWxQcmljZVwiOiBcImFpcS1yZXRhaWxQcmljZS0xdkNzWlwiXG59OyIsIi8qXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih1c2VTb3VyY2VNYXApIHtcblx0dmFyIGxpc3QgPSBbXTtcblxuXHQvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG5cdGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcblx0XHRyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcblx0XHRcdHZhciBjb250ZW50ID0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApO1xuXHRcdFx0aWYoaXRlbVsyXSkge1xuXHRcdFx0XHRyZXR1cm4gXCJAbWVkaWEgXCIgKyBpdGVtWzJdICsgXCJ7XCIgKyBjb250ZW50ICsgXCJ9XCI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gY29udGVudDtcblx0XHRcdH1cblx0XHR9KS5qb2luKFwiXCIpO1xuXHR9O1xuXG5cdC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG5cdGxpc3QuaSA9IGZ1bmN0aW9uKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcblx0XHRpZih0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIilcblx0XHRcdG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsIFwiXCJdXTtcblx0XHR2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaWQgPSB0aGlzW2ldWzBdO1xuXHRcdFx0aWYodHlwZW9mIGlkID09PSBcIm51bWJlclwiKVxuXHRcdFx0XHRhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG5cdFx0fVxuXHRcdGZvcihpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gbW9kdWxlc1tpXTtcblx0XHRcdC8vIHNraXAgYWxyZWFkeSBpbXBvcnRlZCBtb2R1bGVcblx0XHRcdC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXG5cdFx0XHQvLyAgd2hlbiBhIG1vZHVsZSBpcyBpbXBvcnRlZCBtdWx0aXBsZSB0aW1lcyB3aXRoIGRpZmZlcmVudCBtZWRpYSBxdWVyaWVzLlxuXHRcdFx0Ly8gIEkgaG9wZSB0aGlzIHdpbGwgbmV2ZXIgb2NjdXIgKEhleSB0aGlzIHdheSB3ZSBoYXZlIHNtYWxsZXIgYnVuZGxlcylcblx0XHRcdGlmKHR5cGVvZiBpdGVtWzBdICE9PSBcIm51bWJlclwiIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG5cdFx0XHRcdGlmKG1lZGlhUXVlcnkgJiYgIWl0ZW1bMl0pIHtcblx0XHRcdFx0XHRpdGVtWzJdID0gbWVkaWFRdWVyeTtcblx0XHRcdFx0fSBlbHNlIGlmKG1lZGlhUXVlcnkpIHtcblx0XHRcdFx0XHRpdGVtWzJdID0gXCIoXCIgKyBpdGVtWzJdICsgXCIpIGFuZCAoXCIgKyBtZWRpYVF1ZXJ5ICsgXCIpXCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0bGlzdC5wdXNoKGl0ZW0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblx0cmV0dXJuIGxpc3Q7XG59O1xuXG5mdW5jdGlvbiBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCkge1xuXHR2YXIgY29udGVudCA9IGl0ZW1bMV0gfHwgJyc7XG5cdHZhciBjc3NNYXBwaW5nID0gaXRlbVszXTtcblx0aWYgKCFjc3NNYXBwaW5nKSB7XG5cdFx0cmV0dXJuIGNvbnRlbnQ7XG5cdH1cblxuXHRpZiAodXNlU291cmNlTWFwICYmIHR5cGVvZiBidG9hID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0dmFyIHNvdXJjZU1hcHBpbmcgPSB0b0NvbW1lbnQoY3NzTWFwcGluZyk7XG5cdFx0dmFyIHNvdXJjZVVSTHMgPSBjc3NNYXBwaW5nLnNvdXJjZXMubWFwKGZ1bmN0aW9uIChzb3VyY2UpIHtcblx0XHRcdHJldHVybiAnLyojIHNvdXJjZVVSTD0nICsgY3NzTWFwcGluZy5zb3VyY2VSb290ICsgc291cmNlICsgJyAqLydcblx0XHR9KTtcblxuXHRcdHJldHVybiBbY29udGVudF0uY29uY2F0KHNvdXJjZVVSTHMpLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oJ1xcbicpO1xuXHR9XG5cblx0cmV0dXJuIFtjb250ZW50XS5qb2luKCdcXG4nKTtcbn1cblxuLy8gQWRhcHRlZCBmcm9tIGNvbnZlcnQtc291cmNlLW1hcCAoTUlUKVxuZnVuY3Rpb24gdG9Db21tZW50KHNvdXJjZU1hcCkge1xuXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcblx0dmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSk7XG5cdHZhciBkYXRhID0gJ3NvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LCcgKyBiYXNlNjQ7XG5cblx0cmV0dXJuICcvKiMgJyArIGRhdGEgKyAnICovJztcbn1cbiIsImNsYXNzIFN0b3JlIHtcclxuICAgIGNvbnN0cnVjdG9yKGRiTmFtZSA9ICdrZXl2YWwtc3RvcmUnLCBzdG9yZU5hbWUgPSAna2V5dmFsJykge1xyXG4gICAgICAgIHRoaXMuc3RvcmVOYW1lID0gc3RvcmVOYW1lO1xyXG4gICAgICAgIHRoaXMuX2RicCA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgb3BlbnJlcSA9IGluZGV4ZWREQi5vcGVuKGRiTmFtZSwgMSk7XHJcbiAgICAgICAgICAgIG9wZW5yZXEub25lcnJvciA9ICgpID0+IHJlamVjdChvcGVucmVxLmVycm9yKTtcclxuICAgICAgICAgICAgb3BlbnJlcS5vbnN1Y2Nlc3MgPSAoKSA9PiByZXNvbHZlKG9wZW5yZXEucmVzdWx0KTtcclxuICAgICAgICAgICAgLy8gRmlyc3QgdGltZSBzZXR1cDogY3JlYXRlIGFuIGVtcHR5IG9iamVjdCBzdG9yZVxyXG4gICAgICAgICAgICBvcGVucmVxLm9udXBncmFkZW5lZWRlZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIG9wZW5yZXEucmVzdWx0LmNyZWF0ZU9iamVjdFN0b3JlKHN0b3JlTmFtZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBfd2l0aElEQlN0b3JlKHR5cGUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RicC50aGVuKGRiID0+IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBkYi50cmFuc2FjdGlvbih0aGlzLnN0b3JlTmFtZSwgdHlwZSk7XHJcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSAoKSA9PiByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLm9uYWJvcnQgPSB0cmFuc2FjdGlvbi5vbmVycm9yID0gKCkgPT4gcmVqZWN0KHRyYW5zYWN0aW9uLmVycm9yKTtcclxuICAgICAgICAgICAgY2FsbGJhY2sodHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodGhpcy5zdG9yZU5hbWUpKTtcclxuICAgICAgICB9KSk7XHJcbiAgICB9XHJcbn1cclxubGV0IHN0b3JlO1xyXG5mdW5jdGlvbiBnZXREZWZhdWx0U3RvcmUoKSB7XHJcbiAgICBpZiAoIXN0b3JlKVxyXG4gICAgICAgIHN0b3JlID0gbmV3IFN0b3JlKCk7XHJcbiAgICByZXR1cm4gc3RvcmU7XHJcbn1cclxuZnVuY3Rpb24gZ2V0KGtleSwgc3RvcmUgPSBnZXREZWZhdWx0U3RvcmUoKSkge1xyXG4gICAgbGV0IHJlcTtcclxuICAgIHJldHVybiBzdG9yZS5fd2l0aElEQlN0b3JlKCdyZWFkb25seScsIHN0b3JlID0+IHtcclxuICAgICAgICByZXEgPSBzdG9yZS5nZXQoa2V5KTtcclxuICAgIH0pLnRoZW4oKCkgPT4gcmVxLnJlc3VsdCk7XHJcbn1cclxuZnVuY3Rpb24gc2V0KGtleSwgdmFsdWUsIHN0b3JlID0gZ2V0RGVmYXVsdFN0b3JlKCkpIHtcclxuICAgIHJldHVybiBzdG9yZS5fd2l0aElEQlN0b3JlKCdyZWFkd3JpdGUnLCBzdG9yZSA9PiB7XHJcbiAgICAgICAgc3RvcmUucHV0KHZhbHVlLCBrZXkpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZGVsKGtleSwgc3RvcmUgPSBnZXREZWZhdWx0U3RvcmUoKSkge1xyXG4gICAgcmV0dXJuIHN0b3JlLl93aXRoSURCU3RvcmUoJ3JlYWR3cml0ZScsIHN0b3JlID0+IHtcclxuICAgICAgICBzdG9yZS5kZWxldGUoa2V5KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGNsZWFyKHN0b3JlID0gZ2V0RGVmYXVsdFN0b3JlKCkpIHtcclxuICAgIHJldHVybiBzdG9yZS5fd2l0aElEQlN0b3JlKCdyZWFkd3JpdGUnLCBzdG9yZSA9PiB7XHJcbiAgICAgICAgc3RvcmUuY2xlYXIoKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGtleXMoc3RvcmUgPSBnZXREZWZhdWx0U3RvcmUoKSkge1xyXG4gICAgY29uc3Qga2V5cyA9IFtdO1xyXG4gICAgcmV0dXJuIHN0b3JlLl93aXRoSURCU3RvcmUoJ3JlYWRvbmx5Jywgc3RvcmUgPT4ge1xyXG4gICAgICAgIC8vIFRoaXMgd291bGQgYmUgc3RvcmUuZ2V0QWxsS2V5cygpLCBidXQgaXQgaXNuJ3Qgc3VwcG9ydGVkIGJ5IEVkZ2Ugb3IgU2FmYXJpLlxyXG4gICAgICAgIC8vIEFuZCBvcGVuS2V5Q3Vyc29yIGlzbid0IHN1cHBvcnRlZCBieSBTYWZhcmkuXHJcbiAgICAgICAgKHN0b3JlLm9wZW5LZXlDdXJzb3IgfHwgc3RvcmUub3BlbkN1cnNvcikuY2FsbChzdG9yZSkub25zdWNjZXNzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMucmVzdWx0KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICBrZXlzLnB1c2godGhpcy5yZXN1bHQua2V5KTtcclxuICAgICAgICAgICAgdGhpcy5yZXN1bHQuY29udGludWUoKTtcclxuICAgICAgICB9O1xyXG4gICAgfSkudGhlbigoKSA9PiBrZXlzKTtcclxufVxuXG5leHBvcnQgeyBTdG9yZSwgZ2V0LCBzZXQsIGRlbCwgY2xlYXIsIGtleXMgfTtcbiIsIi8qIVxuICogSmF2YVNjcmlwdCBDb29raWUgdjIuMi4wXG4gKiBodHRwczovL2dpdGh1Yi5jb20vanMtY29va2llL2pzLWNvb2tpZVxuICpcbiAqIENvcHlyaWdodCAyMDA2LCAyMDE1IEtsYXVzIEhhcnRsICYgRmFnbmVyIEJyYWNrXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqL1xuOyhmdW5jdGlvbiAoZmFjdG9yeSkge1xuXHR2YXIgcmVnaXN0ZXJlZEluTW9kdWxlTG9hZGVyID0gZmFsc2U7XG5cdGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcblx0XHRkZWZpbmUoZmFjdG9yeSk7XG5cdFx0cmVnaXN0ZXJlZEluTW9kdWxlTG9hZGVyID0gdHJ1ZTtcblx0fVxuXHRpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdFx0cmVnaXN0ZXJlZEluTW9kdWxlTG9hZGVyID0gdHJ1ZTtcblx0fVxuXHRpZiAoIXJlZ2lzdGVyZWRJbk1vZHVsZUxvYWRlcikge1xuXHRcdHZhciBPbGRDb29raWVzID0gd2luZG93LkNvb2tpZXM7XG5cdFx0dmFyIGFwaSA9IHdpbmRvdy5Db29raWVzID0gZmFjdG9yeSgpO1xuXHRcdGFwaS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0d2luZG93LkNvb2tpZXMgPSBPbGRDb29raWVzO1xuXHRcdFx0cmV0dXJuIGFwaTtcblx0XHR9O1xuXHR9XG59KGZ1bmN0aW9uICgpIHtcblx0ZnVuY3Rpb24gZXh0ZW5kICgpIHtcblx0XHR2YXIgaSA9IDA7XG5cdFx0dmFyIHJlc3VsdCA9IHt9O1xuXHRcdGZvciAoOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXR0cmlidXRlcyA9IGFyZ3VtZW50c1sgaSBdO1xuXHRcdFx0Zm9yICh2YXIga2V5IGluIGF0dHJpYnV0ZXMpIHtcblx0XHRcdFx0cmVzdWx0W2tleV0gPSBhdHRyaWJ1dGVzW2tleV07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHRmdW5jdGlvbiBpbml0IChjb252ZXJ0ZXIpIHtcblx0XHRmdW5jdGlvbiBhcGkgKGtleSwgdmFsdWUsIGF0dHJpYnV0ZXMpIHtcblx0XHRcdHZhciByZXN1bHQ7XG5cdFx0XHRpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFdyaXRlXG5cblx0XHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuXHRcdFx0XHRhdHRyaWJ1dGVzID0gZXh0ZW5kKHtcblx0XHRcdFx0XHRwYXRoOiAnLydcblx0XHRcdFx0fSwgYXBpLmRlZmF1bHRzLCBhdHRyaWJ1dGVzKTtcblxuXHRcdFx0XHRpZiAodHlwZW9mIGF0dHJpYnV0ZXMuZXhwaXJlcyA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0XHR2YXIgZXhwaXJlcyA9IG5ldyBEYXRlKCk7XG5cdFx0XHRcdFx0ZXhwaXJlcy5zZXRNaWxsaXNlY29uZHMoZXhwaXJlcy5nZXRNaWxsaXNlY29uZHMoKSArIGF0dHJpYnV0ZXMuZXhwaXJlcyAqIDg2NGUrNSk7XG5cdFx0XHRcdFx0YXR0cmlidXRlcy5leHBpcmVzID0gZXhwaXJlcztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFdlJ3JlIHVzaW5nIFwiZXhwaXJlc1wiIGJlY2F1c2UgXCJtYXgtYWdlXCIgaXMgbm90IHN1cHBvcnRlZCBieSBJRVxuXHRcdFx0XHRhdHRyaWJ1dGVzLmV4cGlyZXMgPSBhdHRyaWJ1dGVzLmV4cGlyZXMgPyBhdHRyaWJ1dGVzLmV4cGlyZXMudG9VVENTdHJpbmcoKSA6ICcnO1xuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0cmVzdWx0ID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuXHRcdFx0XHRcdGlmICgvXltcXHtcXFtdLy50ZXN0KHJlc3VsdCkpIHtcblx0XHRcdFx0XHRcdHZhbHVlID0gcmVzdWx0O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBjYXRjaCAoZSkge31cblxuXHRcdFx0XHRpZiAoIWNvbnZlcnRlci53cml0ZSkge1xuXHRcdFx0XHRcdHZhbHVlID0gZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh2YWx1ZSkpXG5cdFx0XHRcdFx0XHQucmVwbGFjZSgvJSgyM3wyNHwyNnwyQnwzQXwzQ3wzRXwzRHwyRnwzRnw0MHw1Qnw1RHw1RXw2MHw3Qnw3RHw3QykvZywgZGVjb2RlVVJJQ29tcG9uZW50KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGNvbnZlcnRlci53cml0ZSh2YWx1ZSwga2V5KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGtleSA9IGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoa2V5KSk7XG5cdFx0XHRcdGtleSA9IGtleS5yZXBsYWNlKC8lKDIzfDI0fDI2fDJCfDVFfDYwfDdDKS9nLCBkZWNvZGVVUklDb21wb25lbnQpO1xuXHRcdFx0XHRrZXkgPSBrZXkucmVwbGFjZSgvW1xcKFxcKV0vZywgZXNjYXBlKTtcblxuXHRcdFx0XHR2YXIgc3RyaW5naWZpZWRBdHRyaWJ1dGVzID0gJyc7XG5cblx0XHRcdFx0Zm9yICh2YXIgYXR0cmlidXRlTmFtZSBpbiBhdHRyaWJ1dGVzKSB7XG5cdFx0XHRcdFx0aWYgKCFhdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdKSB7XG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0c3RyaW5naWZpZWRBdHRyaWJ1dGVzICs9ICc7ICcgKyBhdHRyaWJ1dGVOYW1lO1xuXHRcdFx0XHRcdGlmIChhdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdID09PSB0cnVlKSB7XG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0c3RyaW5naWZpZWRBdHRyaWJ1dGVzICs9ICc9JyArIGF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV07XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIChkb2N1bWVudC5jb29raWUgPSBrZXkgKyAnPScgKyB2YWx1ZSArIHN0cmluZ2lmaWVkQXR0cmlidXRlcyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJlYWRcblxuXHRcdFx0aWYgKCFrZXkpIHtcblx0XHRcdFx0cmVzdWx0ID0ge307XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRvIHByZXZlbnQgdGhlIGZvciBsb29wIGluIHRoZSBmaXJzdCBwbGFjZSBhc3NpZ24gYW4gZW1wdHkgYXJyYXlcblx0XHRcdC8vIGluIGNhc2UgdGhlcmUgYXJlIG5vIGNvb2tpZXMgYXQgYWxsLiBBbHNvIHByZXZlbnRzIG9kZCByZXN1bHQgd2hlblxuXHRcdFx0Ly8gY2FsbGluZyBcImdldCgpXCJcblx0XHRcdHZhciBjb29raWVzID0gZG9jdW1lbnQuY29va2llID8gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7ICcpIDogW107XG5cdFx0XHR2YXIgcmRlY29kZSA9IC8oJVswLTlBLVpdezJ9KSsvZztcblx0XHRcdHZhciBpID0gMDtcblxuXHRcdFx0Zm9yICg7IGkgPCBjb29raWVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHZhciBwYXJ0cyA9IGNvb2tpZXNbaV0uc3BsaXQoJz0nKTtcblx0XHRcdFx0dmFyIGNvb2tpZSA9IHBhcnRzLnNsaWNlKDEpLmpvaW4oJz0nKTtcblxuXHRcdFx0XHRpZiAoIXRoaXMuanNvbiAmJiBjb29raWUuY2hhckF0KDApID09PSAnXCInKSB7XG5cdFx0XHRcdFx0Y29va2llID0gY29va2llLnNsaWNlKDEsIC0xKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0dmFyIG5hbWUgPSBwYXJ0c1swXS5yZXBsYWNlKHJkZWNvZGUsIGRlY29kZVVSSUNvbXBvbmVudCk7XG5cdFx0XHRcdFx0Y29va2llID0gY29udmVydGVyLnJlYWQgP1xuXHRcdFx0XHRcdFx0Y29udmVydGVyLnJlYWQoY29va2llLCBuYW1lKSA6IGNvbnZlcnRlcihjb29raWUsIG5hbWUpIHx8XG5cdFx0XHRcdFx0XHRjb29raWUucmVwbGFjZShyZGVjb2RlLCBkZWNvZGVVUklDb21wb25lbnQpO1xuXG5cdFx0XHRcdFx0aWYgKHRoaXMuanNvbikge1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0Y29va2llID0gSlNPTi5wYXJzZShjb29raWUpO1xuXHRcdFx0XHRcdFx0fSBjYXRjaCAoZSkge31cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoa2V5ID09PSBuYW1lKSB7XG5cdFx0XHRcdFx0XHRyZXN1bHQgPSBjb29raWU7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoIWtleSkge1xuXHRcdFx0XHRcdFx0cmVzdWx0W25hbWVdID0gY29va2llO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBjYXRjaCAoZSkge31cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9XG5cblx0XHRhcGkuc2V0ID0gYXBpO1xuXHRcdGFwaS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdFx0XHRyZXR1cm4gYXBpLmNhbGwoYXBpLCBrZXkpO1xuXHRcdH07XG5cdFx0YXBpLmdldEpTT04gPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gYXBpLmFwcGx5KHtcblx0XHRcdFx0anNvbjogdHJ1ZVxuXHRcdFx0fSwgW10uc2xpY2UuY2FsbChhcmd1bWVudHMpKTtcblx0XHR9O1xuXHRcdGFwaS5kZWZhdWx0cyA9IHt9O1xuXG5cdFx0YXBpLnJlbW92ZSA9IGZ1bmN0aW9uIChrZXksIGF0dHJpYnV0ZXMpIHtcblx0XHRcdGFwaShrZXksICcnLCBleHRlbmQoYXR0cmlidXRlcywge1xuXHRcdFx0XHRleHBpcmVzOiAtMVxuXHRcdFx0fSkpO1xuXHRcdH07XG5cblx0XHRhcGkud2l0aENvbnZlcnRlciA9IGluaXQ7XG5cblx0XHRyZXR1cm4gYXBpO1xuXHR9XG5cblx0cmV0dXJuIGluaXQoZnVuY3Rpb24gKCkge30pO1xufSkpO1xuIiwiLyoqXG4gKiBsb2Rhc2ggKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL2pxdWVyeS5vcmcvPlxuICogUmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICovXG5cbi8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG52YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBOQU4gPSAwIC8gMDtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXG4vKiogVXNlZCB0byBtYXRjaCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLiAqL1xudmFyIHJlVHJpbSA9IC9eXFxzK3xcXHMrJC9nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmFkIHNpZ25lZCBoZXhhZGVjaW1hbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCYWRIZXggPSAvXlstK10weFswLTlhLWZdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJpbmFyeSBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCaW5hcnkgPSAvXjBiWzAxXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBvY3RhbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNPY3RhbCA9IC9eMG9bMC03XSskL2k7XG5cbi8qKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB3aXRob3V0IGEgZGVwZW5kZW5jeSBvbiBgcm9vdGAuICovXG52YXIgZnJlZVBhcnNlSW50ID0gcGFyc2VJbnQ7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG52YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG52YXIgZnJlZVNlbGYgPSB0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcblxuLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG52YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVNYXggPSBNYXRoLm1heCxcbiAgICBuYXRpdmVNaW4gPSBNYXRoLm1pbjtcblxuLyoqXG4gKiBHZXRzIHRoZSB0aW1lc3RhbXAgb2YgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCBoYXZlIGVsYXBzZWQgc2luY2VcbiAqIHRoZSBVbml4IGVwb2NoICgxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMi40LjBcbiAqIEBjYXRlZ29yeSBEYXRlXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lc3RhbXAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uZGVmZXIoZnVuY3Rpb24oc3RhbXApIHtcbiAqICAgY29uc29sZS5sb2coXy5ub3coKSAtIHN0YW1wKTtcbiAqIH0sIF8ubm93KCkpO1xuICogLy8gPT4gTG9ncyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpdCB0b29rIGZvciB0aGUgZGVmZXJyZWQgaW52b2NhdGlvbi5cbiAqL1xudmFyIG5vdyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gcm9vdC5EYXRlLm5vdygpO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgZGVsYXlzIGludm9raW5nIGBmdW5jYCB1bnRpbCBhZnRlciBgd2FpdGBcbiAqIG1pbGxpc2Vjb25kcyBoYXZlIGVsYXBzZWQgc2luY2UgdGhlIGxhc3QgdGltZSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHdhc1xuICogaW52b2tlZC4gVGhlIGRlYm91bmNlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGAgbWV0aG9kIHRvIGNhbmNlbFxuICogZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG8gaW1tZWRpYXRlbHkgaW52b2tlIHRoZW0uXG4gKiBQcm92aWRlIGBvcHRpb25zYCB0byBpbmRpY2F0ZSB3aGV0aGVyIGBmdW5jYCBzaG91bGQgYmUgaW52b2tlZCBvbiB0aGVcbiAqIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWRcbiAqIHdpdGggdGhlIGxhc3QgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24uIFN1YnNlcXVlbnRcbiAqIGNhbGxzIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgXG4gKiBpbnZvY2F0aW9uLlxuICpcbiAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXNcbiAqIGludm9rZWQgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG4gKiBpcyBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gKlxuICogSWYgYHdhaXRgIGlzIGAwYCBhbmQgYGxlYWRpbmdgIGlzIGBmYWxzZWAsIGBmdW5jYCBpbnZvY2F0aW9uIGlzIGRlZmVycmVkXG4gKiB1bnRpbCB0byB0aGUgbmV4dCB0aWNrLCBzaW1pbGFyIHRvIGBzZXRUaW1lb3V0YCB3aXRoIGEgdGltZW91dCBvZiBgMGAuXG4gKlxuICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG4gKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLmRlYm91bmNlYCBhbmQgYF8udGhyb3R0bGVgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2UuXG4gKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz1mYWxzZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF1cbiAqICBUaGUgbWF4aW11bSB0aW1lIGBmdW5jYCBpcyBhbGxvd2VkIHRvIGJlIGRlbGF5ZWQgYmVmb3JlIGl0J3MgaW52b2tlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZGVib3VuY2VkIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiAvLyBBdm9pZCBjb3N0bHkgY2FsY3VsYXRpb25zIHdoaWxlIHRoZSB3aW5kb3cgc2l6ZSBpcyBpbiBmbHV4LlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3Jlc2l6ZScsIF8uZGVib3VuY2UoY2FsY3VsYXRlTGF5b3V0LCAxNTApKTtcbiAqXG4gKiAvLyBJbnZva2UgYHNlbmRNYWlsYCB3aGVuIGNsaWNrZWQsIGRlYm91bmNpbmcgc3Vic2VxdWVudCBjYWxscy5cbiAqIGpRdWVyeShlbGVtZW50KS5vbignY2xpY2snLCBfLmRlYm91bmNlKHNlbmRNYWlsLCAzMDAsIHtcbiAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuICogICAndHJhaWxpbmcnOiBmYWxzZVxuICogfSkpO1xuICpcbiAqIC8vIEVuc3VyZSBgYmF0Y2hMb2dgIGlzIGludm9rZWQgb25jZSBhZnRlciAxIHNlY29uZCBvZiBkZWJvdW5jZWQgY2FsbHMuXG4gKiB2YXIgZGVib3VuY2VkID0gXy5kZWJvdW5jZShiYXRjaExvZywgMjUwLCB7ICdtYXhXYWl0JzogMTAwMCB9KTtcbiAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcbiAqIGpRdWVyeShzb3VyY2UpLm9uKCdtZXNzYWdlJywgZGVib3VuY2VkKTtcbiAqXG4gKiAvLyBDYW5jZWwgdGhlIHRyYWlsaW5nIGRlYm91bmNlZCBpbnZvY2F0aW9uLlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgZGVib3VuY2VkLmNhbmNlbCk7XG4gKi9cbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgdmFyIGxhc3RBcmdzLFxuICAgICAgbGFzdFRoaXMsXG4gICAgICBtYXhXYWl0LFxuICAgICAgcmVzdWx0LFxuICAgICAgdGltZXJJZCxcbiAgICAgIGxhc3RDYWxsVGltZSxcbiAgICAgIGxhc3RJbnZva2VUaW1lID0gMCxcbiAgICAgIGxlYWRpbmcgPSBmYWxzZSxcbiAgICAgIG1heGluZyA9IGZhbHNlLFxuICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIHdhaXQgPSB0b051bWJlcih3YWl0KSB8fCAwO1xuICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICBsZWFkaW5nID0gISFvcHRpb25zLmxlYWRpbmc7XG4gICAgbWF4aW5nID0gJ21heFdhaXQnIGluIG9wdGlvbnM7XG4gICAgbWF4V2FpdCA9IG1heGluZyA/IG5hdGl2ZU1heCh0b051bWJlcihvcHRpb25zLm1heFdhaXQpIHx8IDAsIHdhaXQpIDogbWF4V2FpdDtcbiAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuICB9XG5cbiAgZnVuY3Rpb24gaW52b2tlRnVuYyh0aW1lKSB7XG4gICAgdmFyIGFyZ3MgPSBsYXN0QXJncyxcbiAgICAgICAgdGhpc0FyZyA9IGxhc3RUaGlzO1xuXG4gICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gbGVhZGluZ0VkZ2UodGltZSkge1xuICAgIC8vIFJlc2V0IGFueSBgbWF4V2FpdGAgdGltZXIuXG4gICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuICAgIC8vIFN0YXJ0IHRoZSB0aW1lciBmb3IgdGhlIHRyYWlsaW5nIGVkZ2UuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAvLyBJbnZva2UgdGhlIGxlYWRpbmcgZWRnZS5cbiAgICByZXR1cm4gbGVhZGluZyA/IGludm9rZUZ1bmModGltZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiByZW1haW5pbmdXYWl0KHRpbWUpIHtcbiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lLFxuICAgICAgICByZXN1bHQgPSB3YWl0IC0gdGltZVNpbmNlTGFzdENhbGw7XG5cbiAgICByZXR1cm4gbWF4aW5nID8gbmF0aXZlTWluKHJlc3VsdCwgbWF4V2FpdCAtIHRpbWVTaW5jZUxhc3RJbnZva2UpIDogcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvdWxkSW52b2tlKHRpbWUpIHtcbiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lO1xuXG4gICAgLy8gRWl0aGVyIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIGFjdGl2aXR5IGhhcyBzdG9wcGVkIGFuZCB3ZSdyZSBhdCB0aGVcbiAgICAvLyB0cmFpbGluZyBlZGdlLCB0aGUgc3lzdGVtIHRpbWUgaGFzIGdvbmUgYmFja3dhcmRzIGFuZCB3ZSdyZSB0cmVhdGluZ1xuICAgIC8vIGl0IGFzIHRoZSB0cmFpbGluZyBlZGdlLCBvciB3ZSd2ZSBoaXQgdGhlIGBtYXhXYWl0YCBsaW1pdC5cbiAgICByZXR1cm4gKGxhc3RDYWxsVGltZSA9PT0gdW5kZWZpbmVkIHx8ICh0aW1lU2luY2VMYXN0Q2FsbCA+PSB3YWl0KSB8fFxuICAgICAgKHRpbWVTaW5jZUxhc3RDYWxsIDwgMCkgfHwgKG1heGluZyAmJiB0aW1lU2luY2VMYXN0SW52b2tlID49IG1heFdhaXQpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRpbWVyRXhwaXJlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpO1xuICAgIGlmIChzaG91bGRJbnZva2UodGltZSkpIHtcbiAgICAgIHJldHVybiB0cmFpbGluZ0VkZ2UodGltZSk7XG4gICAgfVxuICAgIC8vIFJlc3RhcnQgdGhlIHRpbWVyLlxuICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgcmVtYWluaW5nV2FpdCh0aW1lKSk7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFpbGluZ0VkZ2UodGltZSkge1xuICAgIHRpbWVySWQgPSB1bmRlZmluZWQ7XG5cbiAgICAvLyBPbmx5IGludm9rZSBpZiB3ZSBoYXZlIGBsYXN0QXJnc2Agd2hpY2ggbWVhbnMgYGZ1bmNgIGhhcyBiZWVuXG4gICAgLy8gZGVib3VuY2VkIGF0IGxlYXN0IG9uY2UuXG4gICAgaWYgKHRyYWlsaW5nICYmIGxhc3RBcmdzKSB7XG4gICAgICByZXR1cm4gaW52b2tlRnVuYyh0aW1lKTtcbiAgICB9XG4gICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgIGlmICh0aW1lcklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcklkKTtcbiAgICB9XG4gICAgbGFzdEludm9rZVRpbWUgPSAwO1xuICAgIGxhc3RBcmdzID0gbGFzdENhbGxUaW1lID0gbGFzdFRoaXMgPSB0aW1lcklkID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgcmV0dXJuIHRpbWVySWQgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IHRyYWlsaW5nRWRnZShub3coKSk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG4gICAgdmFyIHRpbWUgPSBub3coKSxcbiAgICAgICAgaXNJbnZva2luZyA9IHNob3VsZEludm9rZSh0aW1lKTtcblxuICAgIGxhc3RBcmdzID0gYXJndW1lbnRzO1xuICAgIGxhc3RUaGlzID0gdGhpcztcbiAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lO1xuXG4gICAgaWYgKGlzSW52b2tpbmcpIHtcbiAgICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGxlYWRpbmdFZGdlKGxhc3RDYWxsVGltZSk7XG4gICAgICB9XG4gICAgICBpZiAobWF4aW5nKSB7XG4gICAgICAgIC8vIEhhbmRsZSBpbnZvY2F0aW9ucyBpbiBhIHRpZ2h0IGxvb3AuXG4gICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgICAgIHJldHVybiBpbnZva2VGdW5jKGxhc3RDYWxsVGltZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgZGVib3VuY2VkLmNhbmNlbCA9IGNhbmNlbDtcbiAgZGVib3VuY2VkLmZsdXNoID0gZmx1c2g7XG4gIHJldHVybiBkZWJvdW5jZWQ7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHRocm90dGxlZCBmdW5jdGlvbiB0aGF0IG9ubHkgaW52b2tlcyBgZnVuY2AgYXQgbW9zdCBvbmNlIHBlclxuICogZXZlcnkgYHdhaXRgIG1pbGxpc2Vjb25kcy4gVGhlIHRocm90dGxlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGBcbiAqIG1ldGhvZCB0byBjYW5jZWwgZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG9cbiAqIGltbWVkaWF0ZWx5IGludm9rZSB0aGVtLiBQcm92aWRlIGBvcHRpb25zYCB0byBpbmRpY2F0ZSB3aGV0aGVyIGBmdW5jYFxuICogc2hvdWxkIGJlIGludm9rZWQgb24gdGhlIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YFxuICogdGltZW91dC4gVGhlIGBmdW5jYCBpcyBpbnZva2VkIHdpdGggdGhlIGxhc3QgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZVxuICogdGhyb3R0bGVkIGZ1bmN0aW9uLiBTdWJzZXF1ZW50IGNhbGxzIHRvIHRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gcmV0dXJuIHRoZVxuICogcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYCBpbnZvY2F0aW9uLlxuICpcbiAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXNcbiAqIGludm9rZWQgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uXG4gKiBpcyBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gKlxuICogSWYgYHdhaXRgIGlzIGAwYCBhbmQgYGxlYWRpbmdgIGlzIGBmYWxzZWAsIGBmdW5jYCBpbnZvY2F0aW9uIGlzIGRlZmVycmVkXG4gKiB1bnRpbCB0byB0aGUgbmV4dCB0aWNrLCBzaW1pbGFyIHRvIGBzZXRUaW1lb3V0YCB3aXRoIGEgdGltZW91dCBvZiBgMGAuXG4gKlxuICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG4gKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLnRocm90dGxlYCBhbmQgYF8uZGVib3VuY2VgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gdGhyb3R0bGUuXG4gKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gdGhyb3R0bGUgaW52b2NhdGlvbnMgdG8uXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz10cnVlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgdGhyb3R0bGVkIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiAvLyBBdm9pZCBleGNlc3NpdmVseSB1cGRhdGluZyB0aGUgcG9zaXRpb24gd2hpbGUgc2Nyb2xsaW5nLlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3Njcm9sbCcsIF8udGhyb3R0bGUodXBkYXRlUG9zaXRpb24sIDEwMCkpO1xuICpcbiAqIC8vIEludm9rZSBgcmVuZXdUb2tlbmAgd2hlbiB0aGUgY2xpY2sgZXZlbnQgaXMgZmlyZWQsIGJ1dCBub3QgbW9yZSB0aGFuIG9uY2UgZXZlcnkgNSBtaW51dGVzLlxuICogdmFyIHRocm90dGxlZCA9IF8udGhyb3R0bGUocmVuZXdUb2tlbiwgMzAwMDAwLCB7ICd0cmFpbGluZyc6IGZhbHNlIH0pO1xuICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIHRocm90dGxlZCk7XG4gKlxuICogLy8gQ2FuY2VsIHRoZSB0cmFpbGluZyB0aHJvdHRsZWQgaW52b2NhdGlvbi5cbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIHRocm90dGxlZC5jYW5jZWwpO1xuICovXG5mdW5jdGlvbiB0aHJvdHRsZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gIHZhciBsZWFkaW5nID0gdHJ1ZSxcbiAgICAgIHRyYWlsaW5nID0gdHJ1ZTtcblxuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICBsZWFkaW5nID0gJ2xlYWRpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMubGVhZGluZyA6IGxlYWRpbmc7XG4gICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgfVxuICByZXR1cm4gZGVib3VuY2UoZnVuYywgd2FpdCwge1xuICAgICdsZWFkaW5nJzogbGVhZGluZyxcbiAgICAnbWF4V2FpdCc6IHdhaXQsXG4gICAgJ3RyYWlsaW5nJzogdHJhaWxpbmdcbiAgfSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG4gKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpXG4gKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN5bWJvbCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1N5bWJvbCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8XG4gICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgbnVtYmVyLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbnVtYmVyLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvTnVtYmVyKDMuMik7XG4gKiAvLyA9PiAzLjJcbiAqXG4gKiBfLnRvTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gNWUtMzI0XG4gKlxuICogXy50b051bWJlcihJbmZpbml0eSk7XG4gKiAvLyA9PiBJbmZpbml0eVxuICpcbiAqIF8udG9OdW1iZXIoJzMuMicpO1xuICogLy8gPT4gMy4yXG4gKi9cbmZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiBOQU47XG4gIH1cbiAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgIHZhciBvdGhlciA9IHR5cGVvZiB2YWx1ZS52YWx1ZU9mID09ICdmdW5jdGlvbicgPyB2YWx1ZS52YWx1ZU9mKCkgOiB2YWx1ZTtcbiAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IChvdGhlciArICcnKSA6IG90aGVyO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6ICt2YWx1ZTtcbiAgfVxuICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UocmVUcmltLCAnJyk7XG4gIHZhciBpc0JpbmFyeSA9IHJlSXNCaW5hcnkudGVzdCh2YWx1ZSk7XG4gIHJldHVybiAoaXNCaW5hcnkgfHwgcmVJc09jdGFsLnRlc3QodmFsdWUpKVxuICAgID8gZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCBpc0JpbmFyeSA/IDIgOiA4KVxuICAgIDogKHJlSXNCYWRIZXgudGVzdCh2YWx1ZSkgPyBOQU4gOiArdmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRocm90dGxlO1xuIiwiLypcbiogbG9nbGV2ZWwgLSBodHRwczovL2dpdGh1Yi5jb20vcGltdGVycnkvbG9nbGV2ZWxcbipcbiogQ29weXJpZ2h0IChjKSAyMDEzIFRpbSBQZXJyeVxuKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4qL1xuKGZ1bmN0aW9uIChyb290LCBkZWZpbml0aW9uKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICBkZWZpbmUoZGVmaW5pdGlvbik7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGRlZmluaXRpb24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByb290LmxvZyA9IGRlZmluaXRpb24oKTtcbiAgICB9XG59KHRoaXMsIGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIC8vIFNsaWdodGx5IGR1YmlvdXMgdHJpY2tzIHRvIGN1dCBkb3duIG1pbmltaXplZCBmaWxlIHNpemVcbiAgICB2YXIgbm9vcCA9IGZ1bmN0aW9uKCkge307XG4gICAgdmFyIHVuZGVmaW5lZFR5cGUgPSBcInVuZGVmaW5lZFwiO1xuXG4gICAgdmFyIGxvZ01ldGhvZHMgPSBbXG4gICAgICAgIFwidHJhY2VcIixcbiAgICAgICAgXCJkZWJ1Z1wiLFxuICAgICAgICBcImluZm9cIixcbiAgICAgICAgXCJ3YXJuXCIsXG4gICAgICAgIFwiZXJyb3JcIlxuICAgIF07XG5cbiAgICAvLyBDcm9zcy1icm93c2VyIGJpbmQgZXF1aXZhbGVudCB0aGF0IHdvcmtzIGF0IGxlYXN0IGJhY2sgdG8gSUU2XG4gICAgZnVuY3Rpb24gYmluZE1ldGhvZChvYmosIG1ldGhvZE5hbWUpIHtcbiAgICAgICAgdmFyIG1ldGhvZCA9IG9ialttZXRob2ROYW1lXTtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXRob2QuYmluZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIG1ldGhvZC5iaW5kKG9iaik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKG1ldGhvZCwgb2JqKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBNaXNzaW5nIGJpbmQgc2hpbSBvciBJRTggKyBNb2Rlcm5penIsIGZhbGxiYWNrIHRvIHdyYXBwaW5nXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmFwcGx5KG1ldGhvZCwgW29iaiwgYXJndW1lbnRzXSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEJ1aWxkIHRoZSBiZXN0IGxvZ2dpbmcgbWV0aG9kIHBvc3NpYmxlIGZvciB0aGlzIGVudlxuICAgIC8vIFdoZXJldmVyIHBvc3NpYmxlIHdlIHdhbnQgdG8gYmluZCwgbm90IHdyYXAsIHRvIHByZXNlcnZlIHN0YWNrIHRyYWNlc1xuICAgIGZ1bmN0aW9uIHJlYWxNZXRob2QobWV0aG9kTmFtZSkge1xuICAgICAgICBpZiAobWV0aG9kTmFtZSA9PT0gJ2RlYnVnJykge1xuICAgICAgICAgICAgbWV0aG9kTmFtZSA9ICdsb2cnO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlID09PSB1bmRlZmluZWRUeXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIE5vIG1ldGhvZCBwb3NzaWJsZSwgZm9yIG5vdyAtIGZpeGVkIGxhdGVyIGJ5IGVuYWJsZUxvZ2dpbmdXaGVuQ29uc29sZUFycml2ZXNcbiAgICAgICAgfSBlbHNlIGlmIChjb25zb2xlW21ldGhvZE5hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBiaW5kTWV0aG9kKGNvbnNvbGUsIG1ldGhvZE5hbWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGNvbnNvbGUubG9nICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBiaW5kTWV0aG9kKGNvbnNvbGUsICdsb2cnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBub29wO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gVGhlc2UgcHJpdmF0ZSBmdW5jdGlvbnMgYWx3YXlzIG5lZWQgYHRoaXNgIHRvIGJlIHNldCBwcm9wZXJseVxuXG4gICAgZnVuY3Rpb24gcmVwbGFjZUxvZ2dpbmdNZXRob2RzKGxldmVsLCBsb2dnZXJOYW1lKSB7XG4gICAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbG9nTWV0aG9kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIG1ldGhvZE5hbWUgPSBsb2dNZXRob2RzW2ldO1xuICAgICAgICAgICAgdGhpc1ttZXRob2ROYW1lXSA9IChpIDwgbGV2ZWwpID9cbiAgICAgICAgICAgICAgICBub29wIDpcbiAgICAgICAgICAgICAgICB0aGlzLm1ldGhvZEZhY3RvcnkobWV0aG9kTmFtZSwgbGV2ZWwsIGxvZ2dlck5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGVmaW5lIGxvZy5sb2cgYXMgYW4gYWxpYXMgZm9yIGxvZy5kZWJ1Z1xuICAgICAgICB0aGlzLmxvZyA9IHRoaXMuZGVidWc7XG4gICAgfVxuXG4gICAgLy8gSW4gb2xkIElFIHZlcnNpb25zLCB0aGUgY29uc29sZSBpc24ndCBwcmVzZW50IHVudGlsIHlvdSBmaXJzdCBvcGVuIGl0LlxuICAgIC8vIFdlIGJ1aWxkIHJlYWxNZXRob2QoKSByZXBsYWNlbWVudHMgaGVyZSB0aGF0IHJlZ2VuZXJhdGUgbG9nZ2luZyBtZXRob2RzXG4gICAgZnVuY3Rpb24gZW5hYmxlTG9nZ2luZ1doZW5Db25zb2xlQXJyaXZlcyhtZXRob2ROYW1lLCBsZXZlbCwgbG9nZ2VyTmFtZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSB1bmRlZmluZWRUeXBlKSB7XG4gICAgICAgICAgICAgICAgcmVwbGFjZUxvZ2dpbmdNZXRob2RzLmNhbGwodGhpcywgbGV2ZWwsIGxvZ2dlck5hbWUpO1xuICAgICAgICAgICAgICAgIHRoaXNbbWV0aG9kTmFtZV0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBCeSBkZWZhdWx0LCB3ZSB1c2UgY2xvc2VseSBib3VuZCByZWFsIG1ldGhvZHMgd2hlcmV2ZXIgcG9zc2libGUsIGFuZFxuICAgIC8vIG90aGVyd2lzZSB3ZSB3YWl0IGZvciBhIGNvbnNvbGUgdG8gYXBwZWFyLCBhbmQgdGhlbiB0cnkgYWdhaW4uXG4gICAgZnVuY3Rpb24gZGVmYXVsdE1ldGhvZEZhY3RvcnkobWV0aG9kTmFtZSwgbGV2ZWwsIGxvZ2dlck5hbWUpIHtcbiAgICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgICAgICAgcmV0dXJuIHJlYWxNZXRob2QobWV0aG9kTmFtZSkgfHxcbiAgICAgICAgICAgICAgIGVuYWJsZUxvZ2dpbmdXaGVuQ29uc29sZUFycml2ZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBMb2dnZXIobmFtZSwgZGVmYXVsdExldmVsLCBmYWN0b3J5KSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgY3VycmVudExldmVsO1xuICAgICAgdmFyIHN0b3JhZ2VLZXkgPSBcImxvZ2xldmVsXCI7XG4gICAgICBpZiAobmFtZSkge1xuICAgICAgICBzdG9yYWdlS2V5ICs9IFwiOlwiICsgbmFtZTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcGVyc2lzdExldmVsSWZQb3NzaWJsZShsZXZlbE51bSkge1xuICAgICAgICAgIHZhciBsZXZlbE5hbWUgPSAobG9nTWV0aG9kc1tsZXZlbE51bV0gfHwgJ3NpbGVudCcpLnRvVXBwZXJDYXNlKCk7XG5cbiAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gdW5kZWZpbmVkVHlwZSkgcmV0dXJuO1xuXG4gICAgICAgICAgLy8gVXNlIGxvY2FsU3RvcmFnZSBpZiBhdmFpbGFibGVcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlW3N0b3JhZ2VLZXldID0gbGV2ZWxOYW1lO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSBjYXRjaCAoaWdub3JlKSB7fVxuXG4gICAgICAgICAgLy8gVXNlIHNlc3Npb24gY29va2llIGFzIGZhbGxiYWNrXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LmNvb2tpZSA9XG4gICAgICAgICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHN0b3JhZ2VLZXkpICsgXCI9XCIgKyBsZXZlbE5hbWUgKyBcIjtcIjtcbiAgICAgICAgICB9IGNhdGNoIChpZ25vcmUpIHt9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGdldFBlcnNpc3RlZExldmVsKCkge1xuICAgICAgICAgIHZhciBzdG9yZWRMZXZlbDtcblxuICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSB1bmRlZmluZWRUeXBlKSByZXR1cm47XG5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBzdG9yZWRMZXZlbCA9IHdpbmRvdy5sb2NhbFN0b3JhZ2Vbc3RvcmFnZUtleV07XG4gICAgICAgICAgfSBjYXRjaCAoaWdub3JlKSB7fVxuXG4gICAgICAgICAgLy8gRmFsbGJhY2sgdG8gY29va2llcyBpZiBsb2NhbCBzdG9yYWdlIGdpdmVzIHVzIG5vdGhpbmdcbiAgICAgICAgICBpZiAodHlwZW9mIHN0b3JlZExldmVsID09PSB1bmRlZmluZWRUeXBlKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICB2YXIgY29va2llID0gd2luZG93LmRvY3VtZW50LmNvb2tpZTtcbiAgICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IGNvb2tpZS5pbmRleE9mKFxuICAgICAgICAgICAgICAgICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChzdG9yYWdlS2V5KSArIFwiPVwiKTtcbiAgICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbiAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICBzdG9yZWRMZXZlbCA9IC9eKFteO10rKS8uZXhlYyhjb29raWUuc2xpY2UobG9jYXRpb24pKVsxXTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBjYXRjaCAoaWdub3JlKSB7fVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIElmIHRoZSBzdG9yZWQgbGV2ZWwgaXMgbm90IHZhbGlkLCB0cmVhdCBpdCBhcyBpZiBub3RoaW5nIHdhcyBzdG9yZWQuXG4gICAgICAgICAgaWYgKHNlbGYubGV2ZWxzW3N0b3JlZExldmVsXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHN0b3JlZExldmVsID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBzdG9yZWRMZXZlbDtcbiAgICAgIH1cblxuICAgICAgLypcbiAgICAgICAqXG4gICAgICAgKiBQdWJsaWMgbG9nZ2VyIEFQSSAtIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGltdGVycnkvbG9nbGV2ZWwgZm9yIGRldGFpbHNcbiAgICAgICAqXG4gICAgICAgKi9cblxuICAgICAgc2VsZi5uYW1lID0gbmFtZTtcblxuICAgICAgc2VsZi5sZXZlbHMgPSB7IFwiVFJBQ0VcIjogMCwgXCJERUJVR1wiOiAxLCBcIklORk9cIjogMiwgXCJXQVJOXCI6IDMsXG4gICAgICAgICAgXCJFUlJPUlwiOiA0LCBcIlNJTEVOVFwiOiA1fTtcblxuICAgICAgc2VsZi5tZXRob2RGYWN0b3J5ID0gZmFjdG9yeSB8fCBkZWZhdWx0TWV0aG9kRmFjdG9yeTtcblxuICAgICAgc2VsZi5nZXRMZXZlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gY3VycmVudExldmVsO1xuICAgICAgfTtcblxuICAgICAgc2VsZi5zZXRMZXZlbCA9IGZ1bmN0aW9uIChsZXZlbCwgcGVyc2lzdCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgbGV2ZWwgPT09IFwic3RyaW5nXCIgJiYgc2VsZi5sZXZlbHNbbGV2ZWwudG9VcHBlckNhc2UoKV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBsZXZlbCA9IHNlbGYubGV2ZWxzW2xldmVsLnRvVXBwZXJDYXNlKCldO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodHlwZW9mIGxldmVsID09PSBcIm51bWJlclwiICYmIGxldmVsID49IDAgJiYgbGV2ZWwgPD0gc2VsZi5sZXZlbHMuU0lMRU5UKSB7XG4gICAgICAgICAgICAgIGN1cnJlbnRMZXZlbCA9IGxldmVsO1xuICAgICAgICAgICAgICBpZiAocGVyc2lzdCAhPT0gZmFsc2UpIHsgIC8vIGRlZmF1bHRzIHRvIHRydWVcbiAgICAgICAgICAgICAgICAgIHBlcnNpc3RMZXZlbElmUG9zc2libGUobGV2ZWwpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJlcGxhY2VMb2dnaW5nTWV0aG9kcy5jYWxsKHNlbGYsIGxldmVsLCBuYW1lKTtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlID09PSB1bmRlZmluZWRUeXBlICYmIGxldmVsIDwgc2VsZi5sZXZlbHMuU0lMRU5UKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gXCJObyBjb25zb2xlIGF2YWlsYWJsZSBmb3IgbG9nZ2luZ1wiO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhyb3cgXCJsb2cuc2V0TGV2ZWwoKSBjYWxsZWQgd2l0aCBpbnZhbGlkIGxldmVsOiBcIiArIGxldmVsO1xuICAgICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHNlbGYuc2V0RGVmYXVsdExldmVsID0gZnVuY3Rpb24gKGxldmVsKSB7XG4gICAgICAgICAgaWYgKCFnZXRQZXJzaXN0ZWRMZXZlbCgpKSB7XG4gICAgICAgICAgICAgIHNlbGYuc2V0TGV2ZWwobGV2ZWwsIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBzZWxmLmVuYWJsZUFsbCA9IGZ1bmN0aW9uKHBlcnNpc3QpIHtcbiAgICAgICAgICBzZWxmLnNldExldmVsKHNlbGYubGV2ZWxzLlRSQUNFLCBwZXJzaXN0KTtcbiAgICAgIH07XG5cbiAgICAgIHNlbGYuZGlzYWJsZUFsbCA9IGZ1bmN0aW9uKHBlcnNpc3QpIHtcbiAgICAgICAgICBzZWxmLnNldExldmVsKHNlbGYubGV2ZWxzLlNJTEVOVCwgcGVyc2lzdCk7XG4gICAgICB9O1xuXG4gICAgICAvLyBJbml0aWFsaXplIHdpdGggdGhlIHJpZ2h0IGxldmVsXG4gICAgICB2YXIgaW5pdGlhbExldmVsID0gZ2V0UGVyc2lzdGVkTGV2ZWwoKTtcbiAgICAgIGlmIChpbml0aWFsTGV2ZWwgPT0gbnVsbCkge1xuICAgICAgICAgIGluaXRpYWxMZXZlbCA9IGRlZmF1bHRMZXZlbCA9PSBudWxsID8gXCJXQVJOXCIgOiBkZWZhdWx0TGV2ZWw7XG4gICAgICB9XG4gICAgICBzZWxmLnNldExldmVsKGluaXRpYWxMZXZlbCwgZmFsc2UpO1xuICAgIH1cblxuICAgIC8qXG4gICAgICpcbiAgICAgKiBUb3AtbGV2ZWwgQVBJXG4gICAgICpcbiAgICAgKi9cblxuICAgIHZhciBkZWZhdWx0TG9nZ2VyID0gbmV3IExvZ2dlcigpO1xuXG4gICAgdmFyIF9sb2dnZXJzQnlOYW1lID0ge307XG4gICAgZGVmYXVsdExvZ2dlci5nZXRMb2dnZXIgPSBmdW5jdGlvbiBnZXRMb2dnZXIobmFtZSkge1xuICAgICAgICBpZiAodHlwZW9mIG5hbWUgIT09IFwic3RyaW5nXCIgfHwgbmFtZSA9PT0gXCJcIikge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJZb3UgbXVzdCBzdXBwbHkgYSBuYW1lIHdoZW4gY3JlYXRpbmcgYSBsb2dnZXIuXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGxvZ2dlciA9IF9sb2dnZXJzQnlOYW1lW25hbWVdO1xuICAgICAgICBpZiAoIWxvZ2dlcikge1xuICAgICAgICAgIGxvZ2dlciA9IF9sb2dnZXJzQnlOYW1lW25hbWVdID0gbmV3IExvZ2dlcihcbiAgICAgICAgICAgIG5hbWUsIGRlZmF1bHRMb2dnZXIuZ2V0TGV2ZWwoKSwgZGVmYXVsdExvZ2dlci5tZXRob2RGYWN0b3J5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbG9nZ2VyO1xuICAgIH07XG5cbiAgICAvLyBHcmFiIHRoZSBjdXJyZW50IGdsb2JhbCBsb2cgdmFyaWFibGUgaW4gY2FzZSBvZiBvdmVyd3JpdGVcbiAgICB2YXIgX2xvZyA9ICh0eXBlb2Ygd2luZG93ICE9PSB1bmRlZmluZWRUeXBlKSA/IHdpbmRvdy5sb2cgOiB1bmRlZmluZWQ7XG4gICAgZGVmYXVsdExvZ2dlci5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSB1bmRlZmluZWRUeXBlICYmXG4gICAgICAgICAgICAgICB3aW5kb3cubG9nID09PSBkZWZhdWx0TG9nZ2VyKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9nID0gX2xvZztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkZWZhdWx0TG9nZ2VyO1xuICAgIH07XG5cbiAgICBkZWZhdWx0TG9nZ2VyLmdldExvZ2dlcnMgPSBmdW5jdGlvbiBnZXRMb2dnZXJzKCkge1xuICAgICAgICByZXR1cm4gX2xvZ2dlcnNCeU5hbWU7XG4gICAgfTtcblxuICAgIHJldHVybiBkZWZhdWx0TG9nZ2VyO1xufSkpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXNhcCA9IHJlcXVpcmUoJ2FzYXAvcmF3Jyk7XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG4vLyBTdGF0ZXM6XG4vL1xuLy8gMCAtIHBlbmRpbmdcbi8vIDEgLSBmdWxmaWxsZWQgd2l0aCBfdmFsdWVcbi8vIDIgLSByZWplY3RlZCB3aXRoIF92YWx1ZVxuLy8gMyAtIGFkb3B0ZWQgdGhlIHN0YXRlIG9mIGFub3RoZXIgcHJvbWlzZSwgX3ZhbHVlXG4vL1xuLy8gb25jZSB0aGUgc3RhdGUgaXMgbm8gbG9uZ2VyIHBlbmRpbmcgKDApIGl0IGlzIGltbXV0YWJsZVxuXG4vLyBBbGwgYF9gIHByZWZpeGVkIHByb3BlcnRpZXMgd2lsbCBiZSByZWR1Y2VkIHRvIGBfe3JhbmRvbSBudW1iZXJ9YFxuLy8gYXQgYnVpbGQgdGltZSB0byBvYmZ1c2NhdGUgdGhlbSBhbmQgZGlzY291cmFnZSB0aGVpciB1c2UuXG4vLyBXZSBkb24ndCB1c2Ugc3ltYm9scyBvciBPYmplY3QuZGVmaW5lUHJvcGVydHkgdG8gZnVsbHkgaGlkZSB0aGVtXG4vLyBiZWNhdXNlIHRoZSBwZXJmb3JtYW5jZSBpc24ndCBnb29kIGVub3VnaC5cblxuXG4vLyB0byBhdm9pZCB1c2luZyB0cnkvY2F0Y2ggaW5zaWRlIGNyaXRpY2FsIGZ1bmN0aW9ucywgd2Vcbi8vIGV4dHJhY3QgdGhlbSB0byBoZXJlLlxudmFyIExBU1RfRVJST1IgPSBudWxsO1xudmFyIElTX0VSUk9SID0ge307XG5mdW5jdGlvbiBnZXRUaGVuKG9iaikge1xuICB0cnkge1xuICAgIHJldHVybiBvYmoudGhlbjtcbiAgfSBjYXRjaCAoZXgpIHtcbiAgICBMQVNUX0VSUk9SID0gZXg7XG4gICAgcmV0dXJuIElTX0VSUk9SO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRyeUNhbGxPbmUoZm4sIGEpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZm4oYSk7XG4gIH0gY2F0Y2ggKGV4KSB7XG4gICAgTEFTVF9FUlJPUiA9IGV4O1xuICAgIHJldHVybiBJU19FUlJPUjtcbiAgfVxufVxuZnVuY3Rpb24gdHJ5Q2FsbFR3byhmbiwgYSwgYikge1xuICB0cnkge1xuICAgIGZuKGEsIGIpO1xuICB9IGNhdGNoIChleCkge1xuICAgIExBU1RfRVJST1IgPSBleDtcbiAgICByZXR1cm4gSVNfRVJST1I7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBQcm9taXNlO1xuXG5mdW5jdGlvbiBQcm9taXNlKGZuKSB7XG4gIGlmICh0eXBlb2YgdGhpcyAhPT0gJ29iamVjdCcpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdQcm9taXNlcyBtdXN0IGJlIGNvbnN0cnVjdGVkIHZpYSBuZXcnKTtcbiAgfVxuICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJvbWlzZSBjb25zdHJ1Y3RvclxcJ3MgYXJndW1lbnQgaXMgbm90IGEgZnVuY3Rpb24nKTtcbiAgfVxuICB0aGlzLl83NSA9IDA7XG4gIHRoaXMuXzgzID0gMDtcbiAgdGhpcy5fMTggPSBudWxsO1xuICB0aGlzLl8zOCA9IG51bGw7XG4gIGlmIChmbiA9PT0gbm9vcCkgcmV0dXJuO1xuICBkb1Jlc29sdmUoZm4sIHRoaXMpO1xufVxuUHJvbWlzZS5fNDcgPSBudWxsO1xuUHJvbWlzZS5fNzEgPSBudWxsO1xuUHJvbWlzZS5fNDQgPSBub29wO1xuXG5Qcm9taXNlLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgaWYgKHRoaXMuY29uc3RydWN0b3IgIT09IFByb21pc2UpIHtcbiAgICByZXR1cm4gc2FmZVRoZW4odGhpcywgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpO1xuICB9XG4gIHZhciByZXMgPSBuZXcgUHJvbWlzZShub29wKTtcbiAgaGFuZGxlKHRoaXMsIG5ldyBIYW5kbGVyKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCByZXMpKTtcbiAgcmV0dXJuIHJlcztcbn07XG5cbmZ1bmN0aW9uIHNhZmVUaGVuKHNlbGYsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG4gIHJldHVybiBuZXcgc2VsZi5jb25zdHJ1Y3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIHJlcyA9IG5ldyBQcm9taXNlKG5vb3ApO1xuICAgIHJlcy50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgaGFuZGxlKHNlbGYsIG5ldyBIYW5kbGVyKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCByZXMpKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBoYW5kbGUoc2VsZiwgZGVmZXJyZWQpIHtcbiAgd2hpbGUgKHNlbGYuXzgzID09PSAzKSB7XG4gICAgc2VsZiA9IHNlbGYuXzE4O1xuICB9XG4gIGlmIChQcm9taXNlLl80Nykge1xuICAgIFByb21pc2UuXzQ3KHNlbGYpO1xuICB9XG4gIGlmIChzZWxmLl84MyA9PT0gMCkge1xuICAgIGlmIChzZWxmLl83NSA9PT0gMCkge1xuICAgICAgc2VsZi5fNzUgPSAxO1xuICAgICAgc2VsZi5fMzggPSBkZWZlcnJlZDtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHNlbGYuXzc1ID09PSAxKSB7XG4gICAgICBzZWxmLl83NSA9IDI7XG4gICAgICBzZWxmLl8zOCA9IFtzZWxmLl8zOCwgZGVmZXJyZWRdO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZWxmLl8zOC5wdXNoKGRlZmVycmVkKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaGFuZGxlUmVzb2x2ZWQoc2VsZiwgZGVmZXJyZWQpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVSZXNvbHZlZChzZWxmLCBkZWZlcnJlZCkge1xuICBhc2FwKGZ1bmN0aW9uKCkge1xuICAgIHZhciBjYiA9IHNlbGYuXzgzID09PSAxID8gZGVmZXJyZWQub25GdWxmaWxsZWQgOiBkZWZlcnJlZC5vblJlamVjdGVkO1xuICAgIGlmIChjYiA9PT0gbnVsbCkge1xuICAgICAgaWYgKHNlbGYuXzgzID09PSAxKSB7XG4gICAgICAgIHJlc29sdmUoZGVmZXJyZWQucHJvbWlzZSwgc2VsZi5fMTgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVqZWN0KGRlZmVycmVkLnByb21pc2UsIHNlbGYuXzE4KTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHJldCA9IHRyeUNhbGxPbmUoY2IsIHNlbGYuXzE4KTtcbiAgICBpZiAocmV0ID09PSBJU19FUlJPUikge1xuICAgICAgcmVqZWN0KGRlZmVycmVkLnByb21pc2UsIExBU1RfRVJST1IpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNvbHZlKGRlZmVycmVkLnByb21pc2UsIHJldCk7XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIHJlc29sdmUoc2VsZiwgbmV3VmFsdWUpIHtcbiAgLy8gUHJvbWlzZSBSZXNvbHV0aW9uIFByb2NlZHVyZTogaHR0cHM6Ly9naXRodWIuY29tL3Byb21pc2VzLWFwbHVzL3Byb21pc2VzLXNwZWMjdGhlLXByb21pc2UtcmVzb2x1dGlvbi1wcm9jZWR1cmVcbiAgaWYgKG5ld1ZhbHVlID09PSBzZWxmKSB7XG4gICAgcmV0dXJuIHJlamVjdChcbiAgICAgIHNlbGYsXG4gICAgICBuZXcgVHlwZUVycm9yKCdBIHByb21pc2UgY2Fubm90IGJlIHJlc29sdmVkIHdpdGggaXRzZWxmLicpXG4gICAgKTtcbiAgfVxuICBpZiAoXG4gICAgbmV3VmFsdWUgJiZcbiAgICAodHlwZW9mIG5ld1ZhbHVlID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgbmV3VmFsdWUgPT09ICdmdW5jdGlvbicpXG4gICkge1xuICAgIHZhciB0aGVuID0gZ2V0VGhlbihuZXdWYWx1ZSk7XG4gICAgaWYgKHRoZW4gPT09IElTX0VSUk9SKSB7XG4gICAgICByZXR1cm4gcmVqZWN0KHNlbGYsIExBU1RfRVJST1IpO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICB0aGVuID09PSBzZWxmLnRoZW4gJiZcbiAgICAgIG5ld1ZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZVxuICAgICkge1xuICAgICAgc2VsZi5fODMgPSAzO1xuICAgICAgc2VsZi5fMTggPSBuZXdWYWx1ZTtcbiAgICAgIGZpbmFsZShzZWxmKTtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBkb1Jlc29sdmUodGhlbi5iaW5kKG5ld1ZhbHVlKSwgc2VsZik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIHNlbGYuXzgzID0gMTtcbiAgc2VsZi5fMTggPSBuZXdWYWx1ZTtcbiAgZmluYWxlKHNlbGYpO1xufVxuXG5mdW5jdGlvbiByZWplY3Qoc2VsZiwgbmV3VmFsdWUpIHtcbiAgc2VsZi5fODMgPSAyO1xuICBzZWxmLl8xOCA9IG5ld1ZhbHVlO1xuICBpZiAoUHJvbWlzZS5fNzEpIHtcbiAgICBQcm9taXNlLl83MShzZWxmLCBuZXdWYWx1ZSk7XG4gIH1cbiAgZmluYWxlKHNlbGYpO1xufVxuZnVuY3Rpb24gZmluYWxlKHNlbGYpIHtcbiAgaWYgKHNlbGYuXzc1ID09PSAxKSB7XG4gICAgaGFuZGxlKHNlbGYsIHNlbGYuXzM4KTtcbiAgICBzZWxmLl8zOCA9IG51bGw7XG4gIH1cbiAgaWYgKHNlbGYuXzc1ID09PSAyKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLl8zOC5sZW5ndGg7IGkrKykge1xuICAgICAgaGFuZGxlKHNlbGYsIHNlbGYuXzM4W2ldKTtcbiAgICB9XG4gICAgc2VsZi5fMzggPSBudWxsO1xuICB9XG59XG5cbmZ1bmN0aW9uIEhhbmRsZXIob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIHByb21pc2Upe1xuICB0aGlzLm9uRnVsZmlsbGVkID0gdHlwZW9mIG9uRnVsZmlsbGVkID09PSAnZnVuY3Rpb24nID8gb25GdWxmaWxsZWQgOiBudWxsO1xuICB0aGlzLm9uUmVqZWN0ZWQgPSB0eXBlb2Ygb25SZWplY3RlZCA9PT0gJ2Z1bmN0aW9uJyA/IG9uUmVqZWN0ZWQgOiBudWxsO1xuICB0aGlzLnByb21pc2UgPSBwcm9taXNlO1xufVxuXG4vKipcbiAqIFRha2UgYSBwb3RlbnRpYWxseSBtaXNiZWhhdmluZyByZXNvbHZlciBmdW5jdGlvbiBhbmQgbWFrZSBzdXJlXG4gKiBvbkZ1bGZpbGxlZCBhbmQgb25SZWplY3RlZCBhcmUgb25seSBjYWxsZWQgb25jZS5cbiAqXG4gKiBNYWtlcyBubyBndWFyYW50ZWVzIGFib3V0IGFzeW5jaHJvbnkuXG4gKi9cbmZ1bmN0aW9uIGRvUmVzb2x2ZShmbiwgcHJvbWlzZSkge1xuICB2YXIgZG9uZSA9IGZhbHNlO1xuICB2YXIgcmVzID0gdHJ5Q2FsbFR3byhmbiwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKGRvbmUpIHJldHVybjtcbiAgICBkb25lID0gdHJ1ZTtcbiAgICByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIGlmIChkb25lKSByZXR1cm47XG4gICAgZG9uZSA9IHRydWU7XG4gICAgcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gIH0pO1xuICBpZiAoIWRvbmUgJiYgcmVzID09PSBJU19FUlJPUikge1xuICAgIGRvbmUgPSB0cnVlO1xuICAgIHJlamVjdChwcm9taXNlLCBMQVNUX0VSUk9SKTtcbiAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vL1RoaXMgZmlsZSBjb250YWlucyB0aGUgRVM2IGV4dGVuc2lvbnMgdG8gdGhlIGNvcmUgUHJvbWlzZXMvQSsgQVBJXG5cbnZhciBQcm9taXNlID0gcmVxdWlyZSgnLi9jb3JlLmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUHJvbWlzZTtcblxuLyogU3RhdGljIEZ1bmN0aW9ucyAqL1xuXG52YXIgVFJVRSA9IHZhbHVlUHJvbWlzZSh0cnVlKTtcbnZhciBGQUxTRSA9IHZhbHVlUHJvbWlzZShmYWxzZSk7XG52YXIgTlVMTCA9IHZhbHVlUHJvbWlzZShudWxsKTtcbnZhciBVTkRFRklORUQgPSB2YWx1ZVByb21pc2UodW5kZWZpbmVkKTtcbnZhciBaRVJPID0gdmFsdWVQcm9taXNlKDApO1xudmFyIEVNUFRZU1RSSU5HID0gdmFsdWVQcm9taXNlKCcnKTtcblxuZnVuY3Rpb24gdmFsdWVQcm9taXNlKHZhbHVlKSB7XG4gIHZhciBwID0gbmV3IFByb21pc2UoUHJvbWlzZS5fNDQpO1xuICBwLl84MyA9IDE7XG4gIHAuXzE4ID0gdmFsdWU7XG4gIHJldHVybiBwO1xufVxuUHJvbWlzZS5yZXNvbHZlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFByb21pc2UpIHJldHVybiB2YWx1ZTtcblxuICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiBOVUxMO1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIFVOREVGSU5FRDtcbiAgaWYgKHZhbHVlID09PSB0cnVlKSByZXR1cm4gVFJVRTtcbiAgaWYgKHZhbHVlID09PSBmYWxzZSkgcmV0dXJuIEZBTFNFO1xuICBpZiAodmFsdWUgPT09IDApIHJldHVybiBaRVJPO1xuICBpZiAodmFsdWUgPT09ICcnKSByZXR1cm4gRU1QVFlTVFJJTkc7XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciB0aGVuID0gdmFsdWUudGhlbjtcbiAgICAgIGlmICh0eXBlb2YgdGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UodGhlbi5iaW5kKHZhbHVlKSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHJlamVjdChleCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbHVlUHJvbWlzZSh2YWx1ZSk7XG59O1xuXG5Qcm9taXNlLmFsbCA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcnIpO1xuXG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSByZXR1cm4gcmVzb2x2ZShbXSk7XG4gICAgdmFyIHJlbWFpbmluZyA9IGFyZ3MubGVuZ3RoO1xuICAgIGZ1bmN0aW9uIHJlcyhpLCB2YWwpIHtcbiAgICAgIGlmICh2YWwgJiYgKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnIHx8IHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpKSB7XG4gICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBQcm9taXNlICYmIHZhbC50aGVuID09PSBQcm9taXNlLnByb3RvdHlwZS50aGVuKSB7XG4gICAgICAgICAgd2hpbGUgKHZhbC5fODMgPT09IDMpIHtcbiAgICAgICAgICAgIHZhbCA9IHZhbC5fMTg7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh2YWwuXzgzID09PSAxKSByZXR1cm4gcmVzKGksIHZhbC5fMTgpO1xuICAgICAgICAgIGlmICh2YWwuXzgzID09PSAyKSByZWplY3QodmFsLl8xOCk7XG4gICAgICAgICAgdmFsLnRoZW4oZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgcmVzKGksIHZhbCk7XG4gICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHRoZW4gPSB2YWwudGhlbjtcbiAgICAgICAgICBpZiAodHlwZW9mIHRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHZhciBwID0gbmV3IFByb21pc2UodGhlbi5iaW5kKHZhbCkpO1xuICAgICAgICAgICAgcC50aGVuKGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgcmVzKGksIHZhbCk7XG4gICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXJnc1tpXSA9IHZhbDtcbiAgICAgIGlmICgtLXJlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICByZXNvbHZlKGFyZ3MpO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIHJlcyhpLCBhcmdzW2ldKTtcbiAgICB9XG4gIH0pO1xufTtcblxuUHJvbWlzZS5yZWplY3QgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICByZWplY3QodmFsdWUpO1xuICB9KTtcbn07XG5cblByb21pc2UucmFjZSA9IGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YWx1ZXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSl7XG4gICAgICBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG4vKiBQcm90b3R5cGUgTWV0aG9kcyAqL1xuXG5Qcm9taXNlLnByb3RvdHlwZVsnY2F0Y2gnXSA9IGZ1bmN0aW9uIChvblJlamVjdGVkKSB7XG4gIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3RlZCk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUHJvbWlzZSA9IHJlcXVpcmUoJy4vY29yZScpO1xuXG52YXIgREVGQVVMVF9XSElURUxJU1QgPSBbXG4gIFJlZmVyZW5jZUVycm9yLFxuICBUeXBlRXJyb3IsXG4gIFJhbmdlRXJyb3Jcbl07XG5cbnZhciBlbmFibGVkID0gZmFsc2U7XG5leHBvcnRzLmRpc2FibGUgPSBkaXNhYmxlO1xuZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgZW5hYmxlZCA9IGZhbHNlO1xuICBQcm9taXNlLl80NyA9IG51bGw7XG4gIFByb21pc2UuXzcxID0gbnVsbDtcbn1cblxuZXhwb3J0cy5lbmFibGUgPSBlbmFibGU7XG5mdW5jdGlvbiBlbmFibGUob3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgaWYgKGVuYWJsZWQpIGRpc2FibGUoKTtcbiAgZW5hYmxlZCA9IHRydWU7XG4gIHZhciBpZCA9IDA7XG4gIHZhciBkaXNwbGF5SWQgPSAwO1xuICB2YXIgcmVqZWN0aW9ucyA9IHt9O1xuICBQcm9taXNlLl80NyA9IGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgaWYgKFxuICAgICAgcHJvbWlzZS5fODMgPT09IDIgJiYgLy8gSVMgUkVKRUNURURcbiAgICAgIHJlamVjdGlvbnNbcHJvbWlzZS5fNTZdXG4gICAgKSB7XG4gICAgICBpZiAocmVqZWN0aW9uc1twcm9taXNlLl81Nl0ubG9nZ2VkKSB7XG4gICAgICAgIG9uSGFuZGxlZChwcm9taXNlLl81Nik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbGVhclRpbWVvdXQocmVqZWN0aW9uc1twcm9taXNlLl81Nl0udGltZW91dCk7XG4gICAgICB9XG4gICAgICBkZWxldGUgcmVqZWN0aW9uc1twcm9taXNlLl81Nl07XG4gICAgfVxuICB9O1xuICBQcm9taXNlLl83MSA9IGZ1bmN0aW9uIChwcm9taXNlLCBlcnIpIHtcbiAgICBpZiAocHJvbWlzZS5fNzUgPT09IDApIHsgLy8gbm90IHlldCBoYW5kbGVkXG4gICAgICBwcm9taXNlLl81NiA9IGlkKys7XG4gICAgICByZWplY3Rpb25zW3Byb21pc2UuXzU2XSA9IHtcbiAgICAgICAgZGlzcGxheUlkOiBudWxsLFxuICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICB0aW1lb3V0OiBzZXRUaW1lb3V0KFxuICAgICAgICAgIG9uVW5oYW5kbGVkLmJpbmQobnVsbCwgcHJvbWlzZS5fNTYpLFxuICAgICAgICAgIC8vIEZvciByZWZlcmVuY2UgZXJyb3JzIGFuZCB0eXBlIGVycm9ycywgdGhpcyBhbG1vc3QgYWx3YXlzXG4gICAgICAgICAgLy8gbWVhbnMgdGhlIHByb2dyYW1tZXIgbWFkZSBhIG1pc3Rha2UsIHNvIGxvZyB0aGVtIGFmdGVyIGp1c3RcbiAgICAgICAgICAvLyAxMDBtc1xuICAgICAgICAgIC8vIG90aGVyd2lzZSwgd2FpdCAyIHNlY29uZHMgdG8gc2VlIGlmIHRoZXkgZ2V0IGhhbmRsZWRcbiAgICAgICAgICBtYXRjaFdoaXRlbGlzdChlcnIsIERFRkFVTFRfV0hJVEVMSVNUKVxuICAgICAgICAgICAgPyAxMDBcbiAgICAgICAgICAgIDogMjAwMFxuICAgICAgICApLFxuICAgICAgICBsb2dnZWQ6IGZhbHNlXG4gICAgICB9O1xuICAgIH1cbiAgfTtcbiAgZnVuY3Rpb24gb25VbmhhbmRsZWQoaWQpIHtcbiAgICBpZiAoXG4gICAgICBvcHRpb25zLmFsbFJlamVjdGlvbnMgfHxcbiAgICAgIG1hdGNoV2hpdGVsaXN0KFxuICAgICAgICByZWplY3Rpb25zW2lkXS5lcnJvcixcbiAgICAgICAgb3B0aW9ucy53aGl0ZWxpc3QgfHwgREVGQVVMVF9XSElURUxJU1RcbiAgICAgIClcbiAgICApIHtcbiAgICAgIHJlamVjdGlvbnNbaWRdLmRpc3BsYXlJZCA9IGRpc3BsYXlJZCsrO1xuICAgICAgaWYgKG9wdGlvbnMub25VbmhhbmRsZWQpIHtcbiAgICAgICAgcmVqZWN0aW9uc1tpZF0ubG9nZ2VkID0gdHJ1ZTtcbiAgICAgICAgb3B0aW9ucy5vblVuaGFuZGxlZChcbiAgICAgICAgICByZWplY3Rpb25zW2lkXS5kaXNwbGF5SWQsXG4gICAgICAgICAgcmVqZWN0aW9uc1tpZF0uZXJyb3JcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlamVjdGlvbnNbaWRdLmxvZ2dlZCA9IHRydWU7XG4gICAgICAgIGxvZ0Vycm9yKFxuICAgICAgICAgIHJlamVjdGlvbnNbaWRdLmRpc3BsYXlJZCxcbiAgICAgICAgICByZWplY3Rpb25zW2lkXS5lcnJvclxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBvbkhhbmRsZWQoaWQpIHtcbiAgICBpZiAocmVqZWN0aW9uc1tpZF0ubG9nZ2VkKSB7XG4gICAgICBpZiAob3B0aW9ucy5vbkhhbmRsZWQpIHtcbiAgICAgICAgb3B0aW9ucy5vbkhhbmRsZWQocmVqZWN0aW9uc1tpZF0uZGlzcGxheUlkLCByZWplY3Rpb25zW2lkXS5lcnJvcik7XG4gICAgICB9IGVsc2UgaWYgKCFyZWplY3Rpb25zW2lkXS5vblVuaGFuZGxlZCkge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgJ1Byb21pc2UgUmVqZWN0aW9uIEhhbmRsZWQgKGlkOiAnICsgcmVqZWN0aW9uc1tpZF0uZGlzcGxheUlkICsgJyk6J1xuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgJyAgVGhpcyBtZWFucyB5b3UgY2FuIGlnbm9yZSBhbnkgcHJldmlvdXMgbWVzc2FnZXMgb2YgdGhlIGZvcm0gXCJQb3NzaWJsZSBVbmhhbmRsZWQgUHJvbWlzZSBSZWplY3Rpb25cIiB3aXRoIGlkICcgK1xuICAgICAgICAgIHJlamVjdGlvbnNbaWRdLmRpc3BsYXlJZCArICcuJ1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBsb2dFcnJvcihpZCwgZXJyb3IpIHtcbiAgY29uc29sZS53YXJuKCdQb3NzaWJsZSBVbmhhbmRsZWQgUHJvbWlzZSBSZWplY3Rpb24gKGlkOiAnICsgaWQgKyAnKTonKTtcbiAgdmFyIGVyclN0ciA9IChlcnJvciAmJiAoZXJyb3Iuc3RhY2sgfHwgZXJyb3IpKSArICcnO1xuICBlcnJTdHIuc3BsaXQoJ1xcbicpLmZvckVhY2goZnVuY3Rpb24gKGxpbmUpIHtcbiAgICBjb25zb2xlLndhcm4oJyAgJyArIGxpbmUpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gbWF0Y2hXaGl0ZWxpc3QoZXJyb3IsIGxpc3QpIHtcbiAgcmV0dXJuIGxpc3Quc29tZShmdW5jdGlvbiAoY2xzKSB7XG4gICAgcmV0dXJuIGVycm9yIGluc3RhbmNlb2YgY2xzO1xuICB9KTtcbn0iLCIvKiEgaHR0cHM6Ly9tdGhzLmJlL3B1bnljb2RlIHYxLjQuMSBieSBAbWF0aGlhcyAqL1xuOyhmdW5jdGlvbihyb290KSB7XG5cblx0LyoqIERldGVjdCBmcmVlIHZhcmlhYmxlcyAqL1xuXHR2YXIgZnJlZUV4cG9ydHMgPSB0eXBlb2YgZXhwb3J0cyA9PSAnb2JqZWN0JyAmJiBleHBvcnRzICYmXG5cdFx0IWV4cG9ydHMubm9kZVR5cGUgJiYgZXhwb3J0cztcblx0dmFyIGZyZWVNb2R1bGUgPSB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZSAmJlxuXHRcdCFtb2R1bGUubm9kZVR5cGUgJiYgbW9kdWxlO1xuXHR2YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsO1xuXHRpZiAoXG5cdFx0ZnJlZUdsb2JhbC5nbG9iYWwgPT09IGZyZWVHbG9iYWwgfHxcblx0XHRmcmVlR2xvYmFsLndpbmRvdyA9PT0gZnJlZUdsb2JhbCB8fFxuXHRcdGZyZWVHbG9iYWwuc2VsZiA9PT0gZnJlZUdsb2JhbFxuXHQpIHtcblx0XHRyb290ID0gZnJlZUdsb2JhbDtcblx0fVxuXG5cdC8qKlxuXHQgKiBUaGUgYHB1bnljb2RlYCBvYmplY3QuXG5cdCAqIEBuYW1lIHB1bnljb2RlXG5cdCAqIEB0eXBlIE9iamVjdFxuXHQgKi9cblx0dmFyIHB1bnljb2RlLFxuXG5cdC8qKiBIaWdoZXN0IHBvc2l0aXZlIHNpZ25lZCAzMi1iaXQgZmxvYXQgdmFsdWUgKi9cblx0bWF4SW50ID0gMjE0NzQ4MzY0NywgLy8gYWthLiAweDdGRkZGRkZGIG9yIDJeMzEtMVxuXG5cdC8qKiBCb290c3RyaW5nIHBhcmFtZXRlcnMgKi9cblx0YmFzZSA9IDM2LFxuXHR0TWluID0gMSxcblx0dE1heCA9IDI2LFxuXHRza2V3ID0gMzgsXG5cdGRhbXAgPSA3MDAsXG5cdGluaXRpYWxCaWFzID0gNzIsXG5cdGluaXRpYWxOID0gMTI4LCAvLyAweDgwXG5cdGRlbGltaXRlciA9ICctJywgLy8gJ1xceDJEJ1xuXG5cdC8qKiBSZWd1bGFyIGV4cHJlc3Npb25zICovXG5cdHJlZ2V4UHVueWNvZGUgPSAvXnhuLS0vLFxuXHRyZWdleE5vbkFTQ0lJID0gL1teXFx4MjAtXFx4N0VdLywgLy8gdW5wcmludGFibGUgQVNDSUkgY2hhcnMgKyBub24tQVNDSUkgY2hhcnNcblx0cmVnZXhTZXBhcmF0b3JzID0gL1tcXHgyRVxcdTMwMDJcXHVGRjBFXFx1RkY2MV0vZywgLy8gUkZDIDM0OTAgc2VwYXJhdG9yc1xuXG5cdC8qKiBFcnJvciBtZXNzYWdlcyAqL1xuXHRlcnJvcnMgPSB7XG5cdFx0J292ZXJmbG93JzogJ092ZXJmbG93OiBpbnB1dCBuZWVkcyB3aWRlciBpbnRlZ2VycyB0byBwcm9jZXNzJyxcblx0XHQnbm90LWJhc2ljJzogJ0lsbGVnYWwgaW5wdXQgPj0gMHg4MCAobm90IGEgYmFzaWMgY29kZSBwb2ludCknLFxuXHRcdCdpbnZhbGlkLWlucHV0JzogJ0ludmFsaWQgaW5wdXQnXG5cdH0sXG5cblx0LyoqIENvbnZlbmllbmNlIHNob3J0Y3V0cyAqL1xuXHRiYXNlTWludXNUTWluID0gYmFzZSAtIHRNaW4sXG5cdGZsb29yID0gTWF0aC5mbG9vcixcblx0c3RyaW5nRnJvbUNoYXJDb2RlID0gU3RyaW5nLmZyb21DaGFyQ29kZSxcblxuXHQvKiogVGVtcG9yYXJ5IHZhcmlhYmxlICovXG5cdGtleTtcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHQvKipcblx0ICogQSBnZW5lcmljIGVycm9yIHV0aWxpdHkgZnVuY3Rpb24uXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBlcnJvciB0eXBlLlxuXHQgKiBAcmV0dXJucyB7RXJyb3J9IFRocm93cyBhIGBSYW5nZUVycm9yYCB3aXRoIHRoZSBhcHBsaWNhYmxlIGVycm9yIG1lc3NhZ2UuXG5cdCAqL1xuXHRmdW5jdGlvbiBlcnJvcih0eXBlKSB7XG5cdFx0dGhyb3cgbmV3IFJhbmdlRXJyb3IoZXJyb3JzW3R5cGVdKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBIGdlbmVyaWMgYEFycmF5I21hcGAgdXRpbGl0eSBmdW5jdGlvbi5cblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRoYXQgZ2V0cyBjYWxsZWQgZm9yIGV2ZXJ5IGFycmF5XG5cdCAqIGl0ZW0uXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gQSBuZXcgYXJyYXkgb2YgdmFsdWVzIHJldHVybmVkIGJ5IHRoZSBjYWxsYmFjayBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIG1hcChhcnJheSwgZm4pIHtcblx0XHR2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXHRcdHZhciByZXN1bHQgPSBbXTtcblx0XHR3aGlsZSAobGVuZ3RoLS0pIHtcblx0XHRcdHJlc3VsdFtsZW5ndGhdID0gZm4oYXJyYXlbbGVuZ3RoXSk7XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHQvKipcblx0ICogQSBzaW1wbGUgYEFycmF5I21hcGAtbGlrZSB3cmFwcGVyIHRvIHdvcmsgd2l0aCBkb21haW4gbmFtZSBzdHJpbmdzIG9yIGVtYWlsXG5cdCAqIGFkZHJlc3Nlcy5cblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGRvbWFpbiBUaGUgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcy5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRoYXQgZ2V0cyBjYWxsZWQgZm9yIGV2ZXJ5XG5cdCAqIGNoYXJhY3Rlci5cblx0ICogQHJldHVybnMge0FycmF5fSBBIG5ldyBzdHJpbmcgb2YgY2hhcmFjdGVycyByZXR1cm5lZCBieSB0aGUgY2FsbGJhY2tcblx0ICogZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBtYXBEb21haW4oc3RyaW5nLCBmbikge1xuXHRcdHZhciBwYXJ0cyA9IHN0cmluZy5zcGxpdCgnQCcpO1xuXHRcdHZhciByZXN1bHQgPSAnJztcblx0XHRpZiAocGFydHMubGVuZ3RoID4gMSkge1xuXHRcdFx0Ly8gSW4gZW1haWwgYWRkcmVzc2VzLCBvbmx5IHRoZSBkb21haW4gbmFtZSBzaG91bGQgYmUgcHVueWNvZGVkLiBMZWF2ZVxuXHRcdFx0Ly8gdGhlIGxvY2FsIHBhcnQgKGkuZS4gZXZlcnl0aGluZyB1cCB0byBgQGApIGludGFjdC5cblx0XHRcdHJlc3VsdCA9IHBhcnRzWzBdICsgJ0AnO1xuXHRcdFx0c3RyaW5nID0gcGFydHNbMV07XG5cdFx0fVxuXHRcdC8vIEF2b2lkIGBzcGxpdChyZWdleClgIGZvciBJRTggY29tcGF0aWJpbGl0eS4gU2VlICMxNy5cblx0XHRzdHJpbmcgPSBzdHJpbmcucmVwbGFjZShyZWdleFNlcGFyYXRvcnMsICdcXHgyRScpO1xuXHRcdHZhciBsYWJlbHMgPSBzdHJpbmcuc3BsaXQoJy4nKTtcblx0XHR2YXIgZW5jb2RlZCA9IG1hcChsYWJlbHMsIGZuKS5qb2luKCcuJyk7XG5cdFx0cmV0dXJuIHJlc3VsdCArIGVuY29kZWQ7XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlcyBhbiBhcnJheSBjb250YWluaW5nIHRoZSBudW1lcmljIGNvZGUgcG9pbnRzIG9mIGVhY2ggVW5pY29kZVxuXHQgKiBjaGFyYWN0ZXIgaW4gdGhlIHN0cmluZy4gV2hpbGUgSmF2YVNjcmlwdCB1c2VzIFVDUy0yIGludGVybmFsbHksXG5cdCAqIHRoaXMgZnVuY3Rpb24gd2lsbCBjb252ZXJ0IGEgcGFpciBvZiBzdXJyb2dhdGUgaGFsdmVzIChlYWNoIG9mIHdoaWNoXG5cdCAqIFVDUy0yIGV4cG9zZXMgYXMgc2VwYXJhdGUgY2hhcmFjdGVycykgaW50byBhIHNpbmdsZSBjb2RlIHBvaW50LFxuXHQgKiBtYXRjaGluZyBVVEYtMTYuXG5cdCAqIEBzZWUgYHB1bnljb2RlLnVjczIuZW5jb2RlYFxuXHQgKiBAc2VlIDxodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC1lbmNvZGluZz5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlLnVjczJcblx0ICogQG5hbWUgZGVjb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmcgVGhlIFVuaWNvZGUgaW5wdXQgc3RyaW5nIChVQ1MtMikuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gVGhlIG5ldyBhcnJheSBvZiBjb2RlIHBvaW50cy5cblx0ICovXG5cdGZ1bmN0aW9uIHVjczJkZWNvZGUoc3RyaW5nKSB7XG5cdFx0dmFyIG91dHB1dCA9IFtdLFxuXHRcdCAgICBjb3VudGVyID0gMCxcblx0XHQgICAgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aCxcblx0XHQgICAgdmFsdWUsXG5cdFx0ICAgIGV4dHJhO1xuXHRcdHdoaWxlIChjb3VudGVyIDwgbGVuZ3RoKSB7XG5cdFx0XHR2YWx1ZSA9IHN0cmluZy5jaGFyQ29kZUF0KGNvdW50ZXIrKyk7XG5cdFx0XHRpZiAodmFsdWUgPj0gMHhEODAwICYmIHZhbHVlIDw9IDB4REJGRiAmJiBjb3VudGVyIDwgbGVuZ3RoKSB7XG5cdFx0XHRcdC8vIGhpZ2ggc3Vycm9nYXRlLCBhbmQgdGhlcmUgaXMgYSBuZXh0IGNoYXJhY3RlclxuXHRcdFx0XHRleHRyYSA9IHN0cmluZy5jaGFyQ29kZUF0KGNvdW50ZXIrKyk7XG5cdFx0XHRcdGlmICgoZXh0cmEgJiAweEZDMDApID09IDB4REMwMCkgeyAvLyBsb3cgc3Vycm9nYXRlXG5cdFx0XHRcdFx0b3V0cHV0LnB1c2goKCh2YWx1ZSAmIDB4M0ZGKSA8PCAxMCkgKyAoZXh0cmEgJiAweDNGRikgKyAweDEwMDAwKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyB1bm1hdGNoZWQgc3Vycm9nYXRlOyBvbmx5IGFwcGVuZCB0aGlzIGNvZGUgdW5pdCwgaW4gY2FzZSB0aGUgbmV4dFxuXHRcdFx0XHRcdC8vIGNvZGUgdW5pdCBpcyB0aGUgaGlnaCBzdXJyb2dhdGUgb2YgYSBzdXJyb2dhdGUgcGFpclxuXHRcdFx0XHRcdG91dHB1dC5wdXNoKHZhbHVlKTtcblx0XHRcdFx0XHRjb3VudGVyLS07XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG91dHB1dC5wdXNoKHZhbHVlKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIG91dHB1dDtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgc3RyaW5nIGJhc2VkIG9uIGFuIGFycmF5IG9mIG51bWVyaWMgY29kZSBwb2ludHMuXG5cdCAqIEBzZWUgYHB1bnljb2RlLnVjczIuZGVjb2RlYFxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGUudWNzMlxuXHQgKiBAbmFtZSBlbmNvZGVcblx0ICogQHBhcmFtIHtBcnJheX0gY29kZVBvaW50cyBUaGUgYXJyYXkgb2YgbnVtZXJpYyBjb2RlIHBvaW50cy5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIG5ldyBVbmljb2RlIHN0cmluZyAoVUNTLTIpLlxuXHQgKi9cblx0ZnVuY3Rpb24gdWNzMmVuY29kZShhcnJheSkge1xuXHRcdHJldHVybiBtYXAoYXJyYXksIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHR2YXIgb3V0cHV0ID0gJyc7XG5cdFx0XHRpZiAodmFsdWUgPiAweEZGRkYpIHtcblx0XHRcdFx0dmFsdWUgLT0gMHgxMDAwMDtcblx0XHRcdFx0b3V0cHV0ICs9IHN0cmluZ0Zyb21DaGFyQ29kZSh2YWx1ZSA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMCk7XG5cdFx0XHRcdHZhbHVlID0gMHhEQzAwIHwgdmFsdWUgJiAweDNGRjtcblx0XHRcdH1cblx0XHRcdG91dHB1dCArPSBzdHJpbmdGcm9tQ2hhckNvZGUodmFsdWUpO1xuXHRcdFx0cmV0dXJuIG91dHB1dDtcblx0XHR9KS5qb2luKCcnKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIGJhc2ljIGNvZGUgcG9pbnQgaW50byBhIGRpZ2l0L2ludGVnZXIuXG5cdCAqIEBzZWUgYGRpZ2l0VG9CYXNpYygpYFxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge051bWJlcn0gY29kZVBvaW50IFRoZSBiYXNpYyBudW1lcmljIGNvZGUgcG9pbnQgdmFsdWUuXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBudW1lcmljIHZhbHVlIG9mIGEgYmFzaWMgY29kZSBwb2ludCAoZm9yIHVzZSBpblxuXHQgKiByZXByZXNlbnRpbmcgaW50ZWdlcnMpIGluIHRoZSByYW5nZSBgMGAgdG8gYGJhc2UgLSAxYCwgb3IgYGJhc2VgIGlmXG5cdCAqIHRoZSBjb2RlIHBvaW50IGRvZXMgbm90IHJlcHJlc2VudCBhIHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzaWNUb0RpZ2l0KGNvZGVQb2ludCkge1xuXHRcdGlmIChjb2RlUG9pbnQgLSA0OCA8IDEwKSB7XG5cdFx0XHRyZXR1cm4gY29kZVBvaW50IC0gMjI7XG5cdFx0fVxuXHRcdGlmIChjb2RlUG9pbnQgLSA2NSA8IDI2KSB7XG5cdFx0XHRyZXR1cm4gY29kZVBvaW50IC0gNjU7XG5cdFx0fVxuXHRcdGlmIChjb2RlUG9pbnQgLSA5NyA8IDI2KSB7XG5cdFx0XHRyZXR1cm4gY29kZVBvaW50IC0gOTc7XG5cdFx0fVxuXHRcdHJldHVybiBiYXNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgZGlnaXQvaW50ZWdlciBpbnRvIGEgYmFzaWMgY29kZSBwb2ludC5cblx0ICogQHNlZSBgYmFzaWNUb0RpZ2l0KClgXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBkaWdpdCBUaGUgbnVtZXJpYyB2YWx1ZSBvZiBhIGJhc2ljIGNvZGUgcG9pbnQuXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBiYXNpYyBjb2RlIHBvaW50IHdob3NlIHZhbHVlICh3aGVuIHVzZWQgZm9yXG5cdCAqIHJlcHJlc2VudGluZyBpbnRlZ2VycykgaXMgYGRpZ2l0YCwgd2hpY2ggbmVlZHMgdG8gYmUgaW4gdGhlIHJhbmdlXG5cdCAqIGAwYCB0byBgYmFzZSAtIDFgLiBJZiBgZmxhZ2AgaXMgbm9uLXplcm8sIHRoZSB1cHBlcmNhc2UgZm9ybSBpc1xuXHQgKiB1c2VkOyBlbHNlLCB0aGUgbG93ZXJjYXNlIGZvcm0gaXMgdXNlZC4gVGhlIGJlaGF2aW9yIGlzIHVuZGVmaW5lZFxuXHQgKiBpZiBgZmxhZ2AgaXMgbm9uLXplcm8gYW5kIGBkaWdpdGAgaGFzIG5vIHVwcGVyY2FzZSBmb3JtLlxuXHQgKi9cblx0ZnVuY3Rpb24gZGlnaXRUb0Jhc2ljKGRpZ2l0LCBmbGFnKSB7XG5cdFx0Ly8gIDAuLjI1IG1hcCB0byBBU0NJSSBhLi56IG9yIEEuLlpcblx0XHQvLyAyNi4uMzUgbWFwIHRvIEFTQ0lJIDAuLjlcblx0XHRyZXR1cm4gZGlnaXQgKyAyMiArIDc1ICogKGRpZ2l0IDwgMjYpIC0gKChmbGFnICE9IDApIDw8IDUpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEJpYXMgYWRhcHRhdGlvbiBmdW5jdGlvbiBhcyBwZXIgc2VjdGlvbiAzLjQgb2YgUkZDIDM0OTIuXG5cdCAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzNDkyI3NlY3Rpb24tMy40XG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBhZGFwdChkZWx0YSwgbnVtUG9pbnRzLCBmaXJzdFRpbWUpIHtcblx0XHR2YXIgayA9IDA7XG5cdFx0ZGVsdGEgPSBmaXJzdFRpbWUgPyBmbG9vcihkZWx0YSAvIGRhbXApIDogZGVsdGEgPj4gMTtcblx0XHRkZWx0YSArPSBmbG9vcihkZWx0YSAvIG51bVBvaW50cyk7XG5cdFx0Zm9yICgvKiBubyBpbml0aWFsaXphdGlvbiAqLzsgZGVsdGEgPiBiYXNlTWludXNUTWluICogdE1heCA+PiAxOyBrICs9IGJhc2UpIHtcblx0XHRcdGRlbHRhID0gZmxvb3IoZGVsdGEgLyBiYXNlTWludXNUTWluKTtcblx0XHR9XG5cdFx0cmV0dXJuIGZsb29yKGsgKyAoYmFzZU1pbnVzVE1pbiArIDEpICogZGVsdGEgLyAoZGVsdGEgKyBza2V3KSk7XG5cdH1cblxuXHQvKipcblx0ICogQ29udmVydHMgYSBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzIHRvIGEgc3RyaW5nIG9mIFVuaWNvZGVcblx0ICogc3ltYm9scy5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scy5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIHJlc3VsdGluZyBzdHJpbmcgb2YgVW5pY29kZSBzeW1ib2xzLlxuXHQgKi9cblx0ZnVuY3Rpb24gZGVjb2RlKGlucHV0KSB7XG5cdFx0Ly8gRG9uJ3QgdXNlIFVDUy0yXG5cdFx0dmFyIG91dHB1dCA9IFtdLFxuXHRcdCAgICBpbnB1dExlbmd0aCA9IGlucHV0Lmxlbmd0aCxcblx0XHQgICAgb3V0LFxuXHRcdCAgICBpID0gMCxcblx0XHQgICAgbiA9IGluaXRpYWxOLFxuXHRcdCAgICBiaWFzID0gaW5pdGlhbEJpYXMsXG5cdFx0ICAgIGJhc2ljLFxuXHRcdCAgICBqLFxuXHRcdCAgICBpbmRleCxcblx0XHQgICAgb2xkaSxcblx0XHQgICAgdyxcblx0XHQgICAgayxcblx0XHQgICAgZGlnaXQsXG5cdFx0ICAgIHQsXG5cdFx0ICAgIC8qKiBDYWNoZWQgY2FsY3VsYXRpb24gcmVzdWx0cyAqL1xuXHRcdCAgICBiYXNlTWludXNUO1xuXG5cdFx0Ly8gSGFuZGxlIHRoZSBiYXNpYyBjb2RlIHBvaW50czogbGV0IGBiYXNpY2AgYmUgdGhlIG51bWJlciBvZiBpbnB1dCBjb2RlXG5cdFx0Ly8gcG9pbnRzIGJlZm9yZSB0aGUgbGFzdCBkZWxpbWl0ZXIsIG9yIGAwYCBpZiB0aGVyZSBpcyBub25lLCB0aGVuIGNvcHlcblx0XHQvLyB0aGUgZmlyc3QgYmFzaWMgY29kZSBwb2ludHMgdG8gdGhlIG91dHB1dC5cblxuXHRcdGJhc2ljID0gaW5wdXQubGFzdEluZGV4T2YoZGVsaW1pdGVyKTtcblx0XHRpZiAoYmFzaWMgPCAwKSB7XG5cdFx0XHRiYXNpYyA9IDA7XG5cdFx0fVxuXG5cdFx0Zm9yIChqID0gMDsgaiA8IGJhc2ljOyArK2opIHtcblx0XHRcdC8vIGlmIGl0J3Mgbm90IGEgYmFzaWMgY29kZSBwb2ludFxuXHRcdFx0aWYgKGlucHV0LmNoYXJDb2RlQXQoaikgPj0gMHg4MCkge1xuXHRcdFx0XHRlcnJvcignbm90LWJhc2ljJyk7XG5cdFx0XHR9XG5cdFx0XHRvdXRwdXQucHVzaChpbnB1dC5jaGFyQ29kZUF0KGopKTtcblx0XHR9XG5cblx0XHQvLyBNYWluIGRlY29kaW5nIGxvb3A6IHN0YXJ0IGp1c3QgYWZ0ZXIgdGhlIGxhc3QgZGVsaW1pdGVyIGlmIGFueSBiYXNpYyBjb2RlXG5cdFx0Ly8gcG9pbnRzIHdlcmUgY29waWVkOyBzdGFydCBhdCB0aGUgYmVnaW5uaW5nIG90aGVyd2lzZS5cblxuXHRcdGZvciAoaW5kZXggPSBiYXNpYyA+IDAgPyBiYXNpYyArIDEgOiAwOyBpbmRleCA8IGlucHV0TGVuZ3RoOyAvKiBubyBmaW5hbCBleHByZXNzaW9uICovKSB7XG5cblx0XHRcdC8vIGBpbmRleGAgaXMgdGhlIGluZGV4IG9mIHRoZSBuZXh0IGNoYXJhY3RlciB0byBiZSBjb25zdW1lZC5cblx0XHRcdC8vIERlY29kZSBhIGdlbmVyYWxpemVkIHZhcmlhYmxlLWxlbmd0aCBpbnRlZ2VyIGludG8gYGRlbHRhYCxcblx0XHRcdC8vIHdoaWNoIGdldHMgYWRkZWQgdG8gYGlgLiBUaGUgb3ZlcmZsb3cgY2hlY2tpbmcgaXMgZWFzaWVyXG5cdFx0XHQvLyBpZiB3ZSBpbmNyZWFzZSBgaWAgYXMgd2UgZ28sIHRoZW4gc3VidHJhY3Qgb2ZmIGl0cyBzdGFydGluZ1xuXHRcdFx0Ly8gdmFsdWUgYXQgdGhlIGVuZCB0byBvYnRhaW4gYGRlbHRhYC5cblx0XHRcdGZvciAob2xkaSA9IGksIHcgPSAxLCBrID0gYmFzZTsgLyogbm8gY29uZGl0aW9uICovOyBrICs9IGJhc2UpIHtcblxuXHRcdFx0XHRpZiAoaW5kZXggPj0gaW5wdXRMZW5ndGgpIHtcblx0XHRcdFx0XHRlcnJvcignaW52YWxpZC1pbnB1dCcpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZGlnaXQgPSBiYXNpY1RvRGlnaXQoaW5wdXQuY2hhckNvZGVBdChpbmRleCsrKSk7XG5cblx0XHRcdFx0aWYgKGRpZ2l0ID49IGJhc2UgfHwgZGlnaXQgPiBmbG9vcigobWF4SW50IC0gaSkgLyB3KSkge1xuXHRcdFx0XHRcdGVycm9yKCdvdmVyZmxvdycpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aSArPSBkaWdpdCAqIHc7XG5cdFx0XHRcdHQgPSBrIDw9IGJpYXMgPyB0TWluIDogKGsgPj0gYmlhcyArIHRNYXggPyB0TWF4IDogayAtIGJpYXMpO1xuXG5cdFx0XHRcdGlmIChkaWdpdCA8IHQpIHtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGJhc2VNaW51c1QgPSBiYXNlIC0gdDtcblx0XHRcdFx0aWYgKHcgPiBmbG9vcihtYXhJbnQgLyBiYXNlTWludXNUKSkge1xuXHRcdFx0XHRcdGVycm9yKCdvdmVyZmxvdycpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dyAqPSBiYXNlTWludXNUO1xuXG5cdFx0XHR9XG5cblx0XHRcdG91dCA9IG91dHB1dC5sZW5ndGggKyAxO1xuXHRcdFx0YmlhcyA9IGFkYXB0KGkgLSBvbGRpLCBvdXQsIG9sZGkgPT0gMCk7XG5cblx0XHRcdC8vIGBpYCB3YXMgc3VwcG9zZWQgdG8gd3JhcCBhcm91bmQgZnJvbSBgb3V0YCB0byBgMGAsXG5cdFx0XHQvLyBpbmNyZW1lbnRpbmcgYG5gIGVhY2ggdGltZSwgc28gd2UnbGwgZml4IHRoYXQgbm93OlxuXHRcdFx0aWYgKGZsb29yKGkgLyBvdXQpID4gbWF4SW50IC0gbikge1xuXHRcdFx0XHRlcnJvcignb3ZlcmZsb3cnKTtcblx0XHRcdH1cblxuXHRcdFx0biArPSBmbG9vcihpIC8gb3V0KTtcblx0XHRcdGkgJT0gb3V0O1xuXG5cdFx0XHQvLyBJbnNlcnQgYG5gIGF0IHBvc2l0aW9uIGBpYCBvZiB0aGUgb3V0cHV0XG5cdFx0XHRvdXRwdXQuc3BsaWNlKGkrKywgMCwgbik7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gdWNzMmVuY29kZShvdXRwdXQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgc3RyaW5nIG9mIFVuaWNvZGUgc3ltYm9scyAoZS5nLiBhIGRvbWFpbiBuYW1lIGxhYmVsKSB0byBhXG5cdCAqIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMuXG5cdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIHN0cmluZyBvZiBVbmljb2RlIHN5bWJvbHMuXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSByZXN1bHRpbmcgUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scy5cblx0ICovXG5cdGZ1bmN0aW9uIGVuY29kZShpbnB1dCkge1xuXHRcdHZhciBuLFxuXHRcdCAgICBkZWx0YSxcblx0XHQgICAgaGFuZGxlZENQQ291bnQsXG5cdFx0ICAgIGJhc2ljTGVuZ3RoLFxuXHRcdCAgICBiaWFzLFxuXHRcdCAgICBqLFxuXHRcdCAgICBtLFxuXHRcdCAgICBxLFxuXHRcdCAgICBrLFxuXHRcdCAgICB0LFxuXHRcdCAgICBjdXJyZW50VmFsdWUsXG5cdFx0ICAgIG91dHB1dCA9IFtdLFxuXHRcdCAgICAvKiogYGlucHV0TGVuZ3RoYCB3aWxsIGhvbGQgdGhlIG51bWJlciBvZiBjb2RlIHBvaW50cyBpbiBgaW5wdXRgLiAqL1xuXHRcdCAgICBpbnB1dExlbmd0aCxcblx0XHQgICAgLyoqIENhY2hlZCBjYWxjdWxhdGlvbiByZXN1bHRzICovXG5cdFx0ICAgIGhhbmRsZWRDUENvdW50UGx1c09uZSxcblx0XHQgICAgYmFzZU1pbnVzVCxcblx0XHQgICAgcU1pbnVzVDtcblxuXHRcdC8vIENvbnZlcnQgdGhlIGlucHV0IGluIFVDUy0yIHRvIFVuaWNvZGVcblx0XHRpbnB1dCA9IHVjczJkZWNvZGUoaW5wdXQpO1xuXG5cdFx0Ly8gQ2FjaGUgdGhlIGxlbmd0aFxuXHRcdGlucHV0TGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuXG5cdFx0Ly8gSW5pdGlhbGl6ZSB0aGUgc3RhdGVcblx0XHRuID0gaW5pdGlhbE47XG5cdFx0ZGVsdGEgPSAwO1xuXHRcdGJpYXMgPSBpbml0aWFsQmlhcztcblxuXHRcdC8vIEhhbmRsZSB0aGUgYmFzaWMgY29kZSBwb2ludHNcblx0XHRmb3IgKGogPSAwOyBqIDwgaW5wdXRMZW5ndGg7ICsraikge1xuXHRcdFx0Y3VycmVudFZhbHVlID0gaW5wdXRbal07XG5cdFx0XHRpZiAoY3VycmVudFZhbHVlIDwgMHg4MCkge1xuXHRcdFx0XHRvdXRwdXQucHVzaChzdHJpbmdGcm9tQ2hhckNvZGUoY3VycmVudFZhbHVlKSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aGFuZGxlZENQQ291bnQgPSBiYXNpY0xlbmd0aCA9IG91dHB1dC5sZW5ndGg7XG5cblx0XHQvLyBgaGFuZGxlZENQQ291bnRgIGlzIHRoZSBudW1iZXIgb2YgY29kZSBwb2ludHMgdGhhdCBoYXZlIGJlZW4gaGFuZGxlZDtcblx0XHQvLyBgYmFzaWNMZW5ndGhgIGlzIHRoZSBudW1iZXIgb2YgYmFzaWMgY29kZSBwb2ludHMuXG5cblx0XHQvLyBGaW5pc2ggdGhlIGJhc2ljIHN0cmluZyAtIGlmIGl0IGlzIG5vdCBlbXB0eSAtIHdpdGggYSBkZWxpbWl0ZXJcblx0XHRpZiAoYmFzaWNMZW5ndGgpIHtcblx0XHRcdG91dHB1dC5wdXNoKGRlbGltaXRlcik7XG5cdFx0fVxuXG5cdFx0Ly8gTWFpbiBlbmNvZGluZyBsb29wOlxuXHRcdHdoaWxlIChoYW5kbGVkQ1BDb3VudCA8IGlucHV0TGVuZ3RoKSB7XG5cblx0XHRcdC8vIEFsbCBub24tYmFzaWMgY29kZSBwb2ludHMgPCBuIGhhdmUgYmVlbiBoYW5kbGVkIGFscmVhZHkuIEZpbmQgdGhlIG5leHRcblx0XHRcdC8vIGxhcmdlciBvbmU6XG5cdFx0XHRmb3IgKG0gPSBtYXhJbnQsIGogPSAwOyBqIDwgaW5wdXRMZW5ndGg7ICsraikge1xuXHRcdFx0XHRjdXJyZW50VmFsdWUgPSBpbnB1dFtqXTtcblx0XHRcdFx0aWYgKGN1cnJlbnRWYWx1ZSA+PSBuICYmIGN1cnJlbnRWYWx1ZSA8IG0pIHtcblx0XHRcdFx0XHRtID0gY3VycmVudFZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIEluY3JlYXNlIGBkZWx0YWAgZW5vdWdoIHRvIGFkdmFuY2UgdGhlIGRlY29kZXIncyA8bixpPiBzdGF0ZSB0byA8bSwwPixcblx0XHRcdC8vIGJ1dCBndWFyZCBhZ2FpbnN0IG92ZXJmbG93XG5cdFx0XHRoYW5kbGVkQ1BDb3VudFBsdXNPbmUgPSBoYW5kbGVkQ1BDb3VudCArIDE7XG5cdFx0XHRpZiAobSAtIG4gPiBmbG9vcigobWF4SW50IC0gZGVsdGEpIC8gaGFuZGxlZENQQ291bnRQbHVzT25lKSkge1xuXHRcdFx0XHRlcnJvcignb3ZlcmZsb3cnKTtcblx0XHRcdH1cblxuXHRcdFx0ZGVsdGEgKz0gKG0gLSBuKSAqIGhhbmRsZWRDUENvdW50UGx1c09uZTtcblx0XHRcdG4gPSBtO1xuXG5cdFx0XHRmb3IgKGogPSAwOyBqIDwgaW5wdXRMZW5ndGg7ICsraikge1xuXHRcdFx0XHRjdXJyZW50VmFsdWUgPSBpbnB1dFtqXTtcblxuXHRcdFx0XHRpZiAoY3VycmVudFZhbHVlIDwgbiAmJiArK2RlbHRhID4gbWF4SW50KSB7XG5cdFx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoY3VycmVudFZhbHVlID09IG4pIHtcblx0XHRcdFx0XHQvLyBSZXByZXNlbnQgZGVsdGEgYXMgYSBnZW5lcmFsaXplZCB2YXJpYWJsZS1sZW5ndGggaW50ZWdlclxuXHRcdFx0XHRcdGZvciAocSA9IGRlbHRhLCBrID0gYmFzZTsgLyogbm8gY29uZGl0aW9uICovOyBrICs9IGJhc2UpIHtcblx0XHRcdFx0XHRcdHQgPSBrIDw9IGJpYXMgPyB0TWluIDogKGsgPj0gYmlhcyArIHRNYXggPyB0TWF4IDogayAtIGJpYXMpO1xuXHRcdFx0XHRcdFx0aWYgKHEgPCB0KSB7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cU1pbnVzVCA9IHEgLSB0O1xuXHRcdFx0XHRcdFx0YmFzZU1pbnVzVCA9IGJhc2UgLSB0O1xuXHRcdFx0XHRcdFx0b3V0cHV0LnB1c2goXG5cdFx0XHRcdFx0XHRcdHN0cmluZ0Zyb21DaGFyQ29kZShkaWdpdFRvQmFzaWModCArIHFNaW51c1QgJSBiYXNlTWludXNULCAwKSlcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRxID0gZmxvb3IocU1pbnVzVCAvIGJhc2VNaW51c1QpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdG91dHB1dC5wdXNoKHN0cmluZ0Zyb21DaGFyQ29kZShkaWdpdFRvQmFzaWMocSwgMCkpKTtcblx0XHRcdFx0XHRiaWFzID0gYWRhcHQoZGVsdGEsIGhhbmRsZWRDUENvdW50UGx1c09uZSwgaGFuZGxlZENQQ291bnQgPT0gYmFzaWNMZW5ndGgpO1xuXHRcdFx0XHRcdGRlbHRhID0gMDtcblx0XHRcdFx0XHQrK2hhbmRsZWRDUENvdW50O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdCsrZGVsdGE7XG5cdFx0XHQrK247XG5cblx0XHR9XG5cdFx0cmV0dXJuIG91dHB1dC5qb2luKCcnKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIFB1bnljb2RlIHN0cmluZyByZXByZXNlbnRpbmcgYSBkb21haW4gbmFtZSBvciBhbiBlbWFpbCBhZGRyZXNzXG5cdCAqIHRvIFVuaWNvZGUuIE9ubHkgdGhlIFB1bnljb2RlZCBwYXJ0cyBvZiB0aGUgaW5wdXQgd2lsbCBiZSBjb252ZXJ0ZWQsIGkuZS5cblx0ICogaXQgZG9lc24ndCBtYXR0ZXIgaWYgeW91IGNhbGwgaXQgb24gYSBzdHJpbmcgdGhhdCBoYXMgYWxyZWFkeSBiZWVuXG5cdCAqIGNvbnZlcnRlZCB0byBVbmljb2RlLlxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBQdW55Y29kZWQgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcyB0b1xuXHQgKiBjb252ZXJ0IHRvIFVuaWNvZGUuXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBVbmljb2RlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiBQdW55Y29kZVxuXHQgKiBzdHJpbmcuXG5cdCAqL1xuXHRmdW5jdGlvbiB0b1VuaWNvZGUoaW5wdXQpIHtcblx0XHRyZXR1cm4gbWFwRG9tYWluKGlucHV0LCBmdW5jdGlvbihzdHJpbmcpIHtcblx0XHRcdHJldHVybiByZWdleFB1bnljb2RlLnRlc3Qoc3RyaW5nKVxuXHRcdFx0XHQ/IGRlY29kZShzdHJpbmcuc2xpY2UoNCkudG9Mb3dlckNhc2UoKSlcblx0XHRcdFx0OiBzdHJpbmc7XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogQ29udmVydHMgYSBVbmljb2RlIHN0cmluZyByZXByZXNlbnRpbmcgYSBkb21haW4gbmFtZSBvciBhbiBlbWFpbCBhZGRyZXNzIHRvXG5cdCAqIFB1bnljb2RlLiBPbmx5IHRoZSBub24tQVNDSUkgcGFydHMgb2YgdGhlIGRvbWFpbiBuYW1lIHdpbGwgYmUgY29udmVydGVkLFxuXHQgKiBpLmUuIGl0IGRvZXNuJ3QgbWF0dGVyIGlmIHlvdSBjYWxsIGl0IHdpdGggYSBkb21haW4gdGhhdCdzIGFscmVhZHkgaW5cblx0ICogQVNDSUkuXG5cdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIGRvbWFpbiBuYW1lIG9yIGVtYWlsIGFkZHJlc3MgdG8gY29udmVydCwgYXMgYVxuXHQgKiBVbmljb2RlIHN0cmluZy5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIFB1bnljb2RlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiBkb21haW4gbmFtZSBvclxuXHQgKiBlbWFpbCBhZGRyZXNzLlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9BU0NJSShpbnB1dCkge1xuXHRcdHJldHVybiBtYXBEb21haW4oaW5wdXQsIGZ1bmN0aW9uKHN0cmluZykge1xuXHRcdFx0cmV0dXJuIHJlZ2V4Tm9uQVNDSUkudGVzdChzdHJpbmcpXG5cdFx0XHRcdD8gJ3huLS0nICsgZW5jb2RlKHN0cmluZylcblx0XHRcdFx0OiBzdHJpbmc7XG5cdFx0fSk7XG5cdH1cblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHQvKiogRGVmaW5lIHRoZSBwdWJsaWMgQVBJICovXG5cdHB1bnljb2RlID0ge1xuXHRcdC8qKlxuXHRcdCAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBQdW55Y29kZS5qcyB2ZXJzaW9uIG51bWJlci5cblx0XHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0XHQgKiBAdHlwZSBTdHJpbmdcblx0XHQgKi9cblx0XHQndmVyc2lvbic6ICcxLjQuMScsXG5cdFx0LyoqXG5cdFx0ICogQW4gb2JqZWN0IG9mIG1ldGhvZHMgdG8gY29udmVydCBmcm9tIEphdmFTY3JpcHQncyBpbnRlcm5hbCBjaGFyYWN0ZXJcblx0XHQgKiByZXByZXNlbnRhdGlvbiAoVUNTLTIpIHRvIFVuaWNvZGUgY29kZSBwb2ludHMsIGFuZCBiYWNrLlxuXHRcdCAqIEBzZWUgPGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LWVuY29kaW5nPlxuXHRcdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHRcdCAqIEB0eXBlIE9iamVjdFxuXHRcdCAqL1xuXHRcdCd1Y3MyJzoge1xuXHRcdFx0J2RlY29kZSc6IHVjczJkZWNvZGUsXG5cdFx0XHQnZW5jb2RlJzogdWNzMmVuY29kZVxuXHRcdH0sXG5cdFx0J2RlY29kZSc6IGRlY29kZSxcblx0XHQnZW5jb2RlJzogZW5jb2RlLFxuXHRcdCd0b0FTQ0lJJzogdG9BU0NJSSxcblx0XHQndG9Vbmljb2RlJzogdG9Vbmljb2RlXG5cdH07XG5cblx0LyoqIEV4cG9zZSBgcHVueWNvZGVgICovXG5cdC8vIFNvbWUgQU1EIGJ1aWxkIG9wdGltaXplcnMsIGxpa2Ugci5qcywgY2hlY2sgZm9yIHNwZWNpZmljIGNvbmRpdGlvbiBwYXR0ZXJuc1xuXHQvLyBsaWtlIHRoZSBmb2xsb3dpbmc6XG5cdGlmIChcblx0XHR0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiZcblx0XHR0eXBlb2YgZGVmaW5lLmFtZCA9PSAnb2JqZWN0JyAmJlxuXHRcdGRlZmluZS5hbWRcblx0KSB7XG5cdFx0ZGVmaW5lKCdwdW55Y29kZScsIGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHB1bnljb2RlO1xuXHRcdH0pO1xuXHR9IGVsc2UgaWYgKGZyZWVFeHBvcnRzICYmIGZyZWVNb2R1bGUpIHtcblx0XHRpZiAobW9kdWxlLmV4cG9ydHMgPT0gZnJlZUV4cG9ydHMpIHtcblx0XHRcdC8vIGluIE5vZGUuanMsIGlvLmpzLCBvciBSaW5nb0pTIHYwLjguMCtcblx0XHRcdGZyZWVNb2R1bGUuZXhwb3J0cyA9IHB1bnljb2RlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBpbiBOYXJ3aGFsIG9yIFJpbmdvSlMgdjAuNy4wLVxuXHRcdFx0Zm9yIChrZXkgaW4gcHVueWNvZGUpIHtcblx0XHRcdFx0cHVueWNvZGUuaGFzT3duUHJvcGVydHkoa2V5KSAmJiAoZnJlZUV4cG9ydHNba2V5XSA9IHB1bnljb2RlW2tleV0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fSBlbHNlIHtcblx0XHQvLyBpbiBSaGlubyBvciBhIHdlYiBicm93c2VyXG5cdFx0cm9vdC5wdW55Y29kZSA9IHB1bnljb2RlO1xuXHR9XG5cbn0odGhpcykpO1xuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbid1c2Ugc3RyaWN0JztcblxuLy8gSWYgb2JqLmhhc093blByb3BlcnR5IGhhcyBiZWVuIG92ZXJyaWRkZW4sIHRoZW4gY2FsbGluZ1xuLy8gb2JqLmhhc093blByb3BlcnR5KHByb3ApIHdpbGwgYnJlYWsuXG4vLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9qb3llbnQvbm9kZS9pc3N1ZXMvMTcwN1xuZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLCBwcm9wKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihxcywgc2VwLCBlcSwgb3B0aW9ucykge1xuICBzZXAgPSBzZXAgfHwgJyYnO1xuICBlcSA9IGVxIHx8ICc9JztcbiAgdmFyIG9iaiA9IHt9O1xuXG4gIGlmICh0eXBlb2YgcXMgIT09ICdzdHJpbmcnIHx8IHFzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICB2YXIgcmVnZXhwID0gL1xcKy9nO1xuICBxcyA9IHFzLnNwbGl0KHNlcCk7XG5cbiAgdmFyIG1heEtleXMgPSAxMDAwO1xuICBpZiAob3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucy5tYXhLZXlzID09PSAnbnVtYmVyJykge1xuICAgIG1heEtleXMgPSBvcHRpb25zLm1heEtleXM7XG4gIH1cblxuICB2YXIgbGVuID0gcXMubGVuZ3RoO1xuICAvLyBtYXhLZXlzIDw9IDAgbWVhbnMgdGhhdCB3ZSBzaG91bGQgbm90IGxpbWl0IGtleXMgY291bnRcbiAgaWYgKG1heEtleXMgPiAwICYmIGxlbiA+IG1heEtleXMpIHtcbiAgICBsZW4gPSBtYXhLZXlzO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgIHZhciB4ID0gcXNbaV0ucmVwbGFjZShyZWdleHAsICclMjAnKSxcbiAgICAgICAgaWR4ID0geC5pbmRleE9mKGVxKSxcbiAgICAgICAga3N0ciwgdnN0ciwgaywgdjtcblxuICAgIGlmIChpZHggPj0gMCkge1xuICAgICAga3N0ciA9IHguc3Vic3RyKDAsIGlkeCk7XG4gICAgICB2c3RyID0geC5zdWJzdHIoaWR4ICsgMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtzdHIgPSB4O1xuICAgICAgdnN0ciA9ICcnO1xuICAgIH1cblxuICAgIGsgPSBkZWNvZGVVUklDb21wb25lbnQoa3N0cik7XG4gICAgdiA9IGRlY29kZVVSSUNvbXBvbmVudCh2c3RyKTtcblxuICAgIGlmICghaGFzT3duUHJvcGVydHkob2JqLCBrKSkge1xuICAgICAgb2JqW2tdID0gdjtcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkob2JqW2tdKSkge1xuICAgICAgb2JqW2tdLnB1c2godik7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9ialtrXSA9IFtvYmpba10sIHZdO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvYmo7XG59O1xuXG52YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKHhzKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeHMpID09PSAnW29iamVjdCBBcnJheV0nO1xufTtcbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBzdHJpbmdpZnlQcmltaXRpdmUgPSBmdW5jdGlvbih2KSB7XG4gIHN3aXRjaCAodHlwZW9mIHYpIHtcbiAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgcmV0dXJuIHY7XG5cbiAgICBjYXNlICdib29sZWFuJzpcbiAgICAgIHJldHVybiB2ID8gJ3RydWUnIDogJ2ZhbHNlJztcblxuICAgIGNhc2UgJ251bWJlcic6XG4gICAgICByZXR1cm4gaXNGaW5pdGUodikgPyB2IDogJyc7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuICcnO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaiwgc2VwLCBlcSwgbmFtZSkge1xuICBzZXAgPSBzZXAgfHwgJyYnO1xuICBlcSA9IGVxIHx8ICc9JztcbiAgaWYgKG9iaiA9PT0gbnVsbCkge1xuICAgIG9iaiA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGlmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBtYXAob2JqZWN0S2V5cyhvYmopLCBmdW5jdGlvbihrKSB7XG4gICAgICB2YXIga3MgPSBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKGspKSArIGVxO1xuICAgICAgaWYgKGlzQXJyYXkob2JqW2tdKSkge1xuICAgICAgICByZXR1cm4gbWFwKG9ialtrXSwgZnVuY3Rpb24odikge1xuICAgICAgICAgIHJldHVybiBrcyArIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUodikpO1xuICAgICAgICB9KS5qb2luKHNlcCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ga3MgKyBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKG9ialtrXSkpO1xuICAgICAgfVxuICAgIH0pLmpvaW4oc2VwKTtcblxuICB9XG5cbiAgaWYgKCFuYW1lKSByZXR1cm4gJyc7XG4gIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKG5hbWUpKSArIGVxICtcbiAgICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUob2JqKSk7XG59O1xuXG52YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKHhzKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeHMpID09PSAnW29iamVjdCBBcnJheV0nO1xufTtcblxuZnVuY3Rpb24gbWFwICh4cywgZikge1xuICBpZiAoeHMubWFwKSByZXR1cm4geHMubWFwKGYpO1xuICB2YXIgcmVzID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgeHMubGVuZ3RoOyBpKyspIHtcbiAgICByZXMucHVzaChmKHhzW2ldLCBpKSk7XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxudmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiAob2JqKSB7XG4gIHZhciByZXMgPSBbXTtcbiAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSByZXMucHVzaChrZXkpO1xuICB9XG4gIHJldHVybiByZXM7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLmRlY29kZSA9IGV4cG9ydHMucGFyc2UgPSByZXF1aXJlKCcuL2RlY29kZScpO1xuZXhwb3J0cy5lbmNvZGUgPSBleHBvcnRzLnN0cmluZ2lmeSA9IHJlcXVpcmUoJy4vZW5jb2RlJyk7XG4iLCIhZnVuY3Rpb24odCxlKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzLnJvbGxiYXI9ZSgpOnQucm9sbGJhcj1lKCl9KHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShuKXtpZihyW25dKXJldHVybiByW25dLmV4cG9ydHM7dmFyIG89cltuXT17ZXhwb3J0czp7fSxpZDpuLGxvYWRlZDohMX07cmV0dXJuIHRbbl0uY2FsbChvLmV4cG9ydHMsbyxvLmV4cG9ydHMsZSksby5sb2FkZWQ9ITAsby5leHBvcnRzfXZhciByPXt9O3JldHVybiBlLm09dCxlLmM9cixlLnA9XCJcIixlKDApfShbZnVuY3Rpb24odCxlLHIpe3QuZXhwb3J0cz1yKDEpfSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cigyKSxvPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5fcm9sbGJhckNvbmZpZyxpPW8mJm8uZ2xvYmFsQWxpYXN8fFwiUm9sbGJhclwiLGE9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93W2ldJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB3aW5kb3dbaV0uc2hpbUlkJiZ2b2lkIDAhPT13aW5kb3dbaV0uc2hpbUlkKCk7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIHdpbmRvd3x8d2luZG93Ll9yb2xsYmFyU3RhcnRUaW1lfHwod2luZG93Ll9yb2xsYmFyU3RhcnRUaW1lPShuZXcgRGF0ZSkuZ2V0VGltZSgpKSwhYSYmbyl7dmFyIHM9bmV3IG4obyk7d2luZG93W2ldPXN9ZWxzZVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/KHdpbmRvdy5yb2xsYmFyPW4sd2luZG93Ll9yb2xsYmFyRGlkTG9hZD0hMCk6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGYmJihzZWxmLnJvbGxiYXI9bixzZWxmLl9yb2xsYmFyRGlkTG9hZD0hMCk7dC5leHBvcnRzPW59LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7dGhpcy5vcHRpb25zPWMuaGFuZGxlT3B0aW9ucyh4LHQpO3ZhciByPW5ldyBsKHRoaXMub3B0aW9ucyxoLGQpO3RoaXMuY2xpZW50PWV8fG5ldyB1KHRoaXMub3B0aW9ucyxyLHAsXCJicm93c2VyXCIpO3ZhciBuPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvd3x8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGYmJnNlbGYsbz1cInVuZGVmaW5lZFwiIT10eXBlb2YgZG9jdW1lbnQmJmRvY3VtZW50O2kodGhpcy5jbGllbnQubm90aWZpZXIsbiksYSh0aGlzLmNsaWVudC5xdWV1ZSksKHRoaXMub3B0aW9ucy5jYXB0dXJlVW5jYXVnaHR8fHRoaXMub3B0aW9ucy5oYW5kbGVVbmNhdWdodEV4Y2VwdGlvbnMpJiYoZi5jYXB0dXJlVW5jYXVnaHRFeGNlcHRpb25zKG4sdGhpcyksZi53cmFwR2xvYmFscyhuLHRoaXMpKSwodGhpcy5vcHRpb25zLmNhcHR1cmVVbmhhbmRsZWRSZWplY3Rpb25zfHx0aGlzLm9wdGlvbnMuaGFuZGxlVW5oYW5kbGVkUmVqZWN0aW9ucykmJmYuY2FwdHVyZVVuaGFuZGxlZFJlamVjdGlvbnMobix0aGlzKSx0aGlzLmluc3RydW1lbnRlcj1uZXcgdyh0aGlzLm9wdGlvbnMsdGhpcy5jbGllbnQudGVsZW1ldGVyLHRoaXMsbixvKSx0aGlzLmluc3RydW1lbnRlci5pbnN0cnVtZW50KCl9ZnVuY3Rpb24gbyh0KXt2YXIgZT1cIlJvbGxiYXIgaXMgbm90IGluaXRpYWxpemVkXCI7cC5lcnJvcihlKSx0JiZ0KG5ldyBFcnJvcihlKSl9ZnVuY3Rpb24gaSh0LGUpe3QuYWRkVHJhbnNmb3JtKG0uaGFuZGxlSXRlbVdpdGhFcnJvcikuYWRkVHJhbnNmb3JtKG0uZW5zdXJlSXRlbUhhc1NvbWV0aGluZ1RvU2F5KS5hZGRUcmFuc2Zvcm0obS5hZGRCYXNlSW5mbykuYWRkVHJhbnNmb3JtKG0uYWRkUmVxdWVzdEluZm8oZSkpLmFkZFRyYW5zZm9ybShtLmFkZENsaWVudEluZm8oZSkpLmFkZFRyYW5zZm9ybShtLmFkZFBsdWdpbkluZm8oZSkpLmFkZFRyYW5zZm9ybShtLmFkZEJvZHkpLmFkZFRyYW5zZm9ybShnLmFkZE1lc3NhZ2VXaXRoRXJyb3IpLmFkZFRyYW5zZm9ybShnLmFkZFRlbGVtZXRyeURhdGEpLmFkZFRyYW5zZm9ybShnLmFkZENvbmZpZ1RvUGF5bG9hZCkuYWRkVHJhbnNmb3JtKG0uc2NydWJQYXlsb2FkKS5hZGRUcmFuc2Zvcm0oZy51c2VyVHJhbnNmb3JtKHApKS5hZGRUcmFuc2Zvcm0oZy5pdGVtVG9QYXlsb2FkKX1mdW5jdGlvbiBhKHQpe3QuYWRkUHJlZGljYXRlKHkuY2hlY2tMZXZlbCkuYWRkUHJlZGljYXRlKHYuY2hlY2tJZ25vcmUpLmFkZFByZWRpY2F0ZSh5LnVzZXJDaGVja0lnbm9yZShwKSkuYWRkUHJlZGljYXRlKHkudXJsSXNOb3RCbGFja2xpc3RlZChwKSkuYWRkUHJlZGljYXRlKHkudXJsSXNXaGl0ZWxpc3RlZChwKSkuYWRkUHJlZGljYXRlKHkubWVzc2FnZUlzSWdub3JlZChwKSl9ZnVuY3Rpb24gcyh0KXtmb3IodmFyIGU9MCxyPXQubGVuZ3RoO2U8cjsrK2UpaWYoYy5pc0Z1bmN0aW9uKHRbZV0pKXJldHVybiB0W2VdfXZhciB1PXIoMyksYz1yKDUpLGw9cigxMSkscD1yKDEzKSxmPXIoMTYpLGg9cigxNyksZD1yKDE5KSxtPXIoMjApLGc9cigyNCksdj1yKDI1KSx5PXIoMjYpLGI9cigyMSksdz1yKDI3KSxfPW51bGw7bi5pbml0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIF8/Xy5nbG9iYWwodCkuY29uZmlndXJlKHQpOl89bmV3IG4odCxlKX0sbi5wcm90b3R5cGUuZ2xvYmFsPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNsaWVudC5nbG9iYWwodCksdGhpc30sbi5nbG9iYWw9ZnVuY3Rpb24odCl7cmV0dXJuIF8/Xy5nbG9iYWwodCk6dm9pZCBvKCl9LG4ucHJvdG90eXBlLmNvbmZpZ3VyZT1mdW5jdGlvbih0LGUpe3ZhciByPXRoaXMub3B0aW9ucyxuPXt9O3JldHVybiBlJiYobj17cGF5bG9hZDplfSksdGhpcy5vcHRpb25zPWMuaGFuZGxlT3B0aW9ucyhyLHQsbiksdGhpcy5jbGllbnQuY29uZmlndXJlKHRoaXMub3B0aW9ucyxlKSx0aGlzLmluc3RydW1lbnRlci5jb25maWd1cmUodGhpcy5vcHRpb25zKSx0aGlzfSxuLmNvbmZpZ3VyZT1mdW5jdGlvbih0LGUpe3JldHVybiBfP18uY29uZmlndXJlKHQsZSk6dm9pZCBvKCl9LG4ucHJvdG90eXBlLmxhc3RFcnJvcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNsaWVudC5sYXN0RXJyb3J9LG4ubGFzdEVycm9yPWZ1bmN0aW9uKCl7cmV0dXJuIF8/Xy5sYXN0RXJyb3IoKTp2b2lkIG8oKX0sbi5wcm90b3R5cGUubG9nPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fY3JlYXRlSXRlbShhcmd1bWVudHMpLGU9dC51dWlkO3JldHVybiB0aGlzLmNsaWVudC5sb2codCkse3V1aWQ6ZX19LG4ubG9nPWZ1bmN0aW9uKCl7aWYoXylyZXR1cm4gXy5sb2cuYXBwbHkoXyxhcmd1bWVudHMpO3ZhciB0PXMoYXJndW1lbnRzKTtvKHQpfSxuLnByb3RvdHlwZS5kZWJ1Zz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2NyZWF0ZUl0ZW0oYXJndW1lbnRzKSxlPXQudXVpZDtyZXR1cm4gdGhpcy5jbGllbnQuZGVidWcodCkse3V1aWQ6ZX19LG4uZGVidWc9ZnVuY3Rpb24oKXtpZihfKXJldHVybiBfLmRlYnVnLmFwcGx5KF8sYXJndW1lbnRzKTt2YXIgdD1zKGFyZ3VtZW50cyk7byh0KX0sbi5wcm90b3R5cGUuaW5mbz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2NyZWF0ZUl0ZW0oYXJndW1lbnRzKSxlPXQudXVpZDtyZXR1cm4gdGhpcy5jbGllbnQuaW5mbyh0KSx7dXVpZDplfX0sbi5pbmZvPWZ1bmN0aW9uKCl7aWYoXylyZXR1cm4gXy5pbmZvLmFwcGx5KF8sYXJndW1lbnRzKTt2YXIgdD1zKGFyZ3VtZW50cyk7byh0KX0sbi5wcm90b3R5cGUud2Fybj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2NyZWF0ZUl0ZW0oYXJndW1lbnRzKSxlPXQudXVpZDtyZXR1cm4gdGhpcy5jbGllbnQud2Fybih0KSx7dXVpZDplfX0sbi53YXJuPWZ1bmN0aW9uKCl7aWYoXylyZXR1cm4gXy53YXJuLmFwcGx5KF8sYXJndW1lbnRzKTt2YXIgdD1zKGFyZ3VtZW50cyk7byh0KX0sbi5wcm90b3R5cGUud2FybmluZz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2NyZWF0ZUl0ZW0oYXJndW1lbnRzKSxlPXQudXVpZDtyZXR1cm4gdGhpcy5jbGllbnQud2FybmluZyh0KSx7dXVpZDplfX0sbi53YXJuaW5nPWZ1bmN0aW9uKCl7aWYoXylyZXR1cm4gXy53YXJuaW5nLmFwcGx5KF8sYXJndW1lbnRzKTt2YXIgdD1zKGFyZ3VtZW50cyk7byh0KX0sbi5wcm90b3R5cGUuZXJyb3I9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9jcmVhdGVJdGVtKGFyZ3VtZW50cyksZT10LnV1aWQ7cmV0dXJuIHRoaXMuY2xpZW50LmVycm9yKHQpLHt1dWlkOmV9fSxuLmVycm9yPWZ1bmN0aW9uKCl7aWYoXylyZXR1cm4gXy5lcnJvci5hcHBseShfLGFyZ3VtZW50cyk7dmFyIHQ9cyhhcmd1bWVudHMpO28odCl9LG4ucHJvdG90eXBlLmNyaXRpY2FsPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fY3JlYXRlSXRlbShhcmd1bWVudHMpLGU9dC51dWlkO3JldHVybiB0aGlzLmNsaWVudC5jcml0aWNhbCh0KSx7dXVpZDplfX0sbi5jcml0aWNhbD1mdW5jdGlvbigpe2lmKF8pcmV0dXJuIF8uY3JpdGljYWwuYXBwbHkoXyxhcmd1bWVudHMpO3ZhciB0PXMoYXJndW1lbnRzKTtvKHQpfSxuLnByb3RvdHlwZS5oYW5kbGVVbmNhdWdodEV4Y2VwdGlvbj1mdW5jdGlvbih0LGUscixuLG8saSl7dmFyIGEscz1jLm1ha2VVbmhhbmRsZWRTdGFja0luZm8odCxlLHIsbixvLFwib25lcnJvclwiLFwidW5jYXVnaHQgZXhjZXB0aW9uXCIsYik7Yy5pc0Vycm9yKG8pPyhhPXRoaXMuX2NyZWF0ZUl0ZW0oW3QsbyxpXSksYS5fdW5oYW5kbGVkU3RhY2tJbmZvPXMpOmMuaXNFcnJvcihlKT8oYT10aGlzLl9jcmVhdGVJdGVtKFt0LGUsaV0pLGEuX3VuaGFuZGxlZFN0YWNrSW5mbz1zKTooYT10aGlzLl9jcmVhdGVJdGVtKFt0LGldKSxhLnN0YWNrSW5mbz1zKSxhLmxldmVsPXRoaXMub3B0aW9ucy51bmNhdWdodEVycm9yTGV2ZWwsYS5faXNVbmNhdWdodD0hMCx0aGlzLmNsaWVudC5sb2coYSl9LG4ucHJvdG90eXBlLmhhbmRsZVVuaGFuZGxlZFJlamVjdGlvbj1mdW5jdGlvbih0LGUpe3ZhciByPVwidW5oYW5kbGVkIHJlamVjdGlvbiB3YXMgbnVsbCBvciB1bmRlZmluZWQhXCI7aWYodClpZih0Lm1lc3NhZ2Upcj10Lm1lc3NhZ2U7ZWxzZXt2YXIgbj1jLnN0cmluZ2lmeSh0KTtuLnZhbHVlJiYocj1uLnZhbHVlKX12YXIgbyxpPXQmJnQuX3JvbGxiYXJDb250ZXh0fHxlJiZlLl9yb2xsYmFyQ29udGV4dDtjLmlzRXJyb3IodCk/bz10aGlzLl9jcmVhdGVJdGVtKFtyLHQsaV0pOihvPXRoaXMuX2NyZWF0ZUl0ZW0oW3IsdCxpXSksby5zdGFja0luZm89Yy5tYWtlVW5oYW5kbGVkU3RhY2tJbmZvKHIsXCJcIiwwLDAsbnVsbCxcInVuaGFuZGxlZHJlamVjdGlvblwiLFwiXCIsYikpLG8ubGV2ZWw9dGhpcy5vcHRpb25zLnVuY2F1Z2h0RXJyb3JMZXZlbCxvLl9pc1VuY2F1Z2h0PSEwLG8uX29yaWdpbmFsQXJncz1vLl9vcmlnaW5hbEFyZ3N8fFtdLG8uX29yaWdpbmFsQXJncy5wdXNoKGUpLHRoaXMuY2xpZW50LmxvZyhvKX0sbi5wcm90b3R5cGUud3JhcD1mdW5jdGlvbih0LGUscil7dHJ5e3ZhciBuO2lmKG49Yy5pc0Z1bmN0aW9uKGUpP2U6ZnVuY3Rpb24oKXtyZXR1cm4gZXx8e319LCFjLmlzRnVuY3Rpb24odCkpcmV0dXJuIHQ7aWYodC5faXNXcmFwKXJldHVybiB0O2lmKCF0Ll9yb2xsYmFyX3dyYXBwZWQmJih0Ll9yb2xsYmFyX3dyYXBwZWQ9ZnVuY3Rpb24oKXtyJiZjLmlzRnVuY3Rpb24ocikmJnIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RyeXtyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9Y2F0Y2gocil7dmFyIGU9cjt0aHJvdyBlJiZ3aW5kb3cuX3JvbGxiYXJXcmFwcGVkRXJyb3IhPT1lJiYoYy5pc1R5cGUoZSxcInN0cmluZ1wiKSYmKGU9bmV3IFN0cmluZyhlKSksZS5fcm9sbGJhckNvbnRleHQ9bigpfHx7fSxlLl9yb2xsYmFyQ29udGV4dC5fd3JhcHBlZFNvdXJjZT10LnRvU3RyaW5nKCksd2luZG93Ll9yb2xsYmFyV3JhcHBlZEVycm9yPWUpLGV9fSx0Ll9yb2xsYmFyX3dyYXBwZWQuX2lzV3JhcD0hMCx0Lmhhc093blByb3BlcnR5KSlmb3IodmFyIG8gaW4gdCl0Lmhhc093blByb3BlcnR5KG8pJiZcIl9yb2xsYmFyX3dyYXBwZWRcIiE9PW8mJih0Ll9yb2xsYmFyX3dyYXBwZWRbb109dFtvXSk7cmV0dXJuIHQuX3JvbGxiYXJfd3JhcHBlZH1jYXRjaChlKXtyZXR1cm4gdH19LG4ud3JhcD1mdW5jdGlvbih0LGUpe3JldHVybiBfP18ud3JhcCh0LGUpOnZvaWQgbygpfSxuLnByb3RvdHlwZS5jYXB0dXJlRXZlbnQ9ZnVuY3Rpb24oKXt2YXIgdD1jLmNyZWF0ZVRlbGVtZXRyeUV2ZW50KGFyZ3VtZW50cyk7cmV0dXJuIHRoaXMuY2xpZW50LmNhcHR1cmVFdmVudCh0LnR5cGUsdC5tZXRhZGF0YSx0LmxldmVsKX0sbi5jYXB0dXJlRXZlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gXz9fLmNhcHR1cmVFdmVudC5hcHBseShfLGFyZ3VtZW50cyk6dm9pZCBvKCl9LG4ucHJvdG90eXBlLmNhcHR1cmVEb21Db250ZW50TG9hZGVkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV8fChlPW5ldyBEYXRlKSx0aGlzLmNsaWVudC5jYXB0dXJlRG9tQ29udGVudExvYWRlZChlKX0sbi5wcm90b3R5cGUuY2FwdHVyZUxvYWQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8KGU9bmV3IERhdGUpLHRoaXMuY2xpZW50LmNhcHR1cmVMb2FkKGUpfSxuLnByb3RvdHlwZS5fY3JlYXRlSXRlbT1mdW5jdGlvbih0KXtyZXR1cm4gYy5jcmVhdGVJdGVtKHQscCx0aGlzKX07dmFyIHg9e3ZlcnNpb246XCIyLjUuNVwiLHNjcnViRmllbGRzOltcInB3XCIsXCJwYXNzXCIsXCJwYXNzd2RcIixcInBhc3N3b3JkXCIsXCJzZWNyZXRcIixcImNvbmZpcm1fcGFzc3dvcmRcIixcImNvbmZpcm1QYXNzd29yZFwiLFwicGFzc3dvcmRfY29uZmlybWF0aW9uXCIsXCJwYXNzd29yZENvbmZpcm1hdGlvblwiLFwiYWNjZXNzX3Rva2VuXCIsXCJhY2Nlc3NUb2tlblwiLFwic2VjcmV0X2tleVwiLFwic2VjcmV0S2V5XCIsXCJzZWNyZXRUb2tlblwiLFwiY2MtbnVtYmVyXCIsXCJjYXJkIG51bWJlclwiLFwiY2FyZG51bWJlclwiLFwiY2FyZG51bVwiLFwiY2NudW1cIixcImNjbnVtYmVyXCIsXCJjYyBudW1cIixcImNyZWRpdGNhcmRudW1iZXJcIixcImNyZWRpdCBjYXJkIG51bWJlclwiLFwibmV3Y3JlZGl0Y2FyZG51bWJlclwiLFwibmV3IGNyZWRpdCBjYXJkXCIsXCJjcmVkaXRjYXJkbm9cIixcImNyZWRpdCBjYXJkIG5vXCIsXCJjYXJkI1wiLFwiY2FyZCAjXCIsXCJjYy1jc2NcIixcImN2YzJcIixcImN2djJcIixcImNjdjJcIixcInNlY3VyaXR5IGNvZGVcIixcImNhcmQgdmVyaWZpY2F0aW9uXCIsXCJuYW1lIG9uIGNyZWRpdCBjYXJkXCIsXCJuYW1lIG9uIGNhcmRcIixcIm5hbWVvbmNhcmRcIixcImNhcmRob2xkZXJcIixcImNhcmQgaG9sZGVyXCIsXCJuYW1lIGRlcyBrYXJ0ZW5pbmhhYmVyc1wiLFwiY2FyZCB0eXBlXCIsXCJjYXJkdHlwZVwiLFwiY2MgdHlwZVwiLFwiY2N0eXBlXCIsXCJwYXltZW50IHR5cGVcIixcImV4cGlyYXRpb24gZGF0ZVwiLFwiZXhwaXJhdGlvbmRhdGVcIixcImV4cGRhdGVcIixcImNjLWV4cFwiXSxsb2dMZXZlbDpcImRlYnVnXCIscmVwb3J0TGV2ZWw6XCJkZWJ1Z1wiLHVuY2F1Z2h0RXJyb3JMZXZlbDpcImVycm9yXCIsZW5kcG9pbnQ6XCJhcGkucm9sbGJhci5jb20vYXBpLzEvaXRlbS9cIix2ZXJib3NlOiExLGVuYWJsZWQ6ITAsc2VuZENvbmZpZzohMSxpbmNsdWRlSXRlbXNJblRlbGVtZXRyeTohMCxjYXB0dXJlSXA6ITB9O3QuZXhwb3J0cz1ufSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUscixvKXt0aGlzLm9wdGlvbnM9Yy5tZXJnZSh0KSx0aGlzLmxvZ2dlcj1yLG4ucmF0ZUxpbWl0ZXIuY29uZmlndXJlR2xvYmFsKHRoaXMub3B0aW9ucyksbi5yYXRlTGltaXRlci5zZXRQbGF0Zm9ybU9wdGlvbnMobyx0aGlzLm9wdGlvbnMpLHRoaXMucXVldWU9bmV3IGEobi5yYXRlTGltaXRlcixlLHIsdGhpcy5vcHRpb25zKSx0aGlzLm5vdGlmaWVyPW5ldyBzKHRoaXMucXVldWUsdGhpcy5vcHRpb25zKSx0aGlzLnRlbGVtZXRlcj1uZXcgdSh0aGlzLm9wdGlvbnMpLHRoaXMubGFzdEVycm9yPW51bGwsdGhpcy5sYXN0RXJyb3JIYXNoPVwibm9uZVwifWZ1bmN0aW9uIG8odCl7dmFyIGU9dC5tZXNzYWdlfHxcIlwiLHI9KHQuZXJyfHx7fSkuc3RhY2t8fFN0cmluZyh0LmVycik7cmV0dXJuIGUrXCI6OlwiK3J9dmFyIGk9cig0KSxhPXIoOCkscz1yKDkpLHU9cigxMCksYz1yKDUpLGw9e21heEl0ZW1zOjAsaXRlbXNQZXJNaW51dGU6NjB9O24ucmF0ZUxpbWl0ZXI9bmV3IGkobCksbi5wcm90b3R5cGUuZ2xvYmFsPWZ1bmN0aW9uKHQpe3JldHVybiBuLnJhdGVMaW1pdGVyLmNvbmZpZ3VyZUdsb2JhbCh0KSx0aGlzfSxuLnByb3RvdHlwZS5jb25maWd1cmU9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLm9wdGlvbnMsbj17fTtyZXR1cm4gZSYmKG49e3BheWxvYWQ6ZX0pLHRoaXMub3B0aW9ucz1jLm1lcmdlKHIsdCxuKSx0aGlzLm5vdGlmaWVyJiZ0aGlzLm5vdGlmaWVyLmNvbmZpZ3VyZSh0aGlzLm9wdGlvbnMpLHRoaXMudGVsZW1ldGVyJiZ0aGlzLnRlbGVtZXRlci5jb25maWd1cmUodGhpcy5vcHRpb25zKSx0aGlzLmdsb2JhbCh0aGlzLm9wdGlvbnMpLHRoaXN9LG4ucHJvdG90eXBlLmxvZz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9kZWZhdWx0TG9nTGV2ZWwoKTtyZXR1cm4gdGhpcy5fbG9nKGUsdCl9LG4ucHJvdG90eXBlLmRlYnVnPWZ1bmN0aW9uKHQpe3RoaXMuX2xvZyhcImRlYnVnXCIsdCl9LG4ucHJvdG90eXBlLmluZm89ZnVuY3Rpb24odCl7dGhpcy5fbG9nKFwiaW5mb1wiLHQpfSxuLnByb3RvdHlwZS53YXJuPWZ1bmN0aW9uKHQpe3RoaXMuX2xvZyhcIndhcm5pbmdcIix0KX0sbi5wcm90b3R5cGUud2FybmluZz1mdW5jdGlvbih0KXt0aGlzLl9sb2coXCJ3YXJuaW5nXCIsdCl9LG4ucHJvdG90eXBlLmVycm9yPWZ1bmN0aW9uKHQpe3RoaXMuX2xvZyhcImVycm9yXCIsdCl9LG4ucHJvdG90eXBlLmNyaXRpY2FsPWZ1bmN0aW9uKHQpe3RoaXMuX2xvZyhcImNyaXRpY2FsXCIsdCl9LG4ucHJvdG90eXBlLndhaXQ9ZnVuY3Rpb24odCl7dGhpcy5xdWV1ZS53YWl0KHQpfSxuLnByb3RvdHlwZS5jYXB0dXJlRXZlbnQ9ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0aGlzLnRlbGVtZXRlci5jYXB0dXJlRXZlbnQodCxlLHIpfSxuLnByb3RvdHlwZS5jYXB0dXJlRG9tQ29udGVudExvYWRlZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50ZWxlbWV0ZXIuY2FwdHVyZURvbUNvbnRlbnRMb2FkZWQodCl9LG4ucHJvdG90eXBlLmNhcHR1cmVMb2FkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRlbGVtZXRlci5jYXB0dXJlTG9hZCh0KX0sbi5wcm90b3R5cGUuX2xvZz1mdW5jdGlvbih0LGUpe3ZhciByO2lmKGUuY2FsbGJhY2smJihyPWUuY2FsbGJhY2ssZGVsZXRlIGUuY2FsbGJhY2spLHRoaXMuX3NhbWVBc0xhc3RFcnJvcihlKSl7aWYocil7dmFyIG49bmV3IEVycm9yKFwiaWdub3JlZCBpZGVudGljYWwgaXRlbVwiKTtuLml0ZW09ZSxyKG4pfX1lbHNlIHRyeXtlLmxldmVsPWUubGV2ZWx8fHQsdGhpcy50ZWxlbWV0ZXIuX2NhcHR1cmVSb2xsYmFySXRlbShlKSxlLnRlbGVtZXRyeUV2ZW50cz10aGlzLnRlbGVtZXRlci5jb3B5RXZlbnRzKCksdGhpcy5ub3RpZmllci5sb2coZSxyKX1jYXRjaCh0KXt0aGlzLmxvZ2dlci5lcnJvcih0KX19LG4ucHJvdG90eXBlLl9kZWZhdWx0TG9nTGV2ZWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLmxvZ0xldmVsfHxcImRlYnVnXCJ9LG4ucHJvdG90eXBlLl9zYW1lQXNMYXN0RXJyb3I9ZnVuY3Rpb24odCl7aWYoIXQuX2lzVW5jYXVnaHQpcmV0dXJuITE7dmFyIGU9byh0KTtyZXR1cm4gdGhpcy5sYXN0RXJyb3JIYXNoPT09ZXx8KHRoaXMubGFzdEVycm9yPXQuZXJyLHRoaXMubGFzdEVycm9ySGFzaD1lLCExKX0sdC5leHBvcnRzPW59LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe3RoaXMuc3RhcnRUaW1lPXMubm93KCksdGhpcy5jb3VudGVyPTAsdGhpcy5wZXJNaW5Db3VudGVyPTAsdGhpcy5wbGF0Zm9ybT1udWxsLHRoaXMucGxhdGZvcm1PcHRpb25zPXt9LHRoaXMuY29uZmlndXJlR2xvYmFsKHQpfWZ1bmN0aW9uIG8odCxlLHIpe3JldHVybiF0Lmlnbm9yZVJhdGVMaW1pdCYmZT49MSYmcj5lfWZ1bmN0aW9uIGkodCxlLHIsbixvLGkscyl7dmFyIHU9bnVsbDtyZXR1cm4gciYmKHI9bmV3IEVycm9yKHIpKSxyfHxufHwodT1hKHQsZSxvLGkscykpLHtlcnJvcjpyLHNob3VsZFNlbmQ6bixwYXlsb2FkOnV9fWZ1bmN0aW9uIGEodCxlLHIsbixvKXt2YXIgaSxhPWUuZW52aXJvbm1lbnR8fGUucGF5bG9hZCYmZS5wYXlsb2FkLmVudmlyb25tZW50O2k9bz9cIml0ZW0gcGVyIG1pbnV0ZSBsaW1pdCByZWFjaGVkLCBpZ25vcmluZyBlcnJvcnMgdW50aWwgdGltZW91dFwiOlwibWF4SXRlbXMgaGFzIGJlZW4gaGl0LCBpZ25vcmluZyBlcnJvcnMgdW50aWwgcmVzZXQuXCI7dmFyIHM9e2JvZHk6e21lc3NhZ2U6e2JvZHk6aSxleHRyYTp7bWF4SXRlbXM6cixpdGVtc1Blck1pbnV0ZTpufX19LGxhbmd1YWdlOlwiamF2YXNjcmlwdFwiLGVudmlyb25tZW50OmEsbm90aWZpZXI6e3ZlcnNpb246ZS5ub3RpZmllciYmZS5ub3RpZmllci52ZXJzaW9ufHxlLnZlcnNpb259fTtyZXR1cm5cImJyb3dzZXJcIj09PXQ/KHMucGxhdGZvcm09XCJicm93c2VyXCIscy5mcmFtZXdvcms9XCJicm93c2VyLWpzXCIscy5ub3RpZmllci5uYW1lPVwicm9sbGJhci1icm93c2VyLWpzXCIpOlwic2VydmVyXCI9PT10PyhzLmZyYW1ld29yaz1lLmZyYW1ld29ya3x8XCJub2RlLWpzXCIscy5ub3RpZmllci5uYW1lPWUubm90aWZpZXIubmFtZSk6XCJyZWFjdC1uYXRpdmVcIj09PXQmJihzLmZyYW1ld29yaz1lLmZyYW1ld29ya3x8XCJyZWFjdC1uYXRpdmVcIixzLm5vdGlmaWVyLm5hbWU9ZS5ub3RpZmllci5uYW1lKSxzfXZhciBzPXIoNSk7bi5nbG9iYWxTZXR0aW5ncz17c3RhcnRUaW1lOnMubm93KCksbWF4SXRlbXM6dm9pZCAwLGl0ZW1zUGVyTWludXRlOnZvaWQgMH0sbi5wcm90b3R5cGUuY29uZmlndXJlR2xvYmFsPWZ1bmN0aW9uKHQpe3ZvaWQgMCE9PXQuc3RhcnRUaW1lJiYobi5nbG9iYWxTZXR0aW5ncy5zdGFydFRpbWU9dC5zdGFydFRpbWUpLHZvaWQgMCE9PXQubWF4SXRlbXMmJihuLmdsb2JhbFNldHRpbmdzLm1heEl0ZW1zPXQubWF4SXRlbXMpLHZvaWQgMCE9PXQuaXRlbXNQZXJNaW51dGUmJihuLmdsb2JhbFNldHRpbmdzLml0ZW1zUGVyTWludXRlPXQuaXRlbXNQZXJNaW51dGUpfSxuLnByb3RvdHlwZS5zaG91bGRTZW5kPWZ1bmN0aW9uKHQsZSl7ZT1lfHxzLm5vdygpO3ZhciByPWUtdGhpcy5zdGFydFRpbWU7KHI8MHx8cj49NmU0KSYmKHRoaXMuc3RhcnRUaW1lPWUsdGhpcy5wZXJNaW5Db3VudGVyPTApO3ZhciBhPW4uZ2xvYmFsU2V0dGluZ3MubWF4SXRlbXMsdT1uLmdsb2JhbFNldHRpbmdzLml0ZW1zUGVyTWludXRlO2lmKG8odCxhLHRoaXMuY291bnRlcikpcmV0dXJuIGkodGhpcy5wbGF0Zm9ybSx0aGlzLnBsYXRmb3JtT3B0aW9ucyxhK1wiIG1heCBpdGVtcyByZWFjaGVkXCIsITEpO2lmKG8odCx1LHRoaXMucGVyTWluQ291bnRlcikpcmV0dXJuIGkodGhpcy5wbGF0Zm9ybSx0aGlzLnBsYXRmb3JtT3B0aW9ucyx1K1wiIGl0ZW1zIHBlciBtaW51dGUgcmVhY2hlZFwiLCExKTt0aGlzLmNvdW50ZXIrKyx0aGlzLnBlck1pbkNvdW50ZXIrKzt2YXIgYz0hbyh0LGEsdGhpcy5jb3VudGVyKSxsPWM7cmV0dXJuIGM9YyYmIW8odCx1LHRoaXMucGVyTWluQ291bnRlciksaSh0aGlzLnBsYXRmb3JtLHRoaXMucGxhdGZvcm1PcHRpb25zLG51bGwsYyxhLHUsbCl9LG4ucHJvdG90eXBlLnNldFBsYXRmb3JtT3B0aW9ucz1mdW5jdGlvbih0LGUpe3RoaXMucGxhdGZvcm09dCx0aGlzLnBsYXRmb3JtT3B0aW9ucz1lfSx0LmV4cG9ydHM9bn0sZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oKXtpZighUCYmKFA9ITAsYyhKU09OKSYmKHMoSlNPTi5zdHJpbmdpZnkpJiYocS5zdHJpbmdpZnk9SlNPTi5zdHJpbmdpZnkpLHMoSlNPTi5wYXJzZSkmJihxLnBhcnNlPUpTT04ucGFyc2UpKSwhYShxLnN0cmluZ2lmeSl8fCFhKHEucGFyc2UpKSl7dmFyIHQ9cig3KTt0KHEpfX1mdW5jdGlvbiBvKHQsZSl7cmV0dXJuIGU9PT1pKHQpfWZ1bmN0aW9uIGkodCl7dmFyIGU9dHlwZW9mIHQ7cmV0dXJuXCJvYmplY3RcIiE9PWU/ZTp0P3QgaW5zdGFuY2VvZiBFcnJvcj9cImVycm9yXCI6e30udG9TdHJpbmcuY2FsbCh0KS5tYXRjaCgvXFxzKFthLXpBLVpdKykvKVsxXS50b0xvd2VyQ2FzZSgpOlwibnVsbFwifWZ1bmN0aW9uIGEodCl7cmV0dXJuIG8odCxcImZ1bmN0aW9uXCIpfWZ1bmN0aW9uIHModCl7dmFyIGU9L1tcXFxcXiQuKis/KClbXFxde318XS9nLHI9RnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSkucmVwbGFjZShlLFwiXFxcXCQmXCIpLnJlcGxhY2UoL2hhc093blByb3BlcnR5fChmdW5jdGlvbikuKj8oPz1cXFxcXFwoKXwgZm9yIC4rPyg/PVxcXFxcXF0pL2csXCIkMS4qP1wiKSxuPVJlZ0V4cChcIl5cIityK1wiJFwiKTtyZXR1cm4gdSh0KSYmbi50ZXN0KHQpfWZ1bmN0aW9uIHUodCl7dmFyIGU9dHlwZW9mIHQ7cmV0dXJuIG51bGwhPXQmJihcIm9iamVjdFwiPT1lfHxcImZ1bmN0aW9uXCI9PWUpfWZ1bmN0aW9uIGModCl7cmV0dXJuIW8odCxcInVuZGVmaW5lZFwiKX1mdW5jdGlvbiBsKHQpe3ZhciBlPWkodCk7cmV0dXJuXCJvYmplY3RcIj09PWV8fFwiYXJyYXlcIj09PWV9ZnVuY3Rpb24gcCh0KXtyZXR1cm4gbyh0LFwiZXJyb3JcIil8fG8odCxcImV4Y2VwdGlvblwiKX1mdW5jdGlvbiBmKHQsZSxyKXt2YXIgbixpLGEscz1vKHQsXCJvYmplY3RcIiksdT1vKHQsXCJhcnJheVwiKSxjPVtdO2lmKHMmJnIuaW5kZXhPZih0KSE9PS0xKXJldHVybiB0O2lmKHIucHVzaCh0KSxzKWZvcihuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJmMucHVzaChuKTtlbHNlIGlmKHUpZm9yKGE9MDthPHQubGVuZ3RoOysrYSljLnB1c2goYSk7dmFyIGw9cz97fTpbXSxwPSEwO2ZvcihhPTA7YTxjLmxlbmd0aDsrK2Epbj1jW2FdLGk9dFtuXSxsW25dPWUobixpLHIpLHA9cCYmbFtuXT09PXRbbl07cmV0dXJuIDA9PWMubGVuZ3RofHxwP3Q6bH1mdW5jdGlvbiBoKCl7cmV0dXJuXCIqKioqKioqKlwifWZ1bmN0aW9uIGQoKXt2YXIgdD1qKCksZT1cInh4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eFwiLnJlcGxhY2UoL1t4eV0vZyxmdW5jdGlvbihlKXt2YXIgcj0odCsxNipNYXRoLnJhbmRvbSgpKSUxNnwwO3JldHVybiB0PU1hdGguZmxvb3IodC8xNiksKFwieFwiPT09ZT9yOjcmcnw4KS50b1N0cmluZygxNil9KTtyZXR1cm4gZX1mdW5jdGlvbiBtKHQpe3ZhciBlPWcodCk7cmV0dXJuIGU/KFwiXCI9PT1lLmFuY2hvciYmKGUuc291cmNlPWUuc291cmNlLnJlcGxhY2UoXCIjXCIsXCJcIikpLHQ9ZS5zb3VyY2UucmVwbGFjZShcIj9cIitlLnF1ZXJ5LFwiXCIpKTpcIih1bmtub3duKVwifWZ1bmN0aW9uIGcodCl7aWYobyh0LFwic3RyaW5nXCIpKXtmb3IodmFyIGU9TSxyPWUucGFyc2VyW2Uuc3RyaWN0TW9kZT9cInN0cmljdFwiOlwibG9vc2VcIl0uZXhlYyh0KSxuPXt9LGk9MCxhPWUua2V5Lmxlbmd0aDtpPGE7KytpKW5bZS5rZXlbaV1dPXJbaV18fFwiXCI7cmV0dXJuIG5bZS5xLm5hbWVdPXt9LG5bZS5rZXlbMTJdXS5yZXBsYWNlKGUucS5wYXJzZXIsZnVuY3Rpb24odCxyLG8pe3ImJihuW2UucS5uYW1lXVtyXT1vKX0pLG59fWZ1bmN0aW9uIHYodCxlLHIpe3I9cnx8e30sci5hY2Nlc3NfdG9rZW49dDt2YXIgbixvPVtdO2ZvcihuIGluIHIpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHIsbikmJm8ucHVzaChbbixyW25dXS5qb2luKFwiPVwiKSk7dmFyIGk9XCI/XCIrby5zb3J0KCkuam9pbihcIiZcIik7ZT1lfHx7fSxlLnBhdGg9ZS5wYXRofHxcIlwiO3ZhciBhLHM9ZS5wYXRoLmluZGV4T2YoXCI/XCIpLHU9ZS5wYXRoLmluZGV4T2YoXCIjXCIpO3MhPT0tMSYmKHU9PT0tMXx8dT5zKT8oYT1lLnBhdGgsZS5wYXRoPWEuc3Vic3RyaW5nKDAscykraStcIiZcIithLnN1YnN0cmluZyhzKzEpKTp1IT09LTE/KGE9ZS5wYXRoLGUucGF0aD1hLnN1YnN0cmluZygwLHUpK2krYS5zdWJzdHJpbmcodSkpOmUucGF0aD1lLnBhdGgraX1mdW5jdGlvbiB5KHQsZSl7aWYoZT1lfHx0LnByb3RvY29sLCFlJiZ0LnBvcnQmJig4MD09PXQucG9ydD9lPVwiaHR0cDpcIjo0NDM9PT10LnBvcnQmJihlPVwiaHR0cHM6XCIpKSxlPWV8fFwiaHR0cHM6XCIsIXQuaG9zdG5hbWUpcmV0dXJuIG51bGw7dmFyIHI9ZStcIi8vXCIrdC5ob3N0bmFtZTtyZXR1cm4gdC5wb3J0JiYocj1yK1wiOlwiK3QucG9ydCksdC5wYXRoJiYocis9dC5wYXRoKSxyfWZ1bmN0aW9uIGIodCxlKXt2YXIgcixuO3RyeXtyPXEuc3RyaW5naWZ5KHQpfWNhdGNoKG8pe2lmKGUmJmEoZSkpdHJ5e3I9ZSh0KX1jYXRjaCh0KXtuPXR9ZWxzZSBuPW99cmV0dXJue2Vycm9yOm4sdmFsdWU6cn19ZnVuY3Rpb24gdyh0KXt2YXIgZSxyO3RyeXtlPXEucGFyc2UodCl9Y2F0Y2godCl7cj10fXJldHVybntlcnJvcjpyLHZhbHVlOmV9fWZ1bmN0aW9uIF8odCxlLHIsbixvLGksYSxzKXt2YXIgdT17dXJsOmV8fFwiXCIsbGluZTpyLGNvbHVtbjpufTt1LmZ1bmM9cy5ndWVzc0Z1bmN0aW9uTmFtZSh1LnVybCx1LmxpbmUpLHUuY29udGV4dD1zLmdhdGhlckNvbnRleHQodS51cmwsdS5saW5lKTt2YXIgYz1kb2N1bWVudCYmZG9jdW1lbnQubG9jYXRpb24mJmRvY3VtZW50LmxvY2F0aW9uLmhyZWYsbD13aW5kb3cmJndpbmRvdy5uYXZpZ2F0b3ImJndpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O3JldHVybnttb2RlOmksbWVzc2FnZTpvP1N0cmluZyhvKTp0fHxhLHVybDpjLHN0YWNrOlt1XSx1c2VyYWdlbnQ6bH19ZnVuY3Rpb24geCh0LGUpe3JldHVybiBmdW5jdGlvbihyLG4pe3RyeXtlKHIsbil9Y2F0Y2goZSl7dC5lcnJvcihlKX19fWZ1bmN0aW9uIGsodCxlLHIsbixvKXtmb3IodmFyIGEscyx1LGMsbCxwLGY9W10saD0wLG09dC5sZW5ndGg7aDxtOysraCl7cD10W2hdO3ZhciBnPWkocCk7c3dpdGNoKGcpe2Nhc2VcInVuZGVmaW5lZFwiOmJyZWFrO2Nhc2VcInN0cmluZ1wiOmE/Zi5wdXNoKHApOmE9cDticmVhaztjYXNlXCJmdW5jdGlvblwiOmM9eChlLHApO2JyZWFrO2Nhc2VcImRhdGVcIjpmLnB1c2gocCk7YnJlYWs7Y2FzZVwiZXJyb3JcIjpjYXNlXCJkb21leGNlcHRpb25cIjpjYXNlXCJleGNlcHRpb25cIjpzP2YucHVzaChwKTpzPXA7YnJlYWs7Y2FzZVwib2JqZWN0XCI6Y2FzZVwiYXJyYXlcIjppZihwIGluc3RhbmNlb2YgRXJyb3J8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiBET01FeGNlcHRpb24mJnAgaW5zdGFuY2VvZiBET01FeGNlcHRpb24pe3M/Zi5wdXNoKHApOnM9cDticmVha31pZihuJiZcIm9iamVjdFwiPT09ZyYmIWwpe2Zvcih2YXIgdj0wLHk9bi5sZW5ndGg7djx5OysrdilpZih2b2lkIDAhPT1wW25bdl1dKXtsPXA7YnJlYWt9aWYobClicmVha311P2YucHVzaChwKTp1PXA7YnJlYWs7ZGVmYXVsdDppZihwIGluc3RhbmNlb2YgRXJyb3J8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiBET01FeGNlcHRpb24mJnAgaW5zdGFuY2VvZiBET01FeGNlcHRpb24pe3M/Zi5wdXNoKHApOnM9cDticmVha31mLnB1c2gocCl9fWYubGVuZ3RoPjAmJih1PUYodSksdS5leHRyYUFyZ3M9Zik7dmFyIGI9e21lc3NhZ2U6YSxlcnI6cyxjdXN0b206dSx0aW1lc3RhbXA6aigpLGNhbGxiYWNrOmMsdXVpZDpkKCl9O3JldHVybiB1JiZ2b2lkIDAhPT11LmxldmVsJiYoYi5sZXZlbD11LmxldmVsLGRlbGV0ZSB1LmxldmVsKSxuJiZsJiYoYi5yZXF1ZXN0PWwpLG8mJihiLmxhbWJkYUNvbnRleHQ9byksYi5fb3JpZ2luYWxBcmdzPXQsYn1mdW5jdGlvbiBFKHQsZSl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDsrK3IpaWYodFtyXT09PWUpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gSSh0KXtmb3IodmFyIGUscixuLG8sYT0wLHM9dC5sZW5ndGg7YTxzOysrYSl7bz10W2FdO3ZhciB1PWkobyk7c3dpdGNoKHUpe2Nhc2VcInN0cmluZ1wiOkUoVSxvKT9lPW86RShILG8pJiYobj1vKTticmVhaztjYXNlXCJvYmplY3RcIjpyPW99fXZhciBjPXt0eXBlOmV8fFwibWFudWFsXCIsbWV0YWRhdGE6cnx8e30sbGV2ZWw6bn07cmV0dXJuIGN9ZnVuY3Rpb24gVCh0LGUpe2lmKHQpe3ZhciByPWUuc3BsaXQoXCIuXCIpLG49dDt0cnl7Zm9yKHZhciBvPTAsaT1yLmxlbmd0aDtvPGk7KytvKW49bltyW29dXX1jYXRjaCh0KXtuPXZvaWQgMH1yZXR1cm4gbn19ZnVuY3Rpb24gUyh0LGUscil7aWYodCl7dmFyIG49ZS5zcGxpdChcIi5cIiksbz1uLmxlbmd0aDtpZighKG88MSkpe2lmKDE9PT1vKXJldHVybiB2b2lkKHRbblswXV09cik7dHJ5e2Zvcih2YXIgaT10W25bMF1dfHx7fSxhPWkscz0xO3M8by0xOysrcylpW25bc11dPWlbbltzXV18fHt9LGk9aVtuW3NdXTtpW25bby0xXV09cix0W25bMF1dPWF9Y2F0Y2godCl7cmV0dXJufX19fWZ1bmN0aW9uIE8odCxlKXtmdW5jdGlvbiByKHQsZSl7cmV0dXJuIGUraCgpfWZ1bmN0aW9uIG4odCl7dmFyIGU7aWYobyh0LFwic3RyaW5nXCIpKWZvcihlPTA7ZTx1Lmxlbmd0aDsrK2UpdD10LnJlcGxhY2UodVtlXSxyKTtyZXR1cm4gdH1mdW5jdGlvbiBpKHQsZSl7dmFyIHI7Zm9yKHI9MDtyPHMubGVuZ3RoOysrcilpZihzW3JdLnRlc3QodCkpe2U9aCgpO2JyZWFrfXJldHVybiBlfWZ1bmN0aW9uIGEodCxlLHIpe3ZhciBzPWkodCxlKTtyZXR1cm4gcz09PWU/byhlLFwib2JqZWN0XCIpfHxvKGUsXCJhcnJheVwiKT9mKGUsYSxyKTpuKHMpOnN9ZT1lfHxbXTt2YXIgcz1MKGUpLHU9TihlKTtyZXR1cm4gZih0LGEsW10pfWZ1bmN0aW9uIEwodCl7Zm9yKHZhciBlLHI9W10sbj0wO248dC5sZW5ndGg7KytuKWU9XCJeXFxcXFs/KCU1W2JCXSk/XCIrdFtuXStcIlxcXFxbPyglNVtiQl0pP1xcXFxdPyglNVtkRF0pPyRcIixyLnB1c2gobmV3IFJlZ0V4cChlLFwiaVwiKSk7cmV0dXJuIHJ9ZnVuY3Rpb24gTih0KXtmb3IodmFyIGUscj1bXSxuPTA7bjx0Lmxlbmd0aDsrK24pZT1cIlxcXFxbPyglNVtiQl0pP1wiK3Rbbl0rXCJcXFxcWz8oJTVbYkJdKT9cXFxcXT8oJTVbZERdKT9cIixyLnB1c2gobmV3IFJlZ0V4cChcIihcIitlK1wiPSkoW14mXFxcXG5dKylcIixcImlnbVwiKSk7cmV0dXJuIHJ9ZnVuY3Rpb24gQyh0KXt2YXIgZSxyLG4sbz1bXTtmb3IoZT0wLHI9dC5sZW5ndGg7ZTxyOysrZSl7c3dpdGNoKG49dFtlXSxpKG4pKXtjYXNlXCJvYmplY3RcIjpuPWIobiksbj1uLmVycm9yfHxuLnZhbHVlLG4ubGVuZ3RoPjUwMCYmKG49bi5zdWJzdHIoMCw0OTcpK1wiLi4uXCIpO2JyZWFrO2Nhc2VcIm51bGxcIjpuPVwibnVsbFwiO2JyZWFrO2Nhc2VcInVuZGVmaW5lZFwiOm49XCJ1bmRlZmluZWRcIjticmVhaztjYXNlXCJzeW1ib2xcIjpuPW4udG9TdHJpbmcoKX1vLnB1c2gobil9cmV0dXJuIG8uam9pbihcIiBcIil9ZnVuY3Rpb24gaigpe3JldHVybiBEYXRlLm5vdz8rRGF0ZS5ub3coKTorbmV3IERhdGV9ZnVuY3Rpb24gUih0LGUpe2lmKHQmJnQudXNlcl9pcCYmZSE9PSEwKXt2YXIgcj10LnVzZXJfaXA7aWYoZSl0cnl7dmFyIG47aWYoci5pbmRleE9mKFwiLlwiKSE9PS0xKW49ci5zcGxpdChcIi5cIiksbi5wb3AoKSxuLnB1c2goXCIwXCIpLHI9bi5qb2luKFwiLlwiKTtlbHNlIGlmKHIuaW5kZXhPZihcIjpcIikhPT0tMSl7aWYobj1yLnNwbGl0KFwiOlwiKSxuLmxlbmd0aD4yKXt2YXIgbz1uLnNsaWNlKDAsMyksaT1vWzJdLmluZGV4T2YoXCIvXCIpO2khPT0tMSYmKG9bMl09b1syXS5zdWJzdHJpbmcoMCxpKSk7dmFyIGE9XCIwMDAwOjAwMDA6MDAwMDowMDAwOjAwMDBcIjtyPW8uY29uY2F0KGEpLmpvaW4oXCI6XCIpfX1lbHNlIHI9bnVsbH1jYXRjaCh0KXtyPW51bGx9ZWxzZSByPW51bGw7dC51c2VyX2lwPXJ9fWZ1bmN0aW9uIEEodCxlLHIpe3ZhciBuPUYodCxlLHIpO3JldHVybiFlfHxlLm92ZXJ3cml0ZVNjcnViRmllbGRzP246KGUuc2NydWJGaWVsZHMmJihuLnNjcnViRmllbGRzPSh0LnNjcnViRmllbGRzfHxbXSkuY29uY2F0KGUuc2NydWJGaWVsZHMpKSxuKX12YXIgRj1yKDYpLHE9e30sUD0hMTtuKCk7dmFyIEQ9e2RlYnVnOjAsaW5mbzoxLHdhcm5pbmc6MixlcnJvcjozLGNyaXRpY2FsOjR9LE09e3N0cmljdE1vZGU6ITEsa2V5OltcInNvdXJjZVwiLFwicHJvdG9jb2xcIixcImF1dGhvcml0eVwiLFwidXNlckluZm9cIixcInVzZXJcIixcInBhc3N3b3JkXCIsXCJob3N0XCIsXCJwb3J0XCIsXCJyZWxhdGl2ZVwiLFwicGF0aFwiLFwiZGlyZWN0b3J5XCIsXCJmaWxlXCIsXCJxdWVyeVwiLFwiYW5jaG9yXCJdLHE6e25hbWU6XCJxdWVyeUtleVwiLHBhcnNlcjovKD86XnwmKShbXiY9XSopPT8oW14mXSopL2d9LHBhcnNlcjp7c3RyaWN0Oi9eKD86KFteOlxcLz8jXSspOik/KD86XFwvXFwvKCg/OigoW146QF0qKSg/OjooW146QF0qKSk/KT9AKT8oW146XFwvPyNdKikoPzo6KFxcZCopKT8pKT8oKCgoPzpbXj8jXFwvXSpcXC8pKikoW14/I10qKSkoPzpcXD8oW14jXSopKT8oPzojKC4qKSk/KS8sbG9vc2U6L14oPzooPyFbXjpAXSs6W146QFxcL10qQCkoW146XFwvPyMuXSspOik/KD86XFwvXFwvKT8oKD86KChbXjpAXSopKD86OihbXjpAXSopKT8pP0ApPyhbXjpcXC8/I10qKSg/OjooXFxkKikpPykoKChcXC8oPzpbXj8jXSg/IVtePyNcXC9dKlxcLltePyNcXC8uXSsoPzpbPyNdfCQpKSkqXFwvPyk/KFtePyNcXC9dKikpKD86XFw/KFteI10qKSk/KD86IyguKikpPykvfX0sVT1bXCJsb2dcIixcIm5ldHdvcmtcIixcImRvbVwiLFwibmF2aWdhdGlvblwiLFwiZXJyb3JcIixcIm1hbnVhbFwiXSxIPVtcImNyaXRpY2FsXCIsXCJlcnJvclwiLFwid2FybmluZ1wiLFwiaW5mb1wiLFwiZGVidWdcIl07dC5leHBvcnRzPXthZGRQYXJhbXNBbmRBY2Nlc3NUb2tlblRvUGF0aDp2LGNyZWF0ZUl0ZW06ayxjcmVhdGVUZWxlbWV0cnlFdmVudDpJLGZpbHRlcklwOlIsZm9ybWF0QXJnc0FzU3RyaW5nOkMsZm9ybWF0VXJsOnksZ2V0OlQsaGFuZGxlT3B0aW9uczpBLGlzRXJyb3I6cCxpc0Z1bmN0aW9uOmEsaXNJdGVyYWJsZTpsLGlzTmF0aXZlRnVuY3Rpb246cyxpc1R5cGU6byxqc29uUGFyc2U6dyxMRVZFTFM6RCxtYWtlVW5oYW5kbGVkU3RhY2tJbmZvOl8sbWVyZ2U6Rixub3c6aixyZWRhY3Q6aCxzYW5pdGl6ZVVybDptLHNjcnViOk8sc2V0OlMsc3RyaW5naWZ5OmIsdHJhdmVyc2U6Zix0eXBlTmFtZTppLHV1aWQ0OmR9fSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIoKXt2YXIgdCxlLG4sbyxhLHM9e30sdT1udWxsLGM9YXJndW1lbnRzLmxlbmd0aDtmb3IodD0wO3Q8Yzt0KyspaWYodT1hcmd1bWVudHNbdF0sbnVsbCE9dSlmb3IoYSBpbiB1KWU9c1thXSxuPXVbYV0scyE9PW4mJihuJiZpKG4pPyhvPWUmJmkoZSk/ZTp7fSxzW2FdPXIobyxuKSk6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIG4mJihzW2FdPW4pKTtyZXR1cm4gc312YXIgbj1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LG89T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxpPWZ1bmN0aW9uKHQpe2lmKCF0fHxcIltvYmplY3QgT2JqZWN0XVwiIT09by5jYWxsKHQpKXJldHVybiExO3ZhciBlPW4uY2FsbCh0LFwiY29uc3RydWN0b3JcIikscj10LmNvbnN0cnVjdG9yJiZ0LmNvbnN0cnVjdG9yLnByb3RvdHlwZSYmbi5jYWxsKHQuY29uc3RydWN0b3IucHJvdG90eXBlLFwiaXNQcm90b3R5cGVPZlwiKTtpZih0LmNvbnN0cnVjdG9yJiYhZSYmIXIpcmV0dXJuITE7dmFyIGk7Zm9yKGkgaW4gdCk7cmV0dXJuXCJ1bmRlZmluZWRcIj09dHlwZW9mIGl8fG4uY2FsbCh0LGkpfTt0LmV4cG9ydHM9cn0sZnVuY3Rpb24odCxlKXt2YXIgcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3JldHVybiB0PDEwP1wiMFwiK3Q6dH1mdW5jdGlvbiByKCl7cmV0dXJuIHRoaXMudmFsdWVPZigpfWZ1bmN0aW9uIG4odCl7cmV0dXJuIGkubGFzdEluZGV4PTAsaS50ZXN0KHQpPydcIicrdC5yZXBsYWNlKGksZnVuY3Rpb24odCl7dmFyIGU9dVt0XTtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZT9lOlwiXFxcXHVcIisoXCIwMDAwXCIrdC5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTQpfSkrJ1wiJzonXCInK3QrJ1wiJ31mdW5jdGlvbiBvKHQsZSl7dmFyIHIsaSx1LGwscCxmPWEsaD1lW3RdO3N3aXRjaChoJiZcIm9iamVjdFwiPT10eXBlb2YgaCYmXCJmdW5jdGlvblwiPT10eXBlb2YgaC50b0pTT04mJihoPWgudG9KU09OKHQpKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBjJiYoaD1jLmNhbGwoZSx0LGgpKSx0eXBlb2YgaCl7Y2FzZVwic3RyaW5nXCI6cmV0dXJuIG4oaCk7Y2FzZVwibnVtYmVyXCI6cmV0dXJuIGlzRmluaXRlKGgpP1N0cmluZyhoKTpcIm51bGxcIjtjYXNlXCJib29sZWFuXCI6Y2FzZVwibnVsbFwiOnJldHVybiBTdHJpbmcoaCk7Y2FzZVwib2JqZWN0XCI6aWYoIWgpcmV0dXJuXCJudWxsXCI7aWYoYSs9cyxwPVtdLFwiW29iamVjdCBBcnJheV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuYXBwbHkoaCkpe2ZvcihsPWgubGVuZ3RoLHI9MDtyPGw7cis9MSlwW3JdPW8ocixoKXx8XCJudWxsXCI7cmV0dXJuIHU9MD09PXAubGVuZ3RoP1wiW11cIjphP1wiW1xcblwiK2ErcC5qb2luKFwiLFxcblwiK2EpK1wiXFxuXCIrZitcIl1cIjpcIltcIitwLmpvaW4oXCIsXCIpK1wiXVwiLGE9Zix1fWlmKGMmJlwib2JqZWN0XCI9PXR5cGVvZiBjKWZvcihsPWMubGVuZ3RoLHI9MDtyPGw7cis9MSlcInN0cmluZ1wiPT10eXBlb2YgY1tyXSYmKGk9Y1tyXSx1PW8oaSxoKSx1JiZwLnB1c2gobihpKSsoYT9cIjogXCI6XCI6XCIpK3UpKTtlbHNlIGZvcihpIGluIGgpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGgsaSkmJih1PW8oaSxoKSx1JiZwLnB1c2gobihpKSsoYT9cIjogXCI6XCI6XCIpK3UpKTtyZXR1cm4gdT0wPT09cC5sZW5ndGg/XCJ7fVwiOmE/XCJ7XFxuXCIrYStwLmpvaW4oXCIsXFxuXCIrYSkrXCJcXG5cIitmK1wifVwiOlwie1wiK3Auam9pbihcIixcIikrXCJ9XCIsYT1mLHV9fXZhciBpPS9bXFxcXFwiXFx1MDAwMC1cXHUwMDFmXFx1MDA3Zi1cXHUwMDlmXFx1MDBhZFxcdTA2MDAtXFx1MDYwNFxcdTA3MGZcXHUxN2I0XFx1MTdiNVxcdTIwMGMtXFx1MjAwZlxcdTIwMjgtXFx1MjAyZlxcdTIwNjAtXFx1MjA2ZlxcdWZlZmZcXHVmZmYwLVxcdWZmZmZdL2c7XCJmdW5jdGlvblwiIT10eXBlb2YgRGF0ZS5wcm90b3R5cGUudG9KU09OJiYoRGF0ZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIGlzRmluaXRlKHRoaXMudmFsdWVPZigpKT90aGlzLmdldFVUQ0Z1bGxZZWFyKCkrXCItXCIrZSh0aGlzLmdldFVUQ01vbnRoKCkrMSkrXCItXCIrZSh0aGlzLmdldFVUQ0RhdGUoKSkrXCJUXCIrZSh0aGlzLmdldFVUQ0hvdXJzKCkpK1wiOlwiK2UodGhpcy5nZXRVVENNaW51dGVzKCkpK1wiOlwiK2UodGhpcy5nZXRVVENTZWNvbmRzKCkpK1wiWlwiOm51bGx9LEJvb2xlYW4ucHJvdG90eXBlLnRvSlNPTj1yLE51bWJlci5wcm90b3R5cGUudG9KU09OPXIsU3RyaW5nLnByb3RvdHlwZS50b0pTT049cik7dmFyIGEscyx1LGM7XCJmdW5jdGlvblwiIT10eXBlb2YgdC5zdHJpbmdpZnkmJih1PXtcIlxcYlwiOlwiXFxcXGJcIixcIlxcdFwiOlwiXFxcXHRcIixcIlxcblwiOlwiXFxcXG5cIixcIlxcZlwiOlwiXFxcXGZcIixcIlxcclwiOlwiXFxcXHJcIiwnXCInOidcXFxcXCInLFwiXFxcXFwiOlwiXFxcXFxcXFxcIn0sdC5zdHJpbmdpZnk9ZnVuY3Rpb24odCxlLHIpe3ZhciBuO2lmKGE9XCJcIixzPVwiXCIsXCJudW1iZXJcIj09dHlwZW9mIHIpZm9yKG49MDtuPHI7bis9MSlzKz1cIiBcIjtlbHNlXCJzdHJpbmdcIj09dHlwZW9mIHImJihzPXIpO2lmKGM9ZSxlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiYoXCJvYmplY3RcIiE9dHlwZW9mIGV8fFwibnVtYmVyXCIhPXR5cGVvZiBlLmxlbmd0aCkpdGhyb3cgbmV3IEVycm9yKFwiSlNPTi5zdHJpbmdpZnlcIik7cmV0dXJuIG8oXCJcIix7XCJcIjp0fSl9KSxcImZ1bmN0aW9uXCIhPXR5cGVvZiB0LnBhcnNlJiYodC5wYXJzZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7cmV0dXJuIHQucmVwbGFjZSgvXFxcXCg/OnUoLns0fSl8KFtedV0pKS9nLGZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gZT9TdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGUsMTYpKTphW3JdfSl9dmFyIGUscixuLG8saSxhPXtcIlxcXFxcIjpcIlxcXFxcIiwnXCInOidcIicsXCIvXCI6XCIvXCIsdDpcIlxcdFwiLG46XCJcXG5cIixyOlwiXFxyXCIsZjpcIlxcZlwiLGI6XCJcXGJcIn0scz17Z286ZnVuY3Rpb24oKXtlPVwib2tcIn0sZmlyc3Rva2V5OmZ1bmN0aW9uKCl7bz1pLGU9XCJjb2xvblwifSxva2V5OmZ1bmN0aW9uKCl7bz1pLGU9XCJjb2xvblwifSxvdmFsdWU6ZnVuY3Rpb24oKXtlPVwib2NvbW1hXCJ9LGZpcnN0YXZhbHVlOmZ1bmN0aW9uKCl7ZT1cImFjb21tYVwifSxhdmFsdWU6ZnVuY3Rpb24oKXtlPVwiYWNvbW1hXCJ9fSx1PXtnbzpmdW5jdGlvbigpe2U9XCJva1wifSxvdmFsdWU6ZnVuY3Rpb24oKXtlPVwib2NvbW1hXCJ9LGZpcnN0YXZhbHVlOmZ1bmN0aW9uKCl7ZT1cImFjb21tYVwifSxhdmFsdWU6ZnVuY3Rpb24oKXtlPVwiYWNvbW1hXCJ9fSxjPXtcIntcIjp7Z286ZnVuY3Rpb24oKXtyLnB1c2goe3N0YXRlOlwib2tcIn0pLG49e30sZT1cImZpcnN0b2tleVwifSxvdmFsdWU6ZnVuY3Rpb24oKXtyLnB1c2goe2NvbnRhaW5lcjpuLHN0YXRlOlwib2NvbW1hXCIsa2V5Om99KSxuPXt9LGU9XCJmaXJzdG9rZXlcIn0sZmlyc3RhdmFsdWU6ZnVuY3Rpb24oKXtyLnB1c2goe2NvbnRhaW5lcjpuLHN0YXRlOlwiYWNvbW1hXCJ9KSxuPXt9LGU9XCJmaXJzdG9rZXlcIn0sYXZhbHVlOmZ1bmN0aW9uKCl7ci5wdXNoKHtjb250YWluZXI6bixzdGF0ZTpcImFjb21tYVwifSksbj17fSxlPVwiZmlyc3Rva2V5XCJ9fSxcIn1cIjp7Zmlyc3Rva2V5OmZ1bmN0aW9uKCl7dmFyIHQ9ci5wb3AoKTtpPW4sbj10LmNvbnRhaW5lcixvPXQua2V5LGU9dC5zdGF0ZX0sb2NvbW1hOmZ1bmN0aW9uKCl7dmFyIHQ9ci5wb3AoKTtuW29dPWksaT1uLG49dC5jb250YWluZXIsbz10LmtleSxlPXQuc3RhdGV9fSxcIltcIjp7Z286ZnVuY3Rpb24oKXtyLnB1c2goe3N0YXRlOlwib2tcIn0pLG49W10sZT1cImZpcnN0YXZhbHVlXCJ9LG92YWx1ZTpmdW5jdGlvbigpe3IucHVzaCh7Y29udGFpbmVyOm4sc3RhdGU6XCJvY29tbWFcIixrZXk6b30pLG49W10sZT1cImZpcnN0YXZhbHVlXCJ9LGZpcnN0YXZhbHVlOmZ1bmN0aW9uKCl7ci5wdXNoKHtjb250YWluZXI6bixzdGF0ZTpcImFjb21tYVwifSksbj1bXSxlPVwiZmlyc3RhdmFsdWVcIn0sYXZhbHVlOmZ1bmN0aW9uKCl7ci5wdXNoKHtjb250YWluZXI6bixzdGF0ZTpcImFjb21tYVwifSksbj1bXSxlPVwiZmlyc3RhdmFsdWVcIn19LFwiXVwiOntmaXJzdGF2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXIucG9wKCk7aT1uLG49dC5jb250YWluZXIsbz10LmtleSxlPXQuc3RhdGV9LGFjb21tYTpmdW5jdGlvbigpe3ZhciB0PXIucG9wKCk7bi5wdXNoKGkpLGk9bixuPXQuY29udGFpbmVyLG89dC5rZXksZT10LnN0YXRlfX0sXCI6XCI6e2NvbG9uOmZ1bmN0aW9uKCl7aWYoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobixvKSl0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJEdXBsaWNhdGUga2V5ICdcIitvKydcIicpO2U9XCJvdmFsdWVcIn19LFwiLFwiOntvY29tbWE6ZnVuY3Rpb24oKXtuW29dPWksZT1cIm9rZXlcIn0sYWNvbW1hOmZ1bmN0aW9uKCl7bi5wdXNoKGkpLGU9XCJhdmFsdWVcIn19LHRydWU6e2dvOmZ1bmN0aW9uKCl7aT0hMCxlPVwib2tcIn0sb3ZhbHVlOmZ1bmN0aW9uKCl7aT0hMCxlPVwib2NvbW1hXCJ9LGZpcnN0YXZhbHVlOmZ1bmN0aW9uKCl7aT0hMCxlPVwiYWNvbW1hXCJ9LGF2YWx1ZTpmdW5jdGlvbigpe2k9ITAsZT1cImFjb21tYVwifX0sZmFsc2U6e2dvOmZ1bmN0aW9uKCl7aT0hMSxlPVwib2tcIn0sb3ZhbHVlOmZ1bmN0aW9uKCl7aT0hMSxlPVwib2NvbW1hXCJ9LGZpcnN0YXZhbHVlOmZ1bmN0aW9uKCl7aT0hMSxlPVwiYWNvbW1hXCJ9LGF2YWx1ZTpmdW5jdGlvbigpe2k9ITEsZT1cImFjb21tYVwifX0sbnVsbDp7Z286ZnVuY3Rpb24oKXtpPW51bGwsZT1cIm9rXCJ9LG92YWx1ZTpmdW5jdGlvbigpe2k9bnVsbCxlPVwib2NvbW1hXCJ9LGZpcnN0YXZhbHVlOmZ1bmN0aW9uKCl7aT1udWxsLGU9XCJhY29tbWFcIn0sYXZhbHVlOmZ1bmN0aW9uKCl7aT1udWxsLGU9XCJhY29tbWFcIn19fTtyZXR1cm4gZnVuY3Rpb24obixvKXt2YXIgYSxsPS9eW1xcdTAwMjBcXHRcXG5cXHJdKig/OihbLDpcXFtcXF17fV18dHJ1ZXxmYWxzZXxudWxsKXwoLT9cXGQrKD86XFwuXFxkKik/KD86W2VFXVsrXFwtXT9cXGQrKT8pfFwiKCg/OlteXFxyXFxuXFx0XFxcXFxcXCJdfFxcXFwoPzpbXCJcXFxcXFwvdHJuZmJdfHVbMC05YS1mQS1GXXs0fSkpKilcIikvO2U9XCJnb1wiLHI9W107dHJ5e2Zvcig7Oyl7aWYoYT1sLmV4ZWMobiksIWEpYnJlYWs7YVsxXT9jW2FbMV1dW2VdKCk6YVsyXT8oaT0rYVsyXSx1W2VdKCkpOihpPXQoYVszXSksc1tlXSgpKSxuPW4uc2xpY2UoYVswXS5sZW5ndGgpfX1jYXRjaCh0KXtlPXR9aWYoXCJva1wiIT09ZXx8L1teXFx1MDAyMFxcdFxcblxccl0vLnRlc3QobikpdGhyb3cgZSBpbnN0YW5jZW9mIFN5bnRheEVycm9yP2U6bmV3IFN5bnRheEVycm9yKFwiSlNPTlwiKTtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBvP2Z1bmN0aW9uIHQoZSxyKXt2YXIgbixhLHM9ZVtyXTtpZihzJiZcIm9iamVjdFwiPT10eXBlb2Ygcylmb3IobiBpbiBpKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLG4pJiYoYT10KHMsbiksdm9pZCAwIT09YT9zW25dPWE6ZGVsZXRlIHNbbl0pO3JldHVybiBvLmNhbGwoZSxyLHMpfSh7XCJcIjppfSxcIlwiKTppfX0oKSl9O3QuZXhwb3J0cz1yfSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUscixuKXt0aGlzLnJhdGVMaW1pdGVyPXQsdGhpcy5hcGk9ZSx0aGlzLmxvZ2dlcj1yLHRoaXMub3B0aW9ucz1uLHRoaXMucHJlZGljYXRlcz1bXSx0aGlzLnBlbmRpbmdJdGVtcz1bXSx0aGlzLnBlbmRpbmdSZXF1ZXN0cz1bXSx0aGlzLnJldHJ5UXVldWU9W10sdGhpcy5yZXRyeUhhbmRsZT1udWxsLHRoaXMud2FpdENhbGxiYWNrPW51bGwsdGhpcy53YWl0SW50ZXJ2YWxJRD1udWxsfXZhciBvPXIoNSk7bi5wcm90b3R5cGUuY29uZmlndXJlPWZ1bmN0aW9uKHQpe3RoaXMuYXBpJiZ0aGlzLmFwaS5jb25maWd1cmUodCk7dmFyIGU9dGhpcy5vcHRpb25zO3JldHVybiB0aGlzLm9wdGlvbnM9by5tZXJnZShlLHQpLHRoaXN9LG4ucHJvdG90eXBlLmFkZFByZWRpY2F0ZT1mdW5jdGlvbih0KXtyZXR1cm4gby5pc0Z1bmN0aW9uKHQpJiZ0aGlzLnByZWRpY2F0ZXMucHVzaCh0KSx0aGlzfSxuLnByb3RvdHlwZS5hZGRQZW5kaW5nSXRlbT1mdW5jdGlvbih0KXt0aGlzLnBlbmRpbmdJdGVtcy5wdXNoKHQpfSxuLnByb3RvdHlwZS5yZW1vdmVQZW5kaW5nSXRlbT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnBlbmRpbmdJdGVtcy5pbmRleE9mKHQpO2UhPT0tMSYmdGhpcy5wZW5kaW5nSXRlbXMuc3BsaWNlKGUsMSl9LG4ucHJvdG90eXBlLmFkZEl0ZW09ZnVuY3Rpb24odCxlLHIsbil7ZSYmby5pc0Z1bmN0aW9uKGUpfHwoZT1mdW5jdGlvbigpe30pO3ZhciBpPXRoaXMuX2FwcGx5UHJlZGljYXRlcyh0KTtpZihpLnN0b3ApcmV0dXJuIHRoaXMucmVtb3ZlUGVuZGluZ0l0ZW0obiksdm9pZCBlKGkuZXJyKTt0aGlzLl9tYXliZUxvZyh0LHIpLHRoaXMucmVtb3ZlUGVuZGluZ0l0ZW0obiksdGhpcy5wZW5kaW5nUmVxdWVzdHMucHVzaCh0KTt0cnl7dGhpcy5fbWFrZUFwaVJlcXVlc3QodCxmdW5jdGlvbihyLG4pe3RoaXMuX2RlcXVldWVQZW5kaW5nUmVxdWVzdCh0KSxlKHIsbil9LmJpbmQodGhpcykpfWNhdGNoKHIpe3RoaXMuX2RlcXVldWVQZW5kaW5nUmVxdWVzdCh0KSxlKHIpfX0sbi5wcm90b3R5cGUud2FpdD1mdW5jdGlvbih0KXtvLmlzRnVuY3Rpb24odCkmJih0aGlzLndhaXRDYWxsYmFjaz10LHRoaXMuX21heWJlQ2FsbFdhaXQoKXx8KHRoaXMud2FpdEludGVydmFsSUQmJih0aGlzLndhaXRJbnRlcnZhbElEPWNsZWFySW50ZXJ2YWwodGhpcy53YWl0SW50ZXJ2YWxJRCkpLHRoaXMud2FpdEludGVydmFsSUQ9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXt0aGlzLl9tYXliZUNhbGxXYWl0KCl9LmJpbmQodGhpcyksNTAwKSkpfSxuLnByb3RvdHlwZS5fYXBwbHlQcmVkaWNhdGVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1udWxsLHI9MCxuPXRoaXMucHJlZGljYXRlcy5sZW5ndGg7cjxuO3IrKylpZihlPXRoaXMucHJlZGljYXRlc1tyXSh0LHRoaXMub3B0aW9ucyksIWV8fHZvaWQgMCE9PWUuZXJyKXJldHVybntzdG9wOiEwLGVycjplLmVycn07cmV0dXJue3N0b3A6ITEsZXJyOm51bGx9fSxuLnByb3RvdHlwZS5fbWFrZUFwaVJlcXVlc3Q9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLnJhdGVMaW1pdGVyLnNob3VsZFNlbmQodCk7ci5zaG91bGRTZW5kP3RoaXMuYXBpLnBvc3RJdGVtKHQsZnVuY3Rpb24ocixuKXtyP3RoaXMuX21heWJlUmV0cnkocix0LGUpOmUocixuKX0uYmluZCh0aGlzKSk6ci5lcnJvcj9lKHIuZXJyb3IpOnRoaXMuYXBpLnBvc3RJdGVtKHIucGF5bG9hZCxlKX07dmFyIGk9W1wiRUNPTk5SRVNFVFwiLFwiRU5PVEZPVU5EXCIsXCJFU09DS0VUVElNRURPVVRcIixcIkVUSU1FRE9VVFwiLFwiRUNPTk5SRUZVU0VEXCIsXCJFSE9TVFVOUkVBQ0hcIixcIkVQSVBFXCIsXCJFQUlfQUdBSU5cIl07bi5wcm90b3R5cGUuX21heWJlUmV0cnk9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPSExO2lmKHRoaXMub3B0aW9ucy5yZXRyeUludGVydmFsKWZvcih2YXIgbz0wLGE9aS5sZW5ndGg7bzxhO28rKylpZih0LmNvZGU9PT1pW29dKXtuPSEwO2JyZWFrfW4/dGhpcy5fcmV0cnlBcGlSZXF1ZXN0KGUscik6cih0KX0sbi5wcm90b3R5cGUuX3JldHJ5QXBpUmVxdWVzdD1mdW5jdGlvbih0LGUpe3RoaXMucmV0cnlRdWV1ZS5wdXNoKHtpdGVtOnQsY2FsbGJhY2s6ZX0pLHRoaXMucmV0cnlIYW5kbGV8fCh0aGlzLnJldHJ5SGFuZGxlPXNldEludGVydmFsKGZ1bmN0aW9uKCl7Zm9yKDt0aGlzLnJldHJ5UXVldWUubGVuZ3RoOyl7dmFyIHQ9dGhpcy5yZXRyeVF1ZXVlLnNoaWZ0KCk7dGhpcy5fbWFrZUFwaVJlcXVlc3QodC5pdGVtLHQuY2FsbGJhY2spfX0uYmluZCh0aGlzKSx0aGlzLm9wdGlvbnMucmV0cnlJbnRlcnZhbCkpfSxuLnByb3RvdHlwZS5fZGVxdWV1ZVBlbmRpbmdSZXF1ZXN0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucGVuZGluZ1JlcXVlc3RzLmluZGV4T2YodCk7ZSE9PS0xJiYodGhpcy5wZW5kaW5nUmVxdWVzdHMuc3BsaWNlKGUsMSksdGhpcy5fbWF5YmVDYWxsV2FpdCgpKX0sbi5wcm90b3R5cGUuX21heWJlTG9nPWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5sb2dnZXImJnRoaXMub3B0aW9ucy52ZXJib3NlKXt2YXIgcj1lO2lmKHI9cnx8by5nZXQodCxcImJvZHkudHJhY2UuZXhjZXB0aW9uLm1lc3NhZ2VcIikscj1yfHxvLmdldCh0LFwiYm9keS50cmFjZV9jaGFpbi4wLmV4Y2VwdGlvbi5tZXNzYWdlXCIpKXJldHVybiB2b2lkIHRoaXMubG9nZ2VyLmVycm9yKHIpO3I9by5nZXQodCxcImJvZHkubWVzc2FnZS5ib2R5XCIpLHImJnRoaXMubG9nZ2VyLmxvZyhyKX19LG4ucHJvdG90eXBlLl9tYXliZUNhbGxXYWl0PWZ1bmN0aW9uKCl7cmV0dXJuISghby5pc0Z1bmN0aW9uKHRoaXMud2FpdENhbGxiYWNrKXx8MCE9PXRoaXMucGVuZGluZ0l0ZW1zLmxlbmd0aHx8MCE9PXRoaXMucGVuZGluZ1JlcXVlc3RzLmxlbmd0aCkmJih0aGlzLndhaXRJbnRlcnZhbElEJiYodGhpcy53YWl0SW50ZXJ2YWxJRD1jbGVhckludGVydmFsKHRoaXMud2FpdEludGVydmFsSUQpKSx0aGlzLndhaXRDYWxsYmFjaygpLCEwKX0sdC5leHBvcnRzPW59LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7dGhpcy5xdWV1ZT10LHRoaXMub3B0aW9ucz1lLHRoaXMudHJhbnNmb3Jtcz1bXX12YXIgbz1yKDUpO24ucHJvdG90eXBlLmNvbmZpZ3VyZT1mdW5jdGlvbih0KXt0aGlzLnF1ZXVlJiZ0aGlzLnF1ZXVlLmNvbmZpZ3VyZSh0KTt2YXIgZT10aGlzLm9wdGlvbnM7cmV0dXJuIHRoaXMub3B0aW9ucz1vLm1lcmdlKGUsdCksdGhpc30sbi5wcm90b3R5cGUuYWRkVHJhbnNmb3JtPWZ1bmN0aW9uKHQpe3JldHVybiBvLmlzRnVuY3Rpb24odCkmJnRoaXMudHJhbnNmb3Jtcy5wdXNoKHQpLHRoaXN9LG4ucHJvdG90eXBlLmxvZz1mdW5jdGlvbih0LGUpe2lmKGUmJm8uaXNGdW5jdGlvbihlKXx8KGU9ZnVuY3Rpb24oKXt9KSwhdGhpcy5vcHRpb25zLmVuYWJsZWQpcmV0dXJuIGUobmV3IEVycm9yKFwiUm9sbGJhciBpcyBub3QgZW5hYmxlZFwiKSk7dGhpcy5xdWV1ZS5hZGRQZW5kaW5nSXRlbSh0KTt2YXIgcj10LmVycjt0aGlzLl9hcHBseVRyYW5zZm9ybXModCxmdW5jdGlvbihuLG8pe3JldHVybiBuPyh0aGlzLnF1ZXVlLnJlbW92ZVBlbmRpbmdJdGVtKHQpLGUobixudWxsKSk6dm9pZCB0aGlzLnF1ZXVlLmFkZEl0ZW0obyxlLHIsdCl9LmJpbmQodGhpcykpfSxuLnByb3RvdHlwZS5fYXBwbHlUcmFuc2Zvcm1zPWZ1bmN0aW9uKHQsZSl7dmFyIHI9LTEsbj10aGlzLnRyYW5zZm9ybXMubGVuZ3RoLG89dGhpcy50cmFuc2Zvcm1zLGk9dGhpcy5vcHRpb25zLGE9ZnVuY3Rpb24odCxzKXtyZXR1cm4gdD92b2lkIGUodCxudWxsKToocisrLHI9PT1uP3ZvaWQgZShudWxsLHMpOnZvaWQgb1tyXShzLGksYSkpfTthKG51bGwsdCl9LHQuZXhwb3J0cz1ufSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXt0aGlzLnF1ZXVlPVtdLHRoaXMub3B0aW9ucz1pLm1lcmdlKHQpO3ZhciBlPXRoaXMub3B0aW9ucy5tYXhUZWxlbWV0cnlFdmVudHN8fGE7dGhpcy5tYXhRdWV1ZVNpemU9TWF0aC5tYXgoMCxNYXRoLm1pbihlLGEpKX1mdW5jdGlvbiBvKHQsZSl7aWYoZSlyZXR1cm4gZTt2YXIgcj17ZXJyb3I6XCJlcnJvclwiLG1hbnVhbDpcImluZm9cIn07cmV0dXJuIHJbdF18fFwiaW5mb1wifXZhciBpPXIoNSksYT0xMDA7bi5wcm90b3R5cGUuY29uZmlndXJlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMub3B0aW9uczt0aGlzLm9wdGlvbnM9aS5tZXJnZShlLHQpO3ZhciByPXRoaXMub3B0aW9ucy5tYXhUZWxlbWV0cnlFdmVudHN8fGEsbj1NYXRoLm1heCgwLE1hdGgubWluKHIsYSkpLG89MDt0aGlzLm1heFF1ZXVlU2l6ZT5uJiYobz10aGlzLm1heFF1ZXVlU2l6ZS1uKSx0aGlzLm1heFF1ZXVlU2l6ZT1uLHRoaXMucXVldWUuc3BsaWNlKDAsbyl9LG4ucHJvdG90eXBlLmNvcHlFdmVudHM9ZnVuY3Rpb24oKXt2YXIgdD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLnF1ZXVlLDApO2lmKGkuaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMuZmlsdGVyVGVsZW1ldHJ5KSl0cnl7Zm9yKHZhciBlPXQubGVuZ3RoO2UtLTspdGhpcy5vcHRpb25zLmZpbHRlclRlbGVtZXRyeSh0W2VdKSYmdC5zcGxpY2UoZSwxKX1jYXRjaCh0KXt0aGlzLm9wdGlvbnMuZmlsdGVyVGVsZW1ldHJ5PW51bGx9cmV0dXJuIHR9LG4ucHJvdG90eXBlLmNhcHR1cmU9ZnVuY3Rpb24odCxlLHIsbixhKXt2YXIgcz17bGV2ZWw6byh0LHIpLHR5cGU6dCx0aW1lc3RhbXBfbXM6YXx8aS5ub3coKSxib2R5OmUsc291cmNlOlwiY2xpZW50XCJ9O24mJihzLnV1aWQ9bik7dHJ5e2lmKGkuaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMuZmlsdGVyVGVsZW1ldHJ5KSYmdGhpcy5vcHRpb25zLmZpbHRlclRlbGVtZXRyeShzKSlyZXR1cm4hMX1jYXRjaCh0KXt0aGlzLm9wdGlvbnMuZmlsdGVyVGVsZW1ldHJ5PW51bGx9cmV0dXJuIHRoaXMucHVzaChzKSxzfSxuLnByb3RvdHlwZS5jYXB0dXJlRXZlbnQ9ZnVuY3Rpb24odCxlLHIsbil7cmV0dXJuIHRoaXMuY2FwdHVyZSh0LGUscixuKX0sbi5wcm90b3R5cGUuY2FwdHVyZUVycm9yPWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBvPXttZXNzYWdlOnQubWVzc2FnZXx8U3RyaW5nKHQpfTtyZXR1cm4gdC5zdGFjayYmKG8uc3RhY2s9dC5zdGFjayksdGhpcy5jYXB0dXJlKFwiZXJyb3JcIixvLGUscixuKX0sbi5wcm90b3R5cGUuY2FwdHVyZUxvZz1mdW5jdGlvbih0LGUscixuKXtyZXR1cm4gdGhpcy5jYXB0dXJlKFwibG9nXCIse21lc3NhZ2U6dH0sZSxyLG4pfSxuLnByb3RvdHlwZS5jYXB0dXJlTmV0d29yaz1mdW5jdGlvbih0LGUscixuKXtlPWV8fFwieGhyXCIsdC5zdWJ0eXBlPXQuc3VidHlwZXx8ZSxuJiYodC5yZXF1ZXN0PW4pO3ZhciBvPXRoaXMubGV2ZWxGcm9tU3RhdHVzKHQuc3RhdHVzX2NvZGUpO3JldHVybiB0aGlzLmNhcHR1cmUoXCJuZXR3b3JrXCIsdCxvLHIpfSxuLnByb3RvdHlwZS5sZXZlbEZyb21TdGF0dXM9ZnVuY3Rpb24odCl7cmV0dXJuIHQ+PTIwMCYmdDw0MDA/XCJpbmZvXCI6MD09PXR8fHQ+PTQwMD9cImVycm9yXCI6XCJpbmZvXCJ9LG4ucHJvdG90eXBlLmNhcHR1cmVEb209ZnVuY3Rpb24odCxlLHIsbixvKXt2YXIgaT17c3VidHlwZTp0LGVsZW1lbnQ6ZX07cmV0dXJuIHZvaWQgMCE9PXImJihpLnZhbHVlPXIpLHZvaWQgMCE9PW4mJihpLmNoZWNrZWQ9biksdGhpcy5jYXB0dXJlKFwiZG9tXCIsaSxcImluZm9cIixvKX0sbi5wcm90b3R5cGUuY2FwdHVyZU5hdmlnYXRpb249ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0aGlzLmNhcHR1cmUoXCJuYXZpZ2F0aW9uXCIse2Zyb206dCx0bzplfSxcImluZm9cIixyKX0sbi5wcm90b3R5cGUuY2FwdHVyZURvbUNvbnRlbnRMb2FkZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2FwdHVyZShcIm5hdmlnYXRpb25cIix7c3VidHlwZTpcIkRPTUNvbnRlbnRMb2FkZWRcIn0sXCJpbmZvXCIsdm9pZCAwLHQmJnQuZ2V0VGltZSgpKX0sbi5wcm90b3R5cGUuY2FwdHVyZUxvYWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2FwdHVyZShcIm5hdmlnYXRpb25cIix7c3VidHlwZTpcImxvYWRcIn0sXCJpbmZvXCIsdm9pZCAwLHQmJnQuZ2V0VGltZSgpKX0sbi5wcm90b3R5cGUuY2FwdHVyZUNvbm5lY3Rpdml0eUNoYW5nZT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNhcHR1cmVOZXR3b3JrKHtjaGFuZ2U6dH0sXCJjb25uZWN0aXZpdHlcIixlKX0sbi5wcm90b3R5cGUuX2NhcHR1cmVSb2xsYmFySXRlbT1mdW5jdGlvbih0KXtpZih0aGlzLm9wdGlvbnMuaW5jbHVkZUl0ZW1zSW5UZWxlbWV0cnkpcmV0dXJuIHQuZXJyP3RoaXMuY2FwdHVyZUVycm9yKHQuZXJyLHQubGV2ZWwsdC51dWlkLHQudGltZXN0YW1wKTp0Lm1lc3NhZ2U/dGhpcy5jYXB0dXJlTG9nKHQubWVzc2FnZSx0LmxldmVsLHQudXVpZCx0LnRpbWVzdGFtcCk6dC5jdXN0b20/dGhpcy5jYXB0dXJlKFwibG9nXCIsdC5jdXN0b20sdC5sZXZlbCx0LnV1aWQsdC50aW1lc3RhbXApOnZvaWQgMH0sbi5wcm90b3R5cGUucHVzaD1mdW5jdGlvbih0KXt0aGlzLnF1ZXVlLnB1c2godCksdGhpcy5xdWV1ZS5sZW5ndGg+dGhpcy5tYXhRdWV1ZVNpemUmJnRoaXMucXVldWUuc2hpZnQoKX0sdC5leHBvcnRzPW59LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSxyLG4pe3RoaXMub3B0aW9ucz10LHRoaXMudHJhbnNwb3J0PWUsdGhpcy51cmw9cix0aGlzLmpzb25CYWNrdXA9bix0aGlzLmFjY2Vzc1Rva2VuPXQuYWNjZXNzVG9rZW4sdGhpcy50cmFuc3BvcnRPcHRpb25zPW8odCxyKX1mdW5jdGlvbiBvKHQsZSl7cmV0dXJuIGEuZ2V0VHJhbnNwb3J0RnJvbU9wdGlvbnModCxzLGUpfXZhciBpPXIoNSksYT1yKDEyKSxzPXtob3N0bmFtZTpcImFwaS5yb2xsYmFyLmNvbVwiLHBhdGg6XCIvYXBpLzEvaXRlbS9cIixzZWFyY2g6bnVsbCx2ZXJzaW9uOlwiMVwiLHByb3RvY29sOlwiaHR0cHM6XCIscG9ydDo0NDN9O24ucHJvdG90eXBlLnBvc3RJdGVtPWZ1bmN0aW9uKHQsZSl7dmFyIHI9YS50cmFuc3BvcnRPcHRpb25zKHRoaXMudHJhbnNwb3J0T3B0aW9ucyxcIlBPU1RcIiksbj1hLmJ1aWxkUGF5bG9hZCh0aGlzLmFjY2Vzc1Rva2VuLHQsdGhpcy5qc29uQmFja3VwKTt0aGlzLnRyYW5zcG9ydC5wb3N0KHRoaXMuYWNjZXNzVG9rZW4scixuLGUpfSxuLnByb3RvdHlwZS5jb25maWd1cmU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5vbGRPcHRpb25zO3JldHVybiB0aGlzLm9wdGlvbnM9aS5tZXJnZShlLHQpLHRoaXMudHJhbnNwb3J0T3B0aW9ucz1vKHRoaXMub3B0aW9ucyx0aGlzLnVybCksdm9pZCAwIT09dGhpcy5vcHRpb25zLmFjY2Vzc1Rva2VuJiYodGhpcy5hY2Nlc3NUb2tlbj10aGlzLm9wdGlvbnMuYWNjZXNzVG9rZW4pLHRoaXN9LHQuZXhwb3J0cz1ufSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUscil7aWYoIXMuaXNUeXBlKGUuY29udGV4dCxcInN0cmluZ1wiKSl7dmFyIG49cy5zdHJpbmdpZnkoZS5jb250ZXh0LHIpO24uZXJyb3I/ZS5jb250ZXh0PVwiRXJyb3I6IGNvdWxkIG5vdCBzZXJpYWxpemUgJ2NvbnRleHQnXCI6ZS5jb250ZXh0PW4udmFsdWV8fFwiXCIsZS5jb250ZXh0Lmxlbmd0aD4yNTUmJihlLmNvbnRleHQ9ZS5jb250ZXh0LnN1YnN0cigwLDI1NSkpfXJldHVybnthY2Nlc3NfdG9rZW46dCxkYXRhOmV9fWZ1bmN0aW9uIG8odCxlLHIpe3ZhciBuPWUuaG9zdG5hbWUsbz1lLnByb3RvY29sLGk9ZS5wb3J0LGE9ZS5wYXRoLHM9ZS5zZWFyY2gsdT10LnByb3h5O2lmKHQuZW5kcG9pbnQpe3ZhciBjPXIucGFyc2UodC5lbmRwb2ludCk7bj1jLmhvc3RuYW1lLG89Yy5wcm90b2NvbCxpPWMucG9ydCxhPWMucGF0aG5hbWUscz1jLnNlYXJjaH1yZXR1cm57aG9zdG5hbWU6bixwcm90b2NvbDpvLHBvcnQ6aSxwYXRoOmEsc2VhcmNoOnMscHJveHk6dX19ZnVuY3Rpb24gaSh0LGUpe3ZhciByPXQucHJvdG9jb2x8fFwiaHR0cHM6XCIsbj10LnBvcnR8fChcImh0dHA6XCI9PT1yPzgwOlwiaHR0cHM6XCI9PT1yPzQ0Mzp2b2lkIDApLG89dC5ob3N0bmFtZSxpPXQucGF0aDtcbnJldHVybiB0LnNlYXJjaCYmKGkrPXQuc2VhcmNoKSx0LnByb3h5JiYoaT1yK1wiLy9cIitvK2ksbz10LnByb3h5Lmhvc3R8fHQucHJveHkuaG9zdG5hbWUsbj10LnByb3h5LnBvcnQscj10LnByb3h5LnByb3RvY29sfHxyKSx7cHJvdG9jb2w6cixob3N0bmFtZTpvLHBhdGg6aSxwb3J0Om4sbWV0aG9kOmV9fWZ1bmN0aW9uIGEodCxlKXt2YXIgcj0vXFwvJC8udGVzdCh0KSxuPS9eXFwvLy50ZXN0KGUpO3JldHVybiByJiZuP2U9ZS5zdWJzdHJpbmcoMSk6cnx8bnx8KGU9XCIvXCIrZSksdCtlfXZhciBzPXIoNSk7dC5leHBvcnRzPXtidWlsZFBheWxvYWQ6bixnZXRUcmFuc3BvcnRGcm9tT3B0aW9uczpvLHRyYW5zcG9ydE9wdGlvbnM6aSxhcHBlbmRQYXRoVG9QYXRoOmF9fSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbigpe3ZhciB0PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTt0LnVuc2hpZnQoXCJSb2xsYmFyOlwiKSxhLmllVmVyc2lvbigpPD04P2NvbnNvbGUuZXJyb3Iocy5mb3JtYXRBcmdzQXNTdHJpbmcodCkpOmNvbnNvbGUuZXJyb3IuYXBwbHkoY29uc29sZSx0KX1mdW5jdGlvbiBvKCl7dmFyIHQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApO3QudW5zaGlmdChcIlJvbGxiYXI6XCIpLGEuaWVWZXJzaW9uKCk8PTg/Y29uc29sZS5pbmZvKHMuZm9ybWF0QXJnc0FzU3RyaW5nKHQpKTpjb25zb2xlLmluZm8uYXBwbHkoY29uc29sZSx0KX1mdW5jdGlvbiBpKCl7dmFyIHQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApO3QudW5zaGlmdChcIlJvbGxiYXI6XCIpLGEuaWVWZXJzaW9uKCk8PTg/Y29uc29sZS5sb2cocy5mb3JtYXRBcmdzQXNTdHJpbmcodCkpOmNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsdCl9cigxNCk7dmFyIGE9cigxNSkscz1yKDUpO3QuZXhwb3J0cz17ZXJyb3I6bixpbmZvOm8sbG9nOml9fSxmdW5jdGlvbih0LGUpeyFmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjt0LmNvbnNvbGV8fCh0LmNvbnNvbGU9e30pO2Zvcih2YXIgZSxyLG49dC5jb25zb2xlLG89ZnVuY3Rpb24oKXt9LGk9W1wibWVtb3J5XCJdLGE9XCJhc3NlcnQsY2xlYXIsY291bnQsZGVidWcsZGlyLGRpcnhtbCxlcnJvcixleGNlcHRpb24sZ3JvdXAsZ3JvdXBDb2xsYXBzZWQsZ3JvdXBFbmQsaW5mbyxsb2csbWFya1RpbWVsaW5lLHByb2ZpbGUscHJvZmlsZXMscHJvZmlsZUVuZCxzaG93LHRhYmxlLHRpbWUsdGltZUVuZCx0aW1lbGluZSx0aW1lbGluZUVuZCx0aW1lU3RhbXAsdHJhY2Usd2FyblwiLnNwbGl0KFwiLFwiKTtlPWkucG9wKCk7KW5bZV18fChuW2VdPXt9KTtmb3IoO3I9YS5wb3AoKTspbltyXXx8KG5bcl09byl9KFwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3c/dGhpczp3aW5kb3cpfSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIoKXt2YXIgdDtpZighZG9jdW1lbnQpcmV0dXJuIHQ7Zm9yKHZhciBlPTMscj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLG49ci5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlcIik7ci5pbm5lckhUTUw9XCI8IS0tW2lmIGd0IElFIFwiKyArK2UrXCJdPjxpPjwvaT48IVtlbmRpZl0tLT5cIixuWzBdOyk7cmV0dXJuIGU+ND9lOnR9dmFyIG49e2llVmVyc2lvbjpyfTt0LmV4cG9ydHM9bn0sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQsZSxyKXtpZih0KXt2YXIgbztpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLl9yb2xsYmFyT2xkT25FcnJvcilvPWUuX3JvbGxiYXJPbGRPbkVycm9yO2Vsc2UgaWYodC5vbmVycm9yKXtmb3Iobz10Lm9uZXJyb3I7by5fcm9sbGJhck9sZE9uRXJyb3I7KW89by5fcm9sbGJhck9sZE9uRXJyb3I7ZS5fcm9sbGJhck9sZE9uRXJyb3I9b312YXIgaT1mdW5jdGlvbigpe3ZhciByPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTtuKHQsZSxvLHIpfTtyJiYoaS5fcm9sbGJhck9sZE9uRXJyb3I9byksdC5vbmVycm9yPWl9fWZ1bmN0aW9uIG4odCxlLHIsbil7dC5fcm9sbGJhcldyYXBwZWRFcnJvciYmKG5bNF18fChuWzRdPXQuX3JvbGxiYXJXcmFwcGVkRXJyb3IpLG5bNV18fChuWzVdPXQuX3JvbGxiYXJXcmFwcGVkRXJyb3IuX3JvbGxiYXJDb250ZXh0KSx0Ll9yb2xsYmFyV3JhcHBlZEVycm9yPW51bGwpLGUuaGFuZGxlVW5jYXVnaHRFeGNlcHRpb24uYXBwbHkoZSxuKSxyJiZyLmFwcGx5KHQsbil9ZnVuY3Rpb24gbyh0LGUscil7aWYodCl7XCJmdW5jdGlvblwiPT10eXBlb2YgdC5fcm9sbGJhclVSSCYmdC5fcm9sbGJhclVSSC5iZWxvbmdzVG9TaGltJiZ0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ1bmhhbmRsZWRyZWplY3Rpb25cIix0Ll9yb2xsYmFyVVJIKTt2YXIgbj1mdW5jdGlvbih0KXt2YXIgcixuLG87dHJ5e3I9dC5yZWFzb259Y2F0Y2godCl7cj12b2lkIDB9dHJ5e249dC5wcm9taXNlfWNhdGNoKHQpe249XCJbdW5oYW5kbGVkcmVqZWN0aW9uXSBlcnJvciBnZXR0aW5nIGBwcm9taXNlYCBmcm9tIGV2ZW50XCJ9dHJ5e289dC5kZXRhaWwsIXImJm8mJihyPW8ucmVhc29uLG49by5wcm9taXNlKX1jYXRjaCh0KXt9cnx8KHI9XCJbdW5oYW5kbGVkcmVqZWN0aW9uXSBlcnJvciBnZXR0aW5nIGByZWFzb25gIGZyb20gZXZlbnRcIiksZSYmZS5oYW5kbGVVbmhhbmRsZWRSZWplY3Rpb24mJmUuaGFuZGxlVW5oYW5kbGVkUmVqZWN0aW9uKHIsbil9O24uYmVsb25nc1RvU2hpbT1yLHQuX3JvbGxiYXJVUkg9bix0LmFkZEV2ZW50TGlzdGVuZXIoXCJ1bmhhbmRsZWRyZWplY3Rpb25cIixuKX19ZnVuY3Rpb24gaSh0LGUscil7aWYodCl7dmFyIG4sbyxpPVwiRXZlbnRUYXJnZXQsV2luZG93LE5vZGUsQXBwbGljYXRpb25DYWNoZSxBdWRpb1RyYWNrTGlzdCxDaGFubmVsTWVyZ2VyTm9kZSxDcnlwdG9PcGVyYXRpb24sRXZlbnRTb3VyY2UsRmlsZVJlYWRlcixIVE1MVW5rbm93bkVsZW1lbnQsSURCRGF0YWJhc2UsSURCUmVxdWVzdCxJREJUcmFuc2FjdGlvbixLZXlPcGVyYXRpb24sTWVkaWFDb250cm9sbGVyLE1lc3NhZ2VQb3J0LE1vZGFsV2luZG93LE5vdGlmaWNhdGlvbixTVkdFbGVtZW50SW5zdGFuY2UsU2NyZWVuLFRleHRUcmFjayxUZXh0VHJhY2tDdWUsVGV4dFRyYWNrTGlzdCxXZWJTb2NrZXQsV2ViU29ja2V0V29ya2VyLFdvcmtlcixYTUxIdHRwUmVxdWVzdCxYTUxIdHRwUmVxdWVzdEV2ZW50VGFyZ2V0LFhNTEh0dHBSZXF1ZXN0VXBsb2FkXCIuc3BsaXQoXCIsXCIpO2ZvcihuPTA7bjxpLmxlbmd0aDsrK24pbz1pW25dLHRbb10mJnRbb10ucHJvdG90eXBlJiZhKGUsdFtvXS5wcm90b3R5cGUscil9fWZ1bmN0aW9uIGEodCxlLHIpe2lmKGUuaGFzT3duUHJvcGVydHkmJmUuaGFzT3duUHJvcGVydHkoXCJhZGRFdmVudExpc3RlbmVyXCIpKXtmb3IodmFyIG49ZS5hZGRFdmVudExpc3RlbmVyO24uX3JvbGxiYXJPbGRBZGQmJm4uYmVsb25nc1RvU2hpbTspbj1uLl9yb2xsYmFyT2xkQWRkO3ZhciBvPWZ1bmN0aW9uKGUscixvKXtuLmNhbGwodGhpcyxlLHQud3JhcChyKSxvKX07by5fcm9sbGJhck9sZEFkZD1uLG8uYmVsb25nc1RvU2hpbT1yLGUuYWRkRXZlbnRMaXN0ZW5lcj1vO2Zvcih2YXIgaT1lLnJlbW92ZUV2ZW50TGlzdGVuZXI7aS5fcm9sbGJhck9sZFJlbW92ZSYmaS5iZWxvbmdzVG9TaGltOylpPWkuX3JvbGxiYXJPbGRSZW1vdmU7dmFyIGE9ZnVuY3Rpb24odCxlLHIpe2kuY2FsbCh0aGlzLHQsZSYmZS5fcm9sbGJhcl93cmFwcGVkfHxlLHIpfTthLl9yb2xsYmFyT2xkUmVtb3ZlPWksYS5iZWxvbmdzVG9TaGltPXIsZS5yZW1vdmVFdmVudExpc3RlbmVyPWF9fXQuZXhwb3J0cz17Y2FwdHVyZVVuY2F1Z2h0RXhjZXB0aW9uczpyLGNhcHR1cmVVbmhhbmRsZWRSZWplY3Rpb25zOm8sd3JhcEdsb2JhbHM6aX19LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSxyLG4sbyl7biYmcC5pc0Z1bmN0aW9uKG4pfHwobj1mdW5jdGlvbigpe30pLHAuYWRkUGFyYW1zQW5kQWNjZXNzVG9rZW5Ub1BhdGgodCxlLHIpO3ZhciBhPVwiR0VUXCIscz1wLmZvcm1hdFVybChlKTtpKHQscyxhLG51bGwsbixvKX1mdW5jdGlvbiBvKHQsZSxyLG4sbyl7aWYobiYmcC5pc0Z1bmN0aW9uKG4pfHwobj1mdW5jdGlvbigpe30pLCFyKXJldHVybiBuKG5ldyBFcnJvcihcIkNhbm5vdCBzZW5kIGVtcHR5IHJlcXVlc3RcIikpO3ZhciBhPWYudHJ1bmNhdGUocik7aWYoYS5lcnJvcilyZXR1cm4gbihhLmVycm9yKTt2YXIgcz1hLnZhbHVlLHU9XCJQT1NUXCIsYz1wLmZvcm1hdFVybChlKTtpKHQsYyx1LHMsbixvKX1mdW5jdGlvbiBpKHQsZSxyLG4sbyxpKXt2YXIgcz1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3d8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmJiZzZWxmLHU9cyYmcy5ab25lJiZzLlpvbmUuY3VycmVudDtpZih1JiZcImFuZ3VsYXJcIj09PXUuX25hbWUpe3ZhciBjPXUuX3BhcmVudDtjLnJ1bihmdW5jdGlvbigpe2EodCxlLHIsbixvLGkpfSl9ZWxzZSBhKHQsZSxyLG4sbyxpKX1mdW5jdGlvbiBhKHQsZSxyLG4sbyxpKXt2YXIgYTtpZihhPWk/aSgpOnMoKSwhYSlyZXR1cm4gbyhuZXcgRXJyb3IoXCJObyB3YXkgdG8gc2VuZCBhIHJlcXVlc3RcIikpO3RyeXt0cnl7dmFyIGY9ZnVuY3Rpb24oKXt0cnl7aWYoZiYmND09PWEucmVhZHlTdGF0ZSl7Zj12b2lkIDA7dmFyIHQ9cC5qc29uUGFyc2UoYS5yZXNwb25zZVRleHQpO2lmKHUoYSkpcmV0dXJuIHZvaWQgbyh0LmVycm9yLHQudmFsdWUpO2lmKGMoYSkpe2lmKDQwMz09PWEuc3RhdHVzKXt2YXIgZT10LnZhbHVlJiZ0LnZhbHVlLm1lc3NhZ2U7aC5lcnJvcihlKX1vKG5ldyBFcnJvcihTdHJpbmcoYS5zdGF0dXMpKSl9ZWxzZXt2YXIgcj1cIlhIUiByZXNwb25zZSBoYWQgbm8gc3RhdHVzIGNvZGUgKGxpa2VseSBjb25uZWN0aW9uIGZhaWx1cmUpXCI7byhsKHIpKX19fWNhdGNoKHQpe3ZhciBuO249dCYmdC5zdGFjaz90Om5ldyBFcnJvcih0KSxvKG4pfX07YS5vcGVuKHIsZSwhMCksYS5zZXRSZXF1ZXN0SGVhZGVyJiYoYS5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsXCJhcHBsaWNhdGlvbi9qc29uXCIpLGEuc2V0UmVxdWVzdEhlYWRlcihcIlgtUm9sbGJhci1BY2Nlc3MtVG9rZW5cIix0KSksYS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZixhLnNlbmQobil9Y2F0Y2godCl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFhEb21haW5SZXF1ZXN0KXtpZighd2luZG93fHwhd2luZG93LmxvY2F0aW9uKXJldHVybiBvKG5ldyBFcnJvcihcIk5vIHdpbmRvdyBhdmFpbGFibGUgZHVyaW5nIHJlcXVlc3QsIHVua25vd24gZW52aXJvbm1lbnRcIikpO1wiaHR0cDpcIj09PXdpbmRvdy5sb2NhdGlvbi5ocmVmLnN1YnN0cmluZygwLDUpJiZcImh0dHBzXCI9PT1lLnN1YnN0cmluZygwLDUpJiYoZT1cImh0dHBcIitlLnN1YnN0cmluZyg1KSk7dmFyIGQ9bmV3IFhEb21haW5SZXF1ZXN0O2Qub25wcm9ncmVzcz1mdW5jdGlvbigpe30sZC5vbnRpbWVvdXQ9ZnVuY3Rpb24oKXt2YXIgdD1cIlJlcXVlc3QgdGltZWQgb3V0XCIsZT1cIkVUSU1FRE9VVFwiO28obCh0LGUpKX0sZC5vbmVycm9yPWZ1bmN0aW9uKCl7byhuZXcgRXJyb3IoXCJFcnJvciBkdXJpbmcgcmVxdWVzdFwiKSl9LGQub25sb2FkPWZ1bmN0aW9uKCl7dmFyIHQ9cC5qc29uUGFyc2UoZC5yZXNwb25zZVRleHQpO28odC5lcnJvcix0LnZhbHVlKX0sZC5vcGVuKHIsZSwhMCksZC5zZW5kKG4pfWVsc2UgbyhuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBhIG1ldGhvZCB0byB0cmFuc3BvcnQgYSByZXF1ZXN0XCIpKX19Y2F0Y2godCl7byh0KX19ZnVuY3Rpb24gcygpe3ZhciB0LGUscj1bZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0fSxmdW5jdGlvbigpe3JldHVybiBuZXcgQWN0aXZlWE9iamVjdChcIk1zeG1sMi5YTUxIVFRQXCIpfSxmdW5jdGlvbigpe3JldHVybiBuZXcgQWN0aXZlWE9iamVjdChcIk1zeG1sMy5YTUxIVFRQXCIpfSxmdW5jdGlvbigpe3JldHVybiBuZXcgQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxIVFRQXCIpfV0sbj1yLmxlbmd0aDtmb3IoZT0wO2U8bjtlKyspdHJ5e3Q9cltlXSgpO2JyZWFrfWNhdGNoKHQpe31yZXR1cm4gdH1mdW5jdGlvbiB1KHQpe3JldHVybiB0JiZ0LnN0YXR1cyYmMjAwPT09dC5zdGF0dXN9ZnVuY3Rpb24gYyh0KXtyZXR1cm4gdCYmcC5pc1R5cGUodC5zdGF0dXMsXCJudW1iZXJcIikmJnQuc3RhdHVzPj00MDAmJnQuc3RhdHVzPDYwMH1mdW5jdGlvbiBsKHQsZSl7dmFyIHI9bmV3IEVycm9yKHQpO3JldHVybiByLmNvZGU9ZXx8XCJFTk9URk9VTkRcIixyfXZhciBwPXIoNSksZj1yKDE4KSxoPXIoMTMpO3QuZXhwb3J0cz17Z2V0Om4scG9zdDpvfX0sZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtyZXR1cm5bdCxmLnN0cmluZ2lmeSh0LGUpXX1mdW5jdGlvbiBvKHQsZSl7dmFyIHI9dC5sZW5ndGg7cmV0dXJuIHI+MiplP3Quc2xpY2UoMCxlKS5jb25jYXQodC5zbGljZShyLWUpKTp0fWZ1bmN0aW9uIGkodCxlLHIpe3I9XCJ1bmRlZmluZWRcIj09dHlwZW9mIHI/MzA6cjt2YXIgbixpPXQuZGF0YS5ib2R5O2lmKGkudHJhY2VfY2hhaW4pZm9yKHZhciBhPWkudHJhY2VfY2hhaW4scz0wO3M8YS5sZW5ndGg7cysrKW49YVtzXS5mcmFtZXMsbj1vKG4sciksYVtzXS5mcmFtZXM9bjtlbHNlIGkudHJhY2UmJihuPWkudHJhY2UuZnJhbWVzLG49byhuLHIpLGkudHJhY2UuZnJhbWVzPW4pO3JldHVyblt0LGYuc3RyaW5naWZ5KHQsZSldfWZ1bmN0aW9uIGEodCxlKXtyZXR1cm4gZSYmZS5sZW5ndGg+dD9lLnNsaWNlKDAsdC0zKS5jb25jYXQoXCIuLi5cIik6ZX1mdW5jdGlvbiBzKHQsZSxyKXtmdW5jdGlvbiBuKGUscixvKXtzd2l0Y2goZi50eXBlTmFtZShyKSl7Y2FzZVwic3RyaW5nXCI6cmV0dXJuIGEodCxyKTtjYXNlXCJvYmplY3RcIjpjYXNlXCJhcnJheVwiOnJldHVybiBmLnRyYXZlcnNlKHIsbixvKTtkZWZhdWx0OnJldHVybiByfX1yZXR1cm4gZT1mLnRyYXZlcnNlKGUsbixbXSksW2UsZi5zdHJpbmdpZnkoZSxyKV19ZnVuY3Rpb24gdSh0KXtyZXR1cm4gdC5leGNlcHRpb24mJihkZWxldGUgdC5leGNlcHRpb24uZGVzY3JpcHRpb24sdC5leGNlcHRpb24ubWVzc2FnZT1hKDI1NSx0LmV4Y2VwdGlvbi5tZXNzYWdlKSksdC5mcmFtZXM9byh0LmZyYW1lcywxKSx0fWZ1bmN0aW9uIGModCxlKXt2YXIgcj10LmRhdGEuYm9keTtpZihyLnRyYWNlX2NoYWluKWZvcih2YXIgbj1yLnRyYWNlX2NoYWluLG89MDtvPG4ubGVuZ3RoO28rKyluW29dPXUobltvXSk7ZWxzZSByLnRyYWNlJiYoci50cmFjZT11KHIudHJhY2UpKTtyZXR1cm5bdCxmLnN0cmluZ2lmeSh0LGUpXX1mdW5jdGlvbiBsKHQsZSl7cmV0dXJuIHQubGVuZ3RoPmV9ZnVuY3Rpb24gcCh0LGUscil7cj1cInVuZGVmaW5lZFwiPT10eXBlb2Ygcj81MjQyODg6cjtmb3IodmFyIG8sYSx1LHA9W24saSxzLmJpbmQobnVsbCwxMDI0KSxzLmJpbmQobnVsbCw1MTIpLHMuYmluZChudWxsLDI1NiksY107bz1wLnNoaWZ0KCk7KWlmKGE9byh0LGUpLHQ9YVswXSx1PWFbMV0sdS5lcnJvcnx8IWwodS52YWx1ZSxyKSlyZXR1cm4gdTtyZXR1cm4gdX12YXIgZj1yKDUpO3QuZXhwb3J0cz17dHJ1bmNhdGU6cCxyYXc6bix0cnVuY2F0ZUZyYW1lczppLHRydW5jYXRlU3RyaW5nczpzLG1heWJlVHJ1bmNhdGVWYWx1ZTphfX0sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQpe3ZhciBlLHIsbj17cHJvdG9jb2w6bnVsbCxhdXRoOm51bGwsaG9zdDpudWxsLHBhdGg6bnVsbCxoYXNoOm51bGwsaHJlZjp0LGhvc3RuYW1lOm51bGwscG9ydDpudWxsLHBhdGhuYW1lOm51bGwsc2VhcmNoOm51bGwscXVlcnk6bnVsbH07aWYoZT10LmluZGV4T2YoXCIvL1wiKSxlIT09LTE/KG4ucHJvdG9jb2w9dC5zdWJzdHJpbmcoMCxlKSxyPWUrMik6cj0wLGU9dC5pbmRleE9mKFwiQFwiLHIpLGUhPT0tMSYmKG4uYXV0aD10LnN1YnN0cmluZyhyLGUpLHI9ZSsxKSxlPXQuaW5kZXhPZihcIi9cIixyKSxlPT09LTEpe2lmKGU9dC5pbmRleE9mKFwiP1wiLHIpLGU9PT0tMSlyZXR1cm4gZT10LmluZGV4T2YoXCIjXCIsciksZT09PS0xP24uaG9zdD10LnN1YnN0cmluZyhyKToobi5ob3N0PXQuc3Vic3RyaW5nKHIsZSksbi5oYXNoPXQuc3Vic3RyaW5nKGUpKSxuLmhvc3RuYW1lPW4uaG9zdC5zcGxpdChcIjpcIilbMF0sbi5wb3J0PW4uaG9zdC5zcGxpdChcIjpcIilbMV0sbi5wb3J0JiYobi5wb3J0PXBhcnNlSW50KG4ucG9ydCwxMCkpLG47bi5ob3N0PXQuc3Vic3RyaW5nKHIsZSksbi5ob3N0bmFtZT1uLmhvc3Quc3BsaXQoXCI6XCIpWzBdLG4ucG9ydD1uLmhvc3Quc3BsaXQoXCI6XCIpWzFdLG4ucG9ydCYmKG4ucG9ydD1wYXJzZUludChuLnBvcnQsMTApKSxyPWV9ZWxzZSBuLmhvc3Q9dC5zdWJzdHJpbmcocixlKSxuLmhvc3RuYW1lPW4uaG9zdC5zcGxpdChcIjpcIilbMF0sbi5wb3J0PW4uaG9zdC5zcGxpdChcIjpcIilbMV0sbi5wb3J0JiYobi5wb3J0PXBhcnNlSW50KG4ucG9ydCwxMCkpLHI9ZTtpZihlPXQuaW5kZXhPZihcIiNcIixyKSxlPT09LTE/bi5wYXRoPXQuc3Vic3RyaW5nKHIpOihuLnBhdGg9dC5zdWJzdHJpbmcocixlKSxuLmhhc2g9dC5zdWJzdHJpbmcoZSkpLG4ucGF0aCl7dmFyIG89bi5wYXRoLnNwbGl0KFwiP1wiKTtuLnBhdGhuYW1lPW9bMF0sbi5xdWVyeT1vWzFdLG4uc2VhcmNoPW4ucXVlcnk/XCI/XCIrbi5xdWVyeTpudWxsfXJldHVybiBufXQuZXhwb3J0cz17cGFyc2U6cn19LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSxyKXtpZih0LmRhdGE9dC5kYXRhfHx7fSx0LmVycil0cnl7dC5zdGFja0luZm89dC5lcnIuX3NhdmVkU3RhY2tUcmFjZXx8ZC5wYXJzZSh0LmVycil9Y2F0Y2goZSl7bS5lcnJvcihcIkVycm9yIHdoaWxlIHBhcnNpbmcgdGhlIGVycm9yIG9iamVjdC5cIixlKTt0cnl7dC5tZXNzYWdlPXQuZXJyLm1lc3NhZ2V8fHQuZXJyLmRlc2NyaXB0aW9ufHx0Lm1lc3NhZ2V8fFN0cmluZyh0LmVycil9Y2F0Y2goZSl7dC5tZXNzYWdlPVN0cmluZyh0LmVycil8fFN0cmluZyhlKX1kZWxldGUgdC5lcnJ9cihudWxsLHQpfWZ1bmN0aW9uIG8odCxlLHIpe3QubWVzc2FnZXx8dC5zdGFja0luZm98fHQuY3VzdG9tfHxyKG5ldyBFcnJvcihcIk5vIG1lc3NhZ2UsIHN0YWNrIGluZm8sIG9yIGN1c3RvbSBkYXRhXCIpLG51bGwpLHIobnVsbCx0KX1mdW5jdGlvbiBpKHQsZSxyKXt2YXIgbj1lLnBheWxvYWQmJmUucGF5bG9hZC5lbnZpcm9ubWVudHx8ZS5lbnZpcm9ubWVudDt0LmRhdGE9aC5tZXJnZSh0LmRhdGEse2Vudmlyb25tZW50Om4sbGV2ZWw6dC5sZXZlbCxlbmRwb2ludDplLmVuZHBvaW50LHBsYXRmb3JtOlwiYnJvd3NlclwiLGZyYW1ld29yazpcImJyb3dzZXItanNcIixsYW5ndWFnZTpcImphdmFzY3JpcHRcIixzZXJ2ZXI6e30sdXVpZDp0LnV1aWQsbm90aWZpZXI6e25hbWU6XCJyb2xsYmFyLWJyb3dzZXItanNcIix2ZXJzaW9uOmUudmVyc2lvbn19KSxyKG51bGwsdCl9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gZnVuY3Rpb24oZSxyLG4pe2lmKCF0fHwhdC5sb2NhdGlvbilyZXR1cm4gbihudWxsLGUpO3ZhciBvPVwiJHJlbW90ZV9pcFwiO3IuY2FwdHVyZUlwP3IuY2FwdHVyZUlwIT09ITAmJihvKz1cIl9hbm9ueW1pemVcIik6bz1udWxsLGguc2V0KGUsXCJkYXRhLnJlcXVlc3RcIix7dXJsOnQubG9jYXRpb24uaHJlZixxdWVyeV9zdHJpbmc6dC5sb2NhdGlvbi5zZWFyY2gsdXNlcl9pcDpvfSksbihudWxsLGUpfX1mdW5jdGlvbiBzKHQpe3JldHVybiBmdW5jdGlvbihlLHIsbil7aWYoIXQpcmV0dXJuIG4obnVsbCxlKTt2YXIgbz10Lm5hdmlnYXRvcnx8e30saT10LnNjcmVlbnx8e307aC5zZXQoZSxcImRhdGEuY2xpZW50XCIse3J1bnRpbWVfbXM6ZS50aW1lc3RhbXAtdC5fcm9sbGJhclN0YXJ0VGltZSx0aW1lc3RhbXA6TWF0aC5yb3VuZChlLnRpbWVzdGFtcC8xZTMpLGphdmFzY3JpcHQ6e2Jyb3dzZXI6by51c2VyQWdlbnQsbGFuZ3VhZ2U6by5sYW5ndWFnZSxjb29raWVfZW5hYmxlZDpvLmNvb2tpZUVuYWJsZWQsc2NyZWVuOnt3aWR0aDppLndpZHRoLGhlaWdodDppLmhlaWdodH19fSksbihudWxsLGUpfX1mdW5jdGlvbiB1KHQpe3JldHVybiBmdW5jdGlvbihlLHIsbil7aWYoIXR8fCF0Lm5hdmlnYXRvcilyZXR1cm4gbihudWxsLGUpO2Zvcih2YXIgbyxpPVtdLGE9dC5uYXZpZ2F0b3IucGx1Z2luc3x8W10scz0wLHU9YS5sZW5ndGg7czx1OysrcylvPWFbc10saS5wdXNoKHtuYW1lOm8ubmFtZSxkZXNjcmlwdGlvbjpvLmRlc2NyaXB0aW9ufSk7aC5zZXQoZSxcImRhdGEuY2xpZW50LmphdmFzY3JpcHQucGx1Z2luc1wiLGkpLG4obnVsbCxlKX19ZnVuY3Rpb24gYyh0LGUscil7dC5zdGFja0luZm8/cCh0LGUscik6bCh0LGUscil9ZnVuY3Rpb24gbCh0LGUscil7dmFyIG49dC5tZXNzYWdlLG89dC5jdXN0b207aWYoIW4paWYobyl7dmFyIGk9ZS5zY3J1YkZpZWxkcyxhPWguc3RyaW5naWZ5KGguc2NydWIobyxpKSk7bj1hLmVycm9yfHxhLnZhbHVlfHxcIlwifWVsc2Ugbj1cIlwiO3ZhciBzPXtib2R5Om59O28mJihzLmV4dHJhPWgubWVyZ2UobykpLGguc2V0KHQsXCJkYXRhLmJvZHlcIix7bWVzc2FnZTpzfSkscihudWxsLHQpfWZ1bmN0aW9uIHAodCxlLHIpe3ZhciBuPXQuZGF0YS5kZXNjcmlwdGlvbixvPXQuc3RhY2tJbmZvLGk9dC5jdXN0b20sYT1kLmd1ZXNzRXJyb3JDbGFzcyhvLm1lc3NhZ2UpLHM9by5uYW1lfHxhWzBdLHU9YVsxXSxjPXtleGNlcHRpb246e2NsYXNzOnMsbWVzc2FnZTp1fX07biYmKGMuZXhjZXB0aW9uLmRlc2NyaXB0aW9uPW4pO3ZhciBwPW8uc3RhY2s7aWYocCYmMD09PXAubGVuZ3RoJiZ0Ll91bmhhbmRsZWRTdGFja0luZm8mJnQuX3VuaGFuZGxlZFN0YWNrSW5mby5zdGFjayYmKHA9dC5fdW5oYW5kbGVkU3RhY2tJbmZvLnN0YWNrKSxwKXswPT09cC5sZW5ndGgmJihjLmV4Y2VwdGlvbi5zdGFjaz1vLnJhd1N0YWNrLGMuZXhjZXB0aW9uLnJhdz1TdHJpbmcoby5yYXdFeGNlcHRpb24pKTt2YXIgZixtLGcsdix5LGIsdyxfO2ZvcihjLmZyYW1lcz1bXSx3PTA7dzxwLmxlbmd0aDsrK3cpZj1wW3ddLG09e2ZpbGVuYW1lOmYudXJsP2guc2FuaXRpemVVcmwoZi51cmwpOlwiKHVua25vd24pXCIsbGluZW5vOmYubGluZXx8bnVsbCxtZXRob2Q6Zi5mdW5jJiZcIj9cIiE9PWYuZnVuYz9mLmZ1bmM6XCJbYW5vbnltb3VzXVwiLGNvbG5vOmYuY29sdW1ufSxlLnNlbmRGcmFtZVVybCYmKG0udXJsPWYudXJsKSxtLm1ldGhvZCYmbS5tZXRob2QuZW5kc1dpdGgmJm0ubWV0aG9kLmVuZHNXaXRoKFwiX3JvbGxiYXJfd3JhcHBlZFwiKXx8KGc9dj15PW51bGwsYj1mLmNvbnRleHQ/Zi5jb250ZXh0Lmxlbmd0aDowLGImJihfPU1hdGguZmxvb3IoYi8yKSx2PWYuY29udGV4dC5zbGljZSgwLF8pLGc9Zi5jb250ZXh0W19dLHk9Zi5jb250ZXh0LnNsaWNlKF8pKSxnJiYobS5jb2RlPWcpLCh2fHx5KSYmKG0uY29udGV4dD17fSx2JiZ2Lmxlbmd0aCYmKG0uY29udGV4dC5wcmU9dikseSYmeS5sZW5ndGgmJihtLmNvbnRleHQucG9zdD15KSksZi5hcmdzJiYobS5hcmdzPWYuYXJncyksYy5mcmFtZXMucHVzaChtKSk7Yy5mcmFtZXMucmV2ZXJzZSgpLGkmJihjLmV4dHJhPWgubWVyZ2UoaSkpLGguc2V0KHQsXCJkYXRhLmJvZHlcIix7dHJhY2U6Y30pLHIobnVsbCx0KX1lbHNlIHQubWVzc2FnZT1zK1wiOiBcIit1LGwodCxlLHIpfWZ1bmN0aW9uIGYodCxlLHIpe3ZhciBuPWUuc2NydWJGaWVsZHM7dC5kYXRhPWguc2NydWIodC5kYXRhLG4pLHIobnVsbCx0KX12YXIgaD1yKDUpLGQ9cigyMSksbT1yKDEzKTt0LmV4cG9ydHM9e2hhbmRsZUl0ZW1XaXRoRXJyb3I6bixlbnN1cmVJdGVtSGFzU29tZXRoaW5nVG9TYXk6byxhZGRCYXNlSW5mbzppLGFkZFJlcXVlc3RJbmZvOmEsYWRkQ2xpZW50SW5mbzpzLGFkZFBsdWdpbkluZm86dSxhZGRCb2R5OmMsc2NydWJQYXlsb2FkOmZ9fSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbigpe3JldHVybiBsfWZ1bmN0aW9uIG8oKXtyZXR1cm4gbnVsbH1mdW5jdGlvbiBpKHQpe3ZhciBlPXt9O3JldHVybiBlLl9zdGFja0ZyYW1lPXQsZS51cmw9dC5maWxlTmFtZSxlLmxpbmU9dC5saW5lTnVtYmVyLGUuZnVuYz10LmZ1bmN0aW9uTmFtZSxlLmNvbHVtbj10LmNvbHVtbk51bWJlcixlLmFyZ3M9dC5hcmdzLGUuY29udGV4dD1vKCksZX1mdW5jdGlvbiBhKHQpe2Z1bmN0aW9uIGUoKXt2YXIgZSxyPVtdO2lmKHQuc3RhY2spZT10O2Vsc2UgdHJ5e3Rocm93IHR9Y2F0Y2godCl7ZT10fXRyeXtyPWMucGFyc2UoZSl9Y2F0Y2godCl7cj1bXX1mb3IodmFyIG49W10sbz0wO288ci5sZW5ndGg7bysrKW4ucHVzaChuZXcgaShyW29dKSk7cmV0dXJuIG59dmFyIHI9dC5jb25zdHJ1Y3RvciYmdC5jb25zdHJ1Y3Rvci5uYW1lO3JldHVybighcnx8IXIubGVuZ3RofHxyLmxlbmd0aDwzKSYmKHI9dC5uYW1lKSx7c3RhY2s6ZSgpLG1lc3NhZ2U6dC5tZXNzYWdlLG5hbWU6cixyYXdTdGFjazp0LnN0YWNrLHJhd0V4Y2VwdGlvbjp0fX1mdW5jdGlvbiBzKHQpe3JldHVybiBuZXcgYSh0KX1mdW5jdGlvbiB1KHQpe2lmKCF0fHwhdC5tYXRjaClyZXR1cm5bXCJVbmtub3duIGVycm9yLiBUaGVyZSB3YXMgbm8gZXJyb3IgbWVzc2FnZSB0byBkaXNwbGF5LlwiLFwiXCJdO3ZhciBlPXQubWF0Y2gocCkscj1cIih1bmtub3duKVwiO3JldHVybiBlJiYocj1lW2UubGVuZ3RoLTFdLHQ9dC5yZXBsYWNlKChlW2UubGVuZ3RoLTJdfHxcIlwiKStyK1wiOlwiLFwiXCIpLHQ9dC5yZXBsYWNlKC8oXltcXHNdK3xbXFxzXSskKS9nLFwiXCIpKSxbcix0XX12YXIgYz1yKDIyKSxsPVwiP1wiLHA9bmV3IFJlZ0V4cChcIl4oKFthLXpBLVowLTktXyQgXSopOiAqKT8oVW5jYXVnaHQgKT8oW2EtekEtWjAtOS1fJCBdKik6IFwiKTt0LmV4cG9ydHM9e2d1ZXNzRnVuY3Rpb25OYW1lOm4sZ3Vlc3NFcnJvckNsYXNzOnUsZ2F0aGVyQ29udGV4dDpvLHBhcnNlOnMsU3RhY2s6YSxGcmFtZTppfX0sZnVuY3Rpb24odCxlLHIpe3ZhciBuLG8saTshZnVuY3Rpb24oYSxzKXtcInVzZSBzdHJpY3RcIjtvPVtyKDIzKV0sbj1zLGk9XCJmdW5jdGlvblwiPT10eXBlb2Ygbj9uLmFwcGx5KGUsbyk6biwhKHZvaWQgMCE9PWkmJih0LmV4cG9ydHM9aSkpfSh0aGlzLGZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUodCxlLHIpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIEFycmF5LnByb3RvdHlwZS5tYXApcmV0dXJuIHQubWFwKGUscik7Zm9yKHZhciBuPW5ldyBBcnJheSh0Lmxlbmd0aCksbz0wO288dC5sZW5ndGg7bysrKW5bb109ZS5jYWxsKHIsdFtvXSk7cmV0dXJuIG59ZnVuY3Rpb24gcih0LGUscil7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgQXJyYXkucHJvdG90eXBlLmZpbHRlcilyZXR1cm4gdC5maWx0ZXIoZSxyKTtmb3IodmFyIG49W10sbz0wO288dC5sZW5ndGg7bysrKWUuY2FsbChyLHRbb10pJiZuLnB1c2godFtvXSk7cmV0dXJuIG59dmFyIG49LyhefEApXFxTK1xcOlxcZCsvLG89L15cXHMqYXQgLiooXFxTK1xcOlxcZCt8XFwobmF0aXZlXFwpKS9tLGk9L14oZXZhbEApPyhcXFtuYXRpdmUgY29kZVxcXSk/JC87cmV0dXJue3BhcnNlOmZ1bmN0aW9uKHQpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB0LnN0YWNrdHJhY2V8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiB0W1wib3BlcmEjc291cmNlbG9jXCJdKXJldHVybiB0aGlzLnBhcnNlT3BlcmEodCk7aWYodC5zdGFjayYmdC5zdGFjay5tYXRjaChvKSlyZXR1cm4gdGhpcy5wYXJzZVY4T3JJRSh0KTtpZih0LnN0YWNrKXJldHVybiB0aGlzLnBhcnNlRkZPclNhZmFyaSh0KTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgcGFyc2UgZ2l2ZW4gRXJyb3Igb2JqZWN0XCIpfSxleHRyYWN0TG9jYXRpb246ZnVuY3Rpb24odCl7aWYodC5pbmRleE9mKFwiOlwiKT09PS0xKXJldHVyblt0XTt2YXIgZT10LnJlcGxhY2UoL1tcXChcXClcXHNdL2csXCJcIikuc3BsaXQoXCI6XCIpLHI9ZS5wb3AoKSxuPWVbZS5sZW5ndGgtMV07aWYoIWlzTmFOKHBhcnNlRmxvYXQobikpJiZpc0Zpbml0ZShuKSl7dmFyIG89ZS5wb3AoKTtyZXR1cm5bZS5qb2luKFwiOlwiKSxvLHJdfXJldHVybltlLmpvaW4oXCI6XCIpLHIsdm9pZCAwXX0scGFyc2VWOE9ySUU6ZnVuY3Rpb24obil7dmFyIGk9cihuLnN0YWNrLnNwbGl0KFwiXFxuXCIpLGZ1bmN0aW9uKHQpe3JldHVybiEhdC5tYXRjaChvKX0sdGhpcyk7cmV0dXJuIGUoaSxmdW5jdGlvbihlKXtlLmluZGV4T2YoXCIoZXZhbCBcIik+LTEmJihlPWUucmVwbGFjZSgvZXZhbCBjb2RlL2csXCJldmFsXCIpLnJlcGxhY2UoLyhcXChldmFsIGF0IFteXFwoKV0qKXwoXFwpXFwsLiokKS9nLFwiXCIpKTt2YXIgcj1lLnJlcGxhY2UoL15cXHMrLyxcIlwiKS5yZXBsYWNlKC9cXChldmFsIGNvZGUvZyxcIihcIikuc3BsaXQoL1xccysvKS5zbGljZSgxKSxuPXRoaXMuZXh0cmFjdExvY2F0aW9uKHIucG9wKCkpLG89ci5qb2luKFwiIFwiKXx8dm9pZCAwLGk9XCJldmFsXCI9PT1uWzBdP3ZvaWQgMDpuWzBdO3JldHVybiBuZXcgdChvLHZvaWQgMCxpLG5bMV0sblsyXSxlKX0sdGhpcyl9LHBhcnNlRkZPclNhZmFyaTpmdW5jdGlvbihuKXt2YXIgbz1yKG4uc3RhY2suc3BsaXQoXCJcXG5cIiksZnVuY3Rpb24odCl7cmV0dXJuIXQubWF0Y2goaSl9LHRoaXMpO3JldHVybiBlKG8sZnVuY3Rpb24oZSl7aWYoZS5pbmRleE9mKFwiID4gZXZhbFwiKT4tMSYmKGU9ZS5yZXBsYWNlKC8gbGluZSAoXFxkKykoPzogPiBldmFsIGxpbmUgXFxkKykqID4gZXZhbFxcOlxcZCtcXDpcXGQrL2csXCI6JDFcIikpLGUuaW5kZXhPZihcIkBcIik9PT0tMSYmZS5pbmRleE9mKFwiOlwiKT09PS0xKXJldHVybiBuZXcgdChlKTt2YXIgcj1lLnNwbGl0KFwiQFwiKSxuPXRoaXMuZXh0cmFjdExvY2F0aW9uKHIucG9wKCkpLG89ci5zaGlmdCgpfHx2b2lkIDA7cmV0dXJuIG5ldyB0KG8sdm9pZCAwLG5bMF0sblsxXSxuWzJdLGUpfSx0aGlzKX0scGFyc2VPcGVyYTpmdW5jdGlvbih0KXtyZXR1cm4hdC5zdGFja3RyYWNlfHx0Lm1lc3NhZ2UuaW5kZXhPZihcIlxcblwiKT4tMSYmdC5tZXNzYWdlLnNwbGl0KFwiXFxuXCIpLmxlbmd0aD50LnN0YWNrdHJhY2Uuc3BsaXQoXCJcXG5cIikubGVuZ3RoP3RoaXMucGFyc2VPcGVyYTkodCk6dC5zdGFjaz90aGlzLnBhcnNlT3BlcmExMSh0KTp0aGlzLnBhcnNlT3BlcmExMCh0KX0scGFyc2VPcGVyYTk6ZnVuY3Rpb24oZSl7Zm9yKHZhciByPS9MaW5lIChcXGQrKS4qc2NyaXB0ICg/OmluICk/KFxcUyspL2ksbj1lLm1lc3NhZ2Uuc3BsaXQoXCJcXG5cIiksbz1bXSxpPTIsYT1uLmxlbmd0aDtpPGE7aSs9Mil7dmFyIHM9ci5leGVjKG5baV0pO3MmJm8ucHVzaChuZXcgdCh2b2lkIDAsdm9pZCAwLHNbMl0sc1sxXSx2b2lkIDAsbltpXSkpfXJldHVybiBvfSxwYXJzZU9wZXJhMTA6ZnVuY3Rpb24oZSl7Zm9yKHZhciByPS9MaW5lIChcXGQrKS4qc2NyaXB0ICg/OmluICk/KFxcUyspKD86OiBJbiBmdW5jdGlvbiAoXFxTKykpPyQvaSxuPWUuc3RhY2t0cmFjZS5zcGxpdChcIlxcblwiKSxvPVtdLGk9MCxhPW4ubGVuZ3RoO2k8YTtpKz0yKXt2YXIgcz1yLmV4ZWMobltpXSk7cyYmby5wdXNoKG5ldyB0KHNbM118fHZvaWQgMCx2b2lkIDAsc1syXSxzWzFdLHZvaWQgMCxuW2ldKSl9cmV0dXJuIG99LHBhcnNlT3BlcmExMTpmdW5jdGlvbihvKXt2YXIgaT1yKG8uc3RhY2suc3BsaXQoXCJcXG5cIiksZnVuY3Rpb24odCl7cmV0dXJuISF0Lm1hdGNoKG4pJiYhdC5tYXRjaCgvXkVycm9yIGNyZWF0ZWQgYXQvKX0sdGhpcyk7cmV0dXJuIGUoaSxmdW5jdGlvbihlKXt2YXIgcixuPWUuc3BsaXQoXCJAXCIpLG89dGhpcy5leHRyYWN0TG9jYXRpb24obi5wb3AoKSksaT1uLnNoaWZ0KCl8fFwiXCIsYT1pLnJlcGxhY2UoLzxhbm9ueW1vdXMgZnVuY3Rpb24oOiAoXFx3KykpPz4vLFwiJDJcIikucmVwbGFjZSgvXFwoW15cXCldKlxcKS9nLFwiXCIpfHx2b2lkIDA7aS5tYXRjaCgvXFwoKFteXFwpXSopXFwpLykmJihyPWkucmVwbGFjZSgvXlteXFwoXStcXCgoW15cXCldKilcXCkkLyxcIiQxXCIpKTt2YXIgcz12b2lkIDA9PT1yfHxcIlthcmd1bWVudHMgbm90IGF2YWlsYWJsZV1cIj09PXI/dm9pZCAwOnIuc3BsaXQoXCIsXCIpO3JldHVybiBuZXcgdChhLHMsb1swXSxvWzFdLG9bMl0sZSl9LHRoaXMpfX19KX0sZnVuY3Rpb24odCxlLHIpe3ZhciBuLG8saTshZnVuY3Rpb24ocixhKXtcInVzZSBzdHJpY3RcIjtvPVtdLG49YSxpPVwiZnVuY3Rpb25cIj09dHlwZW9mIG4/bi5hcHBseShlLG8pOm4sISh2b2lkIDAhPT1pJiYodC5leHBvcnRzPWkpKX0odGhpcyxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQodCl7cmV0dXJuIWlzTmFOKHBhcnNlRmxvYXQodCkpJiZpc0Zpbml0ZSh0KX1mdW5jdGlvbiBlKHQsZSxyLG4sbyxpKXt2b2lkIDAhPT10JiZ0aGlzLnNldEZ1bmN0aW9uTmFtZSh0KSx2b2lkIDAhPT1lJiZ0aGlzLnNldEFyZ3MoZSksdm9pZCAwIT09ciYmdGhpcy5zZXRGaWxlTmFtZShyKSx2b2lkIDAhPT1uJiZ0aGlzLnNldExpbmVOdW1iZXIobiksdm9pZCAwIT09byYmdGhpcy5zZXRDb2x1bW5OdW1iZXIobyksdm9pZCAwIT09aSYmdGhpcy5zZXRTb3VyY2UoaSl9cmV0dXJuIGUucHJvdG90eXBlPXtnZXRGdW5jdGlvbk5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mdW5jdGlvbk5hbWV9LHNldEZ1bmN0aW9uTmFtZTpmdW5jdGlvbih0KXt0aGlzLmZ1bmN0aW9uTmFtZT1TdHJpbmcodCl9LGdldEFyZ3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hcmdzfSxzZXRBcmdzOmZ1bmN0aW9uKHQpe2lmKFwiW29iamVjdCBBcnJheV1cIiE9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJncyBtdXN0IGJlIGFuIEFycmF5XCIpO3RoaXMuYXJncz10fSxnZXRGaWxlTmFtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbGVOYW1lfSxzZXRGaWxlTmFtZTpmdW5jdGlvbih0KXt0aGlzLmZpbGVOYW1lPVN0cmluZyh0KX0sZ2V0TGluZU51bWJlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxpbmVOdW1iZXJ9LHNldExpbmVOdW1iZXI6ZnVuY3Rpb24oZSl7aWYoIXQoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkxpbmUgTnVtYmVyIG11c3QgYmUgYSBOdW1iZXJcIik7dGhpcy5saW5lTnVtYmVyPU51bWJlcihlKX0sZ2V0Q29sdW1uTnVtYmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29sdW1uTnVtYmVyfSxzZXRDb2x1bW5OdW1iZXI6ZnVuY3Rpb24oZSl7aWYoIXQoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNvbHVtbiBOdW1iZXIgbXVzdCBiZSBhIE51bWJlclwiKTt0aGlzLmNvbHVtbk51bWJlcj1OdW1iZXIoZSl9LGdldFNvdXJjZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNvdXJjZX0sc2V0U291cmNlOmZ1bmN0aW9uKHQpe3RoaXMuc291cmNlPVN0cmluZyh0KX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldEZ1bmN0aW9uTmFtZSgpfHxcInthbm9ueW1vdXN9XCIscj1cIihcIisodGhpcy5nZXRBcmdzKCl8fFtdKS5qb2luKFwiLFwiKStcIilcIixuPXRoaXMuZ2V0RmlsZU5hbWUoKT9cIkBcIit0aGlzLmdldEZpbGVOYW1lKCk6XCJcIixvPXQodGhpcy5nZXRMaW5lTnVtYmVyKCkpP1wiOlwiK3RoaXMuZ2V0TGluZU51bWJlcigpOlwiXCIsaT10KHRoaXMuZ2V0Q29sdW1uTnVtYmVyKCkpP1wiOlwiK3RoaXMuZ2V0Q29sdW1uTnVtYmVyKCk6XCJcIjtyZXR1cm4gZStyK24rbytpfX0sZX0pfSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUscil7dmFyIG49ZS5wYXlsb2FkfHx7fTtuLmJvZHkmJmRlbGV0ZSBuLmJvZHk7dmFyIG89dS5tZXJnZSh0LmRhdGEsbik7dC5faXNVbmNhdWdodCYmKG8uX2lzVW5jYXVnaHQ9ITApLHQuX29yaWdpbmFsQXJncyYmKG8uX29yaWdpbmFsQXJncz10Ll9vcmlnaW5hbEFyZ3MpLHIobnVsbCxvKX1mdW5jdGlvbiBvKHQsZSxyKXt0LnRlbGVtZXRyeUV2ZW50cyYmdS5zZXQodCxcImRhdGEuYm9keS50ZWxlbWV0cnlcIix0LnRlbGVtZXRyeUV2ZW50cykscihudWxsLHQpfWZ1bmN0aW9uIGkodCxlLHIpe2lmKCF0Lm1lc3NhZ2UpcmV0dXJuIHZvaWQgcihudWxsLHQpO3ZhciBuPVwiZGF0YS5ib2R5LnRyYWNlX2NoYWluLjBcIixvPXUuZ2V0KHQsbik7aWYob3x8KG49XCJkYXRhLmJvZHkudHJhY2VcIixvPXUuZ2V0KHQsbikpLG8pe2lmKCFvLmV4Y2VwdGlvbnx8IW8uZXhjZXB0aW9uLmRlc2NyaXB0aW9uKXJldHVybiB1LnNldCh0LG4rXCIuZXhjZXB0aW9uLmRlc2NyaXB0aW9uXCIsdC5tZXNzYWdlKSx2b2lkIHIobnVsbCx0KTt2YXIgaT11LmdldCh0LG4rXCIuZXh0cmFcIil8fHt9LGE9dS5tZXJnZShpLHttZXNzYWdlOnQubWVzc2FnZX0pO3Uuc2V0KHQsbitcIi5leHRyYVwiLGEpfXIobnVsbCx0KX1mdW5jdGlvbiBhKHQpe3JldHVybiBmdW5jdGlvbihlLHIsbil7dmFyIG89dS5tZXJnZShlKTt0cnl7dS5pc0Z1bmN0aW9uKHIudHJhbnNmb3JtKSYmci50cmFuc2Zvcm0oby5kYXRhLGUpfWNhdGNoKG8pe3JldHVybiByLnRyYW5zZm9ybT1udWxsLHQuZXJyb3IoXCJFcnJvciB3aGlsZSBjYWxsaW5nIGN1c3RvbSB0cmFuc2Zvcm0oKSBmdW5jdGlvbi4gUmVtb3ZpbmcgY3VzdG9tIHRyYW5zZm9ybSgpLlwiLG8pLHZvaWQgbihudWxsLGUpfW4obnVsbCxvKX19ZnVuY3Rpb24gcyh0LGUscil7aWYoIWUuc2VuZENvbmZpZylyZXR1cm4gcihudWxsLHQpO3ZhciBuPVwiX3JvbGxiYXJDb25maWdcIixvPXUuZ2V0KHQsXCJkYXRhLmN1c3RvbVwiKXx8e307b1tuXT1lLHQuZGF0YS5jdXN0b209byxyKG51bGwsdCl9dmFyIHU9cig1KTt0LmV4cG9ydHM9e2l0ZW1Ub1BheWxvYWQ6bixhZGRUZWxlbWV0cnlEYXRhOm8sYWRkTWVzc2FnZVdpdGhFcnJvcjppLHVzZXJUcmFuc2Zvcm06YSxhZGRDb25maWdUb1BheWxvYWQ6c319LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7cmV0dXJuIW8uZ2V0KGUsXCJwbHVnaW5zLmpxdWVyeS5pZ25vcmVBamF4RXJyb3JzXCIpfHwhby5nZXQodCxcImJvZHkubWVzc2FnZS5leHRyYS5pc0FqYXhcIil9dmFyIG89cig1KTt0LmV4cG9ydHM9e2NoZWNrSWdub3JlOm59fSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe3ZhciByPXQubGV2ZWwsbj1jLkxFVkVMU1tyXXx8MCxvPWUucmVwb3J0TGV2ZWwsaT1jLkxFVkVMU1tvXXx8MDtyZXR1cm4hKG48aSl9ZnVuY3Rpb24gbyh0KXtyZXR1cm4gZnVuY3Rpb24oZSxyKXt2YXIgbj0hIWUuX2lzVW5jYXVnaHQ7ZGVsZXRlIGUuX2lzVW5jYXVnaHQ7dmFyIG89ZS5fb3JpZ2luYWxBcmdzO2RlbGV0ZSBlLl9vcmlnaW5hbEFyZ3M7dHJ5e2MuaXNGdW5jdGlvbihyLm9uU2VuZENhbGxiYWNrKSYmci5vblNlbmRDYWxsYmFjayhuLG8sZSl9Y2F0Y2goZSl7ci5vblNlbmRDYWxsYmFjaz1udWxsLHQuZXJyb3IoXCJFcnJvciB3aGlsZSBjYWxsaW5nIG9uU2VuZENhbGxiYWNrLCByZW1vdmluZ1wiLGUpfXRyeXtpZihjLmlzRnVuY3Rpb24oci5jaGVja0lnbm9yZSkmJnIuY2hlY2tJZ25vcmUobixvLGUpKXJldHVybiExfWNhdGNoKGUpe3IuY2hlY2tJZ25vcmU9bnVsbCx0LmVycm9yKFwiRXJyb3Igd2hpbGUgY2FsbGluZyBjdXN0b20gY2hlY2tJZ25vcmUoKSwgcmVtb3ZpbmdcIixlKX1yZXR1cm4hMH19ZnVuY3Rpb24gaSh0KXtyZXR1cm4gZnVuY3Rpb24oZSxyKXtyZXR1cm4hcyhlLHIsXCJibGFja2xpc3RcIix0KX19ZnVuY3Rpb24gYSh0KXtyZXR1cm4gZnVuY3Rpb24oZSxyKXtyZXR1cm4gcyhlLHIsXCJ3aGl0ZWxpc3RcIix0KX19ZnVuY3Rpb24gcyh0LGUscixuKXt2YXIgbz0hMTtcImJsYWNrbGlzdFwiPT09ciYmKG89ITApO3ZhciBpLGEscyx1LGwscCxmLGgsZCxtO3RyeXtpZihpPW8/ZS5ob3N0QmxhY2tMaXN0OmUuaG9zdFdoaXRlTGlzdCxmPWkmJmkubGVuZ3RoLGE9Yy5nZXQodCxcImJvZHkudHJhY2VcIiksIWl8fDA9PT1mKXJldHVybiFvO2lmKCFhfHwhYS5mcmFtZXN8fDA9PT1hLmZyYW1lcy5sZW5ndGgpcmV0dXJuIW87Zm9yKGw9YS5mcmFtZXMubGVuZ3RoLGQ9MDtkPGw7ZCsrKXtpZihzPWEuZnJhbWVzW2RdLHU9cy5maWxlbmFtZSwhYy5pc1R5cGUodSxcInN0cmluZ1wiKSlyZXR1cm4hbztmb3IobT0wO208ZjttKyspaWYocD1pW21dLGg9bmV3IFJlZ0V4cChwKSxoLnRlc3QodSkpcmV0dXJuITB9fWNhdGNoKHQpe28/ZS5ob3N0QmxhY2tMaXN0PW51bGw6ZS5ob3N0V2hpdGVMaXN0PW51bGw7dmFyIGc9bz9cImhvc3RCbGFja0xpc3RcIjpcImhvc3RXaGl0ZUxpc3RcIjtyZXR1cm4gbi5lcnJvcihcIkVycm9yIHdoaWxlIHJlYWRpbmcgeW91ciBjb25maWd1cmF0aW9uJ3MgXCIrZytcIiBvcHRpb24uIFJlbW92aW5nIGN1c3RvbSBcIitnK1wiLlwiLHQpLCFvfXJldHVybiExfWZ1bmN0aW9uIHUodCl7cmV0dXJuIGZ1bmN0aW9uKGUscil7dmFyIG4sbyxpLGEscyx1LGwscCxmO3RyeXtpZihzPSExLGk9ci5pZ25vcmVkTWVzc2FnZXMsIWl8fDA9PT1pLmxlbmd0aClyZXR1cm4hMDtpZihsPWUuYm9keSxwPWMuZ2V0KGwsXCJ0cmFjZS5leGNlcHRpb24ubWVzc2FnZVwiKSxmPWMuZ2V0KGwsXCJtZXNzYWdlLmJvZHlcIiksbj1wfHxmLCFuKXJldHVybiEwO2ZvcihhPWkubGVuZ3RoLG89MDtvPGEmJih1PW5ldyBSZWdFeHAoaVtvXSxcImdpXCIpLCEocz11LnRlc3QobikpKTtvKyspO31jYXRjaChlKXtyLmlnbm9yZWRNZXNzYWdlcz1udWxsLHQuZXJyb3IoXCJFcnJvciB3aGlsZSByZWFkaW5nIHlvdXIgY29uZmlndXJhdGlvbidzIGlnbm9yZWRNZXNzYWdlcyBvcHRpb24uIFJlbW92aW5nIGN1c3RvbSBpZ25vcmVkTWVzc2FnZXMuXCIpfXJldHVybiFzfX12YXIgYz1yKDUpO3QuZXhwb3J0cz17Y2hlY2tMZXZlbDpuLHVzZXJDaGVja0lnbm9yZTpvLHVybElzTm90QmxhY2tsaXN0ZWQ6aSx1cmxJc1doaXRlbGlzdGVkOmEsbWVzc2FnZUlzSWdub3JlZDp1fX0sZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlLHIsbixvKXt2YXIgaT10W2VdO3RbZV09cihpKSxuJiZuW29dLnB1c2goW3QsZSxpXSl9ZnVuY3Rpb24gbyh0LGUpe2Zvcih2YXIgcjt0W2VdLmxlbmd0aDspcj10W2VdLnNoaWZ0KCksclswXVtyWzFdXT1yWzJdfWZ1bmN0aW9uIGkodCl7aWYoIXR8fCF0LmF0dHJpYnV0ZXMpcmV0dXJuIG51bGw7Zm9yKHZhciBlPXQuYXR0cmlidXRlcyxyPTA7cjxlLmxlbmd0aDsrK3IpaWYoXCJuYW1lXCI9PT1lW3JdLmtleSlyZXR1cm4gZVtyXS52YWx1ZTtyZXR1cm4gbnVsbH1mdW5jdGlvbiBhKHQpe2Zvcih2YXIgZT1bXSxyPTA7cjx0Lmxlbmd0aDsrK3IpZS5wdXNoKG5ldyBSZWdFeHAodFtyXSxcImlcIikpO3JldHVybiBmdW5jdGlvbih0KXt2YXIgcj1pKHQpO2lmKCFyKXJldHVybiExO2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7KytuKWlmKGVbbl0udGVzdChyKSlyZXR1cm4hMDtyZXR1cm4hMX19ZnVuY3Rpb24gcyh0LGUscixuLG8pe3ZhciBpPXQuYXV0b0luc3RydW1lbnQ7dC5lbmFibGVkPT09ITF8fGk9PT0hMT90aGlzLmF1dG9JbnN0cnVtZW50PXt9Oih1LmlzVHlwZShpLFwib2JqZWN0XCIpfHwoaT1wKSx0aGlzLmF1dG9JbnN0cnVtZW50PXUubWVyZ2UocCxpKSksdGhpcy5zY3J1YlRlbGVtZXRyeUlucHV0cz0hIXQuc2NydWJUZWxlbWV0cnlJbnB1dHMsdGhpcy50ZWxlbWV0cnlTY3J1YmJlcj10LnRlbGVtZXRyeVNjcnViYmVyLHRoaXMuZGVmYXVsdFZhbHVlU2NydWJiZXI9YSh0LnNjcnViRmllbGRzKSx0aGlzLnRlbGVtZXRlcj1lLHRoaXMucm9sbGJhcj1yLHRoaXMuX3dpbmRvdz1ufHx7fSx0aGlzLl9kb2N1bWVudD1vfHx7fSx0aGlzLnJlcGxhY2VtZW50cz17bmV0d29yazpbXSxsb2c6W10sbmF2aWdhdGlvbjpbXSxjb25uZWN0aXZpdHk6W119LHRoaXMuZXZlbnRSZW1vdmVycz17ZG9tOltdLGNvbm5lY3Rpdml0eTpbXX0sdGhpcy5fbG9jYXRpb249dGhpcy5fd2luZG93LmxvY2F0aW9uLHRoaXMuX2xhc3RIcmVmPXRoaXMuX2xvY2F0aW9uJiZ0aGlzLl9sb2NhdGlvbi5ocmVmfXZhciB1PXIoNSksYz1yKDE5KSxsPXIoMjgpLHA9e25ldHdvcms6ITAsbmV0d29ya1Jlc3BvbnNlSGVhZGVyczohMSxuZXR3b3JrUmVzcG9uc2VCb2R5OiExLG5ldHdvcmtSZXF1ZXN0Qm9keTohMSxsb2c6ITAsZG9tOiEwLG5hdmlnYXRpb246ITAsY29ubmVjdGl2aXR5OiEwfTtzLnByb3RvdHlwZS5jb25maWd1cmU9ZnVuY3Rpb24odCl7dmFyIGU9dC5hdXRvSW5zdHJ1bWVudCxyPXUubWVyZ2UodGhpcy5hdXRvSW5zdHJ1bWVudCk7dC5lbmFibGVkPT09ITF8fGU9PT0hMT90aGlzLmF1dG9JbnN0cnVtZW50PXt9Oih1LmlzVHlwZShlLFwib2JqZWN0XCIpfHwoZT1wKSx0aGlzLmF1dG9JbnN0cnVtZW50PXUubWVyZ2UocCxlKSksdGhpcy5pbnN0cnVtZW50KHIpLHZvaWQgMCE9PXQuc2NydWJUZWxlbWV0cnlJbnB1dHMmJih0aGlzLnNjcnViVGVsZW1ldHJ5SW5wdXRzPSEhdC5zY3J1YlRlbGVtZXRyeUlucHV0cyksdm9pZCAwIT09dC50ZWxlbWV0cnlTY3J1YmJlciYmKHRoaXMudGVsZW1ldHJ5U2NydWJiZXI9dC50ZWxlbWV0cnlTY3J1YmJlcil9LHMucHJvdG90eXBlLmluc3RydW1lbnQ9ZnVuY3Rpb24odCl7IXRoaXMuYXV0b0luc3RydW1lbnQubmV0d29ya3x8dCYmdC5uZXR3b3JrPyF0aGlzLmF1dG9JbnN0cnVtZW50Lm5ldHdvcmsmJnQmJnQubmV0d29yayYmdGhpcy5kZWluc3RydW1lbnROZXR3b3JrKCk6dGhpcy5pbnN0cnVtZW50TmV0d29yaygpLCF0aGlzLmF1dG9JbnN0cnVtZW50LmxvZ3x8dCYmdC5sb2c/IXRoaXMuYXV0b0luc3RydW1lbnQubG9nJiZ0JiZ0LmxvZyYmdGhpcy5kZWluc3RydW1lbnRDb25zb2xlKCk6dGhpcy5pbnN0cnVtZW50Q29uc29sZSgpLCF0aGlzLmF1dG9JbnN0cnVtZW50LmRvbXx8dCYmdC5kb20/IXRoaXMuYXV0b0luc3RydW1lbnQuZG9tJiZ0JiZ0LmRvbSYmdGhpcy5kZWluc3RydW1lbnREb20oKTp0aGlzLmluc3RydW1lbnREb20oKSwhdGhpcy5hdXRvSW5zdHJ1bWVudC5uYXZpZ2F0aW9ufHx0JiZ0Lm5hdmlnYXRpb24/IXRoaXMuYXV0b0luc3RydW1lbnQubmF2aWdhdGlvbiYmdCYmdC5uYXZpZ2F0aW9uJiZ0aGlzLmRlaW5zdHJ1bWVudE5hdmlnYXRpb24oKTp0aGlzLmluc3RydW1lbnROYXZpZ2F0aW9uKCksIXRoaXMuYXV0b0luc3RydW1lbnQuY29ubmVjdGl2aXR5fHx0JiZ0LmNvbm5lY3Rpdml0eT8hdGhpcy5hdXRvSW5zdHJ1bWVudC5jb25uZWN0aXZpdHkmJnQmJnQuY29ubmVjdGl2aXR5JiZ0aGlzLmRlaW5zdHJ1bWVudENvbm5lY3Rpdml0eSgpOnRoaXMuaW5zdHJ1bWVudENvbm5lY3Rpdml0eSgpfSxzLnByb3RvdHlwZS5kZWluc3RydW1lbnROZXR3b3JrPWZ1bmN0aW9uKCl7byh0aGlzLnJlcGxhY2VtZW50cyxcIm5ldHdvcmtcIil9LHMucHJvdG90eXBlLmluc3RydW1lbnROZXR3b3JrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LHIpe3QgaW4gciYmdS5pc0Z1bmN0aW9uKHJbdF0pJiZuKHIsdCxmdW5jdGlvbih0KXtyZXR1cm4gZS5yb2xsYmFyLndyYXAodCl9KX12YXIgZT10aGlzO2lmKFwiWE1MSHR0cFJlcXVlc3RcImluIHRoaXMuX3dpbmRvdyl7dmFyIHI9dGhpcy5fd2luZG93LlhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZTtuKHIsXCJvcGVuXCIsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUscil7cmV0dXJuIHUuaXNUeXBlKHIsXCJzdHJpbmdcIikmJih0aGlzLl9fcm9sbGJhcl94aHI9e21ldGhvZDplLHVybDpyLHN0YXR1c19jb2RlOm51bGwsc3RhcnRfdGltZV9tczp1Lm5vdygpLGVuZF90aW1lX21zOm51bGx9KSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LHRoaXMucmVwbGFjZW1lbnRzLFwibmV0d29ya1wiKSxuKHIsXCJzZW5kXCIsZnVuY3Rpb24ocil7cmV0dXJuIGZ1bmN0aW9uKG8pe2Z1bmN0aW9uIGkoKXtpZihhLl9fcm9sbGJhcl94aHIpe2lmKG51bGw9PT1hLl9fcm9sbGJhcl94aHIuc3RhdHVzX2NvZGUpe2EuX19yb2xsYmFyX3hoci5zdGF0dXNfY29kZT0wO3ZhciB0PW51bGw7ZS5hdXRvSW5zdHJ1bWVudC5uZXR3b3JrUmVxdWVzdEJvZHkmJih0PW8pLGEuX19yb2xsYmFyX2V2ZW50PWUudGVsZW1ldGVyLmNhcHR1cmVOZXR3b3JrKGEuX19yb2xsYmFyX3hocixcInhoclwiLHZvaWQgMCx0KX1pZihhLnJlYWR5U3RhdGU8MiYmKGEuX19yb2xsYmFyX3hoci5zdGFydF90aW1lX21zPXUubm93KCkpLGEucmVhZHlTdGF0ZT4zKXthLl9fcm9sbGJhcl94aHIuZW5kX3RpbWVfbXM9dS5ub3coKTt2YXIgcj1udWxsO2lmKGUuYXV0b0luc3RydW1lbnQubmV0d29ya1Jlc3BvbnNlSGVhZGVycyl7dmFyIG49ZS5hdXRvSW5zdHJ1bWVudC5uZXR3b3JrUmVzcG9uc2VIZWFkZXJzO3I9e307dHJ5e3ZhciBpLHM7aWYobj09PSEwKXt2YXIgYz1hLmdldEFsbFJlc3BvbnNlSGVhZGVycygpO2lmKGMpe3ZhciBsLHAsZj1jLnRyaW0oKS5zcGxpdCgvW1xcclxcbl0rLyk7Zm9yKHM9MDtzPGYubGVuZ3RoO3MrKylsPWZbc10uc3BsaXQoXCI6IFwiKSxpPWwuc2hpZnQoKSxwPWwuam9pbihcIjogXCIpLHJbaV09cH19ZWxzZSBmb3Iocz0wO3M8bi5sZW5ndGg7cysrKWk9bltzXSxyW2ldPWEuZ2V0UmVzcG9uc2VIZWFkZXIoaSl9Y2F0Y2godCl7fX12YXIgaD1udWxsO2lmKGUuYXV0b0luc3RydW1lbnQubmV0d29ya1Jlc3BvbnNlQm9keSl0cnl7aD1hLnJlc3BvbnNlVGV4dH1jYXRjaCh0KXt9dmFyIGQ9bnVsbDsoaHx8cikmJihkPXt9LGgmJihkLmJvZHk9aCksciYmKGQuaGVhZGVycz1yKSksZCYmKGEuX19yb2xsYmFyX3hoci5yZXNwb25zZT1kKTt0cnl7dmFyIG09YS5zdGF0dXM7bT0xMjIzPT09bT8yMDQ6bSxhLl9fcm9sbGJhcl94aHIuc3RhdHVzX2NvZGU9bSxhLl9fcm9sbGJhcl9ldmVudC5sZXZlbD1lLnRlbGVtZXRlci5sZXZlbEZyb21TdGF0dXMobSl9Y2F0Y2godCl7fX19fXZhciBhPXRoaXM7cmV0dXJuIHQoXCJvbmxvYWRcIixhKSx0KFwib25lcnJvclwiLGEpLHQoXCJvbnByb2dyZXNzXCIsYSksXCJvbnJlYWR5c3RhdGVjaGFuZ2VcImluIGEmJnUuaXNGdW5jdGlvbihhLm9ucmVhZHlzdGF0ZWNoYW5nZSk/bihhLFwib25yZWFkeXN0YXRlY2hhbmdlXCIsZnVuY3Rpb24odCl7cmV0dXJuIGUucm9sbGJhci53cmFwKHQsdm9pZCAwLGkpfSk6YS5vbnJlYWR5c3RhdGVjaGFuZ2U9aSxyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LHRoaXMucmVwbGFjZW1lbnRzLFwibmV0d29ya1wiKX1cImZldGNoXCJpbiB0aGlzLl93aW5kb3cmJm4odGhpcy5fd2luZG93LFwiZmV0Y2hcIixmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24ocixuKXtmb3IodmFyIG89bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpLGk9MCxhPW8ubGVuZ3RoO2k8YTtpKyspb1tpXT1hcmd1bWVudHNbaV07dmFyIHMsYz1vWzBdLGw9XCJHRVRcIjt1LmlzVHlwZShjLFwic3RyaW5nXCIpP3M9YzpjJiYocz1jLnVybCxjLm1ldGhvZCYmKGw9Yy5tZXRob2QpKSxvWzFdJiZvWzFdLm1ldGhvZCYmKGw9b1sxXS5tZXRob2QpO3ZhciBwPXttZXRob2Q6bCx1cmw6cyxzdGF0dXNfY29kZTpudWxsLHN0YXJ0X3RpbWVfbXM6dS5ub3coKSxlbmRfdGltZV9tczpudWxsfSxmPW51bGw7cmV0dXJuIGUuYXV0b0luc3RydW1lbnQubmV0d29ya1JlcXVlc3RCb2R5JiYob1sxXSYmb1sxXS5ib2R5P2Y9b1sxXS5ib2R5Om9bMF0mJiF1LmlzVHlwZShvWzBdLFwic3RyaW5nXCIpJiZvWzBdLmJvZHkmJihmPW9bMF0uYm9keSkpLGUudGVsZW1ldGVyLmNhcHR1cmVOZXR3b3JrKHAsXCJmZXRjaFwiLHZvaWQgMCxmKSx0LmFwcGx5KHRoaXMsbykudGhlbihmdW5jdGlvbih0KXtwLmVuZF90aW1lX21zPXUubm93KCkscC5zdGF0dXNfY29kZT10LnN0YXR1czt2YXIgcj1udWxsO2lmKGUuYXV0b0luc3RydW1lbnQubmV0d29ya1Jlc3BvbnNlSGVhZGVycyl7dmFyIG49ZS5hdXRvSW5zdHJ1bWVudC5uZXR3b3JrUmVzcG9uc2VIZWFkZXJzO3I9e307dHJ5e2lmKG49PT0hMCk7ZWxzZSBmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKyl7dmFyIGk9bltvXTtyW2ldPXQuaGVhZGVycy5nZXQoaSl9fWNhdGNoKHQpe319dmFyIGE9bnVsbDtyZXR1cm4gciYmKGE9e2hlYWRlcnM6cn0pLGEmJihwLnJlc3BvbnNlPWEpLHR9KX19LHRoaXMucmVwbGFjZW1lbnRzLFwibmV0d29ya1wiKX0scy5wcm90b3R5cGUuZGVpbnN0cnVtZW50Q29uc29sZT1mdW5jdGlvbigpe2lmKFwiY29uc29sZVwiaW4gdGhpcy5fd2luZG93JiZ0aGlzLl93aW5kb3cuY29uc29sZS5sb2cpZm9yKHZhciB0O3RoaXMucmVwbGFjZW1lbnRzLmxvZy5sZW5ndGg7KXQ9dGhpcy5yZXBsYWNlbWVudHMubG9nLnNoaWZ0KCksdGhpcy5fd2luZG93LmNvbnNvbGVbdFswXV09dFsxXX0scy5wcm90b3R5cGUuaW5zdHJ1bWVudENvbnNvbGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3ZhciBuPXJbdF0sbz1yLGk9XCJ3YXJuXCI9PT10P1wid2FybmluZ1wiOnQ7clt0XT1mdW5jdGlvbigpe3ZhciB0PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykscj11LmZvcm1hdEFyZ3NBc1N0cmluZyh0KTtlLnRlbGVtZXRlci5jYXB0dXJlTG9nKHIsaSksbiYmRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmNhbGwobixvLHQpfSxlLnJlcGxhY2VtZW50cy5sb2cucHVzaChbdCxuXSl9aWYoXCJjb25zb2xlXCJpbiB0aGlzLl93aW5kb3cmJnRoaXMuX3dpbmRvdy5jb25zb2xlLmxvZylmb3IodmFyIGU9dGhpcyxyPXRoaXMuX3dpbmRvdy5jb25zb2xlLG49W1wiZGVidWdcIixcImluZm9cIixcIndhcm5cIixcImVycm9yXCIsXCJsb2dcIl0sbz0wLGk9bi5sZW5ndGg7bzxpO28rKyl0KG5bb10pfSxzLnByb3RvdHlwZS5kZWluc3RydW1lbnREb209ZnVuY3Rpb24oKXsoXCJhZGRFdmVudExpc3RlbmVyXCJpbiB0aGlzLl93aW5kb3d8fFwiYXR0YWNoRXZlbnRcImluIHRoaXMuX3dpbmRvdykmJnRoaXMucmVtb3ZlTGlzdGVuZXJzKFwiZG9tXCIpfSxzLnByb3RvdHlwZS5pbnN0cnVtZW50RG9tPWZ1bmN0aW9uKCl7aWYoXCJhZGRFdmVudExpc3RlbmVyXCJpbiB0aGlzLl93aW5kb3d8fFwiYXR0YWNoRXZlbnRcImluIHRoaXMuX3dpbmRvdyl7dmFyIHQ9dGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpLGU9dGhpcy5oYW5kbGVCbHVyLmJpbmQodGhpcyk7dGhpcy5hZGRMaXN0ZW5lcihcImRvbVwiLHRoaXMuX3dpbmRvdyxcImNsaWNrXCIsXCJvbmNsaWNrXCIsdCwhMCksdGhpcy5hZGRMaXN0ZW5lcihcImRvbVwiLHRoaXMuX3dpbmRvdyxcImJsdXJcIixcIm9uZm9jdXNvdXRcIixlLCEwKX19LHMucHJvdG90eXBlLmhhbmRsZUNsaWNrPWZ1bmN0aW9uKHQpe3RyeXt2YXIgZT1sLmdldEVsZW1lbnRGcm9tRXZlbnQodCx0aGlzLl9kb2N1bWVudCkscj1lJiZlLnRhZ05hbWUsbj1sLmlzRGVzY3JpYmVkRWxlbWVudChlLFwiYVwiKXx8bC5pc0Rlc2NyaWJlZEVsZW1lbnQoZSxcImJ1dHRvblwiKTtyJiYobnx8bC5pc0Rlc2NyaWJlZEVsZW1lbnQoZSxcImlucHV0XCIsW1wiYnV0dG9uXCIsXCJzdWJtaXRcIl0pKT90aGlzLmNhcHR1cmVEb21FdmVudChcImNsaWNrXCIsZSk6bC5pc0Rlc2NyaWJlZEVsZW1lbnQoZSxcImlucHV0XCIsW1wiY2hlY2tib3hcIixcInJhZGlvXCJdKSYmdGhpcy5jYXB0dXJlRG9tRXZlbnQoXCJpbnB1dFwiLGUsZS52YWx1ZSxlLmNoZWNrZWQpfWNhdGNoKHQpe319LHMucHJvdG90eXBlLmhhbmRsZUJsdXI9ZnVuY3Rpb24odCl7dHJ5e3ZhciBlPWwuZ2V0RWxlbWVudEZyb21FdmVudCh0LHRoaXMuX2RvY3VtZW50KTtlJiZlLnRhZ05hbWUmJihsLmlzRGVzY3JpYmVkRWxlbWVudChlLFwidGV4dGFyZWFcIik/dGhpcy5jYXB0dXJlRG9tRXZlbnQoXCJpbnB1dFwiLGUsZS52YWx1ZSk6bC5pc0Rlc2NyaWJlZEVsZW1lbnQoZSxcInNlbGVjdFwiKSYmZS5vcHRpb25zJiZlLm9wdGlvbnMubGVuZ3RoP3RoaXMuaGFuZGxlU2VsZWN0SW5wdXRDaGFuZ2VkKGUpOmwuaXNEZXNjcmliZWRFbGVtZW50KGUsXCJpbnB1dFwiKSYmIWwuaXNEZXNjcmliZWRFbGVtZW50KGUsXCJpbnB1dFwiLFtcImJ1dHRvblwiLFwic3VibWl0XCIsXCJoaWRkZW5cIixcImNoZWNrYm94XCIsXCJyYWRpb1wiXSkmJnRoaXMuY2FwdHVyZURvbUV2ZW50KFwiaW5wdXRcIixlLGUudmFsdWUpKX1jYXRjaCh0KXt9fSxzLnByb3RvdHlwZS5oYW5kbGVTZWxlY3RJbnB1dENoYW5nZWQ9ZnVuY3Rpb24odCl7aWYodC5tdWx0aXBsZSlmb3IodmFyIGU9MDtlPHQub3B0aW9ucy5sZW5ndGg7ZSsrKXQub3B0aW9uc1tlXS5zZWxlY3RlZCYmdGhpcy5jYXB0dXJlRG9tRXZlbnQoXCJpbnB1dFwiLHQsdC5vcHRpb25zW2VdLnZhbHVlKTtlbHNlIHQuc2VsZWN0ZWRJbmRleD49MCYmdC5vcHRpb25zW3Quc2VsZWN0ZWRJbmRleF0mJnRoaXMuY2FwdHVyZURvbUV2ZW50KFwiaW5wdXRcIix0LHQub3B0aW9uc1t0LnNlbGVjdGVkSW5kZXhdLnZhbHVlKX0scy5wcm90b3R5cGUuY2FwdHVyZURvbUV2ZW50PWZ1bmN0aW9uKHQsZSxyLG4pe2lmKHZvaWQgMCE9PXIpaWYodGhpcy5zY3J1YlRlbGVtZXRyeUlucHV0c3x8XCJwYXNzd29yZFwiPT09bC5nZXRFbGVtZW50VHlwZShlKSlyPVwiW3NjcnViYmVkXVwiO2Vsc2V7dmFyIG89bC5kZXNjcmliZUVsZW1lbnQoZSk7dGhpcy50ZWxlbWV0cnlTY3J1YmJlcj90aGlzLnRlbGVtZXRyeVNjcnViYmVyKG8pJiYocj1cIltzY3J1YmJlZF1cIik6dGhpcy5kZWZhdWx0VmFsdWVTY3J1YmJlcihvKSYmKHI9XCJbc2NydWJiZWRdXCIpfXZhciBpPWwuZWxlbWVudEFycmF5VG9TdHJpbmcobC50cmVlVG9BcnJheShlKSk7dGhpcy50ZWxlbWV0ZXIuY2FwdHVyZURvbSh0LGkscixuKX0scy5wcm90b3R5cGUuZGVpbnN0cnVtZW50TmF2aWdhdGlvbj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX3dpbmRvdy5jaHJvbWUsZT10JiZ0LmFwcCYmdC5hcHAucnVudGltZSxyPSFlJiZ0aGlzLl93aW5kb3cuaGlzdG9yeSYmdGhpcy5fd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlO3ImJm8odGhpcy5yZXBsYWNlbWVudHMsXCJuYXZpZ2F0aW9uXCIpfSxzLnByb3RvdHlwZS5pbnN0cnVtZW50TmF2aWdhdGlvbj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX3dpbmRvdy5jaHJvbWUsZT10JiZ0LmFwcCYmdC5hcHAucnVudGltZSxyPSFlJiZ0aGlzLl93aW5kb3cuaGlzdG9yeSYmdGhpcy5fd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlO2lmKHIpe3ZhciBvPXRoaXM7bih0aGlzLl93aW5kb3csXCJvbnBvcHN0YXRlXCIsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9by5fbG9jYXRpb24uaHJlZjtvLmhhbmRsZVVybENoYW5nZShvLl9sYXN0SHJlZixlKSx0JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LHRoaXMucmVwbGFjZW1lbnRzLFwibmF2aWdhdGlvblwiKSxuKHRoaXMuX3dpbmRvdy5oaXN0b3J5LFwicHVzaFN0YXRlXCIsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4yP2FyZ3VtZW50c1syXTp2b2lkIDA7cmV0dXJuIGUmJm8uaGFuZGxlVXJsQ2hhbmdlKG8uX2xhc3RIcmVmLGUrXCJcIiksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSx0aGlzLnJlcGxhY2VtZW50cyxcIm5hdmlnYXRpb25cIil9fSxzLnByb3RvdHlwZS5oYW5kbGVVcmxDaGFuZ2U9ZnVuY3Rpb24odCxlKXt2YXIgcj1jLnBhcnNlKHRoaXMuX2xvY2F0aW9uLmhyZWYpLG49Yy5wYXJzZShlKSxvPWMucGFyc2UodCk7dGhpcy5fbGFzdEhyZWY9ZSxyLnByb3RvY29sPT09bi5wcm90b2NvbCYmci5ob3N0PT09bi5ob3N0JiYoZT1uLnBhdGgrKG4uaGFzaHx8XCJcIikpLHIucHJvdG9jb2w9PT1vLnByb3RvY29sJiZyLmhvc3Q9PT1vLmhvc3QmJih0PW8ucGF0aCsoby5oYXNofHxcIlwiKSksdGhpcy50ZWxlbWV0ZXIuY2FwdHVyZU5hdmlnYXRpb24odCxlKX0scy5wcm90b3R5cGUuZGVpbnN0cnVtZW50Q29ubmVjdGl2aXR5PWZ1bmN0aW9uKCl7KFwiYWRkRXZlbnRMaXN0ZW5lclwiaW4gdGhpcy5fd2luZG93fHxcImJvZHlcImluIHRoaXMuX2RvY3VtZW50KSYmKHRoaXMuX3dpbmRvdy5hZGRFdmVudExpc3RlbmVyP3RoaXMucmVtb3ZlTGlzdGVuZXJzKFwiY29ubmVjdGl2aXR5XCIpOm8odGhpcy5yZXBsYWNlbWVudHMsXCJjb25uZWN0aXZpdHlcIikpfSxzLnByb3RvdHlwZS5pbnN0cnVtZW50Q29ubmVjdGl2aXR5PWZ1bmN0aW9uKCl7aWYoXCJhZGRFdmVudExpc3RlbmVyXCJpbiB0aGlzLl93aW5kb3d8fFwiYm9keVwiaW4gdGhpcy5fZG9jdW1lbnQpaWYodGhpcy5fd2luZG93LmFkZEV2ZW50TGlzdGVuZXIpdGhpcy5hZGRMaXN0ZW5lcihcImNvbm5lY3Rpdml0eVwiLHRoaXMuX3dpbmRvdyxcIm9ubGluZVwiLHZvaWQgMCxmdW5jdGlvbigpe3RoaXMudGVsZW1ldGVyLmNhcHR1cmVDb25uZWN0aXZpdHlDaGFuZ2UoXCJvbmxpbmVcIil9LmJpbmQodGhpcyksITApLHRoaXMuYWRkTGlzdGVuZXIoXCJjb25uZWN0aXZpdHlcIix0aGlzLl93aW5kb3csXCJvZmZsaW5lXCIsdm9pZCAwLGZ1bmN0aW9uKCl7dGhpcy50ZWxlbWV0ZXIuY2FwdHVyZUNvbm5lY3Rpdml0eUNoYW5nZShcIm9mZmxpbmVcIil9LmJpbmQodGhpcyksITApO2Vsc2V7dmFyIHQ9dGhpcztuKHRoaXMuX2RvY3VtZW50LmJvZHksXCJvbm9ubGluZVwiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3QudGVsZW1ldGVyLmNhcHR1cmVDb25uZWN0aXZpdHlDaGFuZ2UoXCJvbmxpbmVcIiksZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSx0aGlzLnJlcGxhY2VtZW50cyxcImNvbm5lY3Rpdml0eVwiKSxuKHRoaXMuX2RvY3VtZW50LmJvZHksXCJvbm9mZmxpbmVcIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXt0LnRlbGVtZXRlci5jYXB0dXJlQ29ubmVjdGl2aXR5Q2hhbmdlKFwib2ZmbGluZVwiKSxlJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LHRoaXMucmVwbGFjZW1lbnRzLFwiY29ubmVjdGl2aXR5XCIpfX0scy5wcm90b3R5cGUuYWRkTGlzdGVuZXI9ZnVuY3Rpb24odCxlLHIsbixvLGkpe2UuYWRkRXZlbnRMaXN0ZW5lcj8oZS5hZGRFdmVudExpc3RlbmVyKHIsbyxpKSx0aGlzLmV2ZW50UmVtb3ZlcnNbdF0ucHVzaChmdW5jdGlvbigpe2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihyLG8saSl9KSk6biYmKGUuYXR0YWNoRXZlbnQobixvKSx0aGlzLmV2ZW50UmVtb3ZlcnNbdF0ucHVzaChmdW5jdGlvbigpe2UuZGV0YWNoRXZlbnQobixvKX0pKX0scy5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXJzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZTt0aGlzLmV2ZW50UmVtb3ZlcnNbdF0ubGVuZ3RoOykoZT10aGlzLmV2ZW50UmVtb3ZlcnNbdF0uc2hpZnQoKSkoKX0sdC5leHBvcnRzPXN9LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4odC5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpfHxcIlwiKS50b0xvd2VyQ2FzZSgpfWZ1bmN0aW9uIG4odCxlLG4pe2lmKHQudGFnTmFtZS50b0xvd2VyQ2FzZSgpIT09ZS50b0xvd2VyQ2FzZSgpKXJldHVybiExO2lmKCFuKXJldHVybiEwO3Q9cih0KTtmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKylpZihuW29dPT09dClyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBvKHQsZSl7cmV0dXJuIHQudGFyZ2V0P3QudGFyZ2V0OmUmJmUuZWxlbWVudEZyb21Qb2ludD9lLmVsZW1lbnRGcm9tUG9pbnQodC5jbGllbnRYLHQuY2xpZW50WSk6dm9pZCAwfWZ1bmN0aW9uIGkodCl7Zm9yKHZhciBlLHI9NSxuPVtdLG89MDt0JiZvPHImJihlPXUodCksXCJodG1sXCIhPT1lLnRhZ05hbWUpO28rKyluLnVuc2hpZnQoZSksdD10LnBhcmVudE5vZGU7cmV0dXJuIG59ZnVuY3Rpb24gYSh0KXtmb3IodmFyIGUscixuPTgwLG89XCIgPiBcIixpPW8ubGVuZ3RoLGE9W10sdT0wLGM9dC5sZW5ndGgtMTtjPj0wO2MtLSl7aWYoZT1zKHRbY10pLHI9dSthLmxlbmd0aCppK2UubGVuZ3RoLGM8dC5sZW5ndGgtMSYmcj49biszKXthLnVuc2hpZnQoXCIuLi5cIik7YnJlYWt9YS51bnNoaWZ0KGUpLHUrPWUubGVuZ3RofXJldHVybiBhLmpvaW4obyl9ZnVuY3Rpb24gcyh0KXtpZighdHx8IXQudGFnTmFtZSlyZXR1cm5cIlwiO3ZhciBlPVt0LnRhZ05hbWVdO3QuaWQmJmUucHVzaChcIiNcIit0LmlkKSx0LmNsYXNzZXMmJmUucHVzaChcIi5cIit0LmNsYXNzZXMuam9pbihcIi5cIikpO2Zvcih2YXIgcj0wO3I8dC5hdHRyaWJ1dGVzLmxlbmd0aDtyKyspZS5wdXNoKFwiW1wiK3QuYXR0cmlidXRlc1tyXS5rZXkrJz1cIicrdC5hdHRyaWJ1dGVzW3JdLnZhbHVlKydcIl0nKTtyZXR1cm4gZS5qb2luKFwiXCIpfWZ1bmN0aW9uIHUodCl7aWYoIXR8fCF0LnRhZ05hbWUpcmV0dXJuIG51bGw7dmFyIGUscixuLG8saT17fTtpLnRhZ05hbWU9dC50YWdOYW1lLnRvTG93ZXJDYXNlKCksdC5pZCYmKGkuaWQ9dC5pZCksZT10LmNsYXNzTmFtZSxlJiZcInN0cmluZ1wiPT10eXBlb2YgZSYmKGkuY2xhc3Nlcz1lLnNwbGl0KC9cXHMrLykpO3ZhciBhPVtcInR5cGVcIixcIm5hbWVcIixcInRpdGxlXCIsXCJhbHRcIl07Zm9yKGkuYXR0cmlidXRlcz1bXSxvPTA7bzxhLmxlbmd0aDtvKyspcj1hW29dLG49dC5nZXRBdHRyaWJ1dGUociksbiYmaS5hdHRyaWJ1dGVzLnB1c2goe2tleTpyLHZhbHVlOm59KTtyZXR1cm4gaX10LmV4cG9ydHM9e2Rlc2NyaWJlRWxlbWVudDp1LGRlc2NyaXB0aW9uVG9TdHJpbmc6cyxlbGVtZW50QXJyYXlUb1N0cmluZzphLHRyZWVUb0FycmF5OmksZ2V0RWxlbWVudEZyb21FdmVudDpvLGlzRGVzY3JpYmVkRWxlbWVudDpuLGdldEVsZW1lbnRUeXBlOnJ9fV0pfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yb2xsYmFyLnVtZC5taW4uanMubWFwIiwiLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cblxudmFyIHN0eWxlc0luRG9tID0ge307XG5cbnZhclx0bWVtb2l6ZSA9IGZ1bmN0aW9uIChmbikge1xuXHR2YXIgbWVtbztcblxuXHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdGlmICh0eXBlb2YgbWVtbyA9PT0gXCJ1bmRlZmluZWRcIikgbWVtbyA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0cmV0dXJuIG1lbW87XG5cdH07XG59O1xuXG52YXIgaXNPbGRJRSA9IG1lbW9pemUoZnVuY3Rpb24gKCkge1xuXHQvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuXHQvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XG5cdC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcblx0Ly8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG5cdC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xuXHRyZXR1cm4gd2luZG93ICYmIGRvY3VtZW50ICYmIGRvY3VtZW50LmFsbCAmJiAhd2luZG93LmF0b2I7XG59KTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQsIHBhcmVudCkge1xuICBpZiAocGFyZW50KXtcbiAgICByZXR1cm4gcGFyZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTtcbiAgfVxuICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpO1xufTtcblxudmFyIGdldEVsZW1lbnQgPSAoZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vID0ge307XG5cblx0cmV0dXJuIGZ1bmN0aW9uKHRhcmdldCwgcGFyZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgcGFzc2luZyBmdW5jdGlvbiBpbiBvcHRpb25zLCB0aGVuIHVzZSBpdCBmb3IgcmVzb2x2ZSBcImhlYWRcIiBlbGVtZW50LlxuICAgICAgICAgICAgICAgIC8vIFVzZWZ1bCBmb3IgU2hhZG93IFJvb3Qgc3R5bGUgaS5lXG4gICAgICAgICAgICAgICAgLy8ge1xuICAgICAgICAgICAgICAgIC8vICAgaW5zZXJ0SW50bzogZnVuY3Rpb24gKCkgeyByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb29cIikuc2hhZG93Um9vdCB9XG4gICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGFyZ2V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHR2YXIgc3R5bGVUYXJnZXQgPSBnZXRUYXJnZXQuY2FsbCh0aGlzLCB0YXJnZXQsIHBhcmVudCk7XG5cdFx0XHQvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXHRcdFx0aWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG5cdFx0XHRcdFx0Ly8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcblx0XHRcdFx0XHRzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuXHRcdFx0XHR9IGNhdGNoKGUpIHtcblx0XHRcdFx0XHRzdHlsZVRhcmdldCA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuXHRcdH1cblx0XHRyZXR1cm4gbWVtb1t0YXJnZXRdXG5cdH07XG59KSgpO1xuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhclx0c2luZ2xldG9uQ291bnRlciA9IDA7XG52YXJcdHN0eWxlc0luc2VydGVkQXRUb3AgPSBbXTtcblxudmFyXHRmaXhVcmxzID0gcmVxdWlyZShcIi4vdXJsc1wiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaXN0LCBvcHRpb25zKSB7XG5cdGlmICh0eXBlb2YgREVCVUcgIT09IFwidW5kZWZpbmVkXCIgJiYgREVCVUcpIHtcblx0XHRpZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3R5bGUtbG9hZGVyIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnRcIik7XG5cdH1cblxuXHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuXHRvcHRpb25zLmF0dHJzID0gdHlwZW9mIG9wdGlvbnMuYXR0cnMgPT09IFwib2JqZWN0XCIgPyBvcHRpb25zLmF0dHJzIDoge307XG5cblx0Ly8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG5cdC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2Vcblx0aWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09IFwiYm9vbGVhblwiKSBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcblxuXHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSA8aGVhZD4gZWxlbWVudFxuICAgICAgICBpZiAoIW9wdGlvbnMuaW5zZXJ0SW50bykgb3B0aW9ucy5pbnNlcnRJbnRvID0gXCJoZWFkXCI7XG5cblx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgYm90dG9tIG9mIHRoZSB0YXJnZXRcblx0aWYgKCFvcHRpb25zLmluc2VydEF0KSBvcHRpb25zLmluc2VydEF0ID0gXCJib3R0b21cIjtcblxuXHR2YXIgc3R5bGVzID0gbGlzdFRvU3R5bGVzKGxpc3QsIG9wdGlvbnMpO1xuXG5cdGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZSAobmV3TGlzdCkge1xuXHRcdHZhciBtYXlSZW1vdmUgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXG5cdFx0XHRkb21TdHlsZS5yZWZzLS07XG5cdFx0XHRtYXlSZW1vdmUucHVzaChkb21TdHlsZSk7XG5cdFx0fVxuXG5cdFx0aWYobmV3TGlzdCkge1xuXHRcdFx0dmFyIG5ld1N0eWxlcyA9IGxpc3RUb1N0eWxlcyhuZXdMaXN0LCBvcHRpb25zKTtcblx0XHRcdGFkZFN0eWxlc1RvRG9tKG5ld1N0eWxlcywgb3B0aW9ucyk7XG5cdFx0fVxuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBtYXlSZW1vdmUubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBkb21TdHlsZSA9IG1heVJlbW92ZVtpXTtcblxuXHRcdFx0aWYoZG9tU3R5bGUucmVmcyA9PT0gMCkge1xuXHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSBkb21TdHlsZS5wYXJ0c1tqXSgpO1xuXG5cdFx0XHRcdGRlbGV0ZSBzdHlsZXNJbkRvbVtkb21TdHlsZS5pZF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xufTtcblxuZnVuY3Rpb24gYWRkU3R5bGVzVG9Eb20gKHN0eWxlcywgb3B0aW9ucykge1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXG5cdFx0aWYoZG9tU3R5bGUpIHtcblx0XHRcdGRvbVN0eWxlLnJlZnMrKztcblxuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3IoOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIHBhcnRzID0gW107XG5cblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXG5cdFx0XHRzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHtpZDogaXRlbS5pZCwgcmVmczogMSwgcGFydHM6IHBhcnRzfTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gbGlzdFRvU3R5bGVzIChsaXN0LCBvcHRpb25zKSB7XG5cdHZhciBzdHlsZXMgPSBbXTtcblx0dmFyIG5ld1N0eWxlcyA9IHt9O1xuXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBpdGVtID0gbGlzdFtpXTtcblx0XHR2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcblx0XHR2YXIgY3NzID0gaXRlbVsxXTtcblx0XHR2YXIgbWVkaWEgPSBpdGVtWzJdO1xuXHRcdHZhciBzb3VyY2VNYXAgPSBpdGVtWzNdO1xuXHRcdHZhciBwYXJ0ID0ge2NzczogY3NzLCBtZWRpYTogbWVkaWEsIHNvdXJjZU1hcDogc291cmNlTWFwfTtcblxuXHRcdGlmKCFuZXdTdHlsZXNbaWRdKSBzdHlsZXMucHVzaChuZXdTdHlsZXNbaWRdID0ge2lkOiBpZCwgcGFydHM6IFtwYXJ0XX0pO1xuXHRcdGVsc2UgbmV3U3R5bGVzW2lkXS5wYXJ0cy5wdXNoKHBhcnQpO1xuXHR9XG5cblx0cmV0dXJuIHN0eWxlcztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50IChvcHRpb25zLCBzdHlsZSkge1xuXHR2YXIgdGFyZ2V0ID0gZ2V0RWxlbWVudChvcHRpb25zLmluc2VydEludG8pXG5cblx0aWYgKCF0YXJnZXQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydEludG8nIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcblx0fVxuXG5cdHZhciBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCA9IHN0eWxlc0luc2VydGVkQXRUb3Bbc3R5bGVzSW5zZXJ0ZWRBdFRvcC5sZW5ndGggLSAxXTtcblxuXHRpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ0b3BcIikge1xuXHRcdGlmICghbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3ApIHtcblx0XHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIHRhcmdldC5maXJzdENoaWxkKTtcblx0XHR9IGVsc2UgaWYgKGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKSB7XG5cdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG5cdFx0fVxuXHRcdHN0eWxlc0luc2VydGVkQXRUb3AucHVzaChzdHlsZSk7XG5cdH0gZWxzZSBpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJib3R0b21cIikge1xuXHRcdHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwib2JqZWN0XCIgJiYgb3B0aW9ucy5pbnNlcnRBdC5iZWZvcmUpIHtcblx0XHR2YXIgbmV4dFNpYmxpbmcgPSBnZXRFbGVtZW50KG9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlLCB0YXJnZXQpO1xuXHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIG5leHRTaWJsaW5nKTtcblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJbU3R5bGUgTG9hZGVyXVxcblxcbiBJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgJ2luc2VydEF0JyAoJ29wdGlvbnMuaW5zZXJ0QXQnKSBmb3VuZC5cXG4gTXVzdCBiZSAndG9wJywgJ2JvdHRvbScsIG9yIE9iamVjdC5cXG4gKGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyI2luc2VydGF0KVxcblwiKTtcblx0fVxufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQgKHN0eWxlKSB7XG5cdGlmIChzdHlsZS5wYXJlbnROb2RlID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cdHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xuXG5cdHZhciBpZHggPSBzdHlsZXNJbnNlcnRlZEF0VG9wLmluZGV4T2Yoc3R5bGUpO1xuXHRpZihpZHggPj0gMCkge1xuXHRcdHN0eWxlc0luc2VydGVkQXRUb3Auc3BsaWNlKGlkeCwgMSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlU3R5bGVFbGVtZW50IChvcHRpb25zKSB7XG5cdHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcblxuXHRpZihvcHRpb25zLmF0dHJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdG9wdGlvbnMuYXR0cnMudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0fVxuXG5cdGlmKG9wdGlvbnMuYXR0cnMubm9uY2UgPT09IHVuZGVmaW5lZCkge1xuXHRcdHZhciBub25jZSA9IGdldE5vbmNlKCk7XG5cdFx0aWYgKG5vbmNlKSB7XG5cdFx0XHRvcHRpb25zLmF0dHJzLm5vbmNlID0gbm9uY2U7XG5cdFx0fVxuXHR9XG5cblx0YWRkQXR0cnMoc3R5bGUsIG9wdGlvbnMuYXR0cnMpO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGUpO1xuXG5cdHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTGlua0VsZW1lbnQgKG9wdGlvbnMpIHtcblx0dmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcblxuXHRpZihvcHRpb25zLmF0dHJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdG9wdGlvbnMuYXR0cnMudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0fVxuXHRvcHRpb25zLmF0dHJzLnJlbCA9IFwic3R5bGVzaGVldFwiO1xuXG5cdGFkZEF0dHJzKGxpbmssIG9wdGlvbnMuYXR0cnMpO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgbGluayk7XG5cblx0cmV0dXJuIGxpbms7XG59XG5cbmZ1bmN0aW9uIGFkZEF0dHJzIChlbCwgYXR0cnMpIHtcblx0T2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRcdGVsLnNldEF0dHJpYnV0ZShrZXksIGF0dHJzW2tleV0pO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gZ2V0Tm9uY2UoKSB7XG5cdGlmICh0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHRyZXR1cm4gX193ZWJwYWNrX25vbmNlX187XG59XG5cbmZ1bmN0aW9uIGFkZFN0eWxlIChvYmosIG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlLCB1cGRhdGUsIHJlbW92ZSwgcmVzdWx0O1xuXG5cdC8vIElmIGEgdHJhbnNmb3JtIGZ1bmN0aW9uIHdhcyBkZWZpbmVkLCBydW4gaXQgb24gdGhlIGNzc1xuXHRpZiAob3B0aW9ucy50cmFuc2Zvcm0gJiYgb2JqLmNzcykge1xuXHQgICAgcmVzdWx0ID0gdHlwZW9mIG9wdGlvbnMudHJhbnNmb3JtID09PSAnZnVuY3Rpb24nXG5cdFx0ID8gb3B0aW9ucy50cmFuc2Zvcm0ob2JqLmNzcykgXG5cdFx0IDogb3B0aW9ucy50cmFuc2Zvcm0uZGVmYXVsdChvYmouY3NzKTtcblxuXHQgICAgaWYgKHJlc3VsdCkge1xuXHQgICAgXHQvLyBJZiB0cmFuc2Zvcm0gcmV0dXJucyBhIHZhbHVlLCB1c2UgdGhhdCBpbnN0ZWFkIG9mIHRoZSBvcmlnaW5hbCBjc3MuXG5cdCAgICBcdC8vIFRoaXMgYWxsb3dzIHJ1bm5pbmcgcnVudGltZSB0cmFuc2Zvcm1hdGlvbnMgb24gdGhlIGNzcy5cblx0ICAgIFx0b2JqLmNzcyA9IHJlc3VsdDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICBcdC8vIElmIHRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCBkb24ndCBhZGQgdGhpcyBjc3MuXG5cdCAgICBcdC8vIFRoaXMgYWxsb3dzIGNvbmRpdGlvbmFsIGxvYWRpbmcgb2YgY3NzXG5cdCAgICBcdHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgIFx0XHQvLyBub29wXG5cdCAgICBcdH07XG5cdCAgICB9XG5cdH1cblxuXHRpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcblx0XHR2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcblxuXHRcdHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuXG5cdFx0dXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG5cdFx0cmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcblxuXHR9IGVsc2UgaWYgKFxuXHRcdG9iai5zb3VyY2VNYXAgJiZcblx0XHR0eXBlb2YgVVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgVVJMLmNyZWF0ZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIFVSTC5yZXZva2VPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBCbG9iID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiXG5cdCkge1xuXHRcdHN0eWxlID0gY3JlYXRlTGlua0VsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gdXBkYXRlTGluay5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuXG5cdFx0XHRpZihzdHlsZS5ocmVmKSBVUkwucmV2b2tlT2JqZWN0VVJMKHN0eWxlLmhyZWYpO1xuXHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0c3R5bGUgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlKTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuXHRcdH07XG5cdH1cblxuXHR1cGRhdGUob2JqKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUgKG5ld09iaikge1xuXHRcdGlmIChuZXdPYmopIHtcblx0XHRcdGlmIChcblx0XHRcdFx0bmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJlxuXHRcdFx0XHRuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJlxuXHRcdFx0XHRuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwXG5cdFx0XHQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR1cGRhdGUob2JqID0gbmV3T2JqKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVtb3ZlKCk7XG5cdFx0fVxuXHR9O1xufVxuXG52YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xuXHR2YXIgdGV4dFN0b3JlID0gW107XG5cblx0cmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgcmVwbGFjZW1lbnQpIHtcblx0XHR0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG5cblx0XHRyZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcblx0fTtcbn0pKCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcgKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcblx0dmFyIGNzcyA9IHJlbW92ZSA/IFwiXCIgOiBvYmouY3NzO1xuXG5cdGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuXHRcdHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuXHRcdGlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuXG5cdFx0aWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG5cdFx0XHRzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyAoc3R5bGUsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuXG5cdGlmKG1lZGlhKSB7XG5cdFx0c3R5bGUuc2V0QXR0cmlidXRlKFwibWVkaWFcIiwgbWVkaWEpXG5cdH1cblxuXHRpZihzdHlsZS5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuXHR9IGVsc2Uge1xuXHRcdHdoaWxlKHN0eWxlLmZpcnN0Q2hpbGQpIHtcblx0XHRcdHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuXHRcdH1cblxuXHRcdHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUxpbmsgKGxpbmssIG9wdGlvbnMsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cblx0Lypcblx0XHRJZiBjb252ZXJ0VG9BYnNvbHV0ZVVybHMgaXNuJ3QgZGVmaW5lZCwgYnV0IHNvdXJjZW1hcHMgYXJlIGVuYWJsZWRcblx0XHRhbmQgdGhlcmUgaXMgbm8gcHVibGljUGF0aCBkZWZpbmVkIHRoZW4gbGV0cyB0dXJuIGNvbnZlcnRUb0Fic29sdXRlVXJsc1xuXHRcdG9uIGJ5IGRlZmF1bHQuICBPdGhlcndpc2UgZGVmYXVsdCB0byB0aGUgY29udmVydFRvQWJzb2x1dGVVcmxzIG9wdGlvblxuXHRcdGRpcmVjdGx5XG5cdCovXG5cdHZhciBhdXRvRml4VXJscyA9IG9wdGlvbnMuY29udmVydFRvQWJzb2x1dGVVcmxzID09PSB1bmRlZmluZWQgJiYgc291cmNlTWFwO1xuXG5cdGlmIChvcHRpb25zLmNvbnZlcnRUb0Fic29sdXRlVXJscyB8fCBhdXRvRml4VXJscykge1xuXHRcdGNzcyA9IGZpeFVybHMoY3NzKTtcblx0fVxuXG5cdGlmIChzb3VyY2VNYXApIHtcblx0XHQvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjYwMzg3NVxuXHRcdGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIgKyBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpICsgXCIgKi9cIjtcblx0fVxuXG5cdHZhciBibG9iID0gbmV3IEJsb2IoW2Nzc10sIHsgdHlwZTogXCJ0ZXh0L2Nzc1wiIH0pO1xuXG5cdHZhciBvbGRTcmMgPSBsaW5rLmhyZWY7XG5cblx0bGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcblxuXHRpZihvbGRTcmMpIFVSTC5yZXZva2VPYmplY3RVUkwob2xkU3JjKTtcbn1cbiIsIlxuLyoqXG4gKiBXaGVuIHNvdXJjZSBtYXBzIGFyZSBlbmFibGVkLCBgc3R5bGUtbG9hZGVyYCB1c2VzIGEgbGluayBlbGVtZW50IHdpdGggYSBkYXRhLXVyaSB0b1xuICogZW1iZWQgdGhlIGNzcyBvbiB0aGUgcGFnZS4gVGhpcyBicmVha3MgYWxsIHJlbGF0aXZlIHVybHMgYmVjYXVzZSBub3cgdGhleSBhcmUgcmVsYXRpdmUgdG8gYVxuICogYnVuZGxlIGluc3RlYWQgb2YgdGhlIGN1cnJlbnQgcGFnZS5cbiAqXG4gKiBPbmUgc29sdXRpb24gaXMgdG8gb25seSB1c2UgZnVsbCB1cmxzLCBidXQgdGhhdCBtYXkgYmUgaW1wb3NzaWJsZS5cbiAqXG4gKiBJbnN0ZWFkLCB0aGlzIGZ1bmN0aW9uIFwiZml4ZXNcIiB0aGUgcmVsYXRpdmUgdXJscyB0byBiZSBhYnNvbHV0ZSBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgcGFnZSBsb2NhdGlvbi5cbiAqXG4gKiBBIHJ1ZGltZW50YXJ5IHRlc3Qgc3VpdGUgaXMgbG9jYXRlZCBhdCBgdGVzdC9maXhVcmxzLmpzYCBhbmQgY2FuIGJlIHJ1biB2aWEgdGhlIGBucG0gdGVzdGAgY29tbWFuZC5cbiAqXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzKSB7XG4gIC8vIGdldCBjdXJyZW50IGxvY2F0aW9uXG4gIHZhciBsb2NhdGlvbiA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmxvY2F0aW9uO1xuXG4gIGlmICghbG9jYXRpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJmaXhVcmxzIHJlcXVpcmVzIHdpbmRvdy5sb2NhdGlvblwiKTtcbiAgfVxuXG5cdC8vIGJsYW5rIG9yIG51bGw/XG5cdGlmICghY3NzIHx8IHR5cGVvZiBjc3MgIT09IFwic3RyaW5nXCIpIHtcblx0ICByZXR1cm4gY3NzO1xuICB9XG5cbiAgdmFyIGJhc2VVcmwgPSBsb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiArIGxvY2F0aW9uLmhvc3Q7XG4gIHZhciBjdXJyZW50RGlyID0gYmFzZVVybCArIGxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL1xcL1teXFwvXSokLywgXCIvXCIpO1xuXG5cdC8vIGNvbnZlcnQgZWFjaCB1cmwoLi4uKVxuXHQvKlxuXHRUaGlzIHJlZ3VsYXIgZXhwcmVzc2lvbiBpcyBqdXN0IGEgd2F5IHRvIHJlY3Vyc2l2ZWx5IG1hdGNoIGJyYWNrZXRzIHdpdGhpblxuXHRhIHN0cmluZy5cblxuXHQgL3VybFxccypcXCggID0gTWF0Y2ggb24gdGhlIHdvcmQgXCJ1cmxcIiB3aXRoIGFueSB3aGl0ZXNwYWNlIGFmdGVyIGl0IGFuZCB0aGVuIGEgcGFyZW5zXG5cdCAgICggID0gU3RhcnQgYSBjYXB0dXJpbmcgZ3JvdXBcblx0ICAgICAoPzogID0gU3RhcnQgYSBub24tY2FwdHVyaW5nIGdyb3VwXG5cdCAgICAgICAgIFteKShdICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICB8ICA9IE9SXG5cdCAgICAgICAgIFxcKCAgPSBNYXRjaCBhIHN0YXJ0IHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAoPzogID0gU3RhcnQgYW5vdGhlciBub24tY2FwdHVyaW5nIGdyb3Vwc1xuXHQgICAgICAgICAgICAgICAgIFteKShdKyAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICB8ICA9IE9SXG5cdCAgICAgICAgICAgICAgICAgXFwoICA9IE1hdGNoIGEgc3RhcnQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICAgICAgW14pKF0qICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgIFxcKSAgPSBNYXRjaCBhIGVuZCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgKSAgPSBFbmQgR3JvdXBcbiAgICAgICAgICAgICAgKlxcKSA9IE1hdGNoIGFueXRoaW5nIGFuZCB0aGVuIGEgY2xvc2UgcGFyZW5zXG4gICAgICAgICAgKSAgPSBDbG9zZSBub24tY2FwdHVyaW5nIGdyb3VwXG4gICAgICAgICAgKiAgPSBNYXRjaCBhbnl0aGluZ1xuICAgICAgICkgID0gQ2xvc2UgY2FwdHVyaW5nIGdyb3VwXG5cdCBcXCkgID0gTWF0Y2ggYSBjbG9zZSBwYXJlbnNcblxuXHQgL2dpICA9IEdldCBhbGwgbWF0Y2hlcywgbm90IHRoZSBmaXJzdC4gIEJlIGNhc2UgaW5zZW5zaXRpdmUuXG5cdCAqL1xuXHR2YXIgZml4ZWRDc3MgPSBjc3MucmVwbGFjZSgvdXJsXFxzKlxcKCgoPzpbXikoXXxcXCgoPzpbXikoXSt8XFwoW14pKF0qXFwpKSpcXCkpKilcXCkvZ2ksIGZ1bmN0aW9uKGZ1bGxNYXRjaCwgb3JpZ1VybCkge1xuXHRcdC8vIHN0cmlwIHF1b3RlcyAoaWYgdGhleSBleGlzdClcblx0XHR2YXIgdW5xdW90ZWRPcmlnVXJsID0gb3JpZ1VybFxuXHRcdFx0LnRyaW0oKVxuXHRcdFx0LnJlcGxhY2UoL15cIiguKilcIiQvLCBmdW5jdGlvbihvLCAkMSl7IHJldHVybiAkMTsgfSlcblx0XHRcdC5yZXBsYWNlKC9eJyguKiknJC8sIGZ1bmN0aW9uKG8sICQxKXsgcmV0dXJuICQxOyB9KTtcblxuXHRcdC8vIGFscmVhZHkgYSBmdWxsIHVybD8gbm8gY2hhbmdlXG5cdFx0aWYgKC9eKCN8ZGF0YTp8aHR0cDpcXC9cXC98aHR0cHM6XFwvXFwvfGZpbGU6XFwvXFwvXFwvfFxccyokKS9pLnRlc3QodW5xdW90ZWRPcmlnVXJsKSkge1xuXHRcdCAgcmV0dXJuIGZ1bGxNYXRjaDtcblx0XHR9XG5cblx0XHQvLyBjb252ZXJ0IHRoZSB1cmwgdG8gYSBmdWxsIHVybFxuXHRcdHZhciBuZXdVcmw7XG5cblx0XHRpZiAodW5xdW90ZWRPcmlnVXJsLmluZGV4T2YoXCIvL1wiKSA9PT0gMCkge1xuXHRcdCAgXHQvL1RPRE86IHNob3VsZCB3ZSBhZGQgcHJvdG9jb2w/XG5cdFx0XHRuZXdVcmwgPSB1bnF1b3RlZE9yaWdVcmw7XG5cdFx0fSBlbHNlIGlmICh1bnF1b3RlZE9yaWdVcmwuaW5kZXhPZihcIi9cIikgPT09IDApIHtcblx0XHRcdC8vIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBiYXNlIHVybFxuXHRcdFx0bmV3VXJsID0gYmFzZVVybCArIHVucXVvdGVkT3JpZ1VybDsgLy8gYWxyZWFkeSBzdGFydHMgd2l0aCAnLydcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gcGF0aCBzaG91bGQgYmUgcmVsYXRpdmUgdG8gY3VycmVudCBkaXJlY3Rvcnlcblx0XHRcdG5ld1VybCA9IGN1cnJlbnREaXIgKyB1bnF1b3RlZE9yaWdVcmwucmVwbGFjZSgvXlxcLlxcLy8sIFwiXCIpOyAvLyBTdHJpcCBsZWFkaW5nICcuLydcblx0XHR9XG5cblx0XHQvLyBzZW5kIGJhY2sgdGhlIGZpeGVkIHVybCguLi4pXG5cdFx0cmV0dXJuIFwidXJsKFwiICsgSlNPTi5zdHJpbmdpZnkobmV3VXJsKSArIFwiKVwiO1xuXHR9KTtcblxuXHQvLyBzZW5kIGJhY2sgdGhlIGZpeGVkIGNzc1xuXHRyZXR1cm4gZml4ZWRDc3M7XG59O1xuIiwiKGZ1bmN0aW9uKGdsb2JhbCkge1xyXG4gIC8qKlxyXG4gICAqIFBvbHlmaWxsIFVSTFNlYXJjaFBhcmFtc1xyXG4gICAqXHJcbiAgICogSW5zcGlyZWQgZnJvbSA6IGh0dHBzOi8vZ2l0aHViLmNvbS9XZWJSZWZsZWN0aW9uL3VybC1zZWFyY2gtcGFyYW1zL2Jsb2IvbWFzdGVyL3NyYy91cmwtc2VhcmNoLXBhcmFtcy5qc1xyXG4gICAqL1xyXG5cclxuICB2YXIgY2hlY2tJZkl0ZXJhdG9ySXNTdXBwb3J0ZWQgPSBmdW5jdGlvbigpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHJldHVybiAhIVN5bWJvbC5pdGVyYXRvcjtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuXHJcbiAgdmFyIGl0ZXJhdG9yU3VwcG9ydGVkID0gY2hlY2tJZkl0ZXJhdG9ySXNTdXBwb3J0ZWQoKTtcclxuXHJcbiAgdmFyIGNyZWF0ZUl0ZXJhdG9yID0gZnVuY3Rpb24oaXRlbXMpIHtcclxuICAgIHZhciBpdGVyYXRvciA9IHtcclxuICAgICAgbmV4dDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gaXRlbXMuc2hpZnQoKTtcclxuICAgICAgICByZXR1cm4geyBkb25lOiB2YWx1ZSA9PT0gdm9pZCAwLCB2YWx1ZTogdmFsdWUgfTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoaXRlcmF0b3JTdXBwb3J0ZWQpIHtcclxuICAgICAgaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBpdGVyYXRvcjtcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaXRlcmF0b3I7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogU2VhcmNoIHBhcmFtIG5hbWUgYW5kIHZhbHVlcyBzaG91bGQgYmUgZW5jb2RlZCBhY2NvcmRpbmcgdG8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmxlbmNvZGVkLXNlcmlhbGl6aW5nXHJcbiAgICogZW5jb2RlVVJJQ29tcG9uZW50KCkgcHJvZHVjZXMgdGhlIHNhbWUgcmVzdWx0IGV4Y2VwdCBlbmNvZGluZyBzcGFjZXMgYXMgYCUyMGAgaW5zdGVhZCBvZiBgK2AuXHJcbiAgICovXHJcbiAgdmFyIHNlcmlhbGl6ZVBhcmFtID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpLnJlcGxhY2UoLyUyMC9nLCAnKycpO1xyXG4gIH07XHJcblxyXG4gIHZhciBkZXNlcmlhbGl6ZVBhcmFtID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpLnJlcGxhY2UoL1xcKy9nLCAnICcpO1xyXG4gIH07XHJcblxyXG4gIHZhciBwb2x5ZmlsbFVSTFNlYXJjaFBhcmFtcyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHZhciBVUkxTZWFyY2hQYXJhbXMgPSBmdW5jdGlvbihzZWFyY2hTdHJpbmcpIHtcclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdfZW50cmllcycsIHsgd3JpdGFibGU6IHRydWUsIHZhbHVlOiB7fSB9KTtcclxuICAgICAgdmFyIHR5cGVvZlNlYXJjaFN0cmluZyA9IHR5cGVvZiBzZWFyY2hTdHJpbmc7XHJcblxyXG4gICAgICBpZiAodHlwZW9mU2VhcmNoU3RyaW5nID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIC8vIGRvIG5vdGhpbmdcclxuICAgICAgfSBlbHNlIGlmICh0eXBlb2ZTZWFyY2hTdHJpbmcgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgaWYgKHNlYXJjaFN0cmluZyAhPT0gJycpIHtcclxuICAgICAgICAgIHRoaXMuX2Zyb21TdHJpbmcoc2VhcmNoU3RyaW5nKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAoc2VhcmNoU3RyaW5nIGluc3RhbmNlb2YgVVJMU2VhcmNoUGFyYW1zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBzZWFyY2hTdHJpbmcuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xyXG4gICAgICAgICAgX3RoaXMuYXBwZW5kKG5hbWUsIHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIGlmICgoc2VhcmNoU3RyaW5nICE9PSBudWxsKSAmJiAodHlwZW9mU2VhcmNoU3RyaW5nID09PSAnb2JqZWN0JykpIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHNlYXJjaFN0cmluZykgPT09ICdbb2JqZWN0IEFycmF5XScpIHtcclxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VhcmNoU3RyaW5nLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBlbnRyeSA9IHNlYXJjaFN0cmluZ1tpXTtcclxuICAgICAgICAgICAgaWYgKChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZW50cnkpID09PSAnW29iamVjdCBBcnJheV0nKSB8fCAoZW50cnkubGVuZ3RoICE9PSAyKSkge1xyXG4gICAgICAgICAgICAgIHRoaXMuYXBwZW5kKGVudHJ5WzBdLCBlbnRyeVsxXSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgW3N0cmluZywgYW55XSBhcyBlbnRyeSBhdCBpbmRleCAnICsgaSArICcgb2YgVVJMU2VhcmNoUGFyYW1zXFwncyBpbnB1dCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGZvciAodmFyIGtleSBpbiBzZWFyY2hTdHJpbmcpIHtcclxuICAgICAgICAgICAgaWYgKHNlYXJjaFN0cmluZy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5hcHBlbmQoa2V5LCBzZWFyY2hTdHJpbmdba2V5XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5zdXBwb3J0ZWQgaW5wdXRcXCdzIHR5cGUgZm9yIFVSTFNlYXJjaFBhcmFtcycpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBwcm90byA9IFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGU7XHJcblxyXG4gICAgcHJvdG8uYXBwZW5kID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcclxuICAgICAgaWYgKG5hbWUgaW4gdGhpcy5fZW50cmllcykge1xyXG4gICAgICAgIHRoaXMuX2VudHJpZXNbbmFtZV0ucHVzaChTdHJpbmcodmFsdWUpKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLl9lbnRyaWVzW25hbWVdID0gW1N0cmluZyh2YWx1ZSldO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHByb3RvLmRlbGV0ZSA9IGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgZGVsZXRlIHRoaXMuX2VudHJpZXNbbmFtZV07XHJcbiAgICB9O1xyXG5cclxuICAgIHByb3RvLmdldCA9IGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgcmV0dXJuIChuYW1lIGluIHRoaXMuX2VudHJpZXMpID8gdGhpcy5fZW50cmllc1tuYW1lXVswXSA6IG51bGw7XHJcbiAgICB9O1xyXG5cclxuICAgIHByb3RvLmdldEFsbCA9IGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgcmV0dXJuIChuYW1lIGluIHRoaXMuX2VudHJpZXMpID8gdGhpcy5fZW50cmllc1tuYW1lXS5zbGljZSgwKSA6IFtdO1xyXG4gICAgfTtcclxuXHJcbiAgICBwcm90by5oYXMgPSBmdW5jdGlvbihuYW1lKSB7XHJcbiAgICAgIHJldHVybiAobmFtZSBpbiB0aGlzLl9lbnRyaWVzKTtcclxuICAgIH07XHJcblxyXG4gICAgcHJvdG8uc2V0ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcclxuICAgICAgdGhpcy5fZW50cmllc1tuYW1lXSA9IFtTdHJpbmcodmFsdWUpXTtcclxuICAgIH07XHJcblxyXG4gICAgcHJvdG8uZm9yRWFjaCA9IGZ1bmN0aW9uKGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgIHZhciBlbnRyaWVzO1xyXG4gICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMuX2VudHJpZXMpIHtcclxuICAgICAgICBpZiAodGhpcy5fZW50cmllcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xyXG4gICAgICAgICAgZW50cmllcyA9IHRoaXMuX2VudHJpZXNbbmFtZV07XHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVudHJpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCBlbnRyaWVzW2ldLCBuYW1lLCB0aGlzKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcHJvdG8ua2V5cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgaXRlbXMgPSBbXTtcclxuICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XHJcbiAgICAgICAgaXRlbXMucHVzaChuYW1lKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBjcmVhdGVJdGVyYXRvcihpdGVtcyk7XHJcbiAgICB9O1xyXG5cclxuICAgIHByb3RvLnZhbHVlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgaXRlbXMgPSBbXTtcclxuICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgaXRlbXMucHVzaCh2YWx1ZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gY3JlYXRlSXRlcmF0b3IoaXRlbXMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBwcm90by5lbnRyaWVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBpdGVtcyA9IFtdO1xyXG4gICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcclxuICAgICAgICBpdGVtcy5wdXNoKFtuYW1lLCB2YWx1ZV0pO1xyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIGNyZWF0ZUl0ZXJhdG9yKGl0ZW1zKTtcclxuICAgIH07XHJcblxyXG4gICAgaWYgKGl0ZXJhdG9yU3VwcG9ydGVkKSB7XHJcbiAgICAgIHByb3RvW1N5bWJvbC5pdGVyYXRvcl0gPSBwcm90by5lbnRyaWVzO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBzZWFyY2hBcnJheSA9IFtdO1xyXG4gICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcclxuICAgICAgICBzZWFyY2hBcnJheS5wdXNoKHNlcmlhbGl6ZVBhcmFtKG5hbWUpICsgJz0nICsgc2VyaWFsaXplUGFyYW0odmFsdWUpKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBzZWFyY2hBcnJheS5qb2luKCcmJyk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBnbG9iYWwuVVJMU2VhcmNoUGFyYW1zID0gVVJMU2VhcmNoUGFyYW1zO1xyXG4gIH07XHJcblxyXG4gIGlmICghKCdVUkxTZWFyY2hQYXJhbXMnIGluIGdsb2JhbCkgfHwgKG5ldyBVUkxTZWFyY2hQYXJhbXMoJz9hPTEnKS50b1N0cmluZygpICE9PSAnYT0xJykpIHtcclxuICAgIHBvbHlmaWxsVVJMU2VhcmNoUGFyYW1zKCk7XHJcbiAgfVxyXG5cclxuICB2YXIgcHJvdG8gPSBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlO1xyXG5cclxuICBpZiAodHlwZW9mIHByb3RvLnNvcnQgIT09ICdmdW5jdGlvbicpIHtcclxuICAgIHByb3RvLnNvcnQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgdmFyIGl0ZW1zID0gW107XHJcbiAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xyXG4gICAgICAgIGl0ZW1zLnB1c2goW25hbWUsIHZhbHVlXSk7XHJcbiAgICAgICAgaWYgKCFfdGhpcy5fZW50cmllcykge1xyXG4gICAgICAgICAgX3RoaXMuZGVsZXRlKG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGl0ZW1zLnNvcnQoZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgIGlmIChhWzBdIDwgYlswXSkge1xyXG4gICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYVswXSA+IGJbMF0pIHtcclxuICAgICAgICAgIHJldHVybiArMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgaWYgKF90aGlzLl9lbnRyaWVzKSB7IC8vIGZvcmNlIHJlc2V0IGJlY2F1c2UgSUUga2VlcHMga2V5cyBpbmRleFxyXG4gICAgICAgIF90aGlzLl9lbnRyaWVzID0ge307XHJcbiAgICAgIH1cclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHRoaXMuYXBwZW5kKGl0ZW1zW2ldWzBdLCBpdGVtc1tpXVsxXSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBpZiAodHlwZW9mIHByb3RvLl9mcm9tU3RyaW5nICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvdG8sICdfZnJvbVN0cmluZycsIHtcclxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXHJcbiAgICAgIHdyaXRhYmxlOiBmYWxzZSxcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uKHNlYXJjaFN0cmluZykge1xyXG4gICAgICAgIGlmICh0aGlzLl9lbnRyaWVzKSB7XHJcbiAgICAgICAgICB0aGlzLl9lbnRyaWVzID0ge307XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHZhciBrZXlzID0gW107XHJcbiAgICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcclxuICAgICAgICAgICAga2V5cy5wdXNoKG5hbWUpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5kZWxldGUoa2V5c1tpXSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZWFyY2hTdHJpbmcgPSBzZWFyY2hTdHJpbmcucmVwbGFjZSgvXlxcPy8sICcnKTtcclxuICAgICAgICB2YXIgYXR0cmlidXRlcyA9IHNlYXJjaFN0cmluZy5zcGxpdCgnJicpO1xyXG4gICAgICAgIHZhciBhdHRyaWJ1dGU7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBhdHRyaWJ1dGUgPSBhdHRyaWJ1dGVzW2ldLnNwbGl0KCc9Jyk7XHJcbiAgICAgICAgICB0aGlzLmFwcGVuZChcclxuICAgICAgICAgICAgZGVzZXJpYWxpemVQYXJhbShhdHRyaWJ1dGVbMF0pLFxyXG4gICAgICAgICAgICAoYXR0cmlidXRlLmxlbmd0aCA+IDEpID8gZGVzZXJpYWxpemVQYXJhbShhdHRyaWJ1dGVbMV0pIDogJydcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIEhUTUxBbmNob3JFbGVtZW50XHJcblxyXG59KShcclxuICAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpID8gZ2xvYmFsXHJcbiAgICA6ICgodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpID8gd2luZG93XHJcbiAgICA6ICgodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSA/IHNlbGYgOiB0aGlzKSlcclxuKTtcclxuXHJcbihmdW5jdGlvbihnbG9iYWwpIHtcclxuICAvKipcclxuICAgKiBQb2x5ZmlsbCBVUkxcclxuICAgKlxyXG4gICAqIEluc3BpcmVkIGZyb20gOiBodHRwczovL2dpdGh1Yi5jb20vYXJ2L0RPTS1VUkwtUG9seWZpbGwvYmxvYi9tYXN0ZXIvc3JjL3VybC5qc1xyXG4gICAqL1xyXG5cclxuICB2YXIgY2hlY2tJZlVSTElzU3VwcG9ydGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICB2YXIgdSA9IG5ldyBVUkwoJ2InLCAnaHR0cDovL2EnKTtcclxuICAgICAgdS5wYXRobmFtZSA9ICdjJTIwZCc7XHJcbiAgICAgIHJldHVybiAodS5ocmVmID09PSAnaHR0cDovL2EvYyUyMGQnKSAmJiB1LnNlYXJjaFBhcmFtcztcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuICB2YXIgcG9seWZpbGxVUkwgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBfVVJMID0gZ2xvYmFsLlVSTDtcclxuXHJcbiAgICB2YXIgVVJMID0gZnVuY3Rpb24odXJsLCBiYXNlKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgdXJsICE9PSAnc3RyaW5nJykgdXJsID0gU3RyaW5nKHVybCk7XHJcblxyXG4gICAgICAvLyBPbmx5IGNyZWF0ZSBhbm90aGVyIGRvY3VtZW50IGlmIHRoZSBiYXNlIGlzIGRpZmZlcmVudCBmcm9tIGN1cnJlbnQgbG9jYXRpb24uXHJcbiAgICAgIHZhciBkb2MgPSBkb2N1bWVudCwgYmFzZUVsZW1lbnQ7XHJcbiAgICAgIGlmIChiYXNlICYmIChnbG9iYWwubG9jYXRpb24gPT09IHZvaWQgMCB8fCBiYXNlICE9PSBnbG9iYWwubG9jYXRpb24uaHJlZikpIHtcclxuICAgICAgICBkb2MgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoJycpO1xyXG4gICAgICAgIGJhc2VFbGVtZW50ID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2Jhc2UnKTtcclxuICAgICAgICBiYXNlRWxlbWVudC5ocmVmID0gYmFzZTtcclxuICAgICAgICBkb2MuaGVhZC5hcHBlbmRDaGlsZChiYXNlRWxlbWVudCk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGlmIChiYXNlRWxlbWVudC5ocmVmLmluZGV4T2YoYmFzZSkgIT09IDApIHRocm93IG5ldyBFcnJvcihiYXNlRWxlbWVudC5ocmVmKTtcclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVVJMIHVuYWJsZSB0byBzZXQgYmFzZSAnICsgYmFzZSArICcgZHVlIHRvICcgKyBlcnIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgdmFyIGFuY2hvckVsZW1lbnQgPSBkb2MuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgICBhbmNob3JFbGVtZW50LmhyZWYgPSB1cmw7XHJcbiAgICAgIGlmIChiYXNlRWxlbWVudCkge1xyXG4gICAgICAgIGRvYy5ib2R5LmFwcGVuZENoaWxkKGFuY2hvckVsZW1lbnQpO1xyXG4gICAgICAgIGFuY2hvckVsZW1lbnQuaHJlZiA9IGFuY2hvckVsZW1lbnQuaHJlZjsgLy8gZm9yY2UgaHJlZiB0byByZWZyZXNoXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChhbmNob3JFbGVtZW50LnByb3RvY29sID09PSAnOicgfHwgIS86Ly50ZXN0KGFuY2hvckVsZW1lbnQuaHJlZikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIFVSTCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ19hbmNob3JFbGVtZW50Jywge1xyXG4gICAgICAgIHZhbHVlOiBhbmNob3JFbGVtZW50XHJcbiAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgIC8vIGNyZWF0ZSBhIGxpbmtlZCBzZWFyY2hQYXJhbXMgd2hpY2ggcmVmbGVjdCBpdHMgY2hhbmdlcyBvbiBVUkxcclxuICAgICAgdmFyIHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXModGhpcy5zZWFyY2gpO1xyXG4gICAgICB2YXIgZW5hYmxlU2VhcmNoVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgdmFyIGVuYWJsZVNlYXJjaFBhcmFtc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgIFsnYXBwZW5kJywgJ2RlbGV0ZScsICdzZXQnXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZE5hbWUpIHtcclxuICAgICAgICB2YXIgbWV0aG9kID0gc2VhcmNoUGFyYW1zW21ldGhvZE5hbWVdO1xyXG4gICAgICAgIHNlYXJjaFBhcmFtc1ttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgbWV0aG9kLmFwcGx5KHNlYXJjaFBhcmFtcywgYXJndW1lbnRzKTtcclxuICAgICAgICAgIGlmIChlbmFibGVTZWFyY2hVcGRhdGUpIHtcclxuICAgICAgICAgICAgZW5hYmxlU2VhcmNoUGFyYW1zVXBkYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIF90aGlzLnNlYXJjaCA9IHNlYXJjaFBhcmFtcy50b1N0cmluZygpO1xyXG4gICAgICAgICAgICBlbmFibGVTZWFyY2hQYXJhbXNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdzZWFyY2hQYXJhbXMnLCB7XHJcbiAgICAgICAgdmFsdWU6IHNlYXJjaFBhcmFtcyxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdmFyIHNlYXJjaCA9IHZvaWQgMDtcclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdfdXBkYXRlU2VhcmNoUGFyYW1zJywge1xyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmICh0aGlzLnNlYXJjaCAhPT0gc2VhcmNoKSB7XHJcbiAgICAgICAgICAgIHNlYXJjaCA9IHRoaXMuc2VhcmNoO1xyXG4gICAgICAgICAgICBpZiAoZW5hYmxlU2VhcmNoUGFyYW1zVXBkYXRlKSB7XHJcbiAgICAgICAgICAgICAgZW5hYmxlU2VhcmNoVXBkYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZWFyY2hQYXJhbXMuX2Zyb21TdHJpbmcodGhpcy5zZWFyY2gpO1xyXG4gICAgICAgICAgICAgIGVuYWJsZVNlYXJjaFVwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgcHJvdG8gPSBVUkwucHJvdG90eXBlO1xyXG5cclxuICAgIHZhciBsaW5rVVJMV2l0aEFuY2hvckF0dHJpYnV0ZSA9IGZ1bmN0aW9uKGF0dHJpYnV0ZU5hbWUpIHtcclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvLCBhdHRyaWJ1dGVOYW1lLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLl9hbmNob3JFbGVtZW50W2F0dHJpYnV0ZU5hbWVdO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgdGhpcy5fYW5jaG9yRWxlbWVudFthdHRyaWJ1dGVOYW1lXSA9IHZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxyXG4gICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgWydoYXNoJywgJ2hvc3QnLCAnaG9zdG5hbWUnLCAncG9ydCcsICdwcm90b2NvbCddXHJcbiAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uKGF0dHJpYnV0ZU5hbWUpIHtcclxuICAgICAgICBsaW5rVVJMV2l0aEFuY2hvckF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvLCAnc2VhcmNoJywge1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hbmNob3JFbGVtZW50WydzZWFyY2gnXTtcclxuICAgICAgfSxcclxuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2FuY2hvckVsZW1lbnRbJ3NlYXJjaCddID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlU2VhcmNoUGFyYW1zKCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGVudW1lcmFibGU6IHRydWVcclxuICAgIH0pO1xyXG5cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHByb3RvLCB7XHJcblxyXG4gICAgICAndG9TdHJpbmcnOiB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5ocmVmO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAnaHJlZic6IHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2FuY2hvckVsZW1lbnQuaHJlZi5yZXBsYWNlKC9cXD8kLywgJycpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgdGhpcy5fYW5jaG9yRWxlbWVudC5ocmVmID0gdmFsdWU7XHJcbiAgICAgICAgICB0aGlzLl91cGRhdGVTZWFyY2hQYXJhbXMoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWVcclxuICAgICAgfSxcclxuXHJcbiAgICAgICdwYXRobmFtZSc6IHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2FuY2hvckVsZW1lbnQucGF0aG5hbWUucmVwbGFjZSgvKF5cXC8/KS8sICcvJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICB0aGlzLl9hbmNob3JFbGVtZW50LnBhdGhuYW1lID0gdmFsdWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAnb3JpZ2luJzoge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAvLyBnZXQgZXhwZWN0ZWQgcG9ydCBmcm9tIHByb3RvY29sXHJcbiAgICAgICAgICB2YXIgZXhwZWN0ZWRQb3J0ID0geyAnaHR0cDonOiA4MCwgJ2h0dHBzOic6IDQ0MywgJ2Z0cDonOiAyMSB9W3RoaXMuX2FuY2hvckVsZW1lbnQucHJvdG9jb2xdO1xyXG4gICAgICAgICAgLy8gYWRkIHBvcnQgdG8gb3JpZ2luIGlmLCBleHBlY3RlZCBwb3J0IGlzIGRpZmZlcmVudCB0aGFuIGFjdHVhbCBwb3J0XHJcbiAgICAgICAgICAvLyBhbmQgaXQgaXMgbm90IGVtcHR5IGYuZSBodHRwOi8vZm9vOjgwODBcclxuICAgICAgICAgIC8vIDgwODAgIT0gODAgJiYgODA4MCAhPSAnJ1xyXG4gICAgICAgICAgdmFyIGFkZFBvcnRUb09yaWdpbiA9IHRoaXMuX2FuY2hvckVsZW1lbnQucG9ydCAhPSBleHBlY3RlZFBvcnQgJiZcclxuICAgICAgICAgICAgdGhpcy5fYW5jaG9yRWxlbWVudC5wb3J0ICE9PSAnJztcclxuXHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5fYW5jaG9yRWxlbWVudC5wcm90b2NvbCArXHJcbiAgICAgICAgICAgICcvLycgK1xyXG4gICAgICAgICAgICB0aGlzLl9hbmNob3JFbGVtZW50Lmhvc3RuYW1lICtcclxuICAgICAgICAgICAgKGFkZFBvcnRUb09yaWdpbiA/ICgnOicgKyB0aGlzLl9hbmNob3JFbGVtZW50LnBvcnQpIDogJycpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgJ3Bhc3N3b3JkJzogeyAvLyBUT0RPXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWVcclxuICAgICAgfSxcclxuXHJcbiAgICAgICd1c2VybmFtZSc6IHsgLy8gVE9ET1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICBVUkwuY3JlYXRlT2JqZWN0VVJMID0gZnVuY3Rpb24oYmxvYikge1xyXG4gICAgICByZXR1cm4gX1VSTC5jcmVhdGVPYmplY3RVUkwuYXBwbHkoX1VSTCwgYXJndW1lbnRzKTtcclxuICAgIH07XHJcblxyXG4gICAgVVJMLnJldm9rZU9iamVjdFVSTCA9IGZ1bmN0aW9uKHVybCkge1xyXG4gICAgICByZXR1cm4gX1VSTC5yZXZva2VPYmplY3RVUkwuYXBwbHkoX1VSTCwgYXJndW1lbnRzKTtcclxuICAgIH07XHJcblxyXG4gICAgZ2xvYmFsLlVSTCA9IFVSTDtcclxuXHJcbiAgfTtcclxuXHJcbiAgaWYgKCFjaGVja0lmVVJMSXNTdXBwb3J0ZWQoKSkge1xyXG4gICAgcG9seWZpbGxVUkwoKTtcclxuICB9XHJcblxyXG4gIGlmICgoZ2xvYmFsLmxvY2F0aW9uICE9PSB2b2lkIDApICYmICEoJ29yaWdpbicgaW4gZ2xvYmFsLmxvY2F0aW9uKSkge1xyXG4gICAgdmFyIGdldE9yaWdpbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gZ2xvYmFsLmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIGdsb2JhbC5sb2NhdGlvbi5ob3N0bmFtZSArIChnbG9iYWwubG9jYXRpb24ucG9ydCA/ICgnOicgKyBnbG9iYWwubG9jYXRpb24ucG9ydCkgOiAnJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnbG9iYWwubG9jYXRpb24sICdvcmlnaW4nLCB7XHJcbiAgICAgICAgZ2V0OiBnZXRPcmlnaW4sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZ2xvYmFsLmxvY2F0aW9uLm9yaWdpbiA9IGdldE9yaWdpbigpO1xyXG4gICAgICB9LCAxMDApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbn0pKFxyXG4gICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykgPyBnbG9iYWxcclxuICAgIDogKCh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgPyB3aW5kb3dcclxuICAgIDogKCh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpID8gc2VsZiA6IHRoaXMpKVxyXG4pO1xyXG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgcHVueWNvZGUgPSByZXF1aXJlKCdwdW55Y29kZScpO1xudmFyIHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcblxuZXhwb3J0cy5wYXJzZSA9IHVybFBhcnNlO1xuZXhwb3J0cy5yZXNvbHZlID0gdXJsUmVzb2x2ZTtcbmV4cG9ydHMucmVzb2x2ZU9iamVjdCA9IHVybFJlc29sdmVPYmplY3Q7XG5leHBvcnRzLmZvcm1hdCA9IHVybEZvcm1hdDtcblxuZXhwb3J0cy5VcmwgPSBVcmw7XG5cbmZ1bmN0aW9uIFVybCgpIHtcbiAgdGhpcy5wcm90b2NvbCA9IG51bGw7XG4gIHRoaXMuc2xhc2hlcyA9IG51bGw7XG4gIHRoaXMuYXV0aCA9IG51bGw7XG4gIHRoaXMuaG9zdCA9IG51bGw7XG4gIHRoaXMucG9ydCA9IG51bGw7XG4gIHRoaXMuaG9zdG5hbWUgPSBudWxsO1xuICB0aGlzLmhhc2ggPSBudWxsO1xuICB0aGlzLnNlYXJjaCA9IG51bGw7XG4gIHRoaXMucXVlcnkgPSBudWxsO1xuICB0aGlzLnBhdGhuYW1lID0gbnVsbDtcbiAgdGhpcy5wYXRoID0gbnVsbDtcbiAgdGhpcy5ocmVmID0gbnVsbDtcbn1cblxuLy8gUmVmZXJlbmNlOiBSRkMgMzk4NiwgUkZDIDE4MDgsIFJGQyAyMzk2XG5cbi8vIGRlZmluZSB0aGVzZSBoZXJlIHNvIGF0IGxlYXN0IHRoZXkgb25seSBoYXZlIHRvIGJlXG4vLyBjb21waWxlZCBvbmNlIG9uIHRoZSBmaXJzdCBtb2R1bGUgbG9hZC5cbnZhciBwcm90b2NvbFBhdHRlcm4gPSAvXihbYS16MC05ListXSs6KS9pLFxuICAgIHBvcnRQYXR0ZXJuID0gLzpbMC05XSokLyxcblxuICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgYSBzaW1wbGUgcGF0aCBVUkxcbiAgICBzaW1wbGVQYXRoUGF0dGVybiA9IC9eKFxcL1xcLz8oPyFcXC8pW15cXD9cXHNdKikoXFw/W15cXHNdKik/JC8sXG5cbiAgICAvLyBSRkMgMjM5NjogY2hhcmFjdGVycyByZXNlcnZlZCBmb3IgZGVsaW1pdGluZyBVUkxzLlxuICAgIC8vIFdlIGFjdHVhbGx5IGp1c3QgYXV0by1lc2NhcGUgdGhlc2UuXG4gICAgZGVsaW1zID0gWyc8JywgJz4nLCAnXCInLCAnYCcsICcgJywgJ1xccicsICdcXG4nLCAnXFx0J10sXG5cbiAgICAvLyBSRkMgMjM5NjogY2hhcmFjdGVycyBub3QgYWxsb3dlZCBmb3IgdmFyaW91cyByZWFzb25zLlxuICAgIHVud2lzZSA9IFsneycsICd9JywgJ3wnLCAnXFxcXCcsICdeJywgJ2AnXS5jb25jYXQoZGVsaW1zKSxcblxuICAgIC8vIEFsbG93ZWQgYnkgUkZDcywgYnV0IGNhdXNlIG9mIFhTUyBhdHRhY2tzLiAgQWx3YXlzIGVzY2FwZSB0aGVzZS5cbiAgICBhdXRvRXNjYXBlID0gWydcXCcnXS5jb25jYXQodW53aXNlKSxcbiAgICAvLyBDaGFyYWN0ZXJzIHRoYXQgYXJlIG5ldmVyIGV2ZXIgYWxsb3dlZCBpbiBhIGhvc3RuYW1lLlxuICAgIC8vIE5vdGUgdGhhdCBhbnkgaW52YWxpZCBjaGFycyBhcmUgYWxzbyBoYW5kbGVkLCBidXQgdGhlc2VcbiAgICAvLyBhcmUgdGhlIG9uZXMgdGhhdCBhcmUgKmV4cGVjdGVkKiB0byBiZSBzZWVuLCBzbyB3ZSBmYXN0LXBhdGhcbiAgICAvLyB0aGVtLlxuICAgIG5vbkhvc3RDaGFycyA9IFsnJScsICcvJywgJz8nLCAnOycsICcjJ10uY29uY2F0KGF1dG9Fc2NhcGUpLFxuICAgIGhvc3RFbmRpbmdDaGFycyA9IFsnLycsICc/JywgJyMnXSxcbiAgICBob3N0bmFtZU1heExlbiA9IDI1NSxcbiAgICBob3N0bmFtZVBhcnRQYXR0ZXJuID0gL15bK2EtejAtOUEtWl8tXXswLDYzfSQvLFxuICAgIGhvc3RuYW1lUGFydFN0YXJ0ID0gL14oWythLXowLTlBLVpfLV17MCw2M30pKC4qKSQvLFxuICAgIC8vIHByb3RvY29scyB0aGF0IGNhbiBhbGxvdyBcInVuc2FmZVwiIGFuZCBcInVud2lzZVwiIGNoYXJzLlxuICAgIHVuc2FmZVByb3RvY29sID0ge1xuICAgICAgJ2phdmFzY3JpcHQnOiB0cnVlLFxuICAgICAgJ2phdmFzY3JpcHQ6JzogdHJ1ZVxuICAgIH0sXG4gICAgLy8gcHJvdG9jb2xzIHRoYXQgbmV2ZXIgaGF2ZSBhIGhvc3RuYW1lLlxuICAgIGhvc3RsZXNzUHJvdG9jb2wgPSB7XG4gICAgICAnamF2YXNjcmlwdCc6IHRydWUsXG4gICAgICAnamF2YXNjcmlwdDonOiB0cnVlXG4gICAgfSxcbiAgICAvLyBwcm90b2NvbHMgdGhhdCBhbHdheXMgY29udGFpbiBhIC8vIGJpdC5cbiAgICBzbGFzaGVkUHJvdG9jb2wgPSB7XG4gICAgICAnaHR0cCc6IHRydWUsXG4gICAgICAnaHR0cHMnOiB0cnVlLFxuICAgICAgJ2Z0cCc6IHRydWUsXG4gICAgICAnZ29waGVyJzogdHJ1ZSxcbiAgICAgICdmaWxlJzogdHJ1ZSxcbiAgICAgICdodHRwOic6IHRydWUsXG4gICAgICAnaHR0cHM6JzogdHJ1ZSxcbiAgICAgICdmdHA6JzogdHJ1ZSxcbiAgICAgICdnb3BoZXI6JzogdHJ1ZSxcbiAgICAgICdmaWxlOic6IHRydWVcbiAgICB9LFxuICAgIHF1ZXJ5c3RyaW5nID0gcmVxdWlyZSgncXVlcnlzdHJpbmcnKTtcblxuZnVuY3Rpb24gdXJsUGFyc2UodXJsLCBwYXJzZVF1ZXJ5U3RyaW5nLCBzbGFzaGVzRGVub3RlSG9zdCkge1xuICBpZiAodXJsICYmIHV0aWwuaXNPYmplY3QodXJsKSAmJiB1cmwgaW5zdGFuY2VvZiBVcmwpIHJldHVybiB1cmw7XG5cbiAgdmFyIHUgPSBuZXcgVXJsO1xuICB1LnBhcnNlKHVybCwgcGFyc2VRdWVyeVN0cmluZywgc2xhc2hlc0Rlbm90ZUhvc3QpO1xuICByZXR1cm4gdTtcbn1cblxuVXJsLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uKHVybCwgcGFyc2VRdWVyeVN0cmluZywgc2xhc2hlc0Rlbm90ZUhvc3QpIHtcbiAgaWYgKCF1dGlsLmlzU3RyaW5nKHVybCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUGFyYW1ldGVyICd1cmwnIG11c3QgYmUgYSBzdHJpbmcsIG5vdCBcIiArIHR5cGVvZiB1cmwpO1xuICB9XG5cbiAgLy8gQ29weSBjaHJvbWUsIElFLCBvcGVyYSBiYWNrc2xhc2gtaGFuZGxpbmcgYmVoYXZpb3IuXG4gIC8vIEJhY2sgc2xhc2hlcyBiZWZvcmUgdGhlIHF1ZXJ5IHN0cmluZyBnZXQgY29udmVydGVkIHRvIGZvcndhcmQgc2xhc2hlc1xuICAvLyBTZWU6IGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0yNTkxNlxuICB2YXIgcXVlcnlJbmRleCA9IHVybC5pbmRleE9mKCc/JyksXG4gICAgICBzcGxpdHRlciA9XG4gICAgICAgICAgKHF1ZXJ5SW5kZXggIT09IC0xICYmIHF1ZXJ5SW5kZXggPCB1cmwuaW5kZXhPZignIycpKSA/ICc/JyA6ICcjJyxcbiAgICAgIHVTcGxpdCA9IHVybC5zcGxpdChzcGxpdHRlciksXG4gICAgICBzbGFzaFJlZ2V4ID0gL1xcXFwvZztcbiAgdVNwbGl0WzBdID0gdVNwbGl0WzBdLnJlcGxhY2Uoc2xhc2hSZWdleCwgJy8nKTtcbiAgdXJsID0gdVNwbGl0LmpvaW4oc3BsaXR0ZXIpO1xuXG4gIHZhciByZXN0ID0gdXJsO1xuXG4gIC8vIHRyaW0gYmVmb3JlIHByb2NlZWRpbmcuXG4gIC8vIFRoaXMgaXMgdG8gc3VwcG9ydCBwYXJzZSBzdHVmZiBsaWtlIFwiICBodHRwOi8vZm9vLmNvbSAgXFxuXCJcbiAgcmVzdCA9IHJlc3QudHJpbSgpO1xuXG4gIGlmICghc2xhc2hlc0Rlbm90ZUhvc3QgJiYgdXJsLnNwbGl0KCcjJykubGVuZ3RoID09PSAxKSB7XG4gICAgLy8gVHJ5IGZhc3QgcGF0aCByZWdleHBcbiAgICB2YXIgc2ltcGxlUGF0aCA9IHNpbXBsZVBhdGhQYXR0ZXJuLmV4ZWMocmVzdCk7XG4gICAgaWYgKHNpbXBsZVBhdGgpIHtcbiAgICAgIHRoaXMucGF0aCA9IHJlc3Q7XG4gICAgICB0aGlzLmhyZWYgPSByZXN0O1xuICAgICAgdGhpcy5wYXRobmFtZSA9IHNpbXBsZVBhdGhbMV07XG4gICAgICBpZiAoc2ltcGxlUGF0aFsyXSkge1xuICAgICAgICB0aGlzLnNlYXJjaCA9IHNpbXBsZVBhdGhbMl07XG4gICAgICAgIGlmIChwYXJzZVF1ZXJ5U3RyaW5nKSB7XG4gICAgICAgICAgdGhpcy5xdWVyeSA9IHF1ZXJ5c3RyaW5nLnBhcnNlKHRoaXMuc2VhcmNoLnN1YnN0cigxKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5xdWVyeSA9IHRoaXMuc2VhcmNoLnN1YnN0cigxKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChwYXJzZVF1ZXJ5U3RyaW5nKSB7XG4gICAgICAgIHRoaXMuc2VhcmNoID0gJyc7XG4gICAgICAgIHRoaXMucXVlcnkgPSB7fTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfVxuXG4gIHZhciBwcm90byA9IHByb3RvY29sUGF0dGVybi5leGVjKHJlc3QpO1xuICBpZiAocHJvdG8pIHtcbiAgICBwcm90byA9IHByb3RvWzBdO1xuICAgIHZhciBsb3dlclByb3RvID0gcHJvdG8udG9Mb3dlckNhc2UoKTtcbiAgICB0aGlzLnByb3RvY29sID0gbG93ZXJQcm90bztcbiAgICByZXN0ID0gcmVzdC5zdWJzdHIocHJvdG8ubGVuZ3RoKTtcbiAgfVxuXG4gIC8vIGZpZ3VyZSBvdXQgaWYgaXQncyBnb3QgYSBob3N0XG4gIC8vIHVzZXJAc2VydmVyIGlzICphbHdheXMqIGludGVycHJldGVkIGFzIGEgaG9zdG5hbWUsIGFuZCB1cmxcbiAgLy8gcmVzb2x1dGlvbiB3aWxsIHRyZWF0IC8vZm9vL2JhciBhcyBob3N0PWZvbyxwYXRoPWJhciBiZWNhdXNlIHRoYXQnc1xuICAvLyBob3cgdGhlIGJyb3dzZXIgcmVzb2x2ZXMgcmVsYXRpdmUgVVJMcy5cbiAgaWYgKHNsYXNoZXNEZW5vdGVIb3N0IHx8IHByb3RvIHx8IHJlc3QubWF0Y2goL15cXC9cXC9bXkBcXC9dK0BbXkBcXC9dKy8pKSB7XG4gICAgdmFyIHNsYXNoZXMgPSByZXN0LnN1YnN0cigwLCAyKSA9PT0gJy8vJztcbiAgICBpZiAoc2xhc2hlcyAmJiAhKHByb3RvICYmIGhvc3RsZXNzUHJvdG9jb2xbcHJvdG9dKSkge1xuICAgICAgcmVzdCA9IHJlc3Quc3Vic3RyKDIpO1xuICAgICAgdGhpcy5zbGFzaGVzID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWhvc3RsZXNzUHJvdG9jb2xbcHJvdG9dICYmXG4gICAgICAoc2xhc2hlcyB8fCAocHJvdG8gJiYgIXNsYXNoZWRQcm90b2NvbFtwcm90b10pKSkge1xuXG4gICAgLy8gdGhlcmUncyBhIGhvc3RuYW1lLlxuICAgIC8vIHRoZSBmaXJzdCBpbnN0YW5jZSBvZiAvLCA/LCA7LCBvciAjIGVuZHMgdGhlIGhvc3QuXG4gICAgLy9cbiAgICAvLyBJZiB0aGVyZSBpcyBhbiBAIGluIHRoZSBob3N0bmFtZSwgdGhlbiBub24taG9zdCBjaGFycyAqYXJlKiBhbGxvd2VkXG4gICAgLy8gdG8gdGhlIGxlZnQgb2YgdGhlIGxhc3QgQCBzaWduLCB1bmxlc3Mgc29tZSBob3N0LWVuZGluZyBjaGFyYWN0ZXJcbiAgICAvLyBjb21lcyAqYmVmb3JlKiB0aGUgQC1zaWduLlxuICAgIC8vIFVSTHMgYXJlIG9ibm94aW91cy5cbiAgICAvL1xuICAgIC8vIGV4OlxuICAgIC8vIGh0dHA6Ly9hQGJAYy8gPT4gdXNlcjphQGIgaG9zdDpjXG4gICAgLy8gaHR0cDovL2FAYj9AYyA9PiB1c2VyOmEgaG9zdDpjIHBhdGg6Lz9AY1xuXG4gICAgLy8gdjAuMTIgVE9ETyhpc2FhY3MpOiBUaGlzIGlzIG5vdCBxdWl0ZSBob3cgQ2hyb21lIGRvZXMgdGhpbmdzLlxuICAgIC8vIFJldmlldyBvdXIgdGVzdCBjYXNlIGFnYWluc3QgYnJvd3NlcnMgbW9yZSBjb21wcmVoZW5zaXZlbHkuXG5cbiAgICAvLyBmaW5kIHRoZSBmaXJzdCBpbnN0YW5jZSBvZiBhbnkgaG9zdEVuZGluZ0NoYXJzXG4gICAgdmFyIGhvc3RFbmQgPSAtMTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhvc3RFbmRpbmdDaGFycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGhlYyA9IHJlc3QuaW5kZXhPZihob3N0RW5kaW5nQ2hhcnNbaV0pO1xuICAgICAgaWYgKGhlYyAhPT0gLTEgJiYgKGhvc3RFbmQgPT09IC0xIHx8IGhlYyA8IGhvc3RFbmQpKVxuICAgICAgICBob3N0RW5kID0gaGVjO1xuICAgIH1cblxuICAgIC8vIGF0IHRoaXMgcG9pbnQsIGVpdGhlciB3ZSBoYXZlIGFuIGV4cGxpY2l0IHBvaW50IHdoZXJlIHRoZVxuICAgIC8vIGF1dGggcG9ydGlvbiBjYW5ub3QgZ28gcGFzdCwgb3IgdGhlIGxhc3QgQCBjaGFyIGlzIHRoZSBkZWNpZGVyLlxuICAgIHZhciBhdXRoLCBhdFNpZ247XG4gICAgaWYgKGhvc3RFbmQgPT09IC0xKSB7XG4gICAgICAvLyBhdFNpZ24gY2FuIGJlIGFueXdoZXJlLlxuICAgICAgYXRTaWduID0gcmVzdC5sYXN0SW5kZXhPZignQCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBhdFNpZ24gbXVzdCBiZSBpbiBhdXRoIHBvcnRpb24uXG4gICAgICAvLyBodHRwOi8vYUBiL2NAZCA9PiBob3N0OmIgYXV0aDphIHBhdGg6L2NAZFxuICAgICAgYXRTaWduID0gcmVzdC5sYXN0SW5kZXhPZignQCcsIGhvc3RFbmQpO1xuICAgIH1cblxuICAgIC8vIE5vdyB3ZSBoYXZlIGEgcG9ydGlvbiB3aGljaCBpcyBkZWZpbml0ZWx5IHRoZSBhdXRoLlxuICAgIC8vIFB1bGwgdGhhdCBvZmYuXG4gICAgaWYgKGF0U2lnbiAhPT0gLTEpIHtcbiAgICAgIGF1dGggPSByZXN0LnNsaWNlKDAsIGF0U2lnbik7XG4gICAgICByZXN0ID0gcmVzdC5zbGljZShhdFNpZ24gKyAxKTtcbiAgICAgIHRoaXMuYXV0aCA9IGRlY29kZVVSSUNvbXBvbmVudChhdXRoKTtcbiAgICB9XG5cbiAgICAvLyB0aGUgaG9zdCBpcyB0aGUgcmVtYWluaW5nIHRvIHRoZSBsZWZ0IG9mIHRoZSBmaXJzdCBub24taG9zdCBjaGFyXG4gICAgaG9zdEVuZCA9IC0xO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9uSG9zdENoYXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaGVjID0gcmVzdC5pbmRleE9mKG5vbkhvc3RDaGFyc1tpXSk7XG4gICAgICBpZiAoaGVjICE9PSAtMSAmJiAoaG9zdEVuZCA9PT0gLTEgfHwgaGVjIDwgaG9zdEVuZCkpXG4gICAgICAgIGhvc3RFbmQgPSBoZWM7XG4gICAgfVxuICAgIC8vIGlmIHdlIHN0aWxsIGhhdmUgbm90IGhpdCBpdCwgdGhlbiB0aGUgZW50aXJlIHRoaW5nIGlzIGEgaG9zdC5cbiAgICBpZiAoaG9zdEVuZCA9PT0gLTEpXG4gICAgICBob3N0RW5kID0gcmVzdC5sZW5ndGg7XG5cbiAgICB0aGlzLmhvc3QgPSByZXN0LnNsaWNlKDAsIGhvc3RFbmQpO1xuICAgIHJlc3QgPSByZXN0LnNsaWNlKGhvc3RFbmQpO1xuXG4gICAgLy8gcHVsbCBvdXQgcG9ydC5cbiAgICB0aGlzLnBhcnNlSG9zdCgpO1xuXG4gICAgLy8gd2UndmUgaW5kaWNhdGVkIHRoYXQgdGhlcmUgaXMgYSBob3N0bmFtZSxcbiAgICAvLyBzbyBldmVuIGlmIGl0J3MgZW1wdHksIGl0IGhhcyB0byBiZSBwcmVzZW50LlxuICAgIHRoaXMuaG9zdG5hbWUgPSB0aGlzLmhvc3RuYW1lIHx8ICcnO1xuXG4gICAgLy8gaWYgaG9zdG5hbWUgYmVnaW5zIHdpdGggWyBhbmQgZW5kcyB3aXRoIF1cbiAgICAvLyBhc3N1bWUgdGhhdCBpdCdzIGFuIElQdjYgYWRkcmVzcy5cbiAgICB2YXIgaXB2Nkhvc3RuYW1lID0gdGhpcy5ob3N0bmFtZVswXSA9PT0gJ1snICYmXG4gICAgICAgIHRoaXMuaG9zdG5hbWVbdGhpcy5ob3N0bmFtZS5sZW5ndGggLSAxXSA9PT0gJ10nO1xuXG4gICAgLy8gdmFsaWRhdGUgYSBsaXR0bGUuXG4gICAgaWYgKCFpcHY2SG9zdG5hbWUpIHtcbiAgICAgIHZhciBob3N0cGFydHMgPSB0aGlzLmhvc3RuYW1lLnNwbGl0KC9cXC4vKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gaG9zdHBhcnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgcGFydCA9IGhvc3RwYXJ0c1tpXTtcbiAgICAgICAgaWYgKCFwYXJ0KSBjb250aW51ZTtcbiAgICAgICAgaWYgKCFwYXJ0Lm1hdGNoKGhvc3RuYW1lUGFydFBhdHRlcm4pKSB7XG4gICAgICAgICAgdmFyIG5ld3BhcnQgPSAnJztcbiAgICAgICAgICBmb3IgKHZhciBqID0gMCwgayA9IHBhcnQubGVuZ3RoOyBqIDwgazsgaisrKSB7XG4gICAgICAgICAgICBpZiAocGFydC5jaGFyQ29kZUF0KGopID4gMTI3KSB7XG4gICAgICAgICAgICAgIC8vIHdlIHJlcGxhY2Ugbm9uLUFTQ0lJIGNoYXIgd2l0aCBhIHRlbXBvcmFyeSBwbGFjZWhvbGRlclxuICAgICAgICAgICAgICAvLyB3ZSBuZWVkIHRoaXMgdG8gbWFrZSBzdXJlIHNpemUgb2YgaG9zdG5hbWUgaXMgbm90XG4gICAgICAgICAgICAgIC8vIGJyb2tlbiBieSByZXBsYWNpbmcgbm9uLUFTQ0lJIGJ5IG5vdGhpbmdcbiAgICAgICAgICAgICAgbmV3cGFydCArPSAneCc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBuZXdwYXJ0ICs9IHBhcnRbal07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHdlIHRlc3QgYWdhaW4gd2l0aCBBU0NJSSBjaGFyIG9ubHlcbiAgICAgICAgICBpZiAoIW5ld3BhcnQubWF0Y2goaG9zdG5hbWVQYXJ0UGF0dGVybikpIHtcbiAgICAgICAgICAgIHZhciB2YWxpZFBhcnRzID0gaG9zdHBhcnRzLnNsaWNlKDAsIGkpO1xuICAgICAgICAgICAgdmFyIG5vdEhvc3QgPSBob3N0cGFydHMuc2xpY2UoaSArIDEpO1xuICAgICAgICAgICAgdmFyIGJpdCA9IHBhcnQubWF0Y2goaG9zdG5hbWVQYXJ0U3RhcnQpO1xuICAgICAgICAgICAgaWYgKGJpdCkge1xuICAgICAgICAgICAgICB2YWxpZFBhcnRzLnB1c2goYml0WzFdKTtcbiAgICAgICAgICAgICAgbm90SG9zdC51bnNoaWZ0KGJpdFsyXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobm90SG9zdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgcmVzdCA9ICcvJyArIG5vdEhvc3Quam9pbignLicpICsgcmVzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaG9zdG5hbWUgPSB2YWxpZFBhcnRzLmpvaW4oJy4nKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmhvc3RuYW1lLmxlbmd0aCA+IGhvc3RuYW1lTWF4TGVuKSB7XG4gICAgICB0aGlzLmhvc3RuYW1lID0gJyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGhvc3RuYW1lcyBhcmUgYWx3YXlzIGxvd2VyIGNhc2UuXG4gICAgICB0aGlzLmhvc3RuYW1lID0gdGhpcy5ob3N0bmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cblxuICAgIGlmICghaXB2Nkhvc3RuYW1lKSB7XG4gICAgICAvLyBJRE5BIFN1cHBvcnQ6IFJldHVybnMgYSBwdW55Y29kZWQgcmVwcmVzZW50YXRpb24gb2YgXCJkb21haW5cIi5cbiAgICAgIC8vIEl0IG9ubHkgY29udmVydHMgcGFydHMgb2YgdGhlIGRvbWFpbiBuYW1lIHRoYXRcbiAgICAgIC8vIGhhdmUgbm9uLUFTQ0lJIGNoYXJhY3RlcnMsIGkuZS4gaXQgZG9lc24ndCBtYXR0ZXIgaWZcbiAgICAgIC8vIHlvdSBjYWxsIGl0IHdpdGggYSBkb21haW4gdGhhdCBhbHJlYWR5IGlzIEFTQ0lJLW9ubHkuXG4gICAgICB0aGlzLmhvc3RuYW1lID0gcHVueWNvZGUudG9BU0NJSSh0aGlzLmhvc3RuYW1lKTtcbiAgICB9XG5cbiAgICB2YXIgcCA9IHRoaXMucG9ydCA/ICc6JyArIHRoaXMucG9ydCA6ICcnO1xuICAgIHZhciBoID0gdGhpcy5ob3N0bmFtZSB8fCAnJztcbiAgICB0aGlzLmhvc3QgPSBoICsgcDtcbiAgICB0aGlzLmhyZWYgKz0gdGhpcy5ob3N0O1xuXG4gICAgLy8gc3RyaXAgWyBhbmQgXSBmcm9tIHRoZSBob3N0bmFtZVxuICAgIC8vIHRoZSBob3N0IGZpZWxkIHN0aWxsIHJldGFpbnMgdGhlbSwgdGhvdWdoXG4gICAgaWYgKGlwdjZIb3N0bmFtZSkge1xuICAgICAgdGhpcy5ob3N0bmFtZSA9IHRoaXMuaG9zdG5hbWUuc3Vic3RyKDEsIHRoaXMuaG9zdG5hbWUubGVuZ3RoIC0gMik7XG4gICAgICBpZiAocmVzdFswXSAhPT0gJy8nKSB7XG4gICAgICAgIHJlc3QgPSAnLycgKyByZXN0O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIG5vdyByZXN0IGlzIHNldCB0byB0aGUgcG9zdC1ob3N0IHN0dWZmLlxuICAvLyBjaG9wIG9mZiBhbnkgZGVsaW0gY2hhcnMuXG4gIGlmICghdW5zYWZlUHJvdG9jb2xbbG93ZXJQcm90b10pIHtcblxuICAgIC8vIEZpcnN0LCBtYWtlIDEwMCUgc3VyZSB0aGF0IGFueSBcImF1dG9Fc2NhcGVcIiBjaGFycyBnZXRcbiAgICAvLyBlc2NhcGVkLCBldmVuIGlmIGVuY29kZVVSSUNvbXBvbmVudCBkb2Vzbid0IHRoaW5rIHRoZXlcbiAgICAvLyBuZWVkIHRvIGJlLlxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXV0b0VzY2FwZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBhZSA9IGF1dG9Fc2NhcGVbaV07XG4gICAgICBpZiAocmVzdC5pbmRleE9mKGFlKSA9PT0gLTEpXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgdmFyIGVzYyA9IGVuY29kZVVSSUNvbXBvbmVudChhZSk7XG4gICAgICBpZiAoZXNjID09PSBhZSkge1xuICAgICAgICBlc2MgPSBlc2NhcGUoYWUpO1xuICAgICAgfVxuICAgICAgcmVzdCA9IHJlc3Quc3BsaXQoYWUpLmpvaW4oZXNjKTtcbiAgICB9XG4gIH1cblxuXG4gIC8vIGNob3Agb2ZmIGZyb20gdGhlIHRhaWwgZmlyc3QuXG4gIHZhciBoYXNoID0gcmVzdC5pbmRleE9mKCcjJyk7XG4gIGlmIChoYXNoICE9PSAtMSkge1xuICAgIC8vIGdvdCBhIGZyYWdtZW50IHN0cmluZy5cbiAgICB0aGlzLmhhc2ggPSByZXN0LnN1YnN0cihoYXNoKTtcbiAgICByZXN0ID0gcmVzdC5zbGljZSgwLCBoYXNoKTtcbiAgfVxuICB2YXIgcW0gPSByZXN0LmluZGV4T2YoJz8nKTtcbiAgaWYgKHFtICE9PSAtMSkge1xuICAgIHRoaXMuc2VhcmNoID0gcmVzdC5zdWJzdHIocW0pO1xuICAgIHRoaXMucXVlcnkgPSByZXN0LnN1YnN0cihxbSArIDEpO1xuICAgIGlmIChwYXJzZVF1ZXJ5U3RyaW5nKSB7XG4gICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnlzdHJpbmcucGFyc2UodGhpcy5xdWVyeSk7XG4gICAgfVxuICAgIHJlc3QgPSByZXN0LnNsaWNlKDAsIHFtKTtcbiAgfSBlbHNlIGlmIChwYXJzZVF1ZXJ5U3RyaW5nKSB7XG4gICAgLy8gbm8gcXVlcnkgc3RyaW5nLCBidXQgcGFyc2VRdWVyeVN0cmluZyBzdGlsbCByZXF1ZXN0ZWRcbiAgICB0aGlzLnNlYXJjaCA9ICcnO1xuICAgIHRoaXMucXVlcnkgPSB7fTtcbiAgfVxuICBpZiAocmVzdCkgdGhpcy5wYXRobmFtZSA9IHJlc3Q7XG4gIGlmIChzbGFzaGVkUHJvdG9jb2xbbG93ZXJQcm90b10gJiZcbiAgICAgIHRoaXMuaG9zdG5hbWUgJiYgIXRoaXMucGF0aG5hbWUpIHtcbiAgICB0aGlzLnBhdGhuYW1lID0gJy8nO1xuICB9XG5cbiAgLy90byBzdXBwb3J0IGh0dHAucmVxdWVzdFxuICBpZiAodGhpcy5wYXRobmFtZSB8fCB0aGlzLnNlYXJjaCkge1xuICAgIHZhciBwID0gdGhpcy5wYXRobmFtZSB8fCAnJztcbiAgICB2YXIgcyA9IHRoaXMuc2VhcmNoIHx8ICcnO1xuICAgIHRoaXMucGF0aCA9IHAgKyBzO1xuICB9XG5cbiAgLy8gZmluYWxseSwgcmVjb25zdHJ1Y3QgdGhlIGhyZWYgYmFzZWQgb24gd2hhdCBoYXMgYmVlbiB2YWxpZGF0ZWQuXG4gIHRoaXMuaHJlZiA9IHRoaXMuZm9ybWF0KCk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLy8gZm9ybWF0IGEgcGFyc2VkIG9iamVjdCBpbnRvIGEgdXJsIHN0cmluZ1xuZnVuY3Rpb24gdXJsRm9ybWF0KG9iaikge1xuICAvLyBlbnN1cmUgaXQncyBhbiBvYmplY3QsIGFuZCBub3QgYSBzdHJpbmcgdXJsLlxuICAvLyBJZiBpdCdzIGFuIG9iaiwgdGhpcyBpcyBhIG5vLW9wLlxuICAvLyB0aGlzIHdheSwgeW91IGNhbiBjYWxsIHVybF9mb3JtYXQoKSBvbiBzdHJpbmdzXG4gIC8vIHRvIGNsZWFuIHVwIHBvdGVudGlhbGx5IHdvbmt5IHVybHMuXG4gIGlmICh1dGlsLmlzU3RyaW5nKG9iaikpIG9iaiA9IHVybFBhcnNlKG9iaik7XG4gIGlmICghKG9iaiBpbnN0YW5jZW9mIFVybCkpIHJldHVybiBVcmwucHJvdG90eXBlLmZvcm1hdC5jYWxsKG9iaik7XG4gIHJldHVybiBvYmouZm9ybWF0KCk7XG59XG5cblVybC5wcm90b3R5cGUuZm9ybWF0ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBhdXRoID0gdGhpcy5hdXRoIHx8ICcnO1xuICBpZiAoYXV0aCkge1xuICAgIGF1dGggPSBlbmNvZGVVUklDb21wb25lbnQoYXV0aCk7XG4gICAgYXV0aCA9IGF1dGgucmVwbGFjZSgvJTNBL2ksICc6Jyk7XG4gICAgYXV0aCArPSAnQCc7XG4gIH1cblxuICB2YXIgcHJvdG9jb2wgPSB0aGlzLnByb3RvY29sIHx8ICcnLFxuICAgICAgcGF0aG5hbWUgPSB0aGlzLnBhdGhuYW1lIHx8ICcnLFxuICAgICAgaGFzaCA9IHRoaXMuaGFzaCB8fCAnJyxcbiAgICAgIGhvc3QgPSBmYWxzZSxcbiAgICAgIHF1ZXJ5ID0gJyc7XG5cbiAgaWYgKHRoaXMuaG9zdCkge1xuICAgIGhvc3QgPSBhdXRoICsgdGhpcy5ob3N0O1xuICB9IGVsc2UgaWYgKHRoaXMuaG9zdG5hbWUpIHtcbiAgICBob3N0ID0gYXV0aCArICh0aGlzLmhvc3RuYW1lLmluZGV4T2YoJzonKSA9PT0gLTEgP1xuICAgICAgICB0aGlzLmhvc3RuYW1lIDpcbiAgICAgICAgJ1snICsgdGhpcy5ob3N0bmFtZSArICddJyk7XG4gICAgaWYgKHRoaXMucG9ydCkge1xuICAgICAgaG9zdCArPSAnOicgKyB0aGlzLnBvcnQ7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRoaXMucXVlcnkgJiZcbiAgICAgIHV0aWwuaXNPYmplY3QodGhpcy5xdWVyeSkgJiZcbiAgICAgIE9iamVjdC5rZXlzKHRoaXMucXVlcnkpLmxlbmd0aCkge1xuICAgIHF1ZXJ5ID0gcXVlcnlzdHJpbmcuc3RyaW5naWZ5KHRoaXMucXVlcnkpO1xuICB9XG5cbiAgdmFyIHNlYXJjaCA9IHRoaXMuc2VhcmNoIHx8IChxdWVyeSAmJiAoJz8nICsgcXVlcnkpKSB8fCAnJztcblxuICBpZiAocHJvdG9jb2wgJiYgcHJvdG9jb2wuc3Vic3RyKC0xKSAhPT0gJzonKSBwcm90b2NvbCArPSAnOic7XG5cbiAgLy8gb25seSB0aGUgc2xhc2hlZFByb3RvY29scyBnZXQgdGhlIC8vLiAgTm90IG1haWx0bzosIHhtcHA6LCBldGMuXG4gIC8vIHVubGVzcyB0aGV5IGhhZCB0aGVtIHRvIGJlZ2luIHdpdGguXG4gIGlmICh0aGlzLnNsYXNoZXMgfHxcbiAgICAgICghcHJvdG9jb2wgfHwgc2xhc2hlZFByb3RvY29sW3Byb3RvY29sXSkgJiYgaG9zdCAhPT0gZmFsc2UpIHtcbiAgICBob3N0ID0gJy8vJyArIChob3N0IHx8ICcnKTtcbiAgICBpZiAocGF0aG5hbWUgJiYgcGF0aG5hbWUuY2hhckF0KDApICE9PSAnLycpIHBhdGhuYW1lID0gJy8nICsgcGF0aG5hbWU7XG4gIH0gZWxzZSBpZiAoIWhvc3QpIHtcbiAgICBob3N0ID0gJyc7XG4gIH1cblxuICBpZiAoaGFzaCAmJiBoYXNoLmNoYXJBdCgwKSAhPT0gJyMnKSBoYXNoID0gJyMnICsgaGFzaDtcbiAgaWYgKHNlYXJjaCAmJiBzZWFyY2guY2hhckF0KDApICE9PSAnPycpIHNlYXJjaCA9ICc/JyArIHNlYXJjaDtcblxuICBwYXRobmFtZSA9IHBhdGhuYW1lLnJlcGxhY2UoL1s/I10vZywgZnVuY3Rpb24obWF0Y2gpIHtcbiAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KG1hdGNoKTtcbiAgfSk7XG4gIHNlYXJjaCA9IHNlYXJjaC5yZXBsYWNlKCcjJywgJyUyMycpO1xuXG4gIHJldHVybiBwcm90b2NvbCArIGhvc3QgKyBwYXRobmFtZSArIHNlYXJjaCArIGhhc2g7XG59O1xuXG5mdW5jdGlvbiB1cmxSZXNvbHZlKHNvdXJjZSwgcmVsYXRpdmUpIHtcbiAgcmV0dXJuIHVybFBhcnNlKHNvdXJjZSwgZmFsc2UsIHRydWUpLnJlc29sdmUocmVsYXRpdmUpO1xufVxuXG5VcmwucHJvdG90eXBlLnJlc29sdmUgPSBmdW5jdGlvbihyZWxhdGl2ZSkge1xuICByZXR1cm4gdGhpcy5yZXNvbHZlT2JqZWN0KHVybFBhcnNlKHJlbGF0aXZlLCBmYWxzZSwgdHJ1ZSkpLmZvcm1hdCgpO1xufTtcblxuZnVuY3Rpb24gdXJsUmVzb2x2ZU9iamVjdChzb3VyY2UsIHJlbGF0aXZlKSB7XG4gIGlmICghc291cmNlKSByZXR1cm4gcmVsYXRpdmU7XG4gIHJldHVybiB1cmxQYXJzZShzb3VyY2UsIGZhbHNlLCB0cnVlKS5yZXNvbHZlT2JqZWN0KHJlbGF0aXZlKTtcbn1cblxuVXJsLnByb3RvdHlwZS5yZXNvbHZlT2JqZWN0ID0gZnVuY3Rpb24ocmVsYXRpdmUpIHtcbiAgaWYgKHV0aWwuaXNTdHJpbmcocmVsYXRpdmUpKSB7XG4gICAgdmFyIHJlbCA9IG5ldyBVcmwoKTtcbiAgICByZWwucGFyc2UocmVsYXRpdmUsIGZhbHNlLCB0cnVlKTtcbiAgICByZWxhdGl2ZSA9IHJlbDtcbiAgfVxuXG4gIHZhciByZXN1bHQgPSBuZXcgVXJsKCk7XG4gIHZhciB0a2V5cyA9IE9iamVjdC5rZXlzKHRoaXMpO1xuICBmb3IgKHZhciB0ayA9IDA7IHRrIDwgdGtleXMubGVuZ3RoOyB0aysrKSB7XG4gICAgdmFyIHRrZXkgPSB0a2V5c1t0a107XG4gICAgcmVzdWx0W3RrZXldID0gdGhpc1t0a2V5XTtcbiAgfVxuXG4gIC8vIGhhc2ggaXMgYWx3YXlzIG92ZXJyaWRkZW4sIG5vIG1hdHRlciB3aGF0LlxuICAvLyBldmVuIGhyZWY9XCJcIiB3aWxsIHJlbW92ZSBpdC5cbiAgcmVzdWx0Lmhhc2ggPSByZWxhdGl2ZS5oYXNoO1xuXG4gIC8vIGlmIHRoZSByZWxhdGl2ZSB1cmwgaXMgZW1wdHksIHRoZW4gdGhlcmUncyBub3RoaW5nIGxlZnQgdG8gZG8gaGVyZS5cbiAgaWYgKHJlbGF0aXZlLmhyZWYgPT09ICcnKSB7XG4gICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIGhyZWZzIGxpa2UgLy9mb28vYmFyIGFsd2F5cyBjdXQgdG8gdGhlIHByb3RvY29sLlxuICBpZiAocmVsYXRpdmUuc2xhc2hlcyAmJiAhcmVsYXRpdmUucHJvdG9jb2wpIHtcbiAgICAvLyB0YWtlIGV2ZXJ5dGhpbmcgZXhjZXB0IHRoZSBwcm90b2NvbCBmcm9tIHJlbGF0aXZlXG4gICAgdmFyIHJrZXlzID0gT2JqZWN0LmtleXMocmVsYXRpdmUpO1xuICAgIGZvciAodmFyIHJrID0gMDsgcmsgPCBya2V5cy5sZW5ndGg7IHJrKyspIHtcbiAgICAgIHZhciBya2V5ID0gcmtleXNbcmtdO1xuICAgICAgaWYgKHJrZXkgIT09ICdwcm90b2NvbCcpXG4gICAgICAgIHJlc3VsdFtya2V5XSA9IHJlbGF0aXZlW3JrZXldO1xuICAgIH1cblxuICAgIC8vdXJsUGFyc2UgYXBwZW5kcyB0cmFpbGluZyAvIHRvIHVybHMgbGlrZSBodHRwOi8vd3d3LmV4YW1wbGUuY29tXG4gICAgaWYgKHNsYXNoZWRQcm90b2NvbFtyZXN1bHQucHJvdG9jb2xdICYmXG4gICAgICAgIHJlc3VsdC5ob3N0bmFtZSAmJiAhcmVzdWx0LnBhdGhuYW1lKSB7XG4gICAgICByZXN1bHQucGF0aCA9IHJlc3VsdC5wYXRobmFtZSA9ICcvJztcbiAgICB9XG5cbiAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgaWYgKHJlbGF0aXZlLnByb3RvY29sICYmIHJlbGF0aXZlLnByb3RvY29sICE9PSByZXN1bHQucHJvdG9jb2wpIHtcbiAgICAvLyBpZiBpdCdzIGEga25vd24gdXJsIHByb3RvY29sLCB0aGVuIGNoYW5naW5nXG4gICAgLy8gdGhlIHByb3RvY29sIGRvZXMgd2VpcmQgdGhpbmdzXG4gICAgLy8gZmlyc3QsIGlmIGl0J3Mgbm90IGZpbGU6LCB0aGVuIHdlIE1VU1QgaGF2ZSBhIGhvc3QsXG4gICAgLy8gYW5kIGlmIHRoZXJlIHdhcyBhIHBhdGhcbiAgICAvLyB0byBiZWdpbiB3aXRoLCB0aGVuIHdlIE1VU1QgaGF2ZSBhIHBhdGguXG4gICAgLy8gaWYgaXQgaXMgZmlsZTosIHRoZW4gdGhlIGhvc3QgaXMgZHJvcHBlZCxcbiAgICAvLyBiZWNhdXNlIHRoYXQncyBrbm93biB0byBiZSBob3N0bGVzcy5cbiAgICAvLyBhbnl0aGluZyBlbHNlIGlzIGFzc3VtZWQgdG8gYmUgYWJzb2x1dGUuXG4gICAgaWYgKCFzbGFzaGVkUHJvdG9jb2xbcmVsYXRpdmUucHJvdG9jb2xdKSB7XG4gICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHJlbGF0aXZlKTtcbiAgICAgIGZvciAodmFyIHYgPSAwOyB2IDwga2V5cy5sZW5ndGg7IHYrKykge1xuICAgICAgICB2YXIgayA9IGtleXNbdl07XG4gICAgICAgIHJlc3VsdFtrXSA9IHJlbGF0aXZlW2tdO1xuICAgICAgfVxuICAgICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHJlc3VsdC5wcm90b2NvbCA9IHJlbGF0aXZlLnByb3RvY29sO1xuICAgIGlmICghcmVsYXRpdmUuaG9zdCAmJiAhaG9zdGxlc3NQcm90b2NvbFtyZWxhdGl2ZS5wcm90b2NvbF0pIHtcbiAgICAgIHZhciByZWxQYXRoID0gKHJlbGF0aXZlLnBhdGhuYW1lIHx8ICcnKS5zcGxpdCgnLycpO1xuICAgICAgd2hpbGUgKHJlbFBhdGgubGVuZ3RoICYmICEocmVsYXRpdmUuaG9zdCA9IHJlbFBhdGguc2hpZnQoKSkpO1xuICAgICAgaWYgKCFyZWxhdGl2ZS5ob3N0KSByZWxhdGl2ZS5ob3N0ID0gJyc7XG4gICAgICBpZiAoIXJlbGF0aXZlLmhvc3RuYW1lKSByZWxhdGl2ZS5ob3N0bmFtZSA9ICcnO1xuICAgICAgaWYgKHJlbFBhdGhbMF0gIT09ICcnKSByZWxQYXRoLnVuc2hpZnQoJycpO1xuICAgICAgaWYgKHJlbFBhdGgubGVuZ3RoIDwgMikgcmVsUGF0aC51bnNoaWZ0KCcnKTtcbiAgICAgIHJlc3VsdC5wYXRobmFtZSA9IHJlbFBhdGguam9pbignLycpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQucGF0aG5hbWUgPSByZWxhdGl2ZS5wYXRobmFtZTtcbiAgICB9XG4gICAgcmVzdWx0LnNlYXJjaCA9IHJlbGF0aXZlLnNlYXJjaDtcbiAgICByZXN1bHQucXVlcnkgPSByZWxhdGl2ZS5xdWVyeTtcbiAgICByZXN1bHQuaG9zdCA9IHJlbGF0aXZlLmhvc3QgfHwgJyc7XG4gICAgcmVzdWx0LmF1dGggPSByZWxhdGl2ZS5hdXRoO1xuICAgIHJlc3VsdC5ob3N0bmFtZSA9IHJlbGF0aXZlLmhvc3RuYW1lIHx8IHJlbGF0aXZlLmhvc3Q7XG4gICAgcmVzdWx0LnBvcnQgPSByZWxhdGl2ZS5wb3J0O1xuICAgIC8vIHRvIHN1cHBvcnQgaHR0cC5yZXF1ZXN0XG4gICAgaWYgKHJlc3VsdC5wYXRobmFtZSB8fCByZXN1bHQuc2VhcmNoKSB7XG4gICAgICB2YXIgcCA9IHJlc3VsdC5wYXRobmFtZSB8fCAnJztcbiAgICAgIHZhciBzID0gcmVzdWx0LnNlYXJjaCB8fCAnJztcbiAgICAgIHJlc3VsdC5wYXRoID0gcCArIHM7XG4gICAgfVxuICAgIHJlc3VsdC5zbGFzaGVzID0gcmVzdWx0LnNsYXNoZXMgfHwgcmVsYXRpdmUuc2xhc2hlcztcbiAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgdmFyIGlzU291cmNlQWJzID0gKHJlc3VsdC5wYXRobmFtZSAmJiByZXN1bHQucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycpLFxuICAgICAgaXNSZWxBYnMgPSAoXG4gICAgICAgICAgcmVsYXRpdmUuaG9zdCB8fFxuICAgICAgICAgIHJlbGF0aXZlLnBhdGhuYW1lICYmIHJlbGF0aXZlLnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nXG4gICAgICApLFxuICAgICAgbXVzdEVuZEFicyA9IChpc1JlbEFicyB8fCBpc1NvdXJjZUFicyB8fFxuICAgICAgICAgICAgICAgICAgICAocmVzdWx0Lmhvc3QgJiYgcmVsYXRpdmUucGF0aG5hbWUpKSxcbiAgICAgIHJlbW92ZUFsbERvdHMgPSBtdXN0RW5kQWJzLFxuICAgICAgc3JjUGF0aCA9IHJlc3VsdC5wYXRobmFtZSAmJiByZXN1bHQucGF0aG5hbWUuc3BsaXQoJy8nKSB8fCBbXSxcbiAgICAgIHJlbFBhdGggPSByZWxhdGl2ZS5wYXRobmFtZSAmJiByZWxhdGl2ZS5wYXRobmFtZS5zcGxpdCgnLycpIHx8IFtdLFxuICAgICAgcHN5Y2hvdGljID0gcmVzdWx0LnByb3RvY29sICYmICFzbGFzaGVkUHJvdG9jb2xbcmVzdWx0LnByb3RvY29sXTtcblxuICAvLyBpZiB0aGUgdXJsIGlzIGEgbm9uLXNsYXNoZWQgdXJsLCB0aGVuIHJlbGF0aXZlXG4gIC8vIGxpbmtzIGxpa2UgLi4vLi4gc2hvdWxkIGJlIGFibGVcbiAgLy8gdG8gY3Jhd2wgdXAgdG8gdGhlIGhvc3RuYW1lLCBhcyB3ZWxsLiAgVGhpcyBpcyBzdHJhbmdlLlxuICAvLyByZXN1bHQucHJvdG9jb2wgaGFzIGFscmVhZHkgYmVlbiBzZXQgYnkgbm93LlxuICAvLyBMYXRlciBvbiwgcHV0IHRoZSBmaXJzdCBwYXRoIHBhcnQgaW50byB0aGUgaG9zdCBmaWVsZC5cbiAgaWYgKHBzeWNob3RpYykge1xuICAgIHJlc3VsdC5ob3N0bmFtZSA9ICcnO1xuICAgIHJlc3VsdC5wb3J0ID0gbnVsbDtcbiAgICBpZiAocmVzdWx0Lmhvc3QpIHtcbiAgICAgIGlmIChzcmNQYXRoWzBdID09PSAnJykgc3JjUGF0aFswXSA9IHJlc3VsdC5ob3N0O1xuICAgICAgZWxzZSBzcmNQYXRoLnVuc2hpZnQocmVzdWx0Lmhvc3QpO1xuICAgIH1cbiAgICByZXN1bHQuaG9zdCA9ICcnO1xuICAgIGlmIChyZWxhdGl2ZS5wcm90b2NvbCkge1xuICAgICAgcmVsYXRpdmUuaG9zdG5hbWUgPSBudWxsO1xuICAgICAgcmVsYXRpdmUucG9ydCA9IG51bGw7XG4gICAgICBpZiAocmVsYXRpdmUuaG9zdCkge1xuICAgICAgICBpZiAocmVsUGF0aFswXSA9PT0gJycpIHJlbFBhdGhbMF0gPSByZWxhdGl2ZS5ob3N0O1xuICAgICAgICBlbHNlIHJlbFBhdGgudW5zaGlmdChyZWxhdGl2ZS5ob3N0KTtcbiAgICAgIH1cbiAgICAgIHJlbGF0aXZlLmhvc3QgPSBudWxsO1xuICAgIH1cbiAgICBtdXN0RW5kQWJzID0gbXVzdEVuZEFicyAmJiAocmVsUGF0aFswXSA9PT0gJycgfHwgc3JjUGF0aFswXSA9PT0gJycpO1xuICB9XG5cbiAgaWYgKGlzUmVsQWJzKSB7XG4gICAgLy8gaXQncyBhYnNvbHV0ZS5cbiAgICByZXN1bHQuaG9zdCA9IChyZWxhdGl2ZS5ob3N0IHx8IHJlbGF0aXZlLmhvc3QgPT09ICcnKSA/XG4gICAgICAgICAgICAgICAgICByZWxhdGl2ZS5ob3N0IDogcmVzdWx0Lmhvc3Q7XG4gICAgcmVzdWx0Lmhvc3RuYW1lID0gKHJlbGF0aXZlLmhvc3RuYW1lIHx8IHJlbGF0aXZlLmhvc3RuYW1lID09PSAnJykgP1xuICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlLmhvc3RuYW1lIDogcmVzdWx0Lmhvc3RuYW1lO1xuICAgIHJlc3VsdC5zZWFyY2ggPSByZWxhdGl2ZS5zZWFyY2g7XG4gICAgcmVzdWx0LnF1ZXJ5ID0gcmVsYXRpdmUucXVlcnk7XG4gICAgc3JjUGF0aCA9IHJlbFBhdGg7XG4gICAgLy8gZmFsbCB0aHJvdWdoIHRvIHRoZSBkb3QtaGFuZGxpbmcgYmVsb3cuXG4gIH0gZWxzZSBpZiAocmVsUGF0aC5sZW5ndGgpIHtcbiAgICAvLyBpdCdzIHJlbGF0aXZlXG4gICAgLy8gdGhyb3cgYXdheSB0aGUgZXhpc3RpbmcgZmlsZSwgYW5kIHRha2UgdGhlIG5ldyBwYXRoIGluc3RlYWQuXG4gICAgaWYgKCFzcmNQYXRoKSBzcmNQYXRoID0gW107XG4gICAgc3JjUGF0aC5wb3AoKTtcbiAgICBzcmNQYXRoID0gc3JjUGF0aC5jb25jYXQocmVsUGF0aCk7XG4gICAgcmVzdWx0LnNlYXJjaCA9IHJlbGF0aXZlLnNlYXJjaDtcbiAgICByZXN1bHQucXVlcnkgPSByZWxhdGl2ZS5xdWVyeTtcbiAgfSBlbHNlIGlmICghdXRpbC5pc051bGxPclVuZGVmaW5lZChyZWxhdGl2ZS5zZWFyY2gpKSB7XG4gICAgLy8ganVzdCBwdWxsIG91dCB0aGUgc2VhcmNoLlxuICAgIC8vIGxpa2UgaHJlZj0nP2ZvbycuXG4gICAgLy8gUHV0IHRoaXMgYWZ0ZXIgdGhlIG90aGVyIHR3byBjYXNlcyBiZWNhdXNlIGl0IHNpbXBsaWZpZXMgdGhlIGJvb2xlYW5zXG4gICAgaWYgKHBzeWNob3RpYykge1xuICAgICAgcmVzdWx0Lmhvc3RuYW1lID0gcmVzdWx0Lmhvc3QgPSBzcmNQYXRoLnNoaWZ0KCk7XG4gICAgICAvL29jY2F0aW9uYWx5IHRoZSBhdXRoIGNhbiBnZXQgc3R1Y2sgb25seSBpbiBob3N0XG4gICAgICAvL3RoaXMgZXNwZWNpYWxseSBoYXBwZW5zIGluIGNhc2VzIGxpa2VcbiAgICAgIC8vdXJsLnJlc29sdmVPYmplY3QoJ21haWx0bzpsb2NhbDFAZG9tYWluMScsICdsb2NhbDJAZG9tYWluMicpXG4gICAgICB2YXIgYXV0aEluSG9zdCA9IHJlc3VsdC5ob3N0ICYmIHJlc3VsdC5ob3N0LmluZGV4T2YoJ0AnKSA+IDAgP1xuICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuaG9zdC5zcGxpdCgnQCcpIDogZmFsc2U7XG4gICAgICBpZiAoYXV0aEluSG9zdCkge1xuICAgICAgICByZXN1bHQuYXV0aCA9IGF1dGhJbkhvc3Quc2hpZnQoKTtcbiAgICAgICAgcmVzdWx0Lmhvc3QgPSByZXN1bHQuaG9zdG5hbWUgPSBhdXRoSW5Ib3N0LnNoaWZ0KCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJlc3VsdC5zZWFyY2ggPSByZWxhdGl2ZS5zZWFyY2g7XG4gICAgcmVzdWx0LnF1ZXJ5ID0gcmVsYXRpdmUucXVlcnk7XG4gICAgLy90byBzdXBwb3J0IGh0dHAucmVxdWVzdFxuICAgIGlmICghdXRpbC5pc051bGwocmVzdWx0LnBhdGhuYW1lKSB8fCAhdXRpbC5pc051bGwocmVzdWx0LnNlYXJjaCkpIHtcbiAgICAgIHJlc3VsdC5wYXRoID0gKHJlc3VsdC5wYXRobmFtZSA/IHJlc3VsdC5wYXRobmFtZSA6ICcnKSArXG4gICAgICAgICAgICAgICAgICAgIChyZXN1bHQuc2VhcmNoID8gcmVzdWx0LnNlYXJjaCA6ICcnKTtcbiAgICB9XG4gICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGlmICghc3JjUGF0aC5sZW5ndGgpIHtcbiAgICAvLyBubyBwYXRoIGF0IGFsbC4gIGVhc3kuXG4gICAgLy8gd2UndmUgYWxyZWFkeSBoYW5kbGVkIHRoZSBvdGhlciBzdHVmZiBhYm92ZS5cbiAgICByZXN1bHQucGF0aG5hbWUgPSBudWxsO1xuICAgIC8vdG8gc3VwcG9ydCBodHRwLnJlcXVlc3RcbiAgICBpZiAocmVzdWx0LnNlYXJjaCkge1xuICAgICAgcmVzdWx0LnBhdGggPSAnLycgKyByZXN1bHQuc2VhcmNoO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQucGF0aCA9IG51bGw7XG4gICAgfVxuICAgIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyBpZiBhIHVybCBFTkRzIGluIC4gb3IgLi4sIHRoZW4gaXQgbXVzdCBnZXQgYSB0cmFpbGluZyBzbGFzaC5cbiAgLy8gaG93ZXZlciwgaWYgaXQgZW5kcyBpbiBhbnl0aGluZyBlbHNlIG5vbi1zbGFzaHksXG4gIC8vIHRoZW4gaXQgbXVzdCBOT1QgZ2V0IGEgdHJhaWxpbmcgc2xhc2guXG4gIHZhciBsYXN0ID0gc3JjUGF0aC5zbGljZSgtMSlbMF07XG4gIHZhciBoYXNUcmFpbGluZ1NsYXNoID0gKFxuICAgICAgKHJlc3VsdC5ob3N0IHx8IHJlbGF0aXZlLmhvc3QgfHwgc3JjUGF0aC5sZW5ndGggPiAxKSAmJlxuICAgICAgKGxhc3QgPT09ICcuJyB8fCBsYXN0ID09PSAnLi4nKSB8fCBsYXN0ID09PSAnJyk7XG5cbiAgLy8gc3RyaXAgc2luZ2xlIGRvdHMsIHJlc29sdmUgZG91YmxlIGRvdHMgdG8gcGFyZW50IGRpclxuICAvLyBpZiB0aGUgcGF0aCB0cmllcyB0byBnbyBhYm92ZSB0aGUgcm9vdCwgYHVwYCBlbmRzIHVwID4gMFxuICB2YXIgdXAgPSAwO1xuICBmb3IgKHZhciBpID0gc3JjUGF0aC5sZW5ndGg7IGkgPj0gMDsgaS0tKSB7XG4gICAgbGFzdCA9IHNyY1BhdGhbaV07XG4gICAgaWYgKGxhc3QgPT09ICcuJykge1xuICAgICAgc3JjUGF0aC5zcGxpY2UoaSwgMSk7XG4gICAgfSBlbHNlIGlmIChsYXN0ID09PSAnLi4nKSB7XG4gICAgICBzcmNQYXRoLnNwbGljZShpLCAxKTtcbiAgICAgIHVwKys7XG4gICAgfSBlbHNlIGlmICh1cCkge1xuICAgICAgc3JjUGF0aC5zcGxpY2UoaSwgMSk7XG4gICAgICB1cC0tO1xuICAgIH1cbiAgfVxuXG4gIC8vIGlmIHRoZSBwYXRoIGlzIGFsbG93ZWQgdG8gZ28gYWJvdmUgdGhlIHJvb3QsIHJlc3RvcmUgbGVhZGluZyAuLnNcbiAgaWYgKCFtdXN0RW5kQWJzICYmICFyZW1vdmVBbGxEb3RzKSB7XG4gICAgZm9yICg7IHVwLS07IHVwKSB7XG4gICAgICBzcmNQYXRoLnVuc2hpZnQoJy4uJyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKG11c3RFbmRBYnMgJiYgc3JjUGF0aFswXSAhPT0gJycgJiZcbiAgICAgICghc3JjUGF0aFswXSB8fCBzcmNQYXRoWzBdLmNoYXJBdCgwKSAhPT0gJy8nKSkge1xuICAgIHNyY1BhdGgudW5zaGlmdCgnJyk7XG4gIH1cblxuICBpZiAoaGFzVHJhaWxpbmdTbGFzaCAmJiAoc3JjUGF0aC5qb2luKCcvJykuc3Vic3RyKC0xKSAhPT0gJy8nKSkge1xuICAgIHNyY1BhdGgucHVzaCgnJyk7XG4gIH1cblxuICB2YXIgaXNBYnNvbHV0ZSA9IHNyY1BhdGhbMF0gPT09ICcnIHx8XG4gICAgICAoc3JjUGF0aFswXSAmJiBzcmNQYXRoWzBdLmNoYXJBdCgwKSA9PT0gJy8nKTtcblxuICAvLyBwdXQgdGhlIGhvc3QgYmFja1xuICBpZiAocHN5Y2hvdGljKSB7XG4gICAgcmVzdWx0Lmhvc3RuYW1lID0gcmVzdWx0Lmhvc3QgPSBpc0Fic29sdXRlID8gJycgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjUGF0aC5sZW5ndGggPyBzcmNQYXRoLnNoaWZ0KCkgOiAnJztcbiAgICAvL29jY2F0aW9uYWx5IHRoZSBhdXRoIGNhbiBnZXQgc3R1Y2sgb25seSBpbiBob3N0XG4gICAgLy90aGlzIGVzcGVjaWFsbHkgaGFwcGVucyBpbiBjYXNlcyBsaWtlXG4gICAgLy91cmwucmVzb2x2ZU9iamVjdCgnbWFpbHRvOmxvY2FsMUBkb21haW4xJywgJ2xvY2FsMkBkb21haW4yJylcbiAgICB2YXIgYXV0aEluSG9zdCA9IHJlc3VsdC5ob3N0ICYmIHJlc3VsdC5ob3N0LmluZGV4T2YoJ0AnKSA+IDAgP1xuICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lmhvc3Quc3BsaXQoJ0AnKSA6IGZhbHNlO1xuICAgIGlmIChhdXRoSW5Ib3N0KSB7XG4gICAgICByZXN1bHQuYXV0aCA9IGF1dGhJbkhvc3Quc2hpZnQoKTtcbiAgICAgIHJlc3VsdC5ob3N0ID0gcmVzdWx0Lmhvc3RuYW1lID0gYXV0aEluSG9zdC5zaGlmdCgpO1xuICAgIH1cbiAgfVxuXG4gIG11c3RFbmRBYnMgPSBtdXN0RW5kQWJzIHx8IChyZXN1bHQuaG9zdCAmJiBzcmNQYXRoLmxlbmd0aCk7XG5cbiAgaWYgKG11c3RFbmRBYnMgJiYgIWlzQWJzb2x1dGUpIHtcbiAgICBzcmNQYXRoLnVuc2hpZnQoJycpO1xuICB9XG5cbiAgaWYgKCFzcmNQYXRoLmxlbmd0aCkge1xuICAgIHJlc3VsdC5wYXRobmFtZSA9IG51bGw7XG4gICAgcmVzdWx0LnBhdGggPSBudWxsO1xuICB9IGVsc2Uge1xuICAgIHJlc3VsdC5wYXRobmFtZSA9IHNyY1BhdGguam9pbignLycpO1xuICB9XG5cbiAgLy90byBzdXBwb3J0IHJlcXVlc3QuaHR0cFxuICBpZiAoIXV0aWwuaXNOdWxsKHJlc3VsdC5wYXRobmFtZSkgfHwgIXV0aWwuaXNOdWxsKHJlc3VsdC5zZWFyY2gpKSB7XG4gICAgcmVzdWx0LnBhdGggPSAocmVzdWx0LnBhdGhuYW1lID8gcmVzdWx0LnBhdGhuYW1lIDogJycpICtcbiAgICAgICAgICAgICAgICAgIChyZXN1bHQuc2VhcmNoID8gcmVzdWx0LnNlYXJjaCA6ICcnKTtcbiAgfVxuICByZXN1bHQuYXV0aCA9IHJlbGF0aXZlLmF1dGggfHwgcmVzdWx0LmF1dGg7XG4gIHJlc3VsdC5zbGFzaGVzID0gcmVzdWx0LnNsYXNoZXMgfHwgcmVsYXRpdmUuc2xhc2hlcztcbiAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5VcmwucHJvdG90eXBlLnBhcnNlSG9zdCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgaG9zdCA9IHRoaXMuaG9zdDtcbiAgdmFyIHBvcnQgPSBwb3J0UGF0dGVybi5leGVjKGhvc3QpO1xuICBpZiAocG9ydCkge1xuICAgIHBvcnQgPSBwb3J0WzBdO1xuICAgIGlmIChwb3J0ICE9PSAnOicpIHtcbiAgICAgIHRoaXMucG9ydCA9IHBvcnQuc3Vic3RyKDEpO1xuICAgIH1cbiAgICBob3N0ID0gaG9zdC5zdWJzdHIoMCwgaG9zdC5sZW5ndGggLSBwb3J0Lmxlbmd0aCk7XG4gIH1cbiAgaWYgKGhvc3QpIHRoaXMuaG9zdG5hbWUgPSBob3N0O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGlzU3RyaW5nOiBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4gdHlwZW9mKGFyZykgPT09ICdzdHJpbmcnO1xuICB9LFxuICBpc09iamVjdDogZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIHR5cGVvZihhcmcpID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG4gIH0sXG4gIGlzTnVsbDogZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcbiAgfSxcbiAgaXNOdWxsT3JVbmRlZmluZWQ6IGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiBhcmcgPT0gbnVsbDtcbiAgfVxufTtcbiIsIihmdW5jdGlvbihzZWxmKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBpZiAoc2VsZi5mZXRjaCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgdmFyIHN1cHBvcnQgPSB7XG4gICAgc2VhcmNoUGFyYW1zOiAnVVJMU2VhcmNoUGFyYW1zJyBpbiBzZWxmLFxuICAgIGl0ZXJhYmxlOiAnU3ltYm9sJyBpbiBzZWxmICYmICdpdGVyYXRvcicgaW4gU3ltYm9sLFxuICAgIGJsb2I6ICdGaWxlUmVhZGVyJyBpbiBzZWxmICYmICdCbG9iJyBpbiBzZWxmICYmIChmdW5jdGlvbigpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIG5ldyBCbG9iKClcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9KSgpLFxuICAgIGZvcm1EYXRhOiAnRm9ybURhdGEnIGluIHNlbGYsXG4gICAgYXJyYXlCdWZmZXI6ICdBcnJheUJ1ZmZlcicgaW4gc2VsZlxuICB9XG5cbiAgaWYgKHN1cHBvcnQuYXJyYXlCdWZmZXIpIHtcbiAgICB2YXIgdmlld0NsYXNzZXMgPSBbXG4gICAgICAnW29iamVjdCBJbnQ4QXJyYXldJyxcbiAgICAgICdbb2JqZWN0IFVpbnQ4QXJyYXldJyxcbiAgICAgICdbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XScsXG4gICAgICAnW29iamVjdCBJbnQxNkFycmF5XScsXG4gICAgICAnW29iamVjdCBVaW50MTZBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgSW50MzJBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgVWludDMyQXJyYXldJyxcbiAgICAgICdbb2JqZWN0IEZsb2F0MzJBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgRmxvYXQ2NEFycmF5XSdcbiAgICBdXG5cbiAgICB2YXIgaXNEYXRhVmlldyA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiBEYXRhVmlldy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihvYmopXG4gICAgfVxuXG4gICAgdmFyIGlzQXJyYXlCdWZmZXJWaWV3ID0gQXJyYXlCdWZmZXIuaXNWaWV3IHx8IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiB2aWV3Q2xhc3Nlcy5pbmRleE9mKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopKSA+IC0xXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lKSB7XG4gICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykge1xuICAgICAgbmFtZSA9IFN0cmluZyhuYW1lKVxuICAgIH1cbiAgICBpZiAoL1teYS16MC05XFwtIyQlJicqKy5cXF5fYHx+XS9pLnRlc3QobmFtZSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgY2hhcmFjdGVyIGluIGhlYWRlciBmaWVsZCBuYW1lJylcbiAgICB9XG4gICAgcmV0dXJuIG5hbWUudG9Mb3dlckNhc2UoKVxuICB9XG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplVmFsdWUodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgdmFsdWUgPSBTdHJpbmcodmFsdWUpXG4gICAgfVxuICAgIHJldHVybiB2YWx1ZVxuICB9XG5cbiAgLy8gQnVpbGQgYSBkZXN0cnVjdGl2ZSBpdGVyYXRvciBmb3IgdGhlIHZhbHVlIGxpc3RcbiAgZnVuY3Rpb24gaXRlcmF0b3JGb3IoaXRlbXMpIHtcbiAgICB2YXIgaXRlcmF0b3IgPSB7XG4gICAgICBuZXh0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gaXRlbXMuc2hpZnQoKVxuICAgICAgICByZXR1cm4ge2RvbmU6IHZhbHVlID09PSB1bmRlZmluZWQsIHZhbHVlOiB2YWx1ZX1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3VwcG9ydC5pdGVyYWJsZSkge1xuICAgICAgaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gaXRlcmF0b3JcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaXRlcmF0b3JcbiAgfVxuXG4gIGZ1bmN0aW9uIEhlYWRlcnMoaGVhZGVycykge1xuICAgIHRoaXMubWFwID0ge31cblxuICAgIGlmIChoZWFkZXJzIGluc3RhbmNlb2YgSGVhZGVycykge1xuICAgICAgaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIHZhbHVlKVxuICAgICAgfSwgdGhpcylcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaGVhZGVycykpIHtcbiAgICAgIGhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbihoZWFkZXIpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQoaGVhZGVyWzBdLCBoZWFkZXJbMV0pXG4gICAgICB9LCB0aGlzKVxuICAgIH0gZWxzZSBpZiAoaGVhZGVycykge1xuICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIGhlYWRlcnNbbmFtZV0pXG4gICAgICB9LCB0aGlzKVxuICAgIH1cbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgbmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSlcbiAgICB2YWx1ZSA9IG5vcm1hbGl6ZVZhbHVlKHZhbHVlKVxuICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMubWFwW25hbWVdXG4gICAgdGhpcy5tYXBbbmFtZV0gPSBvbGRWYWx1ZSA/IG9sZFZhbHVlKycsJyt2YWx1ZSA6IHZhbHVlXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgZGVsZXRlIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgbmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSlcbiAgICByZXR1cm4gdGhpcy5oYXMobmFtZSkgPyB0aGlzLm1hcFtuYW1lXSA6IG51bGxcbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAuaGFzT3duUHJvcGVydHkobm9ybWFsaXplTmFtZShuYW1lKSlcbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV0gPSBub3JtYWxpemVWYWx1ZSh2YWx1ZSlcbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbihjYWxsYmFjaywgdGhpc0FyZykge1xuICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcy5tYXApIHtcbiAgICAgIGlmICh0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHRoaXMubWFwW25hbWVdLCBuYW1lLCB0aGlzKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaXRlbXMgPSBbXVxuICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkgeyBpdGVtcy5wdXNoKG5hbWUpIH0pXG4gICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUudmFsdWVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGl0ZW1zID0gW11cbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHsgaXRlbXMucHVzaCh2YWx1ZSkgfSlcbiAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5lbnRyaWVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGl0ZW1zID0gW11cbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHsgaXRlbXMucHVzaChbbmFtZSwgdmFsdWVdKSB9KVxuICAgIHJldHVybiBpdGVyYXRvckZvcihpdGVtcylcbiAgfVxuXG4gIGlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7XG4gICAgSGVhZGVycy5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IEhlYWRlcnMucHJvdG90eXBlLmVudHJpZXNcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbnN1bWVkKGJvZHkpIHtcbiAgICBpZiAoYm9keS5ib2R5VXNlZCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpKVxuICAgIH1cbiAgICBib2R5LmJvZHlVc2VkID0gdHJ1ZVxuICB9XG5cbiAgZnVuY3Rpb24gZmlsZVJlYWRlclJlYWR5KHJlYWRlcikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzb2x2ZShyZWFkZXIucmVzdWx0KVxuICAgICAgfVxuICAgICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KHJlYWRlci5lcnJvcilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZEJsb2JBc0FycmF5QnVmZmVyKGJsb2IpIHtcbiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICAgIHZhciBwcm9taXNlID0gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcbiAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYilcbiAgICByZXR1cm4gcHJvbWlzZVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZEJsb2JBc1RleHQoYmxvYikge1xuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG4gICAgdmFyIHByb21pc2UgPSBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKVxuICAgIHJlYWRlci5yZWFkQXNUZXh0KGJsb2IpXG4gICAgcmV0dXJuIHByb21pc2VcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWRBcnJheUJ1ZmZlckFzVGV4dChidWYpIHtcbiAgICB2YXIgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1ZilcbiAgICB2YXIgY2hhcnMgPSBuZXcgQXJyYXkodmlldy5sZW5ndGgpXG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZpZXcubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNoYXJzW2ldID0gU3RyaW5nLmZyb21DaGFyQ29kZSh2aWV3W2ldKVxuICAgIH1cbiAgICByZXR1cm4gY2hhcnMuam9pbignJylcbiAgfVxuXG4gIGZ1bmN0aW9uIGJ1ZmZlckNsb25lKGJ1Zikge1xuICAgIGlmIChidWYuc2xpY2UpIHtcbiAgICAgIHJldHVybiBidWYuc2xpY2UoMClcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHZpZXcgPSBuZXcgVWludDhBcnJheShidWYuYnl0ZUxlbmd0aClcbiAgICAgIHZpZXcuc2V0KG5ldyBVaW50OEFycmF5KGJ1ZikpXG4gICAgICByZXR1cm4gdmlldy5idWZmZXJcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBCb2R5KCkge1xuICAgIHRoaXMuYm9keVVzZWQgPSBmYWxzZVxuXG4gICAgdGhpcy5faW5pdEJvZHkgPSBmdW5jdGlvbihib2R5KSB7XG4gICAgICB0aGlzLl9ib2R5SW5pdCA9IGJvZHlcbiAgICAgIGlmICghYm9keSkge1xuICAgICAgICB0aGlzLl9ib2R5VGV4dCA9ICcnXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHlcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5ibG9iICYmIEJsb2IucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUJsb2IgPSBib2R5XG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuZm9ybURhdGEgJiYgRm9ybURhdGEucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUZvcm1EYXRhID0gYm9keVxuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LnNlYXJjaFBhcmFtcyAmJiBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5LnRvU3RyaW5nKClcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlciAmJiBzdXBwb3J0LmJsb2IgJiYgaXNEYXRhVmlldyhib2R5KSkge1xuICAgICAgICB0aGlzLl9ib2R5QXJyYXlCdWZmZXIgPSBidWZmZXJDbG9uZShib2R5LmJ1ZmZlcilcbiAgICAgICAgLy8gSUUgMTAtMTEgY2FuJ3QgaGFuZGxlIGEgRGF0YVZpZXcgYm9keS5cbiAgICAgICAgdGhpcy5fYm9keUluaXQgPSBuZXcgQmxvYihbdGhpcy5fYm9keUFycmF5QnVmZmVyXSlcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlciAmJiAoQXJyYXlCdWZmZXIucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkgfHwgaXNBcnJheUJ1ZmZlclZpZXcoYm9keSkpKSB7XG4gICAgICAgIHRoaXMuX2JvZHlBcnJheUJ1ZmZlciA9IGJ1ZmZlckNsb25lKGJvZHkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vuc3VwcG9ydGVkIEJvZHlJbml0IHR5cGUnKVxuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCAndGV4dC9wbGFpbjtjaGFyc2V0PVVURi04JylcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QmxvYiAmJiB0aGlzLl9ib2R5QmxvYi50eXBlKSB7XG4gICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgdGhpcy5fYm9keUJsb2IudHlwZSlcbiAgICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LnNlYXJjaFBhcmFtcyAmJiBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9VVRGLTgnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN1cHBvcnQuYmxvYikge1xuICAgICAgdGhpcy5ibG9iID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpXG4gICAgICAgIGlmIChyZWplY3RlZCkge1xuICAgICAgICAgIHJldHVybiByZWplY3RlZFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5QmxvYilcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBCbG9iKFt0aGlzLl9ib2R5QXJyYXlCdWZmZXJdKSlcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgYmxvYicpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keVRleHRdKSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmFycmF5QnVmZmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICByZXR1cm4gY29uc3VtZWQodGhpcykgfHwgUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcilcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5ibG9iKCkudGhlbihyZWFkQmxvYkFzQXJyYXlCdWZmZXIpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnRleHQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpXG4gICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgcmV0dXJuIHJlamVjdGVkXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuICAgICAgICByZXR1cm4gcmVhZEJsb2JBc1RleHQodGhpcy5fYm9keUJsb2IpXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlYWRBcnJheUJ1ZmZlckFzVGV4dCh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIHRleHQnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3VwcG9ydC5mb3JtRGF0YSkge1xuICAgICAgdGhpcy5mb3JtRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihkZWNvZGUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5qc29uID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihKU09OLnBhcnNlKVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvLyBIVFRQIG1ldGhvZHMgd2hvc2UgY2FwaXRhbGl6YXRpb24gc2hvdWxkIGJlIG5vcm1hbGl6ZWRcbiAgdmFyIG1ldGhvZHMgPSBbJ0RFTEVURScsICdHRVQnLCAnSEVBRCcsICdPUFRJT05TJywgJ1BPU1QnLCAnUFVUJ11cblxuICBmdW5jdGlvbiBub3JtYWxpemVNZXRob2QobWV0aG9kKSB7XG4gICAgdmFyIHVwY2FzZWQgPSBtZXRob2QudG9VcHBlckNhc2UoKVxuICAgIHJldHVybiAobWV0aG9kcy5pbmRleE9mKHVwY2FzZWQpID4gLTEpID8gdXBjYXNlZCA6IG1ldGhvZFxuICB9XG5cbiAgZnVuY3Rpb24gUmVxdWVzdChpbnB1dCwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG4gICAgdmFyIGJvZHkgPSBvcHRpb25zLmJvZHlcblxuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIFJlcXVlc3QpIHtcbiAgICAgIGlmIChpbnB1dC5ib2R5VXNlZCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKVxuICAgICAgfVxuICAgICAgdGhpcy51cmwgPSBpbnB1dC51cmxcbiAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSBpbnB1dC5jcmVkZW50aWFsc1xuICAgICAgaWYgKCFvcHRpb25zLmhlYWRlcnMpIHtcbiAgICAgICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMoaW5wdXQuaGVhZGVycylcbiAgICAgIH1cbiAgICAgIHRoaXMubWV0aG9kID0gaW5wdXQubWV0aG9kXG4gICAgICB0aGlzLm1vZGUgPSBpbnB1dC5tb2RlXG4gICAgICBpZiAoIWJvZHkgJiYgaW5wdXQuX2JvZHlJbml0ICE9IG51bGwpIHtcbiAgICAgICAgYm9keSA9IGlucHV0Ll9ib2R5SW5pdFxuICAgICAgICBpbnB1dC5ib2R5VXNlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy51cmwgPSBTdHJpbmcoaW5wdXQpXG4gICAgfVxuXG4gICAgdGhpcy5jcmVkZW50aWFscyA9IG9wdGlvbnMuY3JlZGVudGlhbHMgfHwgdGhpcy5jcmVkZW50aWFscyB8fCAnb21pdCdcbiAgICBpZiAob3B0aW9ucy5oZWFkZXJzIHx8ICF0aGlzLmhlYWRlcnMpIHtcbiAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycylcbiAgICB9XG4gICAgdGhpcy5tZXRob2QgPSBub3JtYWxpemVNZXRob2Qob3B0aW9ucy5tZXRob2QgfHwgdGhpcy5tZXRob2QgfHwgJ0dFVCcpXG4gICAgdGhpcy5tb2RlID0gb3B0aW9ucy5tb2RlIHx8IHRoaXMubW9kZSB8fCBudWxsXG4gICAgdGhpcy5yZWZlcnJlciA9IG51bGxcblxuICAgIGlmICgodGhpcy5tZXRob2QgPT09ICdHRVQnIHx8IHRoaXMubWV0aG9kID09PSAnSEVBRCcpICYmIGJvZHkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JvZHkgbm90IGFsbG93ZWQgZm9yIEdFVCBvciBIRUFEIHJlcXVlc3RzJylcbiAgICB9XG4gICAgdGhpcy5faW5pdEJvZHkoYm9keSlcbiAgfVxuXG4gIFJlcXVlc3QucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBSZXF1ZXN0KHRoaXMsIHsgYm9keTogdGhpcy5fYm9keUluaXQgfSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlY29kZShib2R5KSB7XG4gICAgdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKVxuICAgIGJvZHkudHJpbSgpLnNwbGl0KCcmJykuZm9yRWFjaChmdW5jdGlvbihieXRlcykge1xuICAgICAgaWYgKGJ5dGVzKSB7XG4gICAgICAgIHZhciBzcGxpdCA9IGJ5dGVzLnNwbGl0KCc9JylcbiAgICAgICAgdmFyIG5hbWUgPSBzcGxpdC5zaGlmdCgpLnJlcGxhY2UoL1xcKy9nLCAnICcpXG4gICAgICAgIHZhciB2YWx1ZSA9IHNwbGl0LmpvaW4oJz0nKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuICAgICAgICBmb3JtLmFwcGVuZChkZWNvZGVVUklDb21wb25lbnQobmFtZSksIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gZm9ybVxuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2VIZWFkZXJzKHJhd0hlYWRlcnMpIHtcbiAgICB2YXIgaGVhZGVycyA9IG5ldyBIZWFkZXJzKClcbiAgICAvLyBSZXBsYWNlIGluc3RhbmNlcyBvZiBcXHJcXG4gYW5kIFxcbiBmb2xsb3dlZCBieSBhdCBsZWFzdCBvbmUgc3BhY2Ugb3IgaG9yaXpvbnRhbCB0YWIgd2l0aCBhIHNwYWNlXG4gICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzcyMzAjc2VjdGlvbi0zLjJcbiAgICB2YXIgcHJlUHJvY2Vzc2VkSGVhZGVycyA9IHJhd0hlYWRlcnMucmVwbGFjZSgvXFxyP1xcbltcXHQgXSsvZywgJyAnKVxuICAgIHByZVByb2Nlc3NlZEhlYWRlcnMuc3BsaXQoL1xccj9cXG4vKS5mb3JFYWNoKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIHZhciBwYXJ0cyA9IGxpbmUuc3BsaXQoJzonKVxuICAgICAgdmFyIGtleSA9IHBhcnRzLnNoaWZ0KCkudHJpbSgpXG4gICAgICBpZiAoa2V5KSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHBhcnRzLmpvaW4oJzonKS50cmltKClcbiAgICAgICAgaGVhZGVycy5hcHBlbmQoa2V5LCB2YWx1ZSlcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBoZWFkZXJzXG4gIH1cblxuICBCb2R5LmNhbGwoUmVxdWVzdC5wcm90b3R5cGUpXG5cbiAgZnVuY3Rpb24gUmVzcG9uc2UoYm9keUluaXQsIG9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSB7fVxuICAgIH1cblxuICAgIHRoaXMudHlwZSA9ICdkZWZhdWx0J1xuICAgIHRoaXMuc3RhdHVzID0gb3B0aW9ucy5zdGF0dXMgPT09IHVuZGVmaW5lZCA/IDIwMCA6IG9wdGlvbnMuc3RhdHVzXG4gICAgdGhpcy5vayA9IHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDMwMFxuICAgIHRoaXMuc3RhdHVzVGV4dCA9ICdzdGF0dXNUZXh0JyBpbiBvcHRpb25zID8gb3B0aW9ucy5zdGF0dXNUZXh0IDogJ09LJ1xuICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycylcbiAgICB0aGlzLnVybCA9IG9wdGlvbnMudXJsIHx8ICcnXG4gICAgdGhpcy5faW5pdEJvZHkoYm9keUluaXQpXG4gIH1cblxuICBCb2R5LmNhbGwoUmVzcG9uc2UucHJvdG90eXBlKVxuXG4gIFJlc3BvbnNlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgUmVzcG9uc2UodGhpcy5fYm9keUluaXQsIHtcbiAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXG4gICAgICBzdGF0dXNUZXh0OiB0aGlzLnN0YXR1c1RleHQsXG4gICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpLFxuICAgICAgdXJsOiB0aGlzLnVybFxuICAgIH0pXG4gIH1cblxuICBSZXNwb25zZS5lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZXNwb25zZSA9IG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiAwLCBzdGF0dXNUZXh0OiAnJ30pXG4gICAgcmVzcG9uc2UudHlwZSA9ICdlcnJvcidcbiAgICByZXR1cm4gcmVzcG9uc2VcbiAgfVxuXG4gIHZhciByZWRpcmVjdFN0YXR1c2VzID0gWzMwMSwgMzAyLCAzMDMsIDMwNywgMzA4XVxuXG4gIFJlc3BvbnNlLnJlZGlyZWN0ID0gZnVuY3Rpb24odXJsLCBzdGF0dXMpIHtcbiAgICBpZiAocmVkaXJlY3RTdGF0dXNlcy5pbmRleE9mKHN0YXR1cykgPT09IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCBzdGF0dXMgY29kZScpXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiBzdGF0dXMsIGhlYWRlcnM6IHtsb2NhdGlvbjogdXJsfX0pXG4gIH1cblxuICBzZWxmLkhlYWRlcnMgPSBIZWFkZXJzXG4gIHNlbGYuUmVxdWVzdCA9IFJlcXVlc3RcbiAgc2VsZi5SZXNwb25zZSA9IFJlc3BvbnNlXG5cbiAgc2VsZi5mZXRjaCA9IGZ1bmN0aW9uKGlucHV0LCBpbml0KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgUmVxdWVzdChpbnB1dCwgaW5pdClcbiAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuXG4gICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgIHN0YXR1czogeGhyLnN0YXR1cyxcbiAgICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dCxcbiAgICAgICAgICBoZWFkZXJzOiBwYXJzZUhlYWRlcnMoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpIHx8ICcnKVxuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMudXJsID0gJ3Jlc3BvbnNlVVJMJyBpbiB4aHIgPyB4aHIucmVzcG9uc2VVUkwgOiBvcHRpb25zLmhlYWRlcnMuZ2V0KCdYLVJlcXVlc3QtVVJMJylcbiAgICAgICAgdmFyIGJvZHkgPSAncmVzcG9uc2UnIGluIHhociA/IHhoci5yZXNwb25zZSA6IHhoci5yZXNwb25zZVRleHRcbiAgICAgICAgcmVzb2x2ZShuZXcgUmVzcG9uc2UoYm9keSwgb3B0aW9ucykpXG4gICAgICB9XG5cbiAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpXG4gICAgICB9XG5cbiAgICAgIHhoci5vbnRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSlcbiAgICAgIH1cblxuICAgICAgeGhyLm9wZW4ocmVxdWVzdC5tZXRob2QsIHJlcXVlc3QudXJsLCB0cnVlKVxuXG4gICAgICBpZiAocmVxdWVzdC5jcmVkZW50aWFscyA9PT0gJ2luY2x1ZGUnKSB7XG4gICAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlXG4gICAgICB9IGVsc2UgaWYgKHJlcXVlc3QuY3JlZGVudGlhbHMgPT09ICdvbWl0Jykge1xuICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gZmFsc2VcbiAgICAgIH1cblxuICAgICAgaWYgKCdyZXNwb25zZVR5cGUnIGluIHhociAmJiBzdXBwb3J0LmJsb2IpIHtcbiAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJ1xuICAgICAgfVxuXG4gICAgICByZXF1ZXN0LmhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihuYW1lLCB2YWx1ZSlcbiAgICAgIH0pXG5cbiAgICAgIHhoci5zZW5kKHR5cGVvZiByZXF1ZXN0Ll9ib2R5SW5pdCA9PT0gJ3VuZGVmaW5lZCcgPyBudWxsIDogcmVxdWVzdC5fYm9keUluaXQpXG4gICAgfSlcbiAgfVxuICBzZWxmLmZldGNoLnBvbHlmaWxsID0gdHJ1ZVxufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFBvbHlmaWxscyBmb3IgVVJMKCkgYW5kIFVSTFNlYXJjaFBhcmFtcygpXG4gKiBBbHNvIHBvbHlmaWxsIFVSTCBvYmplY3QgaWYgdXJsLnNlYXJjaFBhcmFtcygpIGlzIG5vdCBzdXBwb3J0ZWRcbiAqXG4gKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9VUkwvc2VhcmNoUGFyYW1zI0Jyb3dzZXJfY29tcGF0aWJpbGl0eVxuICovXG5pZiAoXG4gIHR5cGVvZiBVUkwgPT09ICd1bmRlZmluZWQnIHx8XG4gIHR5cGVvZiBVUkxTZWFyY2hQYXJhbXMgPT09ICd1bmRlZmluZWQnIHx8XG4gIChVUkwgJiYgIVVSTC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoJ3NlYXJjaFBhcmFtcycpKVxuKSB7XG4gIHJlcXVpcmUoJ3VybC1wb2x5ZmlsbCcpO1xufVxuXG4vLyBQcm9taXNlIHBvbHlmaWxsXG5pZiAodHlwZW9mIFByb21pc2UgPT09ICd1bmRlZmluZWQnKSB7XG4gIHJlcXVpcmUoJ3Byb21pc2UvbGliL3JlamVjdGlvbi10cmFja2luZycpLmVuYWJsZSgpO1xuICB3aW5kb3cuUHJvbWlzZSA9IHJlcXVpcmUoJ3Byb21pc2UvbGliL2VzNi1leHRlbnNpb25zLmpzJyk7XG59XG5cbi8vIGZldGNoKCkgcG9seWZpbGwgZm9yIG1ha2luZyBBUEkgY2FsbHMuXG5yZXF1aXJlKCd3aGF0d2ctZmV0Y2gnKTtcblxuLy8gT2JqZWN0LmFzc2lnbigpIHBvbHlmaWxsXG5yZXF1aXJlKCdjb3JlLWpzL2ZuL29iamVjdC9hc3NpZ24nKTtcblxuLy8gLmluY2x1ZGVzKCkgbWV0aG9kIGZvciBzdHJpbmcgYW5kIGFycmF5XG5yZXF1aXJlKCdjb3JlLWpzL2ZuL3N0cmluZy9pbmNsdWRlcycpO1xucmVxdWlyZSgnY29yZS1qcy9mbi9hcnJheS9pbmNsdWRlcycpO1xuXG4vLyBQb2x5ZmlsbCBmb3IgYXJyYXkgZGVzdHJ1Y3Rpb25cbnJlcXVpcmUoJ2NvcmUtanMvZm4vYXJyYXkvZnJvbScpO1xuIiwiaW1wb3J0IEVtaXR0ZXIgZnJvbSAnY29tcG9uZW50LWVtaXR0ZXInO1xuaW1wb3J0IHsgZ2V0IGFzIGdldElEQiwgc2V0IGFzIHNldElEQiB9IGZyb20gJ2lkYi1rZXl2YWwnO1xuaW1wb3J0IHsgVUFQYXJzZXIgfSBmcm9tICcuL3RoaXJkX3BhcnR5L3VhLXBhcnNlcic7XG5pbXBvcnQgaXNQcml2YXRlTW9kZSBmcm9tICcuL3RoaXJkX3BhcnR5L2lzUHJpdmF0ZU1vZGUnO1xuXG4vLyBXZWIgUHVzaCBtb2R1bGVzXG5pbXBvcnQgaW5pdFNpbXBsZVB1c2ggZnJvbSAnLi93ZWJfcHVzaC9pbml0U2ltcGxlUHVzaCc7XG5pbXBvcnQgcmVnaXN0ZXJTZXJ2aWNlV29ya2VyIGZyb20gJy4vd2ViX3B1c2gvcmVnaXN0ZXJTZXJ2aWNlV29ya2VyJztcbmltcG9ydCBzaG91bGRFbmFibGVQdXNoIGZyb20gJy4vd2ViX3B1c2gvc2hvdWxkRW5hYmxlUHVzaCc7XG5pbXBvcnQgbG9hZE1hbmlmZXN0IGZyb20gJy4vd2ViX3B1c2gvbG9hZE1hbmlmZXN0JztcblxuLy8gUHVzaCBQcm9tcHRzIG1vZHVsZXNcbmltcG9ydCB7XG4gIG9wZW5PblN1YnNjcmliZWRQb3B1cCxcbiAgY2xvc2VPblN1YnNjcmliZWRQb3B1cCxcbiAgUE9QVVBfT1BFTkVEX0VWRU5ULFxuICBQT1BVUF9DTE9TRURfRVZFTlQsXG59IGZyb20gJy4vcHVzaF9wcm9tcHRzL29uX3N1YnNjcmliZWRfcG9wdXAnO1xuaW1wb3J0IHtcbiAgb3Blbk92ZXJsYXlQcm9tcHQsXG4gIGNsb3NlT3ZlcmxheVByb21wdCxcbn0gZnJvbSAnLi9wdXNoX3Byb21wdHMvb3ZlcmxheV9wcm9tcHQnO1xuaW1wb3J0IHsgb3BlbkZha2VQcm9tcHQsIGNsb3NlRmFrZVByb21wdCB9IGZyb20gJy4vcHVzaF9wcm9tcHRzL2Zha2VfcHJvbXB0JztcbmltcG9ydCB7IG9wZW5DeW1Qcm9tcHQgfSBmcm9tICcuL3B1c2hfcHJvbXB0cy9jeW1fcHJvbXB0JztcblxuLy8gSW4tV2ViIG1vZHVsZXNcbmltcG9ydCBmZXRjaEluV2ViRGF0YSBmcm9tICcuL2luX3dlYi9mZXRjaEluV2ViRGF0YSc7XG5pbXBvcnQgdHJpZ2dlckluV2ViQ2FtcGFpZ24gZnJvbSAnLi9pbl93ZWIvdHJpZ2dlckluV2ViQ2FtcGFpZ24nO1xuaW1wb3J0IGJpbmRFeGl0SW50ZW50SGFuZGxlciBmcm9tICcuL2luX3dlYi9leGl0SW50ZW50SGFuZGxlcic7XG5pbXBvcnQgYmluZFNjcm9sbFBlcmNlbnRIYW5kbGVyIGZyb20gJy4vaW5fd2ViL3Njcm9sbFBlcmNlbnRIYW5kbGVyJztcbmltcG9ydCBiaW5kSWRsZUhhbmRsZXIgZnJvbSAnLi9pbl93ZWIvaWRsZUhhbmRsZXInO1xuXG4vLyBSZWNvbW1lbmRhdGlvbiBtb2R1bGVzXG5pbXBvcnQge1xuICBnZXRSZWNvbW1lbmRhdGlvbldpdGhBcHAsXG4gIHNob3dSZWNvbW1lbmRhdGlvbldpdGhBcHAsXG59IGZyb20gJy4vcmVjb21tZW5kYXRpb24nO1xuXG4vLyBVdGlsaXRpZXNcbmltcG9ydCBsb2cgZnJvbSAnLi91dGlscy9sb2cnO1xuaW1wb3J0IGNvb2tpZSBmcm9tICcuL3V0aWxzL2Nvb2tpZSc7XG5pbXBvcnQge1xuICBnZXRBdHRyaWJ1dGlvbixcbiAgc2V0QXR0cmlidXRpb25WaWFVcmwsXG4gIG5hdmlnYXRlV2l0aEF0dHJpYnV0aW9uLFxuICBjb21wb3NlQXR0cmlidXRpb25FdmVudHMsXG59IGZyb20gJy4vdXRpbHMvYXR0cmlidXRpb24nO1xuaW1wb3J0IHsgZGlmZkRhdGVzSW5EYXlzIH0gZnJvbSAnLi91dGlscy9kYXRlcyc7XG5pbXBvcnQgcGFyc2VVdG1QYXJhbXMgZnJvbSAnLi91dGlscy9wYXJzZVV0bVBhcmFtcyc7XG5pbXBvcnQgbWFrZVJlcXVlc3QgZnJvbSAnLi91dGlscy9tYWtlUmVxdWVzdCc7XG5pbXBvcnQgeyBzZXRGaXJzdFRpbWVDb29raWUsIGdldEZpcnN0VGltZUNvb2tpZSB9IGZyb20gJy4vdXRpbHMvZmlyc3RfdGltZSc7XG5pbXBvcnQgeyBnZXRXVXNlcklkLCBzZXRXVXNlcklkIH0gZnJvbSAnLi91dGlscy91c2VyX2lkJztcbmltcG9ydCB7XG4gIFNFQVJDSF9QQVJBTVNfSURFTlRJRklFRF9LRVksXG4gIFNFQVJDSF9QQVJBTVNfTElORVVJRCxcbiAgU0VBUkNIX1BBUkFNU19MSU5FQ0hBTk5FTCxcbiAgREVGQVVMVF9TV19TQ09QRSxcbiAgSU5XRUJfREFUQV9MSUZFVElNRSxcbiAgSURCX1BVU0hfREVOSUVEX1RJTUVTVEFNUCxcbiAgSURCX0NZTVBfQUNLRUQsXG59IGZyb20gJy4vY29uc3RhbnRzJztcblxuY29uc3QgdWFQYXJzZXIgPSBVQVBhcnNlcigpO1xuY29uc3QgUUdfREFUQV9TRVRUSU5HUyA9ICdxZ2RhdGFzZXR0aW5ncyc7XG5jb25zdCBJU19TQUZBUklfQlJPV1NFUiA9IHVhUGFyc2VyLmJyb3dzZXIubmFtZVxuICAudG9Mb3dlckNhc2UoKVxuICAuaW5jbHVkZXMoJ3NhZmFyaScpO1xuXG5FbWl0dGVyKFFHLnByb3RvdHlwZSk7XG5cbnZhciBjb25zdGFudHMgPSB7XG4gIGlkZW50aWZpZWQ6ICdpZGVudGlmaWVkJyxcbiAgcWdfaWRlbnRpZmllZDogJ19xZ19pZGVudGlmaWVkJyxcbiAgZ2NtX3NlbmRlcl9pZDogJ3FnX2djbV9zZW5kZXJfaWQnLFxuICBQVVNIX1JFUVVFU1Q6ICdfcWdfcHVzaHJlcXVlc3QnLFxuICBDWU1QOiAnX3FnX2N5bXAnLFxuICBRR19EQVRBX05BTUU6ICdxZ19kYXRhJyxcbiAgLy8gT25seSB1c2VkIGZvciBsZWdhY3kgQVBJIGVuZHBvaW50XG4gIFFHX1FBSUQ6ICdfcWdfcWFpZCcsXG4gIFFHX0FQUElFUl9DTV9GTEFHOiAnX3FnX2NtJyxcbn07XG5cbmZ1bmN0aW9uIFFHKCkge1xuICB0aGlzLl9zZXR0aW5ncyA9IHt9O1xuICB0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XG4gIHRoaXMuaGVhZGVycyA9IHtcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICdQYWNrYWdlLU5hbWUnOiB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUsXG4gIH07XG59XG5cblFHLnByb3RvdHlwZS5jYWxsbWV0aG9kID0gZnVuY3Rpb24oYXJncykge1xuICBpZiAoIShhcmdzICYmIGFyZ3MubGVuZ3RoID4gMCkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBbbWV0aG9kLCAuLi5wYXJhbXNdID0gYXJncztcbiAgY29uc3QgeyBhcHBJZCB9ID0gdGhpcy5fc2V0dGluZ3M7XG5cbiAgc3dpdGNoIChtZXRob2QpIHtcbiAgICBjYXNlICdpbml0JzpcbiAgICAgIHJldHVybiB0aGlzLmluaXQoYXJnc1sxXSk7XG4gICAgY2FzZSAncHJvbXB0LXB1c2gnOlxuICAgICAgcmV0dXJuIHRoaXMucHJvbXB0UHVzaCgpO1xuICAgIGNhc2UgJ21lc3NhZ2UtcmVjZWl2ZWQnOlxuICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZVJlY2VpdmVkKGFyZ3NbMV0pO1xuICAgIGNhc2UgJ2lkZW50aWZ5JzpcbiAgICAgIHJldHVybiB0aGlzLmlkZW50aWZ5KGFyZ3NbMV0pO1xuICAgIGNhc2UgJ2V2ZW50Jzoge1xuICAgICAgdGhpcy5ldmVudHMoLi4ucGFyYW1zKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlICdxZ0V2ZW50Jzoge1xuICAgICAgdGhpcy5xZ0V2ZW50cyguLi5wYXJhbXMpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgJ2dldFJlY29tbWVuZGF0aW9uJzoge1xuICAgICAgZ2V0UmVjb21tZW5kYXRpb25XaXRoQXBwKGFwcElkKSguLi5wYXJhbXMpO1xuXG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSAnc2hvd1JlY29tbWVuZGF0aW9uJzoge1xuICAgICAgc2hvd1JlY29tbWVuZGF0aW9uV2l0aEFwcChhcHBJZCkoLi4ucGFyYW1zKTtcblxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgJ2Nsb3NlT25TdWJzY3JpYmVkUG9wdXAnOiB7XG4gICAgICBjbG9zZU9uU3Vic2NyaWJlZFBvcHVwKCgpID0+IHtcbiAgICAgICAgdGhpcy5lbWl0KFBPUFVQX0NMT1NFRF9FVkVOVCk7XG4gICAgICB9KTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxlZ2F0ZSBoYW5kbGVycyBvZiBldmVudCBlbWl0dGVyXG4gICAgICovXG4gICAgY2FzZSAnb24nOlxuICAgIGNhc2UgJ29uY2UnOlxuICAgIGNhc2UgJ29mZic6IHtcbiAgICAgIHRoaXNbbWV0aG9kXSguLi5wYXJhbXMpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIC8vIFR1cm4gb24gZGVidWcgbW9kZVxuICAgIGNhc2UgJ2RlYnVnJzoge1xuICAgICAgbG9nLmVuYWJsZUFsbCgpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgJ2dldEF0dHJpYnV0aW9uJzoge1xuICAgICAgZ2V0QXR0cmlidXRpb24oKS50aGVuKGFyZ3NbMV0pO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgJ25hdmlnYXRlV2l0aEF0dHJpYnV0aW9uJzoge1xuICAgICAgY29uc3QgdXJsU3RyV2l0aElkZW50aWZpZWQgPSBzZXRVcmxQYXJhbXNXaXRoSWRlbnRpZmllZChhcmdzWzFdKTtcbiAgICAgIG5hdmlnYXRlV2l0aEF0dHJpYnV0aW9uKHVybFN0cldpdGhJZGVudGlmaWVkKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBkZWZhdWx0OlxuICAgICAgbG9nLmVycm9yKCd1bmRlZmluZWQgbWV0aG9kJywgbWV0aG9kKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gdXBkYXRlRGF0YVNldHRpbmdzKGtleSwgdmFsdWUpIHtcbiAgdmFyIGQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShRR19EQVRBX1NFVFRJTkdTKTtcbiAgdHJ5IHtcbiAgICBkID0gSlNPTi5wYXJzZShkKSB8fCB7fTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgZCA9IHt9O1xuICAgIGxvZy5kZWJ1ZyhlcnIpO1xuICB9XG4gIGRba2V5XSA9IHZhbHVlO1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShRR19EQVRBX1NFVFRJTkdTLCBKU09OLnN0cmluZ2lmeShkKSk7XG59XG5cbi8qKlxuICogQ29va2llIHN5bmMgZm9yIEFwcGllci4gKE9ubHkgZm9yIGxlZ2FjeSBBUEkgZW5kcG9pbnQpXG4gKiBUaGUgc2FmYXJpIGJyb3dzZXIgZG9lcyBOT1Qgc3VwcG9ydCBjb29raWUgc3luYyBjdXJyZW50bHkoaW50ZWxsaWdlbnQgdHJhY2tpbmcgcHJldmVudGlvbilcbiAqIFNvIHdlIGRvbid0IGltcGxlbWVudCBjb29raWUgc3luYyBpbiBzYWZhcmkuanMgaW4gdGhpcyBzdGFnZS5cbiAqXG4gKiAjVE9ETzogUmVtb3ZlIGl0IHVudGlsIGFsbCB1c2VycyBtaWdyYXRlIHRvIHRoZSBhcHBpZXIgZGJhY2suXG4gKi9cbmZ1bmN0aW9uIGFwcGllckNvb2tpZVN5bmMocWcpIHtcbiAgaWYgKGNvb2tpZS5nZXRKU09OKGNvbnN0YW50cy5RR19BUFBJRVJfQ01fRkxBRykpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKiBkaXNhYmxlIGNvb2tpZSBtYXRjaGluZyBpbiAxIGhyICovXG4gIGNvb2tpZS5leFNldChjb25zdGFudHMuUUdfQVBQSUVSX0NNX0ZMQUcsIDEsIHsgbWF4YWdlOiAzNjAwICogMTAwMCB9KTtcblxuICAvKipcbiAgICogUE9TVCBtZXRob2Qgd2l0aCBodHRwIDMwMiByZWRpcmVjdGlvbiBtYXkgY2F1c2UgdW5kZWZpbmVkIGJlaGF2aW9yXG4gICAqIGh0dHBzOi8vemgud2lraXBlZGlhLm9yZy93aWtpL0hUVFBfMzAyXG4gICAqIGh0dHBzOi8vemgud2lraXBlZGlhLm9yZy93aWtpL0hUVFBfMzA3XG4gICAqL1xuICBtYWtlUmVxdWVzdCh7XG4gICAgdXJsOiBgJHtwcm9jZXNzLmVudi5MRUdBQ1lfQVBJX0hPU1QgfHwgJyd9L3dlYi9jbS9gLFxuICAgIG1ldGhvZDogJ0dFVCcsXG4gIH0pXG4gICAgLnRoZW4oZnVuY3Rpb24oeyBqc29uIH0pIHtcbiAgICAgIGxvZy5kZWJ1ZygnUmFuIEFwcGllciBjb29raWUgc3luYycsIGpzb24pO1xuICAgICAgY29uc3QgeyBxYWlkIH0gPSBqc29uIHx8IHt9O1xuICAgICAgaWYgKHFhaWQpIHtcbiAgICAgICAgcWcuX3NlbmREYXRhVG9TZXJ2ZXIoeyBwcm9maWxlczogeyBxZ19xYWlkOiBxYWlkIH0gfSlcbiAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8qIENvb2tpZSBzeW5jIGF0IG1vc3Qgb25lIHRpbWUgZWFjaCB0d28gd2Vla3MuICovXG4gICAgICAgICAgICBjb29raWUuZXhTZXQoY29uc3RhbnRzLlFHX0FQUElFUl9DTV9GTEFHLCAxLCB7XG4gICAgICAgICAgICAgIG1heGFnZTogODY0MDAgKiAxNCAqIDEwMDAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvb2tpZS5leFNldChjb25zdGFudHMuUUdfUUFJRCwgcWFpZCwgeyBtYXhhZ2U6IDMxNTM2MDAwMDAwIH0pOyAvLyAxIHllYXJcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGxvZy5lcnJvcignRmFpbGVkIHRvIHNhdmUgQXBwaWVyIGNvb2tpZSBzeW5jJywgZXJyKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KVxuICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgIGxvZy5lcnJvcignRmFpbGVkIHRvIHJ1biBBcHBpZXIgY29va2llIHN5bmMnLCBlcnIpO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIFNldCBgYWlxX2lkZW50aWZpZWRgIGluIHVybCdzIHNlYXJjaCBwYXJhbXNcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsU3RyXG4gKiBAcmV0dXJucyB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBzZXRVcmxQYXJhbXNXaXRoSWRlbnRpZmllZCh1cmxTdHIpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHVybFN0cik7XG4gICAgY29uc3QgcWdEYXRhU2V0dGluZ3MgPSBKU09OLnBhcnNlKFxuICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oUUdfREFUQV9TRVRUSU5HUykgfHwgJ3t9J1xuICAgICk7XG5cbiAgICBpZiAoXG4gICAgICBjb29raWUuZ2V0SlNPTihjb25zdGFudHMucWdfaWRlbnRpZmllZCkgfHxcbiAgICAgIHFnRGF0YVNldHRpbmdzW2NvbnN0YW50cy5pZGVudGlmaWVkXVxuICAgICkge1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoU0VBUkNIX1BBUkFNU19JREVOVElGSUVEX0tFWSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVybC50b1N0cmluZygpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBsb2cuZXJyb3IoJ1NldCB1cmwgcGFyYW1zIGVycm9yJywgZXJyKTtcbiAgfVxufVxuXG4vKipcbiAqIFNlbmQgZGF0YSB0byBzZXJ2ZXJcbiAqXG4gKiBAcGFyYW0ge1VybH0gZW5kcG9pbnRcbiAqIEBwYXJhbSB7SlNPTn0gZGF0YVxuICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gcnVuSW5TeW5jXG4gKiBAcmV0dXJucyB7UHJvbWlzZXx2b2lkfVxuICovXG5RRy5wcm90b3R5cGUuX3NlbmREYXRhVG9TZXJ2ZXIgPSBhc3luYyBmdW5jdGlvbihkYXRhLCBydW5JblN5bmMpIHtcbiAgZGF0YS53VXNlcklkID0gZ2V0V1VzZXJJZCgpO1xuICBkYXRhLmRldmljZSA9ICd3ZWInO1xuICBkYXRhLmN2ID0gJzEuOS4wJztcbiAgaWYgKGRhdGEgJiYgQXJyYXkuaXNBcnJheShkYXRhLmV2ZW50cykpIHtcbiAgICBkYXRhLmV2ZW50cyA9IGF3YWl0IGNvbXBvc2VBdHRyaWJ1dGlvbkV2ZW50cyhkYXRhLmV2ZW50cyk7XG4gIH1cbiAgY29uc3QgYXBpSG9zdCA9IHRoaXMuX3NldHRpbmdzLnVzZUxlZ2FjeUFQSVxuICAgID8gcHJvY2Vzcy5lbnYuTEVHQUNZX0FQSV9IT1NUXG4gICAgOiBwcm9jZXNzLmVudi5BUElfSE9TVDtcblxuICBjb25zdCByZXF1ZXN0T3B0cyA9IHtcbiAgICB1cmw6IGAke2FwaUhvc3R9L3dlYi8ke3RoaXMuX3NldHRpbmdzLmFwcElkfS9kYXRhL2AsXG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgIGRhdGEsXG4gIH07XG5cbiAgbG9nLmRlYnVnKCdTZW5kIGRhdGEgdG8gc2VydmVyJywgZGF0YSk7XG4gIHJldHVybiBtYWtlUmVxdWVzdChyZXF1ZXN0T3B0cywgcnVuSW5TeW5jKTtcbn07XG5cbi8qKlxuICogU2VuZCBkYXRhIHRvIHNlcnZlciBpbiBiYXRjaFxuICovXG5RRy5wcm90b3R5cGUuYmF0Y2ggPSBmdW5jdGlvbigpIHtcbiAgdmFyIGQgPSB0aGlzLmRhdGE7XG4gIGlmIChkLmV2ZW50cy5sZW5ndGggPT09IDAgJiYgT2JqZWN0LmtleXMoZC5wcm9maWxlcykubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChkLmV2ZW50cy5sZW5ndGggPT09IDApIHtcbiAgICBkZWxldGUgZC5ldmVudHM7XG4gIH1cbiAgaWYgKE9iamVjdC5rZXlzKGQucHJvZmlsZXMpLmxlbmd0aCA9PT0gMCkge1xuICAgIGRlbGV0ZSBkLnByb2ZpbGVzO1xuICB9XG4gIHRoaXMuZGF0YSA9IHsgcHJvZmlsZXM6IHt9LCBldmVudHM6IFtdIH07XG4gIHRoaXMuX3NlbmREYXRhVG9TZXJ2ZXIoZCkudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgbG9nLmRlYnVnKGRhdGEpO1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGNvbnN0YW50cy5RR19EQVRBX05BTUUpO1xuICB9KTtcbn07XG5cbi8qKlxuICogU2VuZCBkYXRhIGltbWVkaWF0ZWx5IGJlZm9yZSBwYWdlIHVubG9hZFxuICovXG5RRy5wcm90b3R5cGUudW5sb2FkRmx1c2ggPSBhc3luYyBmdW5jdGlvbigpIHtcbiAgdmFyIGQgPSB0aGlzLmRhdGE7XG4gIGlmIChkLmV2ZW50cy5sZW5ndGggPT09IDAgJiYgT2JqZWN0LmtleXMoZC5wcm9maWxlcykubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChkLmV2ZW50cy5sZW5ndGggPT09IDApIHtcbiAgICBkZWxldGUgZC5ldmVudHM7XG4gIH1cbiAgaWYgKE9iamVjdC5rZXlzKGQucHJvZmlsZXMpLmxlbmd0aCA9PT0gMCkge1xuICAgIGRlbGV0ZSBkLnByb2ZpbGVzO1xuICB9XG4gIHRoaXMuZGF0YSA9IHsgcHJvZmlsZXM6IHt9LCBldmVudHM6IFtdIH07XG5cbiAgLy8gU2NoZWR1bGUgYSBub24tYmxvY2tpbmcgcmVxdWVzdCB0byBmbHVzaCBhbGwgdGhlIGRhdGEgaW4gYmFja2dyb3VuZFxuICBpZiAobmF2aWdhdG9yICYmIG5hdmlnYXRvci5zZW5kQmVhY29uKSB7XG4gICAgZC53VXNlcklkID0gZ2V0V1VzZXJJZCgpO1xuICAgIGQuZGV2aWNlID0gJ3dlYic7XG4gICAgZC5jdiA9ICcxLjkuMCc7XG4gICAgaWYgKGQgJiYgQXJyYXkuaXNBcnJheShkLmV2ZW50cykpIHtcbiAgICAgIGQuZXZlbnRzID0gYXdhaXQgY29tcG9zZUF0dHJpYnV0aW9uRXZlbnRzKGQuZXZlbnRzKTtcbiAgICB9XG5cbiAgICBjb25zdCBhcGlIb3N0ID0gdGhpcy5fc2V0dGluZ3MudXNlTGVnYWN5QVBJXG4gICAgICA/IHByb2Nlc3MuZW52LkxFR0FDWV9BUElfSE9TVFxuICAgICAgOiBwcm9jZXNzLmVudi5BUElfSE9TVDtcblxuICAgIG5hdmlnYXRvci5zZW5kQmVhY29uKFxuICAgICAgYCR7YXBpSG9zdH0vd2ViLyR7dGhpcy5fc2V0dGluZ3MuYXBwSWR9L2RhdGEvYCxcbiAgICAgIEpTT04uc3RyaW5naWZ5KGQpXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBVc2Ugc3luY2hyb25vdXMgeGhyIGlmIGBzZW5kQmVhY29uYCBBUEkgaXMgbm90IHN1cHBvcnRlZCBpbiBjbGllbnQncyBicm93c2VyXG4gICAgdGhpcy5fc2VuZERhdGFUb1NlcnZlcihkLCB0cnVlKTtcbiAgfVxuXG4gIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGNvbnN0YW50cy5RR19EQVRBX05BTUUpO1xufTtcblxuLyoqXG4gKiBDb21wb3NlIGFuZCBjb2xsZWN0IGV2ZW50IGlmIGN1cnJlbnQgdXNlciBpcyBpZGVudGlmaWVkXG4gKi9cblFHLnByb3RvdHlwZS5ldmVudHMgPSBmdW5jdGlvbihldmVudE5hbWUsIHBhcmFtZXRlcnMsIHZ0cykge1xuICBpZiAoIXRoaXMuaWRlbnRpZmllZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRoaXMucWdFdmVudHMoZXZlbnROYW1lLCBwYXJhbWV0ZXJzLCB2dHMpO1xufTtcblxuLyoqXG4gKiBDb21wb3NlIHRoZSBldmVudCBvYmplY3QgYW5kIHB1dCBpdCBpbnRvIHF1ZXVlXG4gKi9cblFHLnByb3RvdHlwZS5xZ0V2ZW50cyA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgcGFyYW1ldGVycywgdnRzKSB7XG4gIGlmICghZXZlbnROYW1lKSB7XG4gICAgbG9nLndhcm4oJ3Nob3VsZCBjb250YWluIGV2ZW50IG5hbWUgaW4gZmlyc3QgcGFyYW1ldGVyJyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgZSA9IHtcbiAgICBldmVudE5hbWUsXG4gICAgcWd0czogcGFyc2VJbnQobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKSxcbiAgfTtcbiAgaWYgKHBhcmFtZXRlcnMpIHtcbiAgICBlLnBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzO1xuICB9XG4gIC8vIFRPRE86IEFkZCBhbiB1bml0IHRlc3QgZm9yIG51bWVyaWMgdmFsaWRhdGlvblxuICBpZiAodnRzICYmICFpc05hTihwYXJzZUZsb2F0KHZ0cykpICYmIGlzRmluaXRlKHZ0cykpIHtcbiAgICBlLnZ0cyA9IHBhcnNlRmxvYXQodnRzKTtcbiAgfVxuXG4gIHRoaXMuZGF0YS5ldmVudHMucHVzaChlKTtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oY29uc3RhbnRzLlFHX0RBVEFfTkFNRSwgSlNPTi5zdHJpbmdpZnkodGhpcy5kYXRhKSk7XG5cbiAgLy8gVHJpZ2dlciBJbldlYiBjYW1wYWlnblxuICBpZiAodGhpcy5fc2V0dGluZ3MuaW5XZWJFbmFibGVkKSB7XG4gICAgdHJpZ2dlckluV2ViQ2FtcGFpZ24oZSwgdGhpcy5fc2V0dGluZ3MuYXBwSWQpO1xuICB9XG59O1xuXG5RRy5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihqc29uKSB7XG4gIGlmIChqc29uLmhhc093blByb3BlcnR5KCdlbWFpbCcpKSB7XG4gICAgdXBkYXRlRGF0YVNldHRpbmdzKGNvbnN0YW50cy5pZGVudGlmaWVkLCB0cnVlKTtcbiAgICBjb29raWUuZXhTZXQoY29uc3RhbnRzLnFnX2lkZW50aWZpZWQsIHRydWUpO1xuICAgIHRoaXMuaWRlbnRpZmllZCA9IHRydWU7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCF0aGlzLmlkZW50aWZpZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cbiAgZm9yICh2YXIga2V5IGluIGpzb24pIHtcbiAgICB0aGlzLmRhdGEucHJvZmlsZXNba2V5XSA9IGpzb25ba2V5XTtcbiAgfVxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjb25zdGFudHMuUUdfREFUQV9OQU1FLCBKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGEpKTtcbn07XG5cbmZ1bmN0aW9uIHNlbmRTdWJzY3JpcHRpb25TdGF0dXMoc2VsZiwgcGVybWlzc2lvbiwgc3Vic2NyaXB0aW9uKSB7XG4gIGNvbnN0IHByb2ZpbGVzID0ge307XG4gIHByb2ZpbGVzLnBlcm1pc3Npb24gPSBwZXJtaXNzaW9uO1xuICBpZiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgcHJvZmlsZXMuc3Vic2NyaXB0aW9uID0gc3Vic2NyaXB0aW9uO1xuICAgIGNvbnN0IGsgPSBzdWJzY3JpcHRpb24uZW5kcG9pbnQuc3BsaXQoJy8nKTtcbiAgICBwcm9maWxlcy5nY21JZCA9IGtbay5sZW5ndGggLSAxXTtcbiAgICBwcm9maWxlcy5pZGVudGlmaWVkID0gdHJ1ZTtcbiAgICBzZWxmLmlkZW50aWZpZWQgPSB0cnVlO1xuICB9IGVsc2Uge1xuICAgIHByb2ZpbGVzLnN1YnNjcmlwdGlvbiA9ICcnO1xuICAgIHByb2ZpbGVzLmdjbUlkID0gJyc7XG4gIH1cbiAgbGV0IGRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShRR19EQVRBX1NFVFRJTkdTKTtcbiAgdHJ5IHtcbiAgICBkYXRhID0gSlNPTi5wYXJzZShkYXRhKSB8fCB7fTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgZGF0YSA9IHt9O1xuICAgIGxvZy5lcnJvcignSW52YWxpZCBwcm9maWxlIGRhdGEnLCBlcnIpO1xuICB9XG4gIHZhciBzZW5kRGF0YVRvU2VydmVyID0gZmFsc2U7XG4gIGZvciAobGV0IGsgaW4gcHJvZmlsZXMpIHtcbiAgICBpZiAodHlwZW9mIHByb2ZpbGVzW2tdID09PSB0eXBlb2Yge30pIHtcbiAgICAgIGlmIChKU09OLnN0cmluZ2lmeShwcm9maWxlc1trXSkgIT09IEpTT04uc3RyaW5naWZ5KGRhdGFba10pKSB7XG4gICAgICAgIHNlbmREYXRhVG9TZXJ2ZXIgPSB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocHJvZmlsZXNba10gIT09IGRhdGFba10pIHtcbiAgICAgIHNlbmREYXRhVG9TZXJ2ZXIgPSB0cnVlO1xuICAgIH1cbiAgICBkYXRhW2tdID0gcHJvZmlsZXNba107XG4gIH1cbiAgaWYgKHNlbmREYXRhVG9TZXJ2ZXIpIHtcbiAgICB2YXIgZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFFHX0RBVEFfU0VUVElOR1MpO1xuICAgIHRyeSB7XG4gICAgICBkID0gSlNPTi5wYXJzZShkKSB8fCB7fTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGQgPSB7fTtcbiAgICAgIGxvZy5kZWJ1ZyhlcnIpO1xuICAgIH1cbiAgICBmb3IgKHZhciBrIGluIHByb2ZpbGVzKSB7XG4gICAgICBkW2tdID0gcHJvZmlsZXNba107XG4gICAgfVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFFHX0RBVEFfU0VUVElOR1MsIEpTT04uc3RyaW5naWZ5KGQpKTtcblxuICAgIC8vIFNlbmQgYHN1YnNjcmliZWRfdG9fd2VicHVzaGAgZXZlbnQgaWYgdXNlciBncmFudGVkIHB1c2ggcGVybWlzc2lvblxuICAgIGlmIChwZXJtaXNzaW9uID09PSAnZ3JhbnRlZCcpIHtcbiAgICAgIGNvbnN0IHBhcmFtYXRlcnMgPSB7XG4gICAgICAgIHVybDogd2luZG93LmxvY2F0aW9uLmhyZWYsXG4gICAgICB9O1xuXG4gICAgICBpZiAod2luZG93LmRvY3VtZW50LnJlZmVycmVyKSB7XG4gICAgICAgIHBhcmFtYXRlcnMucmVmZXJyZXIgPSB3aW5kb3cuZG9jdW1lbnQucmVmZXJyZXI7XG4gICAgICB9XG5cbiAgICAgIGxvZy5pbmZvKCdTZW5kaW5nIFwic3Vic2NyaWJlZF90b193ZWJwdXNoXCIgZXZlbnQuLi4nLCBwYXJhbWF0ZXJzKTtcbiAgICAgIHNlbGYuZXZlbnRzKCdzdWJzY3JpYmVkX3RvX3dlYnB1c2gnLCBwYXJhbWF0ZXJzKTtcbiAgICB9XG5cbiAgICBsb2cuZGVidWcoJ1NlbmRpbmcgcHVzaCBzdWJzY3JpcHRpb24gc3RhdHVzJywgcGVybWlzc2lvbiwgc3Vic2NyaXB0aW9uKTtcbiAgICBzZWxmLl9zZW5kRGF0YVRvU2VydmVyKHsgcHJvZmlsZXMgfSk7XG4gIH1cbn1cblxubGV0IGlzUHVzaFNlcnZpY2VTdWJzY3JpYmVkID0gZmFsc2U7XG5cbi8qKlxuICogU3Vic2NyaWJlIHRvIGEgcHVzaCBzZXJ2aWNlIHRocm91Z2ggcmVnaXN0ZXJlZCBzZXJ2aWNlIHdvcmtlclxuICovXG5hc3luYyBmdW5jdGlvbiBzdWJzY3JpYmVTV1B1c2goc2VsZikge1xuICBpZiAoISgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSkge1xuICAgIGxvZy5kZWJ1Zygnc2VydmljZVdvcmtlciBub3Qgc3VwcG9ydGVkJyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBhc3NldHNSb290ID0gKHdpbmRvdy5RR1NldHRpbmdzLmFzc2V0c1Jvb3QgfHwgJy8nKVxuICAgICAgLnJlcGxhY2UoL15cXC8qLywgJy8nKVxuICAgICAgLnJlcGxhY2UoLyR8XFwvKyQvLCAnLycpOyAvLyBFbnN1cmUgbGVhZGluZyBhbmQgdHJhaWxpbmcgc2xhc2ggaW4gcGF0aFxuICAgIGNvbnN0IHN3VXJsID0gYCR7YXNzZXRzUm9vdH1xZy1zdy4ke3dpbmRvdy5RR1NldHRpbmdzLmFwcElkfS5qc2A7XG5cbiAgICAvLyBSZWdpc3RlciBuZXcgb3IgZ2V0IHRoZSBjYWNoZWQgc2VydmljZSB3b3JrZXJcblxuICAgIGNvbnN0IHN3UmVnaXN0cmF0aW9uID0gYXdhaXQgcmVnaXN0ZXJTZXJ2aWNlV29ya2VyKFxuICAgICAgc3dVcmwsXG4gICAgICAvLyBSZWdpc3RlciB0aGUgc2VydmljZSB3b3JrZXIgYXQgYW5vdGhlciBzY29wZSB0byBwcmV2ZW50IHNjb3BlIGNvbGxpc2lvbi5cbiAgICAgIGAke2Fzc2V0c1Jvb3R9JHtERUZBVUxUX1NXX1NDT1BFfWBcbiAgICApO1xuXG4gICAgLy8gQnlwYXNzIGlmIE5vdGlmaWNhdGlvbiBBUEkgaXMgbm90IHN1cHBvcnRpbmcgaW4gY3VycmVudCBicm93c2VyXG4gICAgaWYgKFxuICAgICAgaXNQdXNoU2VydmljZVN1YnNjcmliZWQgfHxcbiAgICAgICFzd1JlZ2lzdHJhdGlvbiB8fFxuICAgICAgISgnTm90aWZpY2F0aW9uJyBpbiB3aW5kb3cpIHx8XG4gICAgICAoJ3N3JyBpbiB3aW5kb3cuUUdTZXR0aW5ncyAmJiAhd2luZG93LlFHU2V0dGluZ3Muc3cpXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaXNQdXNoU2VydmljZVN1YnNjcmliZWQgPSB0cnVlOyAvLyBBdm9pZCByZXN1YnNjcmliaW5nXG4gICAgY29uc3QgY3VycmVudFBlcm1pc3Npb25TdGF0ZSA9IE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uO1xuICAgIGxvZy5kZWJ1ZygnU3Vic2NyaWJpbmcgcHVzaCBzZXJ2aWNlLi4uJywgY3VycmVudFBlcm1pc3Npb25TdGF0ZSk7XG5cbiAgICAvLyBTaG93IG92ZXJsYXkgYmVmb3JlIGFza2luZyBwdXNoIHBlcm1pc3Npb25cbiAgICBpZiAoY3VycmVudFBlcm1pc3Npb25TdGF0ZSA9PT0gJ2RlZmF1bHQnKSB7XG4gICAgICBvcGVuT3ZlcmxheVByb21wdChzZWxmLl9zZXR0aW5ncy5wdXNoLm92ZXJsYXkpO1xuICAgIH1cblxuICAgIC8vIFN1YnNjcmliZSBwdXNoIHNlcnZpY2Ugb24gc2VydmljZSB3b3JrZXIgcmVnaXN0cmF0aW9uXG4gICAgY29uc3QgcHVzaFN1YnNjcmlwdGlvbiA9IGF3YWl0IHN3UmVnaXN0cmF0aW9uLnB1c2hNYW5hZ2VyLnN1YnNjcmliZSh7XG4gICAgICB1c2VyVmlzaWJsZU9ubHk6IHRydWUsXG4gICAgfSk7XG4gICAgY29uc3QgbmV3UGVybWlzc2lvblN0YXRlID0gTm90aWZpY2F0aW9uLnBlcm1pc3Npb247XG4gICAgbG9nLmRlYnVnKCdTdWJzY3JpYmVkIHB1c2gnLCBuZXdQZXJtaXNzaW9uU3RhdGUsIHB1c2hTdWJzY3JpcHRpb24pO1xuXG4gICAgLy8gU2hvdyBPbi1TdWJzY3JpYmVkIFBvcHVwIGlmIHVzZXIgZmlyc3QgZ3JhbnRlZCB0aGUgbm90aWZpY2F0aW9uIHBlcm1pc3Npb25cbiAgICBpZiAoXG4gICAgICBjdXJyZW50UGVybWlzc2lvblN0YXRlICE9PSAnZ3JhbnRlZCcgJiZcbiAgICAgIG5ld1Blcm1pc3Npb25TdGF0ZSA9PT0gJ2dyYW50ZWQnICYmXG4gICAgICBzZWxmLl9zZXR0aW5ncy5wdXNoLm9uU3Vic2NyaWJlZFBvcHVwXG4gICAgKSB7XG4gICAgICBvcGVuT25TdWJzY3JpYmVkUG9wdXAoc2VsZi5fc2V0dGluZ3MucHVzaC5vblN1YnNjcmliZWRQb3B1cCwge1xuICAgICAgICBvblBvcHVwT3BlbmVkOiAoKSA9PiB7XG4gICAgICAgICAgc2VsZi5lbWl0KFBPUFVQX09QRU5FRF9FVkVOVCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uUG9wdXBDbG9zZWQ6ICgpID0+IHtcbiAgICAgICAgICBzZWxmLmVtaXQoUE9QVVBfQ0xPU0VEX0VWRU5UKTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFNlbmQgc3Vic2NyaXB0aW9uIHJlc3VsdCB0byBkYmFja1xuICAgIHNlbmRTdWJzY3JpcHRpb25TdGF0dXMoc2VsZiwgbmV3UGVybWlzc2lvblN0YXRlLCBwdXNoU3Vic2NyaXB0aW9uLnRvSlNPTigpKTtcblxuICAgIC8vIENsb3NlIG92ZXJsYXlcbiAgICBjbG9zZU92ZXJsYXlQcm9tcHQoKTtcblxuICAgIC8vIFNldCB0aW1lb3V0IHRvIGFzayBuZXh0IHBlcm1pc3Npb25cbiAgICBjb29raWUuZXhTZXQoY29uc3RhbnRzLlBVU0hfUkVRVUVTVCwgdHJ1ZSwge1xuICAgICAgbWF4YWdlOiAoc2VsZi5fc2V0dGluZ3MucHVzaC5zZWNvbmRzQmV0d2VlblByb21wdHMgfHwgMzYwMCkgKiAxMDAwLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICAvLyBQZXJtaXNzaW9uIGRlbmllZCBvciBpZ25vcmVkXG4gICAgaWYgKGVyciBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbiAmJiBlcnIubmFtZSA9PT0gJ05vdEFsbG93ZWRFcnJvcicpIHtcbiAgICAgIGxvZy5kZWJ1ZygnRGVuaWVkIG9yIGlnbm9yZWQgcHVzaCBwZXJtaXNzaW9uJyk7XG5cbiAgICAgIC8vIFNlbmQgc3Vic2NyaXB0aW9uIHJlc3VsdCB0byBkYmFja1xuICAgICAgc2VuZFN1YnNjcmlwdGlvblN0YXR1cyhzZWxmLCBOb3RpZmljYXRpb24ucGVybWlzc2lvbik7XG5cbiAgICAgIC8vIENsb3NlIG92ZXJsYXlcbiAgICAgIGNsb3NlT3ZlcmxheVByb21wdCgpO1xuXG4gICAgICAvLyBTZXQgdGltZW91dCB0byBhc2sgbmV4dCBwZXJtaXNzaW9uXG4gICAgICBjb29raWUuZXhTZXQoY29uc3RhbnRzLlBVU0hfUkVRVUVTVCwgdHJ1ZSwge1xuICAgICAgICBtYXhhZ2U6IChzZWxmLl9zZXR0aW5ncy5wdXNoLnNlY29uZHNCZXR3ZWVuUHJvbXB0cyB8fCAzNjAwKSAqIDEwMDAsXG4gICAgICB9KTtcblxuICAgICAgLy8gU2V0IHRpbWVvdXQgdG8gc2hvdyBuZXh0IENZTVBcbiAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgIGN1cnJlbnREYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApOyAvLyAxMjowMGFtXG4gICAgICBzZXRJREIoSURCX1BVU0hfREVOSUVEX1RJTUVTVEFNUCwgK2N1cnJlbnREYXRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nLmVycm9yKCdGYWlsZWQgdG8gcmVnaXN0ZXIgc2VydmljZSB3b3JrZXInLCBlcnIpO1xuICAgIH1cbiAgfVxufVxuXG5RRy5wcm90b3R5cGUubWVzc2FnZVJlY2VpdmVkID0gZnVuY3Rpb24oZGF0YSkge1xuICB2YXIgZCA9IGRhdGEgfHwge307XG4gIGlmIChkLnNyYyAhPT0gJ1FHJykge1xuICAgIHJldHVybjtcbiAgfVxuICBsb2cuZGVidWcoJ21lc3NhZ2VSZWNlaXZlZCcsIGRhdGEpO1xuICBpZiAoZC5jbWQgPT09ICdwdXNoU3RhdHVzJykge1xuICAgIGlmIChkLnN0YXR1cyA9PT0gJ2dyYW50ZWQnICYmIGQuc3RzKSB7XG4gICAgICBpZiAoZC5zdWJzY3JpcHRpb24pIHtcbiAgICAgICAgc2VuZFN1YnNjcmlwdGlvblN0YXR1cyh0aGlzLCAnZ3JhbnRlZCcsIGQuc3Vic2NyaXB0aW9uKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGQuc3RhdHVzID09PSAnZ3JhbnRlZCcgJiYgIWQuc3RzKSB7XG4gICAgICBpZiAoZC5zdWJzY3JpcHRpb24pIHtcbiAgICAgICAgc2VuZFN1YnNjcmlwdGlvblN0YXR1cyh0aGlzLCAnZ3JhbnRlZCcsIGQuc3Vic2NyaXB0aW9uKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbmRTdWJzY3JpcHRpb25TdGF0dXModGhpcywgJ2dyYW50ZWQnKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucG9wU2VjRmFrZVByb21wdCgpO1xuICAgIH0gZWxzZSBpZiAoZC5zdGF0dXMgPT09ICdkZWZhdWx0Jykge1xuICAgICAgaWYgKHRoaXMuX3NldHRpbmdzLnB1c2guZmFrZVByb21wdCkge1xuICAgICAgICB0aGlzLnNob3dGYWtlUHJvbXB0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnRlcmVzdGVkSW5QdXNoKHRoaXMpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZC5zdGF0dXMgPT09ICdkZW5pZWQnKSB7XG4gICAgICBzZW5kU3Vic2NyaXB0aW9uU3RhdHVzKHRoaXMsICdkZW5pZWQnKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZC5jbWQgPT09ICdyZXFQdXNoUGVybScpIHtcbiAgICBpZiAoZC5zdGF0dXMgPT09ICdncmFudGVkJykge1xuICAgICAgdGhpcy5wb3BTZWNGYWtlUHJvbXB0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCdwZXJtaXNzaW9uIGRlbmllZCBieSB1c2VyJyk7XG4gICAgfVxuICAgIGNsb3NlT3ZlcmxheVByb21wdCgpO1xuICAgIHZhciBzZWNvbmRzQmV0d2VlblByb21wdHMgPVxuICAgICAgKHRoaXMuX3NldHRpbmdzLnB1c2guc2Vjb25kc0JldHdlZW5Qcm9tcHRzIHx8IDM2MDApICogMTAwMDtcbiAgICBjb29raWUuZXhTZXQoY29uc3RhbnRzLlBVU0hfUkVRVUVTVCwgdHJ1ZSwge1xuICAgICAgbWF4YWdlOiBzZWNvbmRzQmV0d2VlblByb21wdHMsXG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoZC5jbWQgPT09ICdyZWFkeScpIHtcbiAgICBpZiAoZC5wZXJtaXNzaW9uID09PSAnZ3JhbnRlZCcpIHtcbiAgICAgIGNvb2tpZS5leFNldChjb25zdGFudHMucWdfaWRlbnRpZmllZCwgdHJ1ZSk7XG4gICAgICB0aGlzLmlkZW50aWZpZWQgPSBkYXRhLmlkZW50aWZpZWQ7XG4gICAgICBjb29raWUucmVtb3ZlKGNvbnN0YW50cy5QVVNIX1JFUVVFU1QpO1xuICAgIH1cbiAgICB0aGlzLl9zZXR0aW5ncy5wdXNoLnJlYWR5ID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5fc2V0dGluZ3MucHVzaC5kZWxheSkge1xuICAgICAgdmFyIHFnID0gdGhpcztcbiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBpbml0QWR2YW5jZWRQdXNoKHFnKTtcbiAgICAgIH0sIHFnLl9zZXR0aW5ncy5wdXNoLmRlbGF5ICogMTAwMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGluaXRBZHZhbmNlZFB1c2godGhpcyk7XG4gICAgfVxuICB9XG59O1xuXG5mdW5jdGlvbiBpbnRlcmVzdGVkSW5QdXNoKHNlbGYpIHtcbiAgdmFyIHNlY29uZHNCZXR3ZWVuUHJvbXB0cyA9XG4gICAgKHNlbGYuX3NldHRpbmdzLnB1c2guc2Vjb25kc0JldHdlZW5Qcm9tcHRzIHx8IDM2MDApICogMTAwMDtcblxuICBsb2cuZGVidWcoXG4gICAgJ2ludGVyZXN0ZWRJblB1c2gnLFxuICAgICd3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wnLFxuICAgIHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbFxuICApO1xuXG4gIGNsb3NlRmFrZVByb21wdCgoKSA9PiB7XG4gICAgY29va2llLmV4U2V0KGNvbnN0YW50cy5QVVNIX1JFUVVFU1QsIHRydWUsIHtcbiAgICAgIG1heGFnZTogc2Vjb25kc0JldHdlZW5Qcm9tcHRzLFxuICAgIH0pO1xuICB9KTtcblxuICBpZiAod2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6Jykge1xuICAgIHN1YnNjcmliZVNXUHVzaChzZWxmKTtcbiAgfSBlbHNlIHtcbiAgICBvcGVuT3ZlcmxheVByb21wdChzZWxmLl9zZXR0aW5ncy5wdXNoLm92ZXJsYXkpO1xuICAgIHZhciBmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdRR0EnKTtcbiAgICB2YXIgcyA9IHtcbiAgICAgIHNldHRpbmdzOiBzZWxmLl9zZXR0aW5ncyxcbiAgICAgIGNtZDogJ3JlcVB1c2hQZXJtJyxcbiAgICAgIHNyYzogJ1FHJyxcbiAgICB9O1xuICAgIGZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UocywgJyonKTtcbiAgfVxufVxuXG52YXIgcG9wdXBBbGlnbiA9IGZ1bmN0aW9uKGFsaWdubWVudCkge1xuICB2YXIgZGltID0gJ2hlaWdodD0nICsgU3RyaW5nKCcxcHgnKTtcbiAgZGltID0gZGltICsgJyx3aWR0aD0nICsgU3RyaW5nKCcxcHgnKTtcbiAgaWYgKGFsaWdubWVudCkge1xuICAgIHZhciBhdkh0ID0gd2luZG93LnNjcmVlbi5hdmFpbEhlaWdodDtcbiAgICB2YXIgYXZXdCA9IHdpbmRvdy5zY3JlZW4uYXZhaWxXaWR0aDtcbiAgICBpZiAoYWxpZ25tZW50LmluZGV4T2YoJ3RvcCcpID4gLTEpIHtcbiAgICAgIGRpbSA9IGRpbSArICcsdG9wPTFweCc7XG4gICAgfSBlbHNlIGlmIChhbGlnbm1lbnQuaW5kZXhPZignYm90dG9tJykgPiAtMSkge1xuICAgICAgZGltID0gZGltICsgJyx0b3A9JyArIGF2SHQgKyAncHgnO1xuICAgIH0gZWxzZSBpZiAoYWxpZ25tZW50LmluZGV4T2YoJ2NlbnRlcicpID4gLTEpIHtcbiAgICAgIHZhciB0b3AgPSBhdkh0IC8gMiAtIDQ1O1xuICAgICAgdmFyIGxlZnQgPSBhdld0IC8gMjtcbiAgICAgIGRpbSA9IGRpbSArICcsdG9wPScgKyB0b3AgKyAnLGxlZnQ9JyArIGxlZnQ7XG4gICAgfVxuICAgIGlmIChhbGlnbm1lbnQuaW5kZXhPZignbGVmdCcpID4gLTEpIHtcbiAgICAgIGRpbSA9IGRpbSArICcsbGVmdD0xcHgnO1xuICAgIH1cbiAgICBpZiAoYWxpZ25tZW50LmluZGV4T2YoJ3JpZ2h0JykgPiAtMSkge1xuICAgICAgZGltID0gZGltICsgJyxsZWZ0PScgKyBhdld0ICsgJ3B4JztcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZGltID0gZGltICsgJyx0b3A9MjAwMCxsZWZ0PTAnO1xuICB9XG4gIHJldHVybiBkaW07XG59O1xuXG5mdW5jdGlvbiBvcGVuUHVzaFdpbmRvdyhzZWxmKSB7XG4gIHZhciBlID0gc2VsZi5fc2V0dGluZ3MucWdlbmRwb2ludDtcbiAgdmFyIGFsaWdubWVudCA9IHNlbGYuX3NldHRpbmdzLnB1c2gucG9wdXBBbGlnbm1lbnQ7XG4gIHZhciBkaW0gPSBwb3B1cEFsaWduKGFsaWdubWVudCk7XG4gIHZhciBsYW5kaW5nVXJsO1xuICBpZiAoZS5zdGFydHNXaXRoKCdodHRwczonKSkge1xuICAgIGxhbmRpbmdVcmwgPVxuICAgICAgd2luZG93LlFHU2V0dGluZ3MucWdlbmRwb2ludCArXG4gICAgICAnP2FwcElkPScgK1xuICAgICAgc2VsZi5fc2V0dGluZ3MuYXBwSWQgK1xuICAgICAgJyZzdWJzY3JpYmU9dHJ1ZSZ1c2VySWQ9JyArXG4gICAgICBnZXRXVXNlcklkKCk7XG4gIH0gZWxzZSB7XG4gICAgbGFuZGluZ1VybCA9XG4gICAgICAnaHR0cHM6Ly8nICtcbiAgICAgIHNlbGYuX3NldHRpbmdzLnFnZW5kcG9pbnQgK1xuICAgICAgJy5xZ3IucGg/YXBwSWQ9JyArXG4gICAgICBzZWxmLl9zZXR0aW5ncy5hcHBJZCArXG4gICAgICAnJnN1YnNjcmliZT10cnVlJnVzZXJJZD0nICtcbiAgICAgIGdldFdVc2VySWQoKTtcbiAgfVxuICB2YXIgcWdyYXBoU2VjRmFrZVByb21wdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxZ3JhcGhTZWNGYWtlUHJvbXB0Jyk7XG4gIGlmIChxZ3JhcGhTZWNGYWtlUHJvbXB0KSB7XG4gICAgcWdyYXBoU2VjRmFrZVByb21wdC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6bm9uZScpO1xuICB9XG4gIHdpbmRvdy5vcGVuKGxhbmRpbmdVcmwsICdfYmxhbmsnLCBkaW0pO1xufVxuXG5RRy5wcm90b3R5cGUucG9wU2VjRmFrZVByb21wdCA9IGZ1bmN0aW9uKCkge1xuICBpZiAodGhpcy5wb3BwZWRTZWNGYWtlUHJvbXB0KSB7XG4gICAgcmV0dXJuO1xuICB9IGVsc2Uge1xuICAgIHRoaXMucG9wcGVkU2VjRmFrZVByb21wdCA9IHRydWU7XG4gIH1cbiAgdmFyIHFncmFwaENzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxZ3JhcGgtY3NzJyk7XG4gIGlmICghcWdyYXBoQ3NzKSB7XG4gICAgdmFyIHNoZWV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzaGVldC5pZCA9ICdxZ3JhcGgtY3NzJztcbiAgICBpZiAoXG4gICAgICB1YVBhcnNlci5kZXZpY2UudHlwZSA9PT0gJ21vYmlsZScgfHxcbiAgICAgIHVhUGFyc2VyLmRldmljZS50eXBlID09PSAndGFibGV0J1xuICAgICkge1xuICAgICAgc2hlZXQuaW5uZXJIVE1MID1cbiAgICAgICAgJy5jaHJvbWVQdXNoRHYgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmOyBsaW5lLWhlaWdodDogMTsgZm9udC1zaXplOiAxNnB4OyBmb250LWZhbWlseTogc2Fucy1zZXJpZjsgY29sb3I6ICMwMDAwMDA7IHdpZHRoOiAxMDAlOyBiYWNrZ3JvdW5kOiAjZmZmOyBwb3NpdGlvbjogZml4ZWQ7IHotaW5kZXg6IDIxNDc0ODMwMDA7IGJvdHRvbTogMHB4OyBsZWZ0OiAwOyByaWdodDogMDsgcGFkZGluZzogMTBweCAxMHB4OyBib3gtc2l6aW5nOiBib3JkZXItYm94OyBib3JkZXI6IDFweCBzb2xpZCAjZWZlYmViOyBib3gtc2hhZG93OiAwIC0zcHggNnB4ICNhOWExYTE7IC13ZWJraXQtYm94LXNoYWRvdzogMCAtM3B4IDZweCAjYzVjMmMyIH0gLmNocm9tZVB1c2hEdiBkaXYgeyBvcGFjaXR5OiAxOyBmb250OiBpbmhlcml0OyB9IC5jaHJvbWVQdXNoRHYgc3BhbiB7IGRpc3BsYXk6IGlubGluZS1ibG9jayB9IC5jaHJvbWVQdXNoRHYgcCB7IGZvbnQ6IGluaGVyaXQ7IG1hcmdpbi10b3A6IDRweDsgbWFyZ2luLWxlZnQ6IDhweDsgb3BhY2l0eTogMC40OyBtYXJnaW4tcmlnaHQ6IDMwcHggfSAuY2hyb21lUHVzaER2IHAgLmFsbG93UHVzaCB7IGJhY2tncm91bmQtY29sb3I6ICNENkU2RkQ7IGNvbG9yOiAjNDI4NUY0OyBwYWRkaW5nOiAycHggNHB4OyBmb250OiBpbmhlcml0OyB9IC5jaHJvbWVQdXNoRHYgLnB1c2hNc2cgeyBtYXJnaW4tbGVmdDogOHB4OyBvcGFjaXR5OiAwLjg7IGZvbnQ6IGluaGVyaXQ7IH0gLmNocm9tZVB1c2hEdiAuYnRuc0NvbnQgeyBkaXNwbGF5OiBibG9jazsgZm9udDogaW5oZXJpdDsgZm9udC1zaXplOiAxM3B4OyBtYXJnaW46IDE1cHggMCAwIDA7IH0gLmNocm9tZVB1c2hEdiAuYnRuc0NvbnQgLnBvd2VyZWQgeyBvcGFjaXR5OiAwLjQ7IGZvbnQ6IGluaGVyaXQ7IG1hcmdpbi10b3A6IDIwcHg7IG1hcmdpbi1sZWZ0OiA4cHggfSAuY2hyb21lUHVzaER2IC5idG5zQ29udCAuc2hvd1B1c2ggeyBmbG9hdDogcmlnaHQ7IGZvbnQ6IGluaGVyaXQ7IGJhY2tncm91bmQ6ICM0Mjg1RjQ7IHBhZGRpbmc6IDEwcHggMjBQWCAxMHB4IDIwUFg7IHBvc2l0aW9uOiByZWxhdGl2ZTsgYm94LXNpemluZzogYm9yZGVyLWJveDsgY29sb3I6ICNmZmZmZmY7IHRyYW5zaXRpb246IDFzIGVhc2UtaW47IG9wYWNpdHk6IDA7IHJpZ2h0OiA4cHg7IH0gLmNocm9tZVB1c2hEdiAuYnRuc0NvbnQgLnNvbGlkQnRuIHsgZm9udC13ZWlnaHQ6IGJvbGQ7IG9wYWNpdHk6IDE7IGZvbnQ6IGluaGVyaXQ7IGN1cnNvcjogcG9pbnRlciB9IC5jaHJvbWVQdXNoRHYgLnB1c2htb2RhbENsb3NlIHsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDhweDsgZm9udDogaW5oZXJpdDsgcmlnaHQ6IDE2cHg7IGN1cnNvcjogcG9pbnRlcjsgfSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNoZWV0LmlubmVySFRNTCA9XG4gICAgICAgICcuY2hyb21lUHVzaER2IHsgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsgbGluZS1oZWlnaHQ6IDE7IGZvbnQtc2l6ZTogMTZweDsgY29sb3I6ICMwMDAwMDA7IHRvcDogMDsgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7IHdpZHRoOiAzMCU7IGxlZnQ6IDEwJTsgcmlnaHQ6IDYwJTsgYmFja2dyb3VuZDogI2ZmZjsgcG9zaXRpb246IGZpeGVkOyB6LWluZGV4OiAyMTQ3NDgzMDAwOyBtYXJnaW4gMCBhdXRvOyBwYWRkaW5nOiAxMHB4IDEwcHg7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IGJvcmRlcjogMXB4IHNvbGlkICNlZmViZWI7IGJveC1zaGFkb3c6IDAgLTNweCA2cHggI2E5YTFhMTsgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDNweCA2cHggI2M1YzJjMiB9IC5jaHJvbWVQdXNoRHYgZGl2IHsgZm9udDogaW5oZXJpdDsgb3BhY2l0eTogMSB9IC5jaHJvbWVQdXNoRHYgc3BhbiB7IGZvbnQ6IGluaGVyaXQ7IGRpc3BsYXk6IGlubGluZS1ibG9jayB9IC5jaHJvbWVQdXNoRHYgcCB7IGZvbnQ6IGluaGVyaXQ7IG1hcmdpbi10b3A6IDRweDsgbWFyZ2luLWxlZnQ6IDhweDsgb3BhY2l0eTogMC40OyBtYXJnaW4tcmlnaHQ6IDMwcHggfSAuY2hyb21lUHVzaER2IHAgLmFsbG93UHVzaCB7IGZvbnQ6IGluaGVyaXQ7IGJhY2tncm91bmQtY29sb3I6ICNENkU2RkQ7IGNvbG9yOiAjNDI4NUY0OyBwYWRkaW5nOiAycHggNHB4IH0gLmNocm9tZVB1c2hEdiAucHVzaE1zZyB7IGZvbnQ6IGluaGVyaXQ7IG1hcmdpbi1sZWZ0OiA4cHg7IG9wYWNpdHk6IDAuOCB9IC5jaHJvbWVQdXNoRHYgLmJ0bnNDb250IHsgZm9udDogaW5oZXJpdDsgZGlzcGxheTogYmxvY2s7IGZvbnQtc2l6ZTogMTNweDsgbWFyZ2luOiAxNXB4IDAgMCAwOyB9IC5jaHJvbWVQdXNoRHYgLmJ0bnNDb250IC5zaG93UHVzaCB7IGZvbnQ6IGluaGVyaXQ7IGZsb2F0OiByaWdodDsgYmFja2dyb3VuZDogIzQyODVGNDsgcGFkZGluZzogMTBweCAyMFBYIDEwcHggMjBQWDsgcG9zaXRpb246IHJlbGF0aXZlOyBib3gtc2l6aW5nOiBib3JkZXItYm94OyBjb2xvcjogI2ZmZmZmZjsgdHJhbnNpdGlvbjogMXMgZWFzZS1pbjsgb3BhY2l0eTogMDsgcmlnaHQ6IDhweDsgfSAuY2hyb21lUHVzaER2IC5idG5zQ29udCAuc29saWRCdG4geyBmb250OiBpbmhlcml0OyBmb250LXdlaWdodDogYm9sZDsgb3BhY2l0eTogMTsgY3Vyc29yOiBwb2ludGVyIH0gLmNocm9tZVB1c2hEdiAuYnRuc0NvbnQgLnBvd2VyZWQgeyBmb250OiBpbmhlcml0OyBvcGFjaXR5OiAwLjQ7IG1hcmdpbi10b3A6IDIwcHg7IG1hcmdpbi1sZWZ0OiA4cHggfSAuY2hyb21lUHVzaER2IC5wdXNobW9kYWxDbG9zZSB7IGZvbnQ6IGluaGVyaXQ7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiA4cHg7IHJpZ2h0OiAxNnB4OyBjdXJzb3I6IHBvaW50ZXI7IH0ucWctY2xvc2UtcG9wdXAgeyBwb3NpdGlvbjogZml4ZWQ7IHRleHQtcmVuZGVyaW5nOiBvcHRpbWl6ZUxlZ2liaWxpdHk7IHotaW5kZXg6IDA7IHRvcDogNDAlOyBsZWZ0OiA1MCU7IGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKSBzY2FsZSgwLjk0ODE0OCkgdHJhbnNsYXRlWigwcHgpOyB6b29tOiAxOyBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50OyB9IC5xZy1wb3B1cC1mb3JtIHsgYmFja2dyb3VuZC1jb2xvcjogI2YwZjNmNSAhaW1wb3J0YW50OyBib3JkZXItcmFkaXVzOiA1cHg7IGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmICFpbXBvcnRhbnQ7IGJhY2tncm91bmQ6ICNmMGYwZjA7IGNvbG9yOiAjNDQ0OyBtYXJnaW46IDAgYXV0bzsgbWF4LXdpZHRoOiBub25lOyBmb250LXNpemU6IDEuMWVtOyBsaW5lLWhlaWdodDogMS41ZW07IHBhZGRpbmctYm90dG9tOiAwcHggIWltcG9ydGFudDtwYWRkaW5nLWxlZnQ6IDEuNWVtICFpbXBvcnRhbnQ7cGFkZGluZy1yaWdodDogMS41ZW0gIWltcG9ydGFudDtwYWRkaW5nLXRvcDogMS41ZW0gIWltcG9ydGFudDsgfSAucWctcG9wdXAtaGVhZGluZyB7IGNvbG9yOiAjNDk1MjU5ICFpbXBvcnRhbnQ7IG1hcmdpbjogMCAwIDEwcHg7IGZvbnQtc2l6ZTogMjRweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IHRleHQtYWxpZ246IGNlbnRlcjsgYm94LXNpemluZzogYm9yZGVyLWJveDsgfSAucWctcG9wdXAtdGV4dHsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyBmb250LWZhbWlseTogaW5oZXJpdDsgZm9udC13ZWlnaHQ6IG5vcm1hbDsgZm9udC1zaXplOiAxNnB4OyBsaW5lLWhlaWdodDogMS42OyBtYXJnaW4tYm90dG9tOiAyMHB4OyB0ZXh0LXJlbmRlcmluZzogb3B0aW1pemVMZWdpYmlsaXR5OyB0ZXh0LXRyYW5zZm9ybTogaW5pdGlhbDsgZGlyZWN0aW9uOiBsdHI7IHRleHQtYWxpZ246IGNlbnRlcjsgbGV0dGVyLXNwYWNpbmc6IG5vcm1hbDsgY29sb3I6IzQ5NTI1OSAhaW1wb3J0YW50OyB9IC5xZy1jbG9zZS1idXR0b257IGN1cnNvcjogcG9pbnRlcjsgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWYgIWltcG9ydGFudDsgZm9udC13ZWlnaHQ6IG5vcm1hbDsgbGluZS1oZWlnaHQ6IG5vcm1hbDsgbGV0dGVyLXNwYWNpbmc6IG5vcm1hbDsgbWFyZ2luOiAwIDAgMjBweDsgcG9zaXRpb246IHJlbGF0aXZlOyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IHRleHQtYWxpZ246IGNlbnRlcjsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgdGV4dC1zaGFkb3c6IG5vbmU7IGJveC1zaGFkb3c6IG5vbmU7IHdpZHRoOiBhdXRvOyBoZWlnaHQ6IGF1dG87IG1pbi13aWR0aDogaW5pdGlhbDsgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94OyAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IG91dGxpbmU6IDA7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgcGFkZGluZy10b3A6IDE2cHg7IHBhZGRpbmctcmlnaHQ6IDMycHg7IHBhZGRpbmctYm90dG9tOiAxN3B4OyBwYWRkaW5nLWxlZnQ6IDMycHg7IGZvbnQtc2l6ZTogMTZweDsgYmFja2dyb3VuZDogIzAwNzNiNyAhaW1wb3J0YW50OyBib3JkZXItdG9wOiBub25lICFpbXBvcnRhbnQ7IGJvcmRlci1sZWZ0OiBub25lICFpbXBvcnRhbnQ7IGJvcmRlci1yaWdodDogbm9uZSAhaW1wb3J0YW50OyBib3JkZXItYm90dG9tOiBub25lICFpbXBvcnRhbnQ7IC13ZWJraXQtdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAxczsgLW1vei10cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDFzOyAtby10cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDFzOyB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDFzOyBwYWRkaW5nLXJpZ2h0OiAwOyBwYWRkaW5nLWxlZnQ6IDA7IHdpZHRoOiAxMDAlOyAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDNweDsgYm9yZGVyLXJhZGl1czogM3B4OyBtYXJnaW4tYm90dG9tOiAwOyBvcGFjaXR5OiAxOyBmbG9hdDogaW5pdGlhbDsgYmFja2dyb3VuZDojMGY3NGI1ICFpbXBvcnRhbnQ7IGNvbG9yOiNmZmZmZmYgIWltcG9ydGFudDsgfSc7XG4gICAgfVxuICB9XG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2hlZXQpO1xuICB2YXIgcHJvbXB0ID0gdGhpcy5fc2V0dGluZ3MucHVzaC50aGFua1lvdVByb21wdCB8fCB7fTtcbiAgdmFyIGlzTW9iaWxlRGV2aWNlID1cbiAgICB1YVBhcnNlci5kZXZpY2UudHlwZSA9PT0gJ21vYmlsZScgfHwgdWFQYXJzZXIuZGV2aWNlLnR5cGUgPT09ICd0YWJsZXQnO1xuICB2YXIgdGl0bGUsXG4gICAgdGV4dEJveCxcbiAgICBtZXNzYWdlLFxuICAgIHBvd2VyZWQsXG4gICAgaW50ZXJlc3RlZEJ0bixcbiAgICBidG5zQ29udCxcbiAgICBjb250YWluZXIsXG4gICAgYm9keTtcbiAgaWYgKHByb21wdC5jZW50ZXIgJiYgIWlzTW9iaWxlRGV2aWNlKSB7XG4gICAgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aXRsZS5jbGFzc05hbWUgPSAncWctcG9wdXAtaGVhZGluZyc7XG4gICAgdGl0bGUuaW5uZXJIVE1MID0gcHJvbXB0LnRpdGxlIHx8ICdUaGFua3MgZm9yIHN1YnNjcmliaW5nLic7XG4gICAgdGV4dEJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRleHRCb3guYXBwZW5kQ2hpbGQodGl0bGUpO1xuICAgIG1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBtZXNzYWdlLmNsYXNzTmFtZSA9ICdxZy1wb3B1cC10ZXh0JztcbiAgICBtZXNzYWdlLmlubmVySFRNTCA9XG4gICAgICBwcm9tcHQubWVzc2FnZSB8fCAnQ2xpY2sgQ0xPU0UgYnV0dG9uIHRvIGZpbmlzaCBzdWJzY3JpcHRpb24gcHJvY2Vzcy4nO1xuICAgIHBvd2VyZWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgcG93ZXJlZC5jbGFzc05hbWUgPSAncG93ZXJlZCc7XG4gICAgcG93ZXJlZC5pbm5lckhUTUwgPSAnUG93ZXJlZCBieSBRR3JhcGgnO1xuICAgIGludGVyZXN0ZWRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBpbnRlcmVzdGVkQnRuLmNsYXNzTmFtZSA9ICdxZy1jbG9zZS1idXR0b24nO1xuICAgIGludGVyZXN0ZWRCdG4uaW5uZXJIVE1MID0gJ0NMT1NFJztcbiAgICBpbnRlcmVzdGVkQnRuLm9uY2xpY2sgPSBvcGVuUHVzaFdpbmRvdy5iaW5kKG51bGwsIHRoaXMpO1xuICAgIGJ0bnNDb250ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYnRuc0NvbnQuY2xhc3NOYW1lID0gJ2J0bnNDb250JztcbiAgICBwb3dlcmVkLnN0eWxlID0gJ2ZvbnQtc2l6ZToxMnB4ICFpbXBvcnRhbnQ7JztcbiAgICBidG5zQ29udC5hcHBlbmRDaGlsZChpbnRlcmVzdGVkQnRuKTtcbiAgICBidG5zQ29udC5hcHBlbmRDaGlsZChwb3dlcmVkKTtcbiAgICBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb250YWluZXIuY2xhc3NOYW1lID0gJ3FnLXBvcHVwLWZvcm0gcWctY2xvc2UtcG9wdXAnO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0ZXh0Qm94KTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobWVzc2FnZSk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGJ0bnNDb250KTtcbiAgICBjb250YWluZXIuaWQgPSAncWdyYXBoU2VjRmFrZVByb21wdCc7XG4gICAgYm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5Jyk7XG4gICAgYm9keSA9IGJvZHlbMF07XG4gICAgYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICB9IGVsc2Uge1xuICAgIHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIHRpdGxlLmNsYXNzTmFtZSA9ICdwdXNoTXNnJztcbiAgICB0aXRsZS5pbm5lckhUTUwgPSBwcm9tcHQudGl0bGUgfHwgJ1RoYW5rIHlvdSBmb3Igc3Vic2NyaWJpbmcnO1xuICAgIHRleHRCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0ZXh0Qm94LmFwcGVuZENoaWxkKHRpdGxlKTtcbiAgICBtZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIG1lc3NhZ2UuaW5uZXJIVE1MID0gcHJvbXB0Lm1lc3NhZ2UgfHwgJ0hhcHB5IGJyb3dzaW5nJztcbiAgICBwb3dlcmVkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIHBvd2VyZWQuY2xhc3NOYW1lID0gJ3Bvd2VyZWQnO1xuICAgIHBvd2VyZWQuaW5uZXJIVE1MID0gJ1Bvd2VyZWQgYnkgUUdyYXBoJztcbiAgICBpbnRlcmVzdGVkQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIGludGVyZXN0ZWRCdG4uY2xhc3NOYW1lID0gJ3Nob3dQdXNoIHNvbGlkQnRuJztcbiAgICBpbnRlcmVzdGVkQnRuLmlubmVySFRNTCA9ICdDTE9TRSc7XG4gICAgaW50ZXJlc3RlZEJ0bi5vbmNsaWNrID0gb3BlblB1c2hXaW5kb3cuYmluZChudWxsLCB0aGlzKTtcbiAgICBidG5zQ29udCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGJ0bnNDb250LmNsYXNzTmFtZSA9ICdidG5zQ29udCc7XG4gICAgYnRuc0NvbnQuYXBwZW5kQ2hpbGQocG93ZXJlZCk7XG4gICAgYnRuc0NvbnQuYXBwZW5kQ2hpbGQoaW50ZXJlc3RlZEJ0bik7XG4gICAgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29udGFpbmVyLmNsYXNzTmFtZSA9ICdmb250MTUgY2hyb21lUHVzaER2JztcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGV4dEJveCk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG1lc3NhZ2UpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChidG5zQ29udCk7XG4gICAgY29udGFpbmVyLmlkID0gJ3FncmFwaFNlY0Zha2VQcm9tcHQnO1xuICAgIGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpO1xuICAgIGJvZHkgPSBib2R5WzBdO1xuICAgIGJvZHkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcbiAgfVxufTtcblxuUUcucHJvdG90eXBlLnNob3dGYWtlUHJvbXB0ID0gZnVuY3Rpb24oKSB7XG4gIGNvbnN0IHsgcHVzaCA9IHt9IH0gPSB0aGlzLl9zZXR0aW5ncztcbiAgY29uc3Qgc2Vjb25kc0JldHdlZW5Qcm9tcHRzID0gKHB1c2guc2Vjb25kc0JldHdlZW5Qcm9tcHRzIHx8IDM2MDApICogMTAwMDtcblxuICBvcGVuRmFrZVByb21wdChwdXNoLnByb21wdCwge1xuICAgIG9uUHJvbXB0Q2xvc2VkOiAoKSA9PiB7XG4gICAgICBjb29raWUuZXhTZXQoY29uc3RhbnRzLlBVU0hfUkVRVUVTVCwgdHJ1ZSwge1xuICAgICAgICBtYXhhZ2U6IHNlY29uZHNCZXR3ZWVuUHJvbXB0cyxcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgb25Qcm9tcHRDb25maXJtZWQ6ICgpID0+IHtcbiAgICAgIGludGVyZXN0ZWRJblB1c2godGhpcyk7XG4gICAgfSxcbiAgfSk7XG59O1xuXG5RRy5wcm90b3R5cGUucHJvbXB0UHVzaCA9IGZ1bmN0aW9uKCkge1xuICAvLyAjVE9ETzogcHVzaCBub3RpZmljYXRpb24gaXMgbm90IHN1cHBvcnRlZCBmb3Igc2FmYXJpIGJyb3dzZXJcbiAgaWYgKElTX1NBRkFSSV9CUk9XU0VSKSB7XG4gICAgbG9nLndhcm4oJ1dlYiBwdXNoIGZ1bmN0aW9ucyBhcmUgbm90IHN1cHBvcnRlZCBmb3Igc2FmYXJpIHlldCcpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICghc2hvdWxkRW5hYmxlUHVzaCh0aGlzLl9zZXR0aW5ncykpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAod2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6Jykge1xuICAgIGlmIChOb3RpZmljYXRpb24ucGVybWlzc2lvbiA9PT0gJ2RlZmF1bHQnICYmICdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IpIHtcbiAgICAgIGlmICh0aGlzLl9zZXR0aW5ncy5wdXNoLmZha2VQcm9tcHQpIHtcbiAgICAgICAgdGhpcy5zaG93RmFrZVByb21wdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3Vic2NyaWJlU1dQdXNoKHRoaXMpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpbnRlcmVzdGVkSW5QdXNoKHRoaXMpO1xuICAgIH1cbiAgfSBlbHNlIGlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSB7XG4gICAgaWYgKHRoaXMuX3NldHRpbmdzLnB1c2gucmVhZHkpIHtcbiAgICAgIHZhciBmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdRR0EnKTtcbiAgICAgIHZhciByZXF1ZXN0UHVzaFN0YXR1cyA9IHtcbiAgICAgICAgc2V0dGluZ3M6IHRoaXMuX3NldHRpbmdzLFxuICAgICAgICBjbWQ6ICdwdXNoU3RhdHVzJyxcbiAgICAgICAgc3JjOiAnUUcnLFxuICAgICAgfTtcbiAgICAgIGZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UocmVxdWVzdFB1c2hTdGF0dXMsICcqJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3NldHRpbmdzLnB1c2gucmVxdWVzdGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogSW5pdGlhbGl6ZSB3ZWIgcHVzaCBpbnRlZ3JhdGlvbiBpbiBcImFkdmFuY2RlXCIgb3IgXCJtYW51YWxcIiB3YXlcbiAqXG4gKiAjVE9ETzogbW92ZSB0byBzZXBhcmF0ZSBmaWxlXG4gKi9cbmZ1bmN0aW9uIGluaXRBZHZhbmNlZFB1c2goc2VsZikge1xuICB0cnkge1xuICAgIGNvbnN0IHFnU2V0dGluZ3MgPSBzZWxmLl9zZXR0aW5ncztcblxuICAgIC8vIFNraXAgaWYgY3VycmVudCBhY2NvdW50IGlzIG5vdCBlbmFibGluZyB3ZWIgcHVzaFxuICAgIGlmICghc2hvdWxkRW5hYmxlUHVzaChxZ1NldHRpbmdzKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxvZy5kZWJ1ZygnSW5pdGlhbGl6aW5nIGFkdmFuY2VkIHdlYiBwdXNoIGludGVncmF0aW9uLi4uJyk7XG5cbiAgICAvLyBBcHBlbmQgbWFuaWZlc3QuanNvblxuICAgIGlmIChxZ1NldHRpbmdzLm1hbmlmZXN0ICE9PSBmYWxzZSkge1xuICAgICAgbG9hZE1hbmlmZXN0KHFnU2V0dGluZ3MuYXNzZXRzUm9vdCk7XG4gICAgfVxuXG4gICAgLy8gU3Vic2NyaWJlIHB1c2ggc3Vic2NyaXB0aW9uXG4gICAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uICE9PSAnZGVmYXVsdCcpIHtcbiAgICAgIHN1YnNjcmliZVNXUHVzaChzZWxmKTtcbiAgICB9XG5cbiAgICAvLyBTaG93IHByb21wdCAobmF0aXZlIG9yIGZha2UpIGlmIHVzZXIgaXMgbm90IHN1YnNjcmliZWQgeWV0XG4gICAgaWYgKFxuICAgICAgIXFnU2V0dGluZ3MucHVzaC5yZXF1ZXN0U2VsZiAmJlxuICAgICAgY29va2llLmdldEpTT04oY29uc3RhbnRzLlBVU0hfUkVRVUVTVCkgPT09IHVuZGVmaW5lZFxuICAgICkge1xuICAgICAgc2VsZi5wcm9tcHRQdXNoKCk7XG4gICAgfVxuXG4gICAgLy8gU2hvdyBDWU1QIGlmIHVzZXIgZGVuaWVkIHB1c2ggcGVybWlzc2lvblxuICAgIGlmIChcbiAgICAgIHFnU2V0dGluZ3MucHVzaCAmJlxuICAgICAgcWdTZXR0aW5ncy5wdXNoLmN5bXAgJiZcbiAgICAgIHdpbmRvdy5Ob3RpZmljYXRpb24ucGVybWlzc2lvbiA9PT0gJ2RlbmllZCdcbiAgICApIHtcbiAgICAgIGNvbnN0IHsgY3ltcCB9ID0gcWdTZXR0aW5ncy5wdXNoO1xuICAgICAgaXNQcml2YXRlTW9kZSgpLnRoZW4oYXN5bmMgaXNQcml2YXRlID0+IHtcbiAgICAgICAgLy8gXCJ0aHJlc2hvbGRcIiBpcyB0aGUgbnVtYmVyIG9mIGRheXMgYWZ0ZXIgd2hpY2ggdGhlIHVzZXIgaXMgc2hvd24gdGhlIHByb21wdFxuICAgICAgICBjb25zdCBjeW1wVGhyZXNob2xkID0gK2N5bXAudGhyZXNob2xkIHx8IDA7XG4gICAgICAgIGNvbnN0IGhhc0N5bXBBY2tlZCA9IGF3YWl0IGdldElEQihJREJfQ1lNUF9BQ0tFRCk7XG4gICAgICAgIGNvbnN0IHB1c2hEZW5pZWRUaW1lc3RhbXAgPSBhd2FpdCBnZXRJREIoSURCX1BVU0hfREVOSUVEX1RJTUVTVEFNUCk7XG5cbiAgICAgICAgLy8gRG8gbm90aGluZyBpbiBpbmNvZ25pdG8gbW9kZVxuICAgICAgICAvLyBPUiBjeW1wIGlzIGFja2VkXG4gICAgICAgIC8vIE9SIGRheXMgZGlmZiBiZXR3ZWVuIHB1c2hEZW5pZWREYXRlIGFuZCBjdXJyZW50IGRhdGUgaXMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRocmVzaG9sZFxuICAgICAgICBpZiAoXG4gICAgICAgICAgaXNQcml2YXRlIHx8XG4gICAgICAgICAgaGFzQ3ltcEFja2VkIHx8XG4gICAgICAgICAgKHB1c2hEZW5pZWRUaW1lc3RhbXAgJiZcbiAgICAgICAgICAgIGRpZmZEYXRlc0luRGF5cyhuZXcgRGF0ZShwdXNoRGVuaWVkVGltZXN0YW1wKSwgbmV3IERhdGUoKSkpIDw9XG4gICAgICAgICAgICBjeW1wVGhyZXNob2xkXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wZW5DeW1Qcm9tcHQoY3ltcCwge1xuICAgICAgICAgIG9uUHJvbXB0T3BlbmVkOiAoKSA9PiB7XG4gICAgICAgICAgICBzZXRJREIoSURCX0NZTVBfQUNLRUQsIHRydWUpO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBsb2cuZXJyb3IoJ0FkdmFuY2VkIFB1c2ggSW50ZWdyYXRpb24nLCBlcnIpO1xuICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZSB3ZWIgcHVzaCwgc3BsaXQgdGhlIHdvcmtmbG93IHRvIFwic2ltcGxlXCIgb3IgXCJhZHZhbmNlZFwiXG4gKi9cbmZ1bmN0aW9uIGluaXRpYWxpemVXZWJQdXNoKHNlbGYpIHtcbiAgLy8gI1RPRE86IHB1c2ggbm90aWZpY2F0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHNhZmFyaSBicm93c2VyXG4gIGlmIChcbiAgICBJU19TQUZBUklfQlJPV1NFUiB8fFxuICAgICEoJ05vdGlmaWNhdGlvbicgaW4gd2luZG93KSB8fFxuICAgICEoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcilcbiAgKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgeyBkZWxheSB9ID0gc2VsZi5fc2V0dGluZ3MucHVzaCB8fCB7fTsgLy8gSW4gc2Vjb25kc1xuICBjb25zdCBkZWxheVRpbWUgPSBkZWxheSA/IGRlbGF5ICogMTAwMCA6IDA7IC8vIEluIG1pbGxpc2Vjb25kc1xuXG4gIGNvbnN0IGluaXRQdXNoID0gKCkgPT4ge1xuICAgIC8vICNUT0RPOiBTaG91bGQgZGV0ZXJtaW5lIHRoZSBmbG93IGJ5IGZsYWcgaW4gcGl4ZWwgc2V0dGluZ3MsXG4gICAgLy8gICAgICAgIG5vdCBvbmx5IGNoZWNrIHRoZSB3ZWJzaXRlIHByb3RvY29sXG4gICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicpIHtcbiAgICAgIGluaXRBZHZhbmNlZFB1c2goc2VsZik7XG4gICAgfSBlbHNlIGlmICh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwOicpIHtcbiAgICAgIGluaXRTaW1wbGVQdXNoKHNlbGYuX3NldHRpbmdzKTtcbiAgICB9XG4gIH07XG5cbiAgaWYgKGRlbGF5VGltZSA+IDApIHtcbiAgICAvLyBJbml0aWFsaXplIHdlYiBwdXNoIGZ1bmN0aW9uIGFmdGVyIGRlbGF5XG4gICAgc2V0VGltZW91dChpbml0UHVzaCwgZGVsYXlUaW1lKTtcbiAgfSBlbHNlIHtcbiAgICBpbml0UHVzaCgpO1xuICB9XG59XG5cblFHLnByb3RvdHlwZS5pbml0ID0gUUcucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihzZXR0aW5ncykge1xuICBpZiAodGhpcy5pbml0aWFsaXplZCkge1xuICAgIHJldHVybjtcbiAgfVxuICBsb2cuZGVidWcoJ0luaXRpYWxpemluZyBzZGsuLi4nKTtcblxuICBzZXR0aW5ncyA9IHNldHRpbmdzIHx8IHt9O1xuICB0aGlzLmRhdGEgPSB7XG4gICAgZXZlbnRzOiBbXSxcbiAgICBwcm9maWxlczoge30sXG4gIH07XG5cbiAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgdGhpcy5lbWl0KCdpbml0aWFsaXplJywgc2V0dGluZ3MpO1xuXG4gIC8vIFNldCBmaXJzdCB0aW1lIGNvb2tpZSBhdCBiZWdpbm5pbmdcbiAgc2V0Rmlyc3RUaW1lQ29va2llKCk7XG5cbiAgLy8gU2V0IGB3VXNlcklkYCBmb3IgZmlyc3QgdGltZSB1c2VyXG4gIGlmICghZ2V0V1VzZXJJZCgpKSB7XG4gICAgc2V0V1VzZXJJZCgpO1xuICB9XG5cbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBpZiAoXG4gICAgY29va2llLmdldEpTT04oY29uc3RhbnRzLnFnX2lkZW50aWZpZWQpIHx8XG4gICAgc2V0dGluZ3MucGVyc29uYWxpemF0aW9uRW5hYmxlZFxuICApIHtcbiAgICB0aGlzLmlkZW50aWZpZWQgPSB0cnVlO1xuICB9XG5cbiAgLy8gSW5pdGlhbGl6ZSB3ZWIgcHVzaCBmdW5jdGlvblxuICBpbml0aWFsaXplV2ViUHVzaCh0aGlzKTtcblxuICAvKiBJbml0aWFsaXplIEluV2ViIGRhdGEgYW5kIHJlZnJlc2ggZXZlcnkgMWhyICovXG4gIGlmICh0aGlzLl9zZXR0aW5ncy5pbldlYkVuYWJsZWQpIHtcbiAgICBjb25zdCBmaXJzdFRpbWVDb29raWUgPSBnZXRGaXJzdFRpbWVDb29raWUoKSB8fCAwO1xuICAgIC8vIEtlZXAgZmxhZyBpbiBmaXJzdCAyNGhvdXJzIHdoZW4gdXNlciBmaXJzdCBvbmJvYXJkXG4gICAgY29uc3QgaXNGaXJzdFRpbWVVc2VyID0gbmV3IERhdGUoKSAtIGZpcnN0VGltZUNvb2tpZSA8IDg2NDAwMDAwO1xuXG4gICAgZmV0Y2hJbldlYkRhdGEoXG4gICAgICB0aGlzLl9zZXR0aW5ncy5hcHBJZCxcbiAgICAgIHRoaXMuX3NldHRpbmdzLnVzZUxlZ2FjeUFQSSxcbiAgICAgIGlzRmlyc3RUaW1lVXNlclxuICAgICk7XG5cbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBmZXRjaEluV2ViRGF0YShcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MuYXBwSWQsXG4gICAgICAgIHRoaXMuX3NldHRpbmdzLnVzZUxlZ2FjeUFQSSxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB0cnVlXG4gICAgICApO1xuICAgIH0sIElOV0VCX0RBVEFfTElGRVRJTUUpO1xuXG4gICAgYmluZEV4aXRJbnRlbnRIYW5kbGVyKHRoaXMuX3NldHRpbmdzLmFwcElkKTtcbiAgICBiaW5kU2Nyb2xsUGVyY2VudEhhbmRsZXIodGhpcy5fc2V0dGluZ3MuYXBwSWQpO1xuICAgIGJpbmRJZGxlSGFuZGxlcih0aGlzLl9zZXR0aW5ncy5hcHBJZCk7XG4gIH1cblxuICBjb25zdCBsb2NhdGlvblVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uKTtcblxuICAvLyBUcnkgdG8gc2V0IGF0dHJpYnV0aW9uIGZyb20gcXVlcnkgc3RyaW5nXG4gIHNldEF0dHJpYnV0aW9uVmlhVXJsKGxvY2F0aW9uVXJsKTtcblxuICAvLyBDaGVjayBpZGVudGlmaWVkIGZyb20gdXJsXG4gIGlmIChsb2NhdGlvblVybC5zZWFyY2hQYXJhbXMuZ2V0KFNFQVJDSF9QQVJBTVNfSURFTlRJRklFRF9LRVkpKSB7XG4gICAgdXBkYXRlRGF0YVNldHRpbmdzKGNvbnN0YW50cy5pZGVudGlmaWVkLCB0cnVlKTtcbiAgICBjb29raWUuZXhTZXQoY29uc3RhbnRzLnFnX2lkZW50aWZpZWQsIHRydWUpO1xuICAgIHRoaXMuaWRlbnRpZmllZCA9IHRydWU7XG4gIH1cblxuICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcblxuICAvKlxuICAgIFRvIHNhdmUgdGltZSB3ZSBoYXZlIHNldCBpZGVudGlmaWVkIGFzIHRydWUgd2hlbiBRR1NldHRpbmdzLmV2ZW50cyxcbiAgICB3ZSBuZWVkIHRvIHNlbmQgZXZlbnRzIGlycmVzcGVjdGl2ZSBvZiBpZGVudGlmaWNhdGlvbiB3aGVuXG4gICAgUUdTZXR0aW5ncy5ldmVudHMgaXMgdHJ1ZVxuICAgICovXG4gIGlmICh0aGlzLl9zZXR0aW5ncy5ldmVudHMpIHtcbiAgICB0aGlzLmlkZW50aWZpZWQgPSB0cnVlO1xuICB9XG5cbiAgbGV0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKS50b0pTT04oKS5zbGljZSgwLCAxMCk7XG4gIGxldCBlID0geyBldmVudHM6IFtdLCBwcm9maWxlczoge30gfTtcbiAgbGV0IGRhdGEgPSBudWxsO1xuXG4gIC8vIEhhcm5lc3Mgb2YgSlNPTiBwYXJzZSB0byBwcmV2ZW50IHRocm93aW5nIGVycm9yIHdoaWxlIHByb2Nlc3NpbmdcbiAgLy8gbnVsbCBkYXRhIGluIHNvbWUgYnJvd3NlcnMgb3IgdmlhIHBvbHlmaWxscy5cbiAgdHJ5IHtcbiAgICBkYXRhID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShRR19EQVRBX1NFVFRJTkdTKSk7XG4gIH0gY2F0Y2ggKGUpIHt9XG5cbiAgaWYgKCFkYXRhIHx8IGRhdGEubGFzdFN5bmNEYXRlICE9PSBjdXJyZW50RGF0ZSkge1xuICAgIGNvbnN0IHZpc2l0ZWRFdmVudCA9IHtcbiAgICAgIGV2ZW50TmFtZTogJ3Zpc2l0ZWQnLFxuICAgICAgcWd0czogcGFyc2VJbnQobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKSxcbiAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgdXJsOiB3aW5kb3cubG9jYXRpb24uaHJlZixcbiAgICAgICAgLi4ucGFyc2VVdG1QYXJhbXMobG9jYXRpb25VcmwpLFxuICAgICAgfSxcbiAgICB9O1xuICAgIGUuZXZlbnRzLnB1c2godmlzaXRlZEV2ZW50KTtcblxuICAgIC8vIFRyaWdnZXIgSW5XZWIgY2FtcGFpZ24gYWZ0ZXIgYHZpc2l0ZWRgIGV2ZW50XG4gICAgaWYgKHRoaXMuX3NldHRpbmdzLmluV2ViRW5hYmxlZCkge1xuICAgICAgdHJpZ2dlckluV2ViQ2FtcGFpZ24odmlzaXRlZEV2ZW50LCB0aGlzLl9zZXR0aW5ncy5hcHBJZCk7XG4gICAgfVxuXG4gICAgaWYgKHVhUGFyc2VyLmRldmljZSkge1xuICAgICAgZS5wcm9maWxlcy5xZ0RldmljZSA9IHVhUGFyc2VyLmRldmljZTtcbiAgICB9XG4gICAgaWYgKHVhUGFyc2VyLmJyb3dzZXIpIHtcbiAgICAgIGUucHJvZmlsZXMucWdCcnNyID0gdWFQYXJzZXIuYnJvd3NlcjtcbiAgICB9XG4gICAgaWYgKHVhUGFyc2VyLm9zKSB7XG4gICAgICBlLnByb2ZpbGVzLnFnT1MgPSB1YVBhcnNlci5vcztcbiAgICB9XG4gICAgdmFyIGdhID0gY29va2llLmdldCgnX2dhJyk7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChnYSkge1xuICAgICAgICB2YXIgayA9IGdhLnNwbGl0KCcuJyk7XG4gICAgICAgIGUucHJvZmlsZXMucWdfZ2EgPSBrWzJdICsgJy4nICsga1szXTtcbiAgICAgICAgZS5wcm9maWxlcy5xZ19nYXRzID0gcGFyc2VJbnQoa1szXSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBsb2cuZXJyb3IoJ0ZhaWxlZCB0byBzZXQgR0EgcHJvZmlsZScsIGVycik7XG4gICAgfVxuICAgIGlmIChkYXRhICYmIChkYXRhLmlkZW50aWZpZWQgfHwgZGF0YS5zdWJzY3JpYmVkKSkge1xuICAgICAgaWYgKGRhdGEuaGFzT3duUHJvcGVydHkoJ3N1YnNjcmlwdGlvbicpKSB7XG4gICAgICAgIGUucHJvZmlsZXMuc3Vic2NyaXB0aW9uID0gZGF0YS5zdWJzY3JpcHRpb247XG4gICAgICB9XG4gICAgICBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eSgnZ2NtSWQnKSkge1xuICAgICAgICBlLnByb2ZpbGVzLmdjbUlkID0gZGF0YS5nY21JZDtcbiAgICAgIH1cbiAgICAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KCdwZXJtaXNzaW9uJykpIHtcbiAgICAgICAgZS5wcm9maWxlcy5wZXJtaXNzaW9uID0gZGF0YS5wZXJtaXNzaW9uO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoZGF0YSAmJiAoZGF0YS5pZGVudGlmaWVkIHx8IGRhdGEuc3Vic2NyaWJlZCkpIHtcbiAgICBjb29raWUuZXhTZXQoY29uc3RhbnRzLnFnX2lkZW50aWZpZWQsIHRydWUpO1xuICAgIHNlbGYuaWRlbnRpZmllZCA9IGRhdGEuaWRlbnRpZmllZDtcbiAgfVxuXG4gIC8vIFRyeSB0byBzZXQgcHJvZmlsZSBpZiByZWRpcmVjdCBmcm9tIGxpbmUg77yGIHNlbmQgY2xpY2sgZXZlbnQgYXQgdGhlIHNhbWUgdGltZVxuICBjb25zdCBsaW5lQ2hhbm5lbCA9IGxvY2F0aW9uVXJsLnNlYXJjaFBhcmFtcy5nZXQoU0VBUkNIX1BBUkFNU19MSU5FQ0hBTk5FTCk7XG4gIGNvbnN0IGxpbmVVaWQgPSBsb2NhdGlvblVybC5zZWFyY2hQYXJhbXMuZ2V0KFNFQVJDSF9QQVJBTVNfTElORVVJRCk7XG4gIGlmIChsaW5lQ2hhbm5lbCAmJiBsaW5lVWlkKSB7XG4gICAgdGhpcy5pZGVudGlmaWVkID0gdHJ1ZTtcbiAgICB0aGlzLmlkZW50aWZ5KHtcbiAgICAgIGxpbmVfY2hhbm5lbF9pZDogbGluZUNoYW5uZWwsXG4gICAgICBsaW5lX3VpZDogbGluZVVpZCxcbiAgICB9KTtcblxuICAgIGNvbnN0IGNsaWNrRXZlbnQgPSB7XG4gICAgICBldmVudE5hbWU6ICdxZ19saW5lX2NsaWNrJyxcbiAgICAgIHFndHM6IHBhcnNlSW50KG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCksXG4gICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgIHVybDogd2luZG93LmxvY2F0aW9uLmhyZWYsXG4gICAgICAgIC4uLnBhcnNlVXRtUGFyYW1zKGxvY2F0aW9uVXJsKSxcbiAgICAgIH0sXG4gICAgfTtcbiAgICBlLmV2ZW50cy5wdXNoKGNsaWNrRXZlbnQpO1xuXG4gICAgLy8gUmVtb3ZlIHBhcnRpY3VsYXIgcXVlcnkgc3RyaW5nc1xuICAgIGlmICh3aW5kb3cuaGlzdG9yeSAmJiB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUpIHtcbiAgICAgIFsnX2xudWlkJywgJ19sbmNoaWQnLCAnb3BlbkV4dGVybmFsQnJvd3NlciddLmZvckVhY2gocGFyYW0gPT5cbiAgICAgICAgbG9jYXRpb25Vcmwuc2VhcmNoUGFyYW1zLmRlbGV0ZShwYXJhbSlcbiAgICAgICk7XG4gICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoXG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LnN0YXRlLFxuICAgICAgICBkb2N1bWVudC50aXRsZSxcbiAgICAgICAgbG9jYXRpb25VcmwuaHJlZlxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBUcmlnZ2VyIEluV2ViIGNhbXBhaWduIGFmdGVyIGxpbmUgY2xpY2sgZXZlbnRcbiAgICBpZiAodGhpcy5fc2V0dGluZ3MuaW5XZWJFbmFibGVkKSB7XG4gICAgICB0cmlnZ2VySW5XZWJDYW1wYWlnbihjbGlja0V2ZW50LCB0aGlzLl9zZXR0aW5ncy5hcHBJZCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHNlbGYuaWRlbnRpZmllZCkge1xuICAgIGNvbnN0IHBhZ2VWaWV3ZWRFdmVudCA9IHtcbiAgICAgIGV2ZW50TmFtZTogJ3BhZ2Vfdmlld2VkJyxcbiAgICAgIHFndHM6IHBhcnNlSW50KG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCksXG4gICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgIHVybDogd2luZG93LmxvY2F0aW9uLmhyZWYsXG4gICAgICAgIC4uLnBhcnNlVXRtUGFyYW1zKGxvY2F0aW9uVXJsKSxcbiAgICAgIH0sXG4gICAgfTtcbiAgICBpZiAod2luZG93LmRvY3VtZW50LnJlZmVycmVyKSB7XG4gICAgICBwYWdlVmlld2VkRXZlbnQucGFyYW1ldGVycy5yZWZlcnJlciA9IHdpbmRvdy5kb2N1bWVudC5yZWZlcnJlcjtcbiAgICB9XG4gICAgY29uc3QgcWdTZWcgPSBsb2NhdGlvblVybC5zZWFyY2hQYXJhbXMuZ2V0KCdxZ19zZWcnKTtcbiAgICBpZiAocWdTZWcpIHtcbiAgICAgIHBhZ2VWaWV3ZWRFdmVudC5wYXJhbWV0ZXJzLnFnX3NlZyA9IHFnU2VnO1xuICAgIH1cbiAgICBlLmV2ZW50cy5wdXNoKHBhZ2VWaWV3ZWRFdmVudCk7XG5cbiAgICAvLyBUcmlnZ2VyIEluV2ViIGNhbXBhaWduIGFmdGVyIGBwYWdlX3ZpZXdlZGAgZXZlbnRcbiAgICBpZiAodGhpcy5fc2V0dGluZ3MuaW5XZWJFbmFibGVkKSB7XG4gICAgICB0cmlnZ2VySW5XZWJDYW1wYWlnbihwYWdlVmlld2VkRXZlbnQsIHRoaXMuX3NldHRpbmdzLmFwcElkKTtcbiAgICB9XG4gIH1cbiAgaWYgKGUuZXZlbnRzLmxlbmd0aCA+IDApIHtcbiAgICBzZWxmXG4gICAgICAuX3NlbmREYXRhVG9TZXJ2ZXIoZSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICB1cGRhdGVEYXRhU2V0dGluZ3MoJ2xhc3RTeW5jRGF0ZScsIGN1cnJlbnREYXRlKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGxvZy5lcnJvcignRmFpbGVkIHRvIHNlbmQgZGF0YScsIGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qIERvIGNvb2tpZSBzeW5jIGluIHRoZSBiYWNrZ3JvdW5kIChvbmx5IGZvciBsZWdhY3kgQVBJIGVuZHBvaW50KSAqL1xuICBpZiAodGhpcy5fc2V0dGluZ3MudXNlTGVnYWN5QVBJKSB7XG4gICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBhcHBpZXJDb29raWVTeW5jKHNlbGYpO1xuICAgIH0sIDIwMDApO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBRRztcbmV4cG9ydCB7IGNvb2tpZSB9O1xuIiwiLy8gQGZsb3dcbmltcG9ydCBsb2cgZnJvbSAnLi91dGlscy9sb2cnO1xuaW1wb3J0IHsgbG9nTW9iaWxlU2RrVmVyc2lvbiB9IGZyb20gJy4vdXRpbHMvdmVyc2lvbic7XG5cbmZ1bmN0aW9uIFdpdGhBcHBTZGtNb2RlKCkge1xuICBsb2dNb2JpbGVTZGtWZXJzaW9uKCk7XG59XG5cbldpdGhBcHBTZGtNb2RlLnByb3RvdHlwZS5jYWxsbWV0aG9kID0gYXJncyA9PiB7XG4gIGlmICghKGFyZ3MgJiYgYXJncy5sZW5ndGggPiAwKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IFttZXRob2QsIC4uLnBhcmFtc10gPSBhcmdzO1xuXG4gIHN3aXRjaCAobWV0aG9kKSB7XG4gICAgY2FzZSAnaWRlbnRpZnknOlxuICAgICAgcmV0dXJuIHNlbmRJZGVudGlmeShwYXJhbXNbMF0pO1xuXG4gICAgY2FzZSAnZXZlbnQnOlxuICAgIGNhc2UgJ3FnRXZlbnQnOlxuICAgICAgcmV0dXJuIHNlbmRFdmVudC5hcHBseShudWxsLCBwYXJhbXMpO1xuXG4gICAgLy8gVHVybiBvbiBkZWJ1ZyBtb2RlXG4gICAgY2FzZSAnZGVidWcnOlxuICAgICAgbG9nLmVuYWJsZUFsbCgpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdpbml0JzpcbiAgICBjYXNlICdwcm9tcHQtcHVzaCc6XG4gICAgY2FzZSAnbWVzc2FnZS1yZWNlaXZlZCc6XG4gICAgY2FzZSAnZ2V0UmVjb21tZW5kYXRpb24nOlxuICAgIGNhc2UgJ3Nob3dSZWNvbW1lbmRhdGlvbic6XG4gICAgY2FzZSAnY2xvc2VPblN1YnNjcmliZWRQb3B1cCc6XG4gICAgY2FzZSAnb24nOlxuICAgIGNhc2UgJ29uY2UnOlxuICAgIGNhc2UgJ29mZic6XG4gICAgY2FzZSAnZ2V0QXR0cmlidXRpb24nOlxuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgbG9nLmVycm9yKCd1bmRlZmluZWQgbWV0aG9kJywgbWV0aG9kKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHNlbmRJZGVudGlmeSA9IChpZGVudGlmaWVzOiBhbnkpID0+IHtcbiAgaWYgKHR5cGVvZiBpZGVudGlmaWVzICE9PSAnb2JqZWN0JyB8fCBpZGVudGlmaWVzID09PSBudWxsKSB7XG4gICAgbG9nLmVycm9yKCdFeHBlY3QgSlNPTiBvYmplY3QsIGJ1dCBnZXQnLCBpZGVudGlmaWVzKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBPYmplY3Qua2V5cyhpZGVudGlmaWVzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSBpZGVudGlmaWVzW2tleV07XG5cbiAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgY2FzZSAnZW1haWwnOlxuICAgICAgY2FzZSAndXNlcklkJzpcbiAgICAgIGNhc2UgJ25hbWUnOlxuICAgICAgY2FzZSAnZmlyc3ROYW1lJzpcbiAgICAgIGNhc2UgJ2xhc3ROYW1lJzpcbiAgICAgIGNhc2UgJ2NpdHknOlxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGxvZy5lcnJvcignRXhwZWN0IHZhbHVlIGFzIHN0cmluZywgYnV0IGdldCcsIHtcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnZGF5JzpcbiAgICAgIGNhc2UgJ21vbnRoJzpcbiAgICAgIGNhc2UgJ3llYXInOlxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgIGxvZy5lcnJvcignRXhwZWN0IHZhbHVlIGFzIG51bWJlciwgYnV0IGdldCcsIHtcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgY29uc3QgdHlwZU9mVmFsdWUgPSB0eXBlb2YgdmFsdWU7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlT2ZWYWx1ZSAhPT0gJ2Jvb2xlYW4nICYmXG4gICAgICAgICAgdHlwZU9mVmFsdWUgIT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgdHlwZU9mVmFsdWUgIT09ICdudW1iZXInXG4gICAgICAgICkge1xuICAgICAgICAgIGxvZy5lcnJvcignRXhwZWN0IHZhbHVlIGFzIGJvb2xlYW4sIHN0cmluZyBvciBudW1iZXIsIGJ1dCBnZXQnLCB7XG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB3aW5kb3cuYWlxTW9iaWxlU2RrLnNldEN1c3RvbUtleShKU09OLnN0cmluZ2lmeSh7IGtleSwgdmFsdWUgfSkpOyAvLyBMZXQgQXBwLVNESyBzaWRlIGRvIHRoZSByZXN0IHR5cGUgcHJvdGVjdGlvblxuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZW5kRXZlbnQgPSAoXG4gIGV2ZW50TmFtZTogc3RyaW5nLFxuICBwYXJhbWV0ZXJzPzogT2JqZWN0LFxuICB2dHM/OiBudW1iZXJcbikgPT4ge1xuICBpZiAoIWV2ZW50TmFtZSB8fCB0eXBlb2YgZXZlbnROYW1lICE9PSAnc3RyaW5nJykge1xuICAgIGxvZy5lcnJvcignRXhwZWN0IGV2ZW50TmFtZSB0byBiZSBzdHJpbmcsIGJ1dCBnZXQnLCBldmVudE5hbWUpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChwYXJhbWV0ZXJzICYmIHR5cGVvZiBwYXJhbWV0ZXJzICE9PSAnb2JqZWN0Jykge1xuICAgIGxvZy5lcnJvcignRXhwZWN0IHBhcmFtZXRlcnMgdG8gYmUgSlNPTiBvYmplY3QsIGJ1dCBnZXQnLCBwYXJhbWV0ZXJzKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAodnRzICYmIHR5cGVvZiB2dHMgIT09ICdudW1iZXInKSB7XG4gICAgbG9nLmVycm9yKCdFeHBlY3QgdnRzIHRvIGJlIG51bWJlciwgYnV0IGdldCcsIHZ0cyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3Qgb2JqID0ge1xuICAgIGV2ZW50TmFtZSxcbiAgICBwYXJhbWV0ZXJzLFxuICAgIHZ0cyxcbiAgfTtcbiAgaWYgKCFwYXJhbWV0ZXJzKSB7XG4gICAgZGVsZXRlIG9iai5wYXJhbWV0ZXJzO1xuICB9XG5cbiAgd2luZG93LmFpcU1vYmlsZVNkay5sb2dFdmVudChKU09OLnN0cmluZ2lmeShvYmopKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFdpdGhBcHBTZGtNb2RlO1xuIiwiLy8gQGZsb3dcbi8vIFN0b3JhZ2Uga2V5IGluIGluZGV4REJcbmV4cG9ydCBjb25zdCBJREJfQVRUUklCVVRJT05fS0VZID0gJ2FpcS1hdHRyaWJ1dGlvbic7XG5leHBvcnQgY29uc3QgSURCX1ZFUlNJT05fS0VZID0gJ2FpcS12ZXJzaW9uJztcbmV4cG9ydCBjb25zdCBJREJfSU5XRUJfREFUQV9LRVkgPSAnYWlxLWlud2ViLWRhdGEnO1xuZXhwb3J0IGNvbnN0IElEQl9JTldFQl9ISVNUT1JJRVNfS0VZID0gJ2FpcS1pbndlYi1oaXN0b3JpZXMnO1xuZXhwb3J0IGNvbnN0IElEQl9QVVNIX0RFTklFRF9USU1FU1RBTVAgPSAnYWlxLXB1c2gtZGVuaWVkLXRpbWVzdGFtcCc7XG5leHBvcnQgY29uc3QgSURCX0NZTVBfQUNLRUQgPSAnYWlxLWN5bXAtYWNrZWQnO1xuXG4vLyBTdG9yYWdlIGtleSBpbiBTZXNzaW9uU3RvcmFnZVxuZXhwb3J0IGNvbnN0IElOV0VCX0VYSVRfSU5URU5UX1NIT1dOID0gJ2FpcS1pbndlYkV4aXRJbnRlbnRTaG93bic7XG5leHBvcnQgY29uc3QgSU5XRUJfU0NST0xMX1BFUkNFTlRfU0hPV04gPSAnYWlxLWlud2ViU2Nyb2xsUGVyY2VudFNob3duJztcblxuLy8gRm9yIGNyb3NzLWRvbWFpbiBhdHRyaWJ1dGlvblxuZXhwb3J0IGNvbnN0IFNFQVJDSF9QQVJBTVNfQVRUUklCVVRJT05fS0VZID0gJ2FpcV9hdHRyJztcbmV4cG9ydCBjb25zdCBTRUFSQ0hfUEFSQU1TX0lERU5USUZJRURfS0VZID0gJ2FpcV9pZGVudGlmaWVkJztcblxuLy8gRm9yIGNhdGNoIGxpbmUgaWQgJiBjaGFubmVsXG5leHBvcnQgY29uc3QgU0VBUkNIX1BBUkFNU19MSU5FQ0hBTk5FTCA9ICdfbG5jaGlkJztcbmV4cG9ydCBjb25zdCBTRUFSQ0hfUEFSQU1TX0xJTkVVSUQgPSAnX2xudWlkJztcblxuLy8gU2VydmljZSB3b3JrZXIncyBzY29wZVxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU1dfU0NPUEUgPSAnYWlxdWEnO1xuXG4vLyBMaWZldGltZSBvZiBpbndlYiBkYXRhXG5leHBvcnQgY29uc3QgSU5XRUJfREFUQV9MSUZFVElNRSA9IDM2MDAwMDA7IC8vIDFob3VyXG5cbi8vIENvb2tpZSBrZXkgZm9yIHdVc2VySWRcbmV4cG9ydCBjb25zdCBXVVNFUl9JRF9LRVkgPSAnUUdVc2VySWQnO1xuIiwiLy8gQGZsb3dcbmltcG9ydCBwYXJzZVV0bVBhcmFtcyBmcm9tICcuLi91dGlscy9wYXJzZVV0bVBhcmFtcyc7XG5pbXBvcnQgdHlwZSB7IFFnRXZlbnQgfSBmcm9tICcuLi90eXBlcy9xZ0V2ZW50JztcblxuLyoqXG4gKiBCdWlsZCBgcGFnZV92aWV3ZWRgIGV2ZW50IGZvciBgRXhpdEludGVudGAgdG8gZmlsdGVyIGNhbXBhaWduXG4gKi9cbmNvbnN0IGJ1aWxkUGFnZVZpZXdlZEV2ZW50ID0gKCk6IFFnRXZlbnQgPT4ge1xuICBjb25zdCBsb2NhdGlvblVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uKTtcbiAgY29uc3QgZXZlbnQ6IFFnRXZlbnQgPSB7XG4gICAgZXZlbnROYW1lOiAncGFnZV92aWV3ZWQnLCAvLyBDdXJyZW50bHksIHdlIG1ha2UgYGV4aXRJbnRlbnRgIGJhc2VkIG9uIGBwYWdlX3ZpZXdkYCBjb25kaXRpb24uXG4gICAgcWd0czogcGFyc2VJbnQoK25ldyBEYXRlKCkgLyAxMDAwKSxcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICB1cmw6IHdpbmRvdy5sb2NhdGlvbi5ocmVmLFxuICAgICAgLi4ucGFyc2VVdG1QYXJhbXMobG9jYXRpb25VcmwpLFxuICAgIH0sXG4gIH07XG5cbiAgLy8gRmxvdyBkbyBub3QgYWxsb3cgdG8gc2V0IGByZWZlcnJlcmAgd2l0aG91dCBtYWtlIGBpZiAoZXZlbnQucGFyYW1ldGVycylgIGZpcnN0XG4gIGlmIChldmVudC5wYXJhbWV0ZXJzICYmIHdpbmRvdy5kb2N1bWVudC5yZWZlcnJlcikge1xuICAgIGV2ZW50LnBhcmFtZXRlcnMucmVmZXJyZXIgPSB3aW5kb3cuZG9jdW1lbnQucmVmZXJyZXI7XG4gIH1cbiAgY29uc3QgcWdTZWcgPSBsb2NhdGlvblVybC5zZWFyY2hQYXJhbXMuZ2V0KCdxZ19zZWcnKTtcbiAgaWYgKGV2ZW50LnBhcmFtZXRlcnMgJiYgcWdTZWcpIHtcbiAgICBldmVudC5wYXJhbWV0ZXJzLnFnX3NlZyA9IHFnU2VnO1xuICB9XG5cbiAgcmV0dXJuIGV2ZW50O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgYnVpbGRQYWdlVmlld2VkRXZlbnQ7XG4iLCIvLyBAZmxvd1xuaW1wb3J0IGxvZyBmcm9tICcuLi91dGlscy9sb2cnO1xuaW1wb3J0IHRyaWdnZXJJbldlYkNhbXBhaWduIGZyb20gJy4vdHJpZ2dlckluV2ViQ2FtcGFpZ24nO1xuaW1wb3J0IGJ1aWxkUGFnZVZpZXdlZEV2ZW50IGZyb20gJy4vYnVpbGRQYWdlVmlld2VkRXZlbnQnO1xuXG5pbXBvcnQgeyBJTldFQl9FWElUX0lOVEVOVF9TSE9XTiB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5cbmNvbnN0IFZFUlRJQ0FMX0JPVU5EQVJZID0gMTAwO1xubGV0IG1vdXNlWSA9IDA7XG5sZXQgQVBQX0lEO1xuXG4vLyBFeHBvcnQgZm9yIHVuaXQgdGVzdFxuZXhwb3J0IGNvbnN0IHNldE1vdXNlWSA9ICh5OiBudW1iZXIpID0+IHtcbiAgbW91c2VZID0geTtcbn07XG5cbmV4cG9ydCBjb25zdCBoYW5kbGVNb3VzZU1vdmUgPSAoZTogTW91c2VFdmVudCkgPT4ge1xuICBzZXRNb3VzZVkoZS5jbGllbnRZKTtcbn07XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVNb3VzZU91dChlOiBNb3VzZUV2ZW50KSB7XG4gIC8vIEluIG9uIGJyb3dzZXIgc2Vzc2lvbiwgb25seSBhbGxvdyB0byBzaG93IG9uZSB0aW1lLlxuICBpZiAoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShJTldFQl9FWElUX0lOVEVOVF9TSE9XTikgPT09ICd0cnVlJykge1xuICAgIGxvZy5kZWJ1ZygnRXhpdEludGVudCBzaG93cyBiZWZvcmUnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogTm90ZTpcbiAgICogRmlyZWZveCBkbyBub3QgZmlyZSBgbW91c2VsZWF2ZWAgb24gYGRvY3VtZW50YCwgc28gd2UgbmVlZCB0byB1c2UgbW91c2VvdXQgdG8gc2ltdWxhdGUgaXQuLi5cbiAgICogTm8gYHJlbGF0ZWRUYXJnZXRgIGlmIHRoZSBtb3VzZSBsZWZ0L2VudGVyZWQgdGhlIGJyb3dzZXIgd2luZG93XG4gICAqIEluc3BpcmUgdGhpcyBzb2x1dGlvbiBmcm9tIGpRdWVyeS4uLlxuICAgKiBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS9ibG9iL2U3NDNjYmQyODU1MzI2N2Y5NTVmNzFlYTcyNDgzNzc5MTU2MTNmZDkvdGVzdC9kYXRhL2pxdWVyeS0xLjkuMS5qcyNMMzUzMFxuICAgKi9cbiAgaWYgKCFlLnJlbGF0ZWRUYXJnZXQgJiYgbW91c2VZIDwgVkVSVElDQUxfQk9VTkRBUlkpIHtcbiAgICBjb25zdCBpc09wZW4gPSBhd2FpdCB0cmlnZ2VySW5XZWJDYW1wYWlnbihcbiAgICAgIGJ1aWxkUGFnZVZpZXdlZEV2ZW50KCksXG4gICAgICBBUFBfSUQsXG4gICAgICAnZXhpdEludGVudCdcbiAgICApO1xuXG4gICAgLy8gUmVjb3JkIHRoZSBleGl0IGludGVudCBoYWQgdHJpZ2dlcmVkIGluIGN1cnJlbnQgYnJvd3NlciBzZXNzaW9uXG4gICAgaWYgKGlzT3Blbikge1xuICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShJTldFQl9FWElUX0lOVEVOVF9TSE9XTiwgJ3RydWUnKTtcbiAgICB9XG4gIH1cbn1cblxuY29uc3QgYmluZEV4aXRJbnRlbnRIYW5kbGVyID0gKGFwcElkOiBzdHJpbmcpID0+IHtcbiAgQVBQX0lEID0gYXBwSWQ7XG5cbiAgLyoqXG4gICAqIE5vdGU6IEZpcmVmb3ggZG8gbm90IGZpcmUgYG1vdXNlbGVhdmVgIG9uIGBkb2N1bWVudGAsIHNvIHdlIG5lZWQgdG8gdXNlIG1vdXNlb3V0IHRvIHNpbXVsYXRlIGl0Li4uXG4gICAqL1xuXG4gIC8vIFJlbW92ZSBwcmV2aW91cyBldmVudCBoYW5kbGVyIGlmIGFueVxuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBoYW5kbGVNb3VzZU1vdmUpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIGhhbmRsZU1vdXNlT3V0KTtcblxuICAvLyBBZGQgZXZlbnQgaGFuZGxlciBmb3IgRXhpdCBJbnRlbnRcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgaGFuZGxlTW91c2VNb3ZlKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCBoYW5kbGVNb3VzZU91dCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBiaW5kRXhpdEludGVudEhhbmRsZXI7XG4iLCIvLyBAZmxvd1xuaW1wb3J0IHsgZ2V0IGFzIGdldElEQiwgc2V0IGFzIHNldElEQiB9IGZyb20gJ2lkYi1rZXl2YWwnO1xuaW1wb3J0IGxvZyBmcm9tICcuLi91dGlscy9sb2cnO1xuaW1wb3J0IG1ha2VSZXF1ZXN0IGZyb20gJy4uL3V0aWxzL21ha2VSZXF1ZXN0JztcbmltcG9ydCB7IGdldFdVc2VySWQgfSBmcm9tICcuLi91dGlscy91c2VyX2lkJztcblxuaW1wb3J0IHsgSURCX0lOV0VCX0RBVEFfS0VZLCBJTldFQl9EQVRBX0xJRkVUSU1FIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcbmltcG9ydCB7IHR5cGUgSW5XZWJEYXRhIH0gZnJvbSAnLi4vdHlwZXMvaW5XZWInO1xuXG4vLyBFeHBvcnQgZm9yIHVuaXQgdGVzdFxuZXhwb3J0IGNvbnN0IEZFVENIX1RJTUVPVVQgPSAzMDAwOyAvLyAzc2Vjb25kc1xuZXhwb3J0IGNvbnN0IEhBU19GRVRDSF9JTldFQiA9ICdhaXEtaGFzRmV0Y2hJbldlYic7IC8vIEEgZmxhZyBpbiBzZXNzaW9uU3RvcmFnZVxuXG4vKipcbiAqIFJlcXVlc3QgSW5XZWIgZGF0YSBmcm9tIEFJUVVBIHVzZXIgc2VydmVyXG4gKi9cbmZ1bmN0aW9uIHJlcXVlc3RJbldlYkRhdGEoXG4gIGFwcElkOiBzdHJpbmcsXG4gIHVzZUxlZ2FjeUFQST86IGJvb2xlYW4sXG4gIGZpcnN0VGltZT86IGJvb2xlYW5cbik6IFByb21pc2U8P0luV2ViRGF0YT4ge1xuICBjb25zdCBhcGlIb3N0ID0gdXNlTGVnYWN5QVBJXG4gICAgPyBwcm9jZXNzLmVudi5MRUdBQ1lfVVNFUl9TRVJWRVJfSE9TVFxuICAgIDogcHJvY2Vzcy5lbnYuVVNFUl9TRVJWRVJfSE9TVDtcbiAgY29uc3QgYXBpVXJsID1cbiAgICBgJHthcGlIb3N0IHx8ICcnfS93ZWItaW5hcHAvYCArXG4gICAgYD9hcHBJZD0ke2FwcElkfWAgK1xuICAgIGAmZmlyc3RUaW1lPSR7Zmlyc3RUaW1lID8gMSA6IDB9YCArXG4gICAgYCZ3VXNlcklkPSR7Z2V0V1VzZXJJZCgpfWAgKyAvLyBTZW5kIHdVc2VySWQgY29va2llIHRvIGF2b2lkIERvTm90VHJhY2sgbGltaXRhdGlvblxuICAgICcmdmVyc2lvbk5vPTAnOyAvLyBBbHdheXMgZ2V0IGxhdGVzdCBjYW1wYWlnbnMgbGlzdCwgaW5zdGVhZCBvZiBkaWZmXG5cbiAgcmV0dXJuIG1ha2VSZXF1ZXN0KHtcbiAgICB1cmw6IGFwaVVybCxcbiAgICBtZXRob2Q6ICdHRVQnLFxuICB9KS50aGVuKGFzeW5jICh7IGpzb246IHsgaW5hcHAgfSA9IHt9IH0pID0+ICh7XG4gICAgY2FtcGFpZ25zOiBpbmFwcC5jYW1wYWlnbnMgfHwgW10sXG4gICAgdGltZXN0YW1wOiArbmV3IERhdGUoKSxcbiAgfSkpO1xufVxuXG4vKipcbiAqIEdldCB0aGUgSW5XZWIgZGF0YSBmcm9tIGNhY2hlLlxuICogQnV0IGlmIHRoZSBjYWNoZSBpcyBub3QgdGhlcmUgb3Igb3V0ZGF0ZWQsIGZldGNoIGl0IGFnYWluLlxuICovXG5jb25zdCBmZXRjaEluV2ViRGF0YTogKFxuICBhcHBJZDogc3RyaW5nLFxuICB1c2VMZWdhY3lBUEk/OiBib29sZWFuLFxuICBmaXJzdFRpbWU/OiBib29sZWFuLFxuICBmb3JjZVJlcXVlc3Q/OiBib29sZWFuXG4pID0+IFByb21pc2U8P0luV2ViRGF0YT4gPSAoKHJlcXVlc3RQcm9taXNlLCBjYWNoZWREYXRhKSA9PiBhc3luYyAoXG4gIGFwcElkLFxuICB1c2VMZWdhY3lBUEksXG4gIGZpcnN0VGltZSxcbiAgZm9yY2VSZXF1ZXN0XG4pID0+IHtcbiAgY29uc3QgaGFzRmV0Y2hJbldlYiA9ICEhc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShIQVNfRkVUQ0hfSU5XRUIpO1xuICBjYWNoZWREYXRhID1cbiAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICd0ZXN0JyAmJiBjYWNoZWREYXRhKSB8fFxuICAgIChhd2FpdCBnZXRJREIoSURCX0lOV0VCX0RBVEFfS0VZKSkgfHxcbiAgICBudWxsO1xuXG4gIC8vIE5PVEU6IE9ubHkgZm9yIHVuaXQgdGVzdFxuICBpZiAoZm9yY2VSZXF1ZXN0KSB7XG4gICAgcmVxdWVzdFByb21pc2UgPSBudWxsO1xuICB9XG5cbiAgLy8gRWFybHkgcmV0dXJuIHRoZSBjYWNoZWQgZGF0YSBpZiBub3QgZXhwaXJlZCB5ZXQuXG4gIGlmIChcbiAgICBoYXNGZXRjaEluV2ViICYmXG4gICAgY2FjaGVkRGF0YSAmJlxuICAgICtuZXcgRGF0ZSgpIC0gY2FjaGVkRGF0YS50aW1lc3RhbXAgPD0gSU5XRUJfREFUQV9MSUZFVElNRVxuICApIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNhY2hlZERhdGEpO1xuICB9XG5cbiAgLy8gQ2FjaGUgdGhlIHJlcXVlc3QgcHJvbWlzZVxuICByZXF1ZXN0UHJvbWlzZSA9XG4gICAgcmVxdWVzdFByb21pc2UgfHwgcmVxdWVzdEluV2ViRGF0YShhcHBJZCwgdXNlTGVnYWN5QVBJLCBmaXJzdFRpbWUpO1xuXG4gIHJldHVybiBQcm9taXNlLnJhY2UoW1xuICAgIHJlcXVlc3RQcm9taXNlLFxuICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT5cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICByZXNvbHZlKGNhY2hlZERhdGEpO1xuICAgICAgfSwgRkVUQ0hfVElNRU9VVClcbiAgICApLFxuICBdKVxuICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgY2FjaGVkRGF0YSA9IGRhdGE7XG5cbiAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgIHNldElEQihJREJfSU5XRUJfREFUQV9LRVksIGRhdGEpOyAvLyBGaXJlIGJ1dCBkb24ndCB3YWl0LCBsZXQgY2xvdXJzZSBoYW5kbGUgbWVtb3JpemF0aW9uLlxuICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKEhBU19GRVRDSF9JTldFQiwgJ3RydWUnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlcXVlc3RQcm9taXNlID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgIGxvZy5lcnJvcignRmFpbGVkIHRvIGZldGNoIGlud2ViIGRhdGEnLCBlcnIpO1xuICAgICAgcmV0dXJuIGNhY2hlZERhdGE7XG4gICAgfSk7XG59KShudWxsLCBudWxsKTtcblxuZXhwb3J0IGRlZmF1bHQgZmV0Y2hJbldlYkRhdGE7XG4iLCIvLyBAZmxvd1xuaW1wb3J0IHsgdG9Vbml4VGltZXN0YW1wIH0gZnJvbSAnLi4vdXRpbHMvdGltZSc7XG5pbXBvcnQgdHJpZ2dlckluV2ViQ2FtcGFpZ24gZnJvbSAnLi90cmlnZ2VySW5XZWJDYW1wYWlnbic7XG5pbXBvcnQgYnVpbGRQYWdlVmlld2VkRXZlbnQgZnJvbSAnLi9idWlsZFBhZ2VWaWV3ZWRFdmVudCc7XG5cbmltcG9ydCB0eXBlIHsgSW5XZWJDYW1wYWlnbiB9IGZyb20gJy4uL3R5cGVzL2luV2ViJztcblxubGV0IEFQUF9JRDtcbmxldCBsYXN0QWN0aW9uVGltZXN0YW1wO1xubGV0IHRpbWVyO1xuXG5leHBvcnQgY29uc3Qgc2V0TGFzdEFjdGlvblRpbWVzdGFtcCA9ICh0aW1lc3RhbXA6IG51bWJlcikgPT4ge1xuICBsYXN0QWN0aW9uVGltZXN0YW1wID0gdGltZXN0YW1wO1xufTtcblxuZXhwb3J0IGNvbnN0IHNob3VsZElkbGVUaW1lb3V0TWF0Y2ggPSAoc2Vjb25kczogbnVtYmVyKSA9PiAoXG4gIGNhbXBhaWduOiBJbldlYkNhbXBhaWduXG4pOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIChcbiAgICAvLyBTUEVDOiBDaGVjayBgb3ZlcmAgbm90IGBjbG9zZXN0IHRvYFxuICAgICEhY2FtcGFpZ24uaWRsZVRyaWdnZXJSdWxlICYmIHNlY29uZHMgPj0gY2FtcGFpZ24uaWRsZVRyaWdnZXJSdWxlLnRpbWVvdXRcbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBjaGVja0lkbGUgPSAoKSA9PiB7XG4gIGNvbnN0IHRpbWVTZWNvbmREaWZmID0gdG9Vbml4VGltZXN0YW1wKCtuZXcgRGF0ZSgpKSAtIGxhc3RBY3Rpb25UaW1lc3RhbXA7XG5cbiAgdHJpZ2dlckluV2ViQ2FtcGFpZ24oXG4gICAgYnVpbGRQYWdlVmlld2VkRXZlbnQoKSxcbiAgICBBUFBfSUQsXG4gICAgJ2lkbGVUaW1lJyxcbiAgICBzaG91bGRJZGxlVGltZW91dE1hdGNoKHRpbWVTZWNvbmREaWZmKVxuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IHJlc2V0VGltZXIgPSAoKSA9PiB7XG4gIC8vIFJlc2V0IGxhc3QgYWN0aW9uJ3MgdGltZXN0YW1wXG4gIHNldExhc3RBY3Rpb25UaW1lc3RhbXAodG9Vbml4VGltZXN0YW1wKCtuZXcgRGF0ZSgpKSk7XG5cbiAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XG4gIHRpbWVyID0gc2V0SW50ZXJ2YWwoY2hlY2tJZGxlLCAxMCAqIDEwMDApOyAvLyBDaGVja2luZyBiYXNlZCBvbiBlYWNoIDEwIHNlYy5cbn07XG5cbmNvbnN0IGJpbmRJZGxlSGFuZGxlciA9IChhcHBJZDogc3RyaW5nKSA9PiB7XG4gIEFQUF9JRCA9IGFwcElkO1xuICBjbGVhckludGVydmFsKHRpbWVyKTtcblxuICBbJ21vdXNlZG93bicsICdtb3VzZW1vdmUnLCAna2V5cHJlc3MnLCAnc2Nyb2xsJywgJ3RvdWNoc3RhcnQnXS5mb3JFYWNoKFxuICAgIGV2ZW50TmFtZSA9PiB7XG4gICAgICAvLyBSZW1vdmUgcHJldmlvdXMgZXZlbnQgaGFuZGxlciBpZiBhbnlcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCByZXNldFRpbWVyLCB0cnVlKTtcblxuICAgICAgLy8gQWRkIGV2ZW50IGhhbmRsZXJcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCByZXNldFRpbWVyLCB0cnVlKTtcbiAgICB9XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBiaW5kSWRsZUhhbmRsZXI7XG4iLCIvLyBAZmxvd1xuZXhwb3J0IHtcbiAgb3Blbklud2ViSHRtbFBvcHVwLFxuICBjbG9zZUlud2ViSHRtbFBvcHVwLFxuICBQT1BVUF9JRCBhcyBIVE1MX1BPUFVQX0lELFxufSBmcm9tICcuL2lud2ViX2h0bWxfcG9wdXAnO1xuIiwiXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzPz9yZWYtLTYtMSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9wb3N0Y3NzIS4vaW53ZWJfaHRtbF9wb3B1cC5jc3NcIik7XG5cbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXG52YXIgdHJhbnNmb3JtO1xudmFyIGluc2VydEludG87XG5cblxuXG52YXIgb3B0aW9ucyA9IHtcImhtclwiOnRydWV9XG5cbm9wdGlvbnMudHJhbnNmb3JtID0gdHJhbnNmb3JtXG5vcHRpb25zLmluc2VydEludG8gPSB1bmRlZmluZWQ7XG5cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cbmlmKG1vZHVsZS5ob3QpIHtcblx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzPz9yZWYtLTYtMSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9wb3N0Y3NzIS4vaW53ZWJfaHRtbF9wb3B1cC5jc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz8/cmVmLS02LTEhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cG9zdGNzcyEuL2lud2ViX2h0bWxfcG9wdXAuY3NzXCIpO1xuXG5cdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cblx0XHR2YXIgbG9jYWxzID0gKGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdHZhciBrZXksIGlkeCA9IDA7XG5cblx0XHRcdGZvcihrZXkgaW4gYSkge1xuXHRcdFx0XHRpZighYiB8fCBhW2tleV0gIT09IGJba2V5XSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRpZHgrKztcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGtleSBpbiBiKSBpZHgtLTtcblxuXHRcdFx0cmV0dXJuIGlkeCA9PT0gMDtcblx0XHR9KGNvbnRlbnQubG9jYWxzLCBuZXdDb250ZW50LmxvY2FscykpO1xuXG5cdFx0aWYoIWxvY2FscykgdGhyb3cgbmV3IEVycm9yKCdBYm9ydGluZyBDU1MgSE1SIGR1ZSB0byBjaGFuZ2VkIGNzcy1tb2R1bGVzIGxvY2Fscy4nKTtcblxuXHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0fSk7XG5cblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59IiwiLy8gQGZsb3dcbmltcG9ydCB0eXBlIHsgSW53ZWJIdG1sUG9wdXAgfSBmcm9tICcuLi8uLi90eXBlcy9pbldlYic7XG5pbXBvcnQgdHlwZSB7IFBvcHVwT3B0aW9ucyB9IGZyb20gJy4uLy4uL3R5cGVzL3BvcHVwJztcbmltcG9ydCBjc3MgZnJvbSAnLi9pbndlYl9odG1sX3BvcHVwLmNzcyc7XG5pbXBvcnQgbG9nIGZyb20gJy4uLy4uL3V0aWxzL2xvZyc7XG5cbmV4cG9ydCBjb25zdCBQT1BVUF9JRCA9ICdxZy1pbndlYi1odG1sLXBvcHVwJzsgLy8gRXhwb3J0IGZvciB1bml0IHRlc3RcblxuLyoqXG4gKiBDaGVjayBpdCBpcyBhIGh5cGVybGluayBhbmQgbm90IHBlcmZvcm0gYXMgYSBjbGljayBidXR0b24uXG4gKiBCeXBhc3MgYW55IG9mIGJlbG93IGNhc2VzOlxuICogPGE+ZXhhbXBsZTwvYT5cbiAqIDxhIGhyZWY9XCIjXCI+ZXhhbXBsZTwvYT5cbiAqIDxhIGhyZWY9XCIjXCIgb25jbGljaz1cImhhbmRsZUNsaWNrKClcIj5vbmNsaWNrPC9hPlxuICogPGEgaHJlZj1cImphdmFzY3JpcHQ6aGFuZGxlQ2xpY2soKVwiPm9uY2xpY2s8L2E+XG4gKiA8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKClcIiBvbmNsaWNrPVwiaGFuZGxlQ2xpY2soKVwiPm9uY2xpY2s8L2E+XG4gKi9cbmV4cG9ydCBjb25zdCBpc0h5cGVybGlua1VybCA9IChocmVmOiBzdHJpbmcpID0+IHtcbiAgcmV0dXJuIGhyZWYgJiYgaHJlZiAhPT0gJyMnICYmICFocmVmLnN0YXJ0c1dpdGgoJ2phdmFzY3JpcHQ6Jyk7XG59O1xuXG5leHBvcnQgY29uc3QgaGFuZGxlSHlwZXJsaW5rQ2xpY2sgPSAocG9wdXBPcHRpb25zPzogUG9wdXBPcHRpb25zKSA9PiAoXG4gIGU6IE1vdXNlRXZlbnRcbikgPT4ge1xuICBjb25zdCB7XG4gICAgdGFyZ2V0LFxuICAgIGN1cnJlbnRUYXJnZXQsXG4gIH06IHsgdGFyZ2V0OiBPYmplY3QsIGN1cnJlbnRUYXJnZXQ6IE9iamVjdCB9ID0gZTtcbiAgY29uc3QgeyBvblBvcHVwQ2xvc2VkLCBvbkh5cGVybGlua0NsaWNrIH0gPSBwb3B1cE9wdGlvbnMgfHwge307XG5cbiAgbG9nLmRlYnVnKCdDbGljaycsIGUsICd0YXJnZXQnLCB0YXJnZXQpO1xuXG4gIC8qKlxuICAgKiBHbyB0aHJvdWdoIHRoZSBldmVudCBidWJibGluZyBwYXRoIHRvIGhhbmRsZSB0aGUgY2FzZSBiZWxvdy5cbiAgICogPGEgaHJlZj1cImh0dHBzOi8vd3d3LmFwcGllci5jb20vXCI+PGltZyBzcmM9XCJodHRwczovL3VwbG9hZC5jYy9pMS8yMDE5LzAyLzAxL3Y0Nk55Qy5wbmdcIiAvPjwvYT5cbiAgICovXG4gIGxldCBub2RlID0gdGFyZ2V0O1xuICB3aGlsZSAobm9kZSAhPT0gY3VycmVudFRhcmdldCkge1xuICAgIGxvZy50cmFjZSgnVGhlIG5vZGUnLCBub2RlLCAnY3VycmVudFRhcmdldCcsIGN1cnJlbnRUYXJnZXQpO1xuXG4gICAgY29uc3QgaHJlZiA9IChub2RlLmdldEF0dHJpYnV0ZSgnaHJlZicpIHx8ICcnKS50cmltKCk7XG5cbiAgICAvLyBDaGVjayBpdCBpcyBhIGh5cGVybGluayBhbmQgbm90IHBlcmZvcm0gYXMgYSBjbGljayBidXR0b25cbiAgICBpZiAobm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdhJyAmJiBpc0h5cGVybGlua1VybChocmVmKSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgbG9nLmRlYnVnKCdDbGljayBvbiBoeXBlcmxpbmsnLCBocmVmKTtcblxuICAgICAgLy8gTG9nIGV2ZW50IHRvIGNhbGN1bGF0ZSBjYW1wYWlnbiBjbGlja1xuICAgICAgaWYgKHR5cGVvZiBvbkh5cGVybGlua0NsaWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIG9uSHlwZXJsaW5rQ2xpY2soKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xvc2UgcG9wdXBcbiAgICAgIGNsb3NlSW53ZWJIdG1sUG9wdXAob25Qb3B1cENsb3NlZCk7XG5cbiAgICAgIC8vIFJlZGlyZWN0IGJhc2VkIG9uIHRhcmdldCBhdHRyaWJ1dGVcbiAgICAgIGNvbnN0IGh5cGVybGlua1RhcmdldCA9IG5vZGUuZ2V0QXR0cmlidXRlKCd0YXJnZXQnKSB8fCAnX3NlbGYnO1xuICAgICAgd2luZG93Lm9wZW4oaHJlZiwgaHlwZXJsaW5rVGFyZ2V0KTtcblxuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICBsb2cudHJhY2UoJ05ldyBub2RlJywgbm9kZSk7XG4gIH1cbn07XG5cbi8qKlxuICogQXBwZW5kIElud2ViIGh0bWwgUG9wdXAgb24gYm9keSBlbGVtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvcGVuSW53ZWJIdG1sUG9wdXAoXG4gIGluV2ViSHRtbFBvcHVwOiBJbndlYkh0bWxQb3B1cCxcbiAgcG9wdXBPcHRpb25zPzogUG9wdXBPcHRpb25zXG4pIHtcbiAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFBPUFVQX0lEKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHtcbiAgICByb290RG9jdW1lbnQsXG4gICAgY29udGFpbmVySWQsXG4gICAgb25Qb3B1cE9wZW5lZCxcbiAgICBvblBvcHVwQ2xvc2VkLFxuICAgIG9uQ2xvc2VCdXR0b25DbGljayxcbiAgfSA9IHBvcHVwT3B0aW9ucyB8fCB7fTtcbiAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgcG9wdXAuY2xhc3NMaXN0LmFkZChjc3MucG9wdXApO1xuICBwb3B1cC5pZCA9IFBPUFVQX0lEO1xuXG4gIC8vIEFwcGVuZCBvdmVybGF5IGlmIG5lY2Vzc2FyeVxuICBpZiAoaW5XZWJIdG1sUG9wdXAuc2hvd092ZXJsYXkpIHtcbiAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKGNzcy5vdmVybGF5KTtcbiAgICBwb3B1cC5hcHBlbmRDaGlsZChvdmVybGF5KTtcbiAgfVxuXG4gIC8vIFByZXZlbnQgYm9keSBmcm9tIHNjcm9sbGluZyB3aXRoIGV4dHJhIHdyYXBwZXJcbiAgY29uc3QgcG91cFNjcm9sbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBwb3VwU2Nyb2xsLmNsYXNzTGlzdC5hZGQoY3NzWydwb3B1cC1zY3JvbGwnXSk7XG4gIHBvcHVwLmFwcGVuZENoaWxkKHBvdXBTY3JvbGwpO1xuXG4gIC8vIEFwcGVuZCBjb250YWluZXJcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGlmIChjb250YWluZXJJZCkge1xuICAgIGNvbnRhaW5lci5pZCA9IGNvbnRhaW5lcklkO1xuICB9XG4gIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGNzcy5jb250YWluZXIpO1xuICBjb250YWluZXIuaW5uZXJIVE1MID0gaW5XZWJIdG1sUG9wdXAuaHRtbEJvZHk7IC8vIEFwcGVuZCBjdXN0b21lciBIVE1MXG4gIHBvdXBTY3JvbGwuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcblxuICAvLyBBcHBlbmQgY2xvc2UgYnV0dG9uXG4gIGNvbnN0IGNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNsb3NlQnV0dG9uLmNsYXNzTGlzdC5hZGQoY3NzWydjbG9zZS1idXR0b24nXSk7XG4gIGNsb3NlQnV0dG9uLm9uY2xpY2sgPVxuICAgIG9uQ2xvc2VCdXR0b25DbGljayB8fFxuICAgIGZ1bmN0aW9uKCkge1xuICAgICAgY2xvc2VJbndlYkh0bWxQb3B1cChvblBvcHVwQ2xvc2VkKTtcbiAgICB9O1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2xvc2VCdXR0b24pO1xuXG4gIC8vIEFwcGVuZCB0byBET01cbiAgY29uc3QgcmVuZGVyZWREb2N1bWVudCA9IHJvb3REb2N1bWVudCB8fCBkb2N1bWVudDtcbiAgaWYgKHJlbmRlcmVkRG9jdW1lbnQuYm9keSkge1xuICAgIHJlbmRlcmVkRG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChwb3B1cCk7XG4gIH1cblxuICAvLyBCaW5kIGNsaWNrIGV2ZW50IGxpc3RlbmVyXG4gIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUh5cGVybGlua0NsaWNrKHBvcHVwT3B0aW9ucykpO1xuXG4gIGlmIChvblBvcHVwT3BlbmVkKSB7XG4gICAgb25Qb3B1cE9wZW5lZCgpO1xuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlIElud2ViIGh0bWwgUG9wdXAgZnJvbSBET00gdHJlZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VJbndlYkh0bWxQb3B1cChvblBvcHVwQ2xvc2VkPzogKCkgPT4gdm9pZCkge1xuICBjb25zdCBwb3B1cFdyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChQT1BVUF9JRCk7XG5cbiAgaWYgKHBvcHVwV3JhcHBlcikge1xuICAgIHBvcHVwV3JhcHBlci5yZW1vdmUoKTtcblxuICAgIGlmIChvblBvcHVwQ2xvc2VkKSB7XG4gICAgICBvblBvcHVwQ2xvc2VkKCk7XG4gICAgfVxuICB9XG59XG4iLCIvLyBAZmxvd1xuZXhwb3J0IHtcbiAgb3Blbklud2ViTGVhZFBvcHVwLFxuICBjbG9zZUlud2ViTGVhZFBvcHVwLFxuICBQT1BVUF9JRCBhcyBMRUFEX1BPUFVQX0lELFxufSBmcm9tICcuL2lud2ViX2xlYWRfcG9wdXAnO1xuIiwiXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzPz9yZWYtLTYtMSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9wb3N0Y3NzIS4vaW53ZWJfbGVhZF9wb3B1cC5jc3NcIik7XG5cbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXG52YXIgdHJhbnNmb3JtO1xudmFyIGluc2VydEludG87XG5cblxuXG52YXIgb3B0aW9ucyA9IHtcImhtclwiOnRydWV9XG5cbm9wdGlvbnMudHJhbnNmb3JtID0gdHJhbnNmb3JtXG5vcHRpb25zLmluc2VydEludG8gPSB1bmRlZmluZWQ7XG5cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cbmlmKG1vZHVsZS5ob3QpIHtcblx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzPz9yZWYtLTYtMSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9wb3N0Y3NzIS4vaW53ZWJfbGVhZF9wb3B1cC5jc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz8/cmVmLS02LTEhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cG9zdGNzcyEuL2lud2ViX2xlYWRfcG9wdXAuY3NzXCIpO1xuXG5cdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cblx0XHR2YXIgbG9jYWxzID0gKGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdHZhciBrZXksIGlkeCA9IDA7XG5cblx0XHRcdGZvcihrZXkgaW4gYSkge1xuXHRcdFx0XHRpZighYiB8fCBhW2tleV0gIT09IGJba2V5XSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRpZHgrKztcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGtleSBpbiBiKSBpZHgtLTtcblxuXHRcdFx0cmV0dXJuIGlkeCA9PT0gMDtcblx0XHR9KGNvbnRlbnQubG9jYWxzLCBuZXdDb250ZW50LmxvY2FscykpO1xuXG5cdFx0aWYoIWxvY2FscykgdGhyb3cgbmV3IEVycm9yKCdBYm9ydGluZyBDU1MgSE1SIGR1ZSB0byBjaGFuZ2VkIGNzcy1tb2R1bGVzIGxvY2Fscy4nKTtcblxuXHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0fSk7XG5cblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59IiwiLy8gQGZsb3dcbmltcG9ydCB0eXBlIHtcbiAgSW53ZWJMZWFkUG9wdXAsXG4gIExlYWRJbnB1dCxcbiAgTGVhZFNlbGVjdE9wdGlvbixcbn0gZnJvbSAnLi4vLi4vdHlwZXMvaW5XZWInO1xuaW1wb3J0IHR5cGUgeyBQb3B1cE9wdGlvbnMgfSBmcm9tICcuLi8uLi90eXBlcy9wb3B1cCc7XG5pbXBvcnQgY3NzIGZyb20gJy4vaW53ZWJfbGVhZF9wb3B1cC5jc3MnO1xuXG5leHBvcnQgY29uc3QgUE9QVVBfSUQgPSAncWctaW53ZWItbGVhZC1wb3B1cCc7IC8vIEV4cG9ydCBmb3IgdW5pdCB0ZXN0XG5cbi8qKlxuICogQXBwZW5kIElud2ViIGxlYWQgUG9wdXAgb24gYm9keSBlbGVtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvcGVuSW53ZWJMZWFkUG9wdXAoXG4gIGluV2ViTGVhZFBvcHVwOiBJbndlYkxlYWRQb3B1cCxcbiAgcG9wdXBPcHRpb25zPzogUG9wdXBPcHRpb25zXG4pIHtcbiAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFBPUFVQX0lEKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHtcbiAgICByb290RG9jdW1lbnQsXG4gICAgY29udGFpbmVySWQsXG4gICAgb25Qb3B1cE9wZW5lZCxcbiAgICBvblBvcHVwQ2xvc2VkLFxuICAgIG9uQ2xvc2VCdXR0b25DbGljayxcbiAgICBvblN1Ym1pdCxcbiAgfSA9IHBvcHVwT3B0aW9ucyB8fCB7fTtcbiAgY29uc3QgZXJyb3IgPSBpbldlYkxlYWRQb3B1cC5lcnJvck1lc3NhZ2VzIHx8IHtcbiAgICByZXF1aXJlZDogJ1RoaXMgZmllbGQgaXMgcmVxdWlyZWQnLFxuICAgIGludmFsaWQ6ICdJbnZhbGlkIHZhbHVlJyxcbiAgICBhZ3JlZW1lbnQ6ICdQbGVhc2UgdGljayBhYm92ZSB0byBhZ3JlZSB0ZXJtcycsXG4gIH07XG4gIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHBvcHVwLmNsYXNzTGlzdC5hZGQoY3NzLnBvcHVwKTtcbiAgcG9wdXAuaWQgPSBQT1BVUF9JRDtcblxuICBpZiAoaW5XZWJMZWFkUG9wdXAuc2hvd092ZXJsYXkpIHtcbiAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKGNzcy5vdmVybGF5KTtcbiAgICBwb3B1cC5hcHBlbmRDaGlsZChvdmVybGF5KTtcbiAgfVxuXG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBpZiAoY29udGFpbmVySWQpIHtcbiAgICBjb250YWluZXIuaWQgPSBjb250YWluZXJJZDtcbiAgfVxuICBjb250YWluZXIuY2xhc3NMaXN0LmFkZChjc3MuY29udGFpbmVyKTtcbiAgY29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGluV2ViTGVhZFBvcHVwLmNvbnRlbnRCYWNrZ3JvdW5kQ29sb3I7XG5cbiAgaWYgKGluV2ViTGVhZFBvcHVwLmltZ1NyYykge1xuICAgIGNvbnN0IGJhbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGJhbm5lci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7aW5XZWJMZWFkUG9wdXAuaW1nU3JjIHx8ICcnfSlgO1xuICAgIGJhbm5lci5jbGFzc0xpc3QuYWRkKGNzcy5iYW5uZXIpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChiYW5uZXIpO1xuICB9XG5cbiAgY29uc3QgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY2xvc2VCdXR0b24uY2xhc3NMaXN0LmFkZChjc3NbJ2Nsb3NlLWJ1dHRvbiddKTtcbiAgY2xvc2VCdXR0b24ub25jbGljayA9XG4gICAgb25DbG9zZUJ1dHRvbkNsaWNrIHx8XG4gICAgZnVuY3Rpb24oKSB7XG4gICAgICBjbG9zZUlud2ViTGVhZFBvcHVwKG9uUG9wdXBDbG9zZWQpO1xuICAgIH07XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjbG9zZUJ1dHRvbik7XG5cbiAgaWYgKGluV2ViTGVhZFBvcHVwLnRpdGxlKSB7XG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgdGl0bGUuaW5uZXJUZXh0ID0gaW5XZWJMZWFkUG9wdXAudGl0bGU7XG4gICAgdGl0bGUuc3R5bGUuY29sb3IgPSBpbldlYkxlYWRQb3B1cC50aXRsZUNvbG9yO1xuICAgIHRpdGxlLmNsYXNzTGlzdC5hZGQoY3NzLnRpdGxlKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGl0bGUpO1xuICB9XG5cbiAgaWYgKGluV2ViTGVhZFBvcHVwLm1lc3NhZ2UpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIG1lc3NhZ2UuaW5uZXJUZXh0ID0gaW5XZWJMZWFkUG9wdXAubWVzc2FnZTtcbiAgICBtZXNzYWdlLnN0eWxlLmNvbG9yID0gaW5XZWJMZWFkUG9wdXAubWVzc2FnZUNvbG9yO1xuICAgIG1lc3NhZ2UuY2xhc3NMaXN0LmFkZChjc3MubWVzc2FnZSk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG1lc3NhZ2UpO1xuICB9XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkoaW5XZWJMZWFkUG9wdXAuaW5wdXRzKSkge1xuICAgIGluV2ViTGVhZFBvcHVwLmlucHV0cy5mb3JFYWNoKChsZWFkSW5wdXQ6IExlYWRJbnB1dCkgPT4ge1xuICAgICAgY29uc3QgaW5wdXRCbG9jayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgaW5wdXRCbG9jay5jbGFzc0xpc3QuYWRkKGNzc1snaW5wdXQtYmxvY2snXSk7XG4gICAgICBpZiAobGVhZElucHV0LmlucHV0VHlwZSA9PT0gJ2Ryb3Bkb3duJykge1xuICAgICAgICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKTtcbiAgICAgICAgc2VsZWN0Lm5hbWUgPSBsZWFkSW5wdXQuZmllbGROYW1lO1xuICAgICAgICBzZWxlY3QucmVxdWlyZWQgPSBsZWFkSW5wdXQucmVxdWlyZWQ7XG4gICAgICAgIHNlbGVjdC5kYXRhc2V0LmRhdGFUeXBlID0gbGVhZElucHV0LmRhdGFUeXBlO1xuICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgICAgb3B0aW9uLmlubmVyVGV4dCA9IGAke2xlYWRJbnB1dC5wbGFjZWhvbGRlcn0ke1xuICAgICAgICAgIGxlYWRJbnB1dC5yZXF1aXJlZCA/ICcqJyA6ICcnXG4gICAgICAgIH1gO1xuICAgICAgICBvcHRpb24udmFsdWUgPSAnJztcbiAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgb3B0aW9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGxlYWRJbnB1dC5vcHRpb25zKSkge1xuICAgICAgICAgIGxlYWRJbnB1dC5vcHRpb25zLmZvckVhY2goKG9wdDogTGVhZFNlbGVjdE9wdGlvbikgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSBvcHQudmFsdWU7XG4gICAgICAgICAgICBvcHRpb24uaW5uZXJUZXh0ID0gb3B0LmxhYmVsO1xuICAgICAgICAgICAgc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZWN0LmNsYXNzTGlzdC5hZGQoY3NzLmlucHV0KTtcbiAgICAgICAgc2VsZWN0LmNsYXNzTGlzdC5hZGQoY3NzLnNlbGVjdCk7XG4gICAgICAgIGlucHV0QmxvY2suY2xhc3NMaXN0LmFkZChjc3NbJ3NlbGVjdC1ibG9jayddKTtcbiAgICAgICAgaW5wdXRCbG9jay5hcHBlbmRDaGlsZChzZWxlY3QpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBpbnB1dC5uYW1lID0gbGVhZElucHV0LmZpZWxkTmFtZTtcbiAgICAgICAgaW5wdXQudHlwZSA9IGxlYWRJbnB1dC5pbnB1dFR5cGU7XG4gICAgICAgIGlucHV0LnJlcXVpcmVkID0gbGVhZElucHV0LnJlcXVpcmVkO1xuICAgICAgICBpbnB1dC5wbGFjZWhvbGRlciA9IGAke2xlYWRJbnB1dC5wbGFjZWhvbGRlcn0ke1xuICAgICAgICAgIGxlYWRJbnB1dC5yZXF1aXJlZCA/ICcqJyA6ICcnXG4gICAgICAgIH1gO1xuICAgICAgICBpbnB1dC5kYXRhc2V0LmRhdGFUeXBlID0gbGVhZElucHV0LmRhdGFUeXBlO1xuICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKGNzcy5pbnB1dCk7XG4gICAgICAgIGlucHV0QmxvY2suYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgICAgfVxuICAgICAgY29uc3QgZXJyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgZXJyLmNsYXNzTGlzdC5hZGQoY3NzLmVycm9yKTtcbiAgICAgIGlucHV0QmxvY2suYXBwZW5kQ2hpbGQoZXJyKTtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpbnB1dEJsb2NrKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChpbldlYkxlYWRQb3B1cC5hZ3JlZW1lbnRUZXh0KSB7XG4gICAgY29uc3QgYWdyZWVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYWdyZWVtZW50LmNsYXNzTGlzdC5hZGQoY3NzLmFncmVlbWVudCk7XG5cbiAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgY29uc3QgY2hlY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGNoZWNrLnR5cGUgPSAnY2hlY2tib3gnO1xuICAgIGNoZWNrLm5hbWUgPSAnYWdyZWVtZW50JztcbiAgICBsYWJlbC5hcHBlbmRDaGlsZChjaGVjayk7XG4gICAgY29uc3QgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcbiAgICBsYWJlbC5hcHBlbmRDaGlsZChpY29uKTtcbiAgICBhZ3JlZW1lbnQuYXBwZW5kQ2hpbGQobGFiZWwpO1xuXG4gICAgaWYgKGluV2ViTGVhZFBvcHVwLmFncmVlbWVudFVybCkge1xuICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgIGxpbmsuaW5uZXJUZXh0ID0gaW5XZWJMZWFkUG9wdXAuYWdyZWVtZW50VGV4dDtcbiAgICAgIGxpbmsuaHJlZiA9IGluV2ViTGVhZFBvcHVwLmFncmVlbWVudFVybCB8fCAnJztcbiAgICAgIGxpbmsudGFyZ2V0ID0gJ19ibGFuayc7XG4gICAgICBsaW5rLnN0eWxlLmNvbG9yID0gaW5XZWJMZWFkUG9wdXAuYWdyZWVtZW50Q29sb3IgfHwgJyc7XG4gICAgICBhZ3JlZW1lbnQuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICB0ZXh0LmlubmVyVGV4dCA9IGluV2ViTGVhZFBvcHVwLmFncmVlbWVudFRleHQ7XG4gICAgICB0ZXh0LmNsYXNzTGlzdC5hZGQoY3NzLnRleHQpO1xuICAgICAgdGV4dC5zdHlsZS5jb2xvciA9IGluV2ViTGVhZFBvcHVwLmFncmVlbWVudENvbG9yIHx8ICcnO1xuICAgICAgYWdyZWVtZW50LmFwcGVuZENoaWxkKHRleHQpO1xuICAgIH1cblxuICAgIGNvbnN0IGVyciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBlcnIuaW5uZXJUZXh0ID0gYCoke2Vycm9yLmFncmVlbWVudH1gO1xuICAgIGVyci5jbGFzc0xpc3QuYWRkKGNzcy5lcnJvcik7XG4gICAgYWdyZWVtZW50LmFwcGVuZENoaWxkKGVycik7XG5cbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYWdyZWVtZW50KTtcbiAgfVxuXG4gIGlmIChpbldlYkxlYWRQb3B1cC5zdWJtaXRUZXh0KSB7XG4gICAgY29uc3Qgc3VibWl0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgc3VibWl0LmlubmVyVGV4dCA9IGluV2ViTGVhZFBvcHVwLnN1Ym1pdFRleHQ7XG4gICAgc3VibWl0LnN0eWxlLmNvbG9yID0gaW5XZWJMZWFkUG9wdXAuc3VibWl0Q29sb3I7XG4gICAgc3VibWl0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGluV2ViTGVhZFBvcHVwLnN1Ym1pdEJhY2tncm91bmRDb2xvcjtcbiAgICBzdWJtaXQuY2xhc3NMaXN0LmFkZChjc3NbJ3N1Ym1pdC1idXR0b24nXSk7XG4gICAgc3VibWl0Lm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgICAgbGV0IHBhc3MgPSB0cnVlO1xuICAgICAgcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQsIHNlbGVjdCcpLmZvckVhY2goKG5vZGU6IGFueSkgPT4ge1xuICAgICAgICBzd2l0Y2ggKG5vZGUudHlwZSkge1xuICAgICAgICAgIGNhc2UgJ2NoZWNrYm94JzpcbiAgICAgICAgICAgIGlmIChub2RlLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgbm9kZS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY3NzWydpbnB1dC1lcnJvciddKTtcbiAgICAgICAgICAgICAgcmVzdWx0W25vZGUubmFtZV0gPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbm9kZS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoY3NzWydpbnB1dC1lcnJvciddKTtcbiAgICAgICAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiBfbGlzdGVuZXIoKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY3NzWydpbnB1dC1lcnJvciddKTtcbiAgICAgICAgICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIF9saXN0ZW5lcik7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBwYXNzID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QucmVtb3ZlKGNzc1snaW5wdXQtZXJyb3InXSk7XG4gICAgICAgICAgICBpZiAobm9kZS52YWx1ZSkge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgKG5vZGUubmFtZSA9PT0gJ2VtYWlsJyAmJlxuICAgICAgICAgICAgICAgICAgIS9eW15cXHNAXStAW15cXHNAXStcXC5bXlxcc0BdKyQvLnRlc3Qobm9kZS52YWx1ZSkpIHx8XG4gICAgICAgICAgICAgICAgKG5vZGUuZGF0YXNldC5kYXRhVHlwZSA9PT0gJ251bWJlcicgJiYgaXNOYU4obm9kZS52YWx1ZSAqIDEpKVxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBub2RlLm5leHRTaWJsaW5nLmlubmVyVGV4dCA9IGAqJHtlcnJvci5pbnZhbGlkfWA7XG4gICAgICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKGNzc1snaW5wdXQtZXJyb3InXSk7XG4gICAgICAgICAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiBfbGlzdGVuZXIoKSB7XG4gICAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5yZW1vdmUoY3NzWydpbnB1dC1lcnJvciddKTtcbiAgICAgICAgICAgICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgX2xpc3RlbmVyKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBwYXNzID0gZmFsc2U7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W25vZGUubmFtZV0gPVxuICAgICAgICAgICAgICAgICAgbm9kZS5kYXRhc2V0LmRhdGFUeXBlID09PSAnbnVtYmVyJyA/ICtub2RlLnZhbHVlIDogbm9kZS52YWx1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChub2RlLnJlcXVpcmVkKSB7XG4gICAgICAgICAgICAgIG5vZGUubmV4dFNpYmxpbmcuaW5uZXJUZXh0ID0gYCoke2Vycm9yLnJlcXVpcmVkfWA7XG4gICAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZChjc3NbJ2lucHV0LWVycm9yJ10pO1xuICAgICAgICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uIF9saXN0ZW5lcigpIHtcbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5yZW1vdmUoY3NzWydpbnB1dC1lcnJvciddKTtcbiAgICAgICAgICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIF9saXN0ZW5lcik7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBwYXNzID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAocGFzcyAmJiBvblN1Ym1pdCkge1xuICAgICAgICBvblN1Ym1pdChyZXN1bHQpO1xuICAgICAgICBjbG9zZUlud2ViTGVhZFBvcHVwKG9uUG9wdXBDbG9zZWQpO1xuXG4gICAgICAgIGlmIChpbldlYkxlYWRQb3B1cC5yZWRpcmVjdFVybCkge1xuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5hc3NpZ24oaW5XZWJMZWFkUG9wdXAucmVkaXJlY3RVcmwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc3VibWl0KTtcbiAgfVxuXG4gIC8vIFByZXZlbnQgYm9keSBmcm9tIHNjcm9sbGluZyB3aXRoIGV4dHJhIHdyYXBwZXJcbiAgY29uc3QgcG91cFNjcm9sbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBwb3VwU2Nyb2xsLmNsYXNzTGlzdC5hZGQoY3NzWydwb3B1cC1zY3JvbGwnXSk7XG4gIHBvdXBTY3JvbGwuYXBwZW5kKGNvbnRhaW5lcik7XG5cbiAgcG9wdXAuYXBwZW5kQ2hpbGQocG91cFNjcm9sbCk7XG5cbiAgY29uc3QgcmVuZGVyZWREb2N1bWVudCA9IHJvb3REb2N1bWVudCB8fCBkb2N1bWVudDtcbiAgaWYgKHJlbmRlcmVkRG9jdW1lbnQuYm9keSkge1xuICAgIHJlbmRlcmVkRG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChwb3B1cCk7XG4gIH1cblxuICBpZiAob25Qb3B1cE9wZW5lZCkge1xuICAgIG9uUG9wdXBPcGVuZWQoKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZSBJbndlYiBsZWFkIFBvcHVwIGZyb20gRE9NIHRyZWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3NlSW53ZWJMZWFkUG9wdXAob25Qb3B1cENsb3NlZD86ICgpID0+IHZvaWQpIHtcbiAgY29uc3QgcG9wdXBXcmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoUE9QVVBfSUQpO1xuXG4gIGlmIChwb3B1cFdyYXBwZXIpIHtcbiAgICBwb3B1cFdyYXBwZXIucmVtb3ZlKCk7XG5cbiAgICBpZiAob25Qb3B1cENsb3NlZCkge1xuICAgICAgb25Qb3B1cENsb3NlZCgpO1xuICAgIH1cbiAgfVxufVxuIiwiLy8gQGZsb3dcbmltcG9ydCB0eXBlIHsgUWdFdmVudCB9IGZyb20gJy4uL3R5cGVzL3FnRXZlbnQnO1xuaW1wb3J0IHR5cGUgeyBFdmVudENvbmRpdGlvbiB9IGZyb20gJy4uL3R5cGVzL2luV2ViJztcblxuLyoqXG4gKiBNYXRjaCB0aGUgdmFsdWUgb2YgZXZlbnQgcGFyYW1ldGVyIGJhc2VkIG9uIGNvbmRpdGlvbidzIG9wZXJhdG9yXG4gKi9cbmZ1bmN0aW9uIG1hdGNoRXZlbnRQYXJhbWV0ZXIoZXZlbnQ6IFFnRXZlbnQsIGNvbmRpdGlvbjogRXZlbnRDb25kaXRpb24pIHtcbiAgLy8gU2hvdWxkIG1hdGNoIHBhcmFtZXRlciBrZXluYW1lXG4gIGlmICghZXZlbnQucGFyYW1ldGVycyB8fCAhZXZlbnQucGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShjb25kaXRpb24ucGFyYW0pKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY29uc3QgZXZlbnRWYWx1ZSA9IGV2ZW50LnBhcmFtZXRlcnNbY29uZGl0aW9uLnBhcmFtXTtcblxuICBzd2l0Y2ggKGNvbmRpdGlvbi5vcCkge1xuICAgIGNhc2UgJ2NvbnRhaW5zJzpcbiAgICAgIHJldHVybiB0eXBlb2YgZXZlbnRWYWx1ZSA9PT0gJ3N0cmluZydcbiAgICAgICAgPyBldmVudFZhbHVlLmluY2x1ZGVzKGNvbmRpdGlvbi52YWx1ZSlcbiAgICAgICAgOiBmYWxzZTtcbiAgICBjYXNlICdlcXVhbHMnOlxuICAgICAgcmV0dXJuIHR5cGVvZiBldmVudFZhbHVlID09PSAnc3RyaW5nJ1xuICAgICAgICA/IGV2ZW50VmFsdWUgPT09IGNvbmRpdGlvbi52YWx1ZVxuICAgICAgICA6IGZhbHNlO1xuICAgIGNhc2UgJz0nOlxuICAgICAgcmV0dXJuICtldmVudFZhbHVlID09PSArY29uZGl0aW9uLnZhbHVlO1xuICAgIGNhc2UgJyE9JzpcbiAgICAgIHJldHVybiArZXZlbnRWYWx1ZSAhPT0gK2NvbmRpdGlvbi52YWx1ZTtcbiAgICBjYXNlICc8JzpcbiAgICAgIHJldHVybiArZXZlbnRWYWx1ZSA8ICtjb25kaXRpb24udmFsdWU7XG4gICAgY2FzZSAnPic6XG4gICAgICByZXR1cm4gK2V2ZW50VmFsdWUgPiArY29uZGl0aW9uLnZhbHVlO1xuICAgIGNhc2UgJzw9JzpcbiAgICAgIHJldHVybiArZXZlbnRWYWx1ZSA8PSArY29uZGl0aW9uLnZhbHVlO1xuICAgIGNhc2UgJz49JzpcbiAgICAgIHJldHVybiArZXZlbnRWYWx1ZSA+PSArY29uZGl0aW9uLnZhbHVlO1xuICAgIGNhc2UgJ2V4aXN0cyc6XG4gICAgICByZXR1cm4gZXZlbnRWYWx1ZSAhPT0gbnVsbCAmJiBldmVudFZhbHVlICE9PSB1bmRlZmluZWQ7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBtYXRjaEV2ZW50UGFyYW1ldGVyO1xuIiwiLy8gQGZsb3dcbmltcG9ydCB7IGdldCBhcyBnZXRJREIsIHNldCBhcyBzZXRJREIgfSBmcm9tICdpZGIta2V5dmFsJztcbmltcG9ydCBsb2cgZnJvbSAnLi4vdXRpbHMvbG9nJztcbmltcG9ydCB7IHNldEF0dHJpYnV0aW9uIH0gZnJvbSAnLi4vdXRpbHMvYXR0cmlidXRpb24nO1xuaW1wb3J0IHsgb3Blbklud2ViSHRtbFBvcHVwIH0gZnJvbSAnLi9pbndlYl9odG1sX3BvcHVwJztcbmltcG9ydCB7IG9wZW5JbndlYkxlYWRQb3B1cCB9IGZyb20gJy4vaW53ZWJfbGVhZF9wb3B1cCc7XG5cbmltcG9ydCB7IElEQl9JTldFQl9ISVNUT1JJRVNfS0VZIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcbmltcG9ydCB0eXBlIHsgSW5XZWJDYW1wYWlnbiB9IGZyb20gJy4uL3R5cGVzL2luV2ViJztcblxubGV0IGlzUG9wdXBPcGVuZWQgPSBmYWxzZTtcblxuLy8gRXhwb3J0IGZvciB1bml0IHRlc3QgdG8gcmVzZXQuXG5leHBvcnQgY29uc3QgdG9nZ2xlSXNQb3B1cE9wZW5lZCA9IChvcGVuZWQ/OiBib29sZWFuKSA9PiB7XG4gIGlzUG9wdXBPcGVuZWQgPSAhIW9wZW5lZDtcbn07XG5cbmNvbnN0IGhhbmRsZVBvcHVwT3BlbmVkID0gKGNhbXBhaWduOiBJbldlYkNhbXBhaWduKSA9PiAoKSA9PiB7XG4gIGxvZy5kZWJ1ZyhgRGlzcGxheWVkICR7Y2FtcGFpZ24ubm90aWZpY2F0aW9uSWR9IGNhbXBhaWduYCwgY2FtcGFpZ24pO1xuXG4gIHRvZ2dsZUlzUG9wdXBPcGVuZWQodHJ1ZSk7XG5cbiAgLy8gU2V0IFwidmlld1wiIGF0dHJpYnV0aW9uXG4gIHNldEF0dHJpYnV0aW9uKCd2aWV3JywgY2FtcGFpZ24ubm90aWZpY2F0aW9uSWQpLnRoZW4oKCkgPT4ge1xuICAgIC8vIExvZyBldmVudCB0byBjYWxjdWxhdGUgY2FtcGFpZ24gaW1wcmVzc2lvblxuICAgIHdpbmRvdy5xZygnZXZlbnQnLCAncWdfaW53ZWJfZGlzcGxheWVkJywge1xuICAgICAgbm90aWZpY2F0aW9uSWQ6IGNhbXBhaWduLm5vdGlmaWNhdGlvbklkLFxuICAgIH0pO1xuICB9KTtcblxuICAvLyBNYXJrIGN1cnJlbnQgY2FtcGFpZ24gaXMgcmVhZGVkXG4gIGdldElEQihJREJfSU5XRUJfSElTVE9SSUVTX0tFWSkudGhlbigoaGlzdG9yaWVzID0ge30pID0+IHtcbiAgICBjb25zdCB0cmlnZ2VyZWRDb3VudCA9ICtoaXN0b3JpZXNbYGNhbXAtJHtjYW1wYWlnbi5ub3RpZmljYXRpb25JZH1gXSB8fCAwO1xuXG4gICAgcmV0dXJuIHNldElEQihJREJfSU5XRUJfSElTVE9SSUVTX0tFWSwge1xuICAgICAgLi4uaGlzdG9yaWVzLFxuICAgICAgW2BjYW1wLSR7Y2FtcGFpZ24ubm90aWZpY2F0aW9uSWR9YF06IHRyaWdnZXJlZENvdW50ICsgMSxcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5jb25zdCBoYW5kbGVQb3B1cENsb3NlZCA9IChjYW1wYWlnbjogSW5XZWJDYW1wYWlnbikgPT4gKCkgPT4ge1xuICBsb2cuZGVidWcoYENsb3NlZCAke2NhbXBhaWduLm5vdGlmaWNhdGlvbklkfSBjYW1wYWlnbmApO1xuXG4gIHRvZ2dsZUlzUG9wdXBPcGVuZWQoZmFsc2UpO1xuXG4gIHdpbmRvdy5xZygnZXZlbnQnLCAncWdfaW53ZWJfY2xvc2VkJywge1xuICAgIG5vdGlmaWNhdGlvbklkOiBjYW1wYWlnbi5ub3RpZmljYXRpb25JZCxcbiAgfSk7XG59O1xuXG4vKipcbiAqIE9wZW4gY29ycmVzcG9uZGluZyBpbndlYiBwb3B1cCBkZXBlbmRzIG9uIGNyZWF0aXZlVHlwZVxuICovXG5hc3luYyBmdW5jdGlvbiBvcGVuSW5XZWJQb3B1cChjYW1wYWlnbjogSW5XZWJDYW1wYWlnbik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBpZiAoaXNQb3B1cE9wZW5lZCkge1xuICAgIC8vIE9ubHkgYWxsb3cgb25lIEluLVdlYiBwb3B1cCBvcGVuZWQgYXQgYSB0aW1lLlxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpO1xuICB9XG5cbiAgc3dpdGNoIChjYW1wYWlnbi5jcmVhdGl2ZVR5cGUpIHtcbiAgICBjYXNlICdodG1sJzoge1xuICAgICAgaWYgKCFjYW1wYWlnbi5odG1sKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpO1xuICAgICAgfVxuXG4gICAgICBvcGVuSW53ZWJIdG1sUG9wdXAoY2FtcGFpZ24uaHRtbCwge1xuICAgICAgICBvblBvcHVwT3BlbmVkOiBoYW5kbGVQb3B1cE9wZW5lZChjYW1wYWlnbiksXG4gICAgICAgIG9uUG9wdXBDbG9zZWQ6IGhhbmRsZVBvcHVwQ2xvc2VkKGNhbXBhaWduKSxcbiAgICAgICAgb25IeXBlcmxpbmtDbGljazogKCkgPT4ge1xuICAgICAgICAgIGxvZy5kZWJ1ZyhgQ2xpY2sgaHlwZXJsaW5rIGZyb20gJHtjYW1wYWlnbi5ub3RpZmljYXRpb25JZH0gY2FtcGFpZ25gKTtcblxuICAgICAgICAgIC8vIExvZyBldmVudCB0byBjYWxjdWxhdGUgY2FtcGFpZ24gY2xpY2tzXG4gICAgICAgICAgd2luZG93LnFnKCdldmVudCcsICdxZ19pbndlYl9jbGlja2VkJywge1xuICAgICAgICAgICAgbm90aWZpY2F0aW9uSWQ6IGNhbXBhaWduLm5vdGlmaWNhdGlvbklkLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xuICAgIH1cblxuICAgIGNhc2UgJ2xlYWQnOiB7XG4gICAgICBpZiAoIWNhbXBhaWduLmxlYWQpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XG4gICAgICB9XG5cbiAgICAgIG9wZW5JbndlYkxlYWRQb3B1cChjYW1wYWlnbi5sZWFkLCB7XG4gICAgICAgIG9uUG9wdXBPcGVuZWQ6IGhhbmRsZVBvcHVwT3BlbmVkKGNhbXBhaWduKSxcbiAgICAgICAgb25Qb3B1cENsb3NlZDogaGFuZGxlUG9wdXBDbG9zZWQoY2FtcGFpZ24pLFxuICAgICAgICBvblN1Ym1pdDogKGxlYWREYXRhOiBPYmplY3QpID0+IHtcbiAgICAgICAgICBsb2cuZGVidWcoXG4gICAgICAgICAgICBgU3VibWl0IGxlYWQgdG8gJHtjYW1wYWlnbi5ub3RpZmljYXRpb25JZH0gY2FtcGFpZ25gLFxuICAgICAgICAgICAgbGVhZERhdGFcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgd2luZG93LnFnKCdpZGVudGlmeScsIGxlYWREYXRhKTtcbiAgICAgICAgICB3aW5kb3cucWcoJ2V2ZW50JywgJ3FnX2lud2ViX2xlYWRfZ2VuJywge1xuICAgICAgICAgICAgbm90aWZpY2F0aW9uSWQ6IGNhbXBhaWduLm5vdGlmaWNhdGlvbklkLFxuICAgICAgICAgICAgbGVhZEtleXM6IE9iamVjdC5rZXlzKGxlYWREYXRhKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0cnVlKTtcbiAgICB9XG5cbiAgICBkZWZhdWx0OlxuICAgICAgYnJlYWs7XG4gIH1cblxuICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgb3BlbkluV2ViUG9wdXA7XG4iLCIvLyBAZmxvd1xuaW1wb3J0IF90aHJvdHRsZSBmcm9tICdsb2Rhc2gudGhyb3R0bGUnO1xuaW1wb3J0IGdldFNjcm9sbFBlcmNlbnQgZnJvbSAnLi4vdGhpcmRfcGFydHkvZ2V0U2Nyb2xsUGVyY2VudCc7XG5pbXBvcnQgbG9nIGZyb20gJy4uL3V0aWxzL2xvZyc7XG5pbXBvcnQgdHJpZ2dlckluV2ViQ2FtcGFpZ24gZnJvbSAnLi90cmlnZ2VySW5XZWJDYW1wYWlnbic7XG5pbXBvcnQgYnVpbGRQYWdlVmlld2VkRXZlbnQgZnJvbSAnLi9idWlsZFBhZ2VWaWV3ZWRFdmVudCc7XG5cbmltcG9ydCB0eXBlIHsgSW5XZWJDYW1wYWlnbiB9IGZyb20gJy4uL3R5cGVzL2luV2ViJztcbmltcG9ydCB7IElOV0VCX1NDUk9MTF9QRVJDRU5UX1NIT1dOIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcblxubGV0IGxhc3RQZXJjZW50ID0gMDtcbmxldCBBUFBfSUQ7XG5cbmV4cG9ydCBjb25zdCBzZXRMYXN0UGVyY2VudCA9IChwZXJjZW50OiBudW1iZXIpID0+IHtcbiAgbGFzdFBlcmNlbnQgPSBwZXJjZW50O1xufTtcblxuZXhwb3J0IGNvbnN0IHNob3VsZFNjcm9sbFBlcmNlbnRNYXRjaCA9IChzY3JvbGxQZXJjZW50OiBudW1iZXIpID0+IChcbiAgY2FtcGFpZ246IEluV2ViQ2FtcGFpZ25cbik6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gKFxuICAgIC8vIFNQRUM6IENoZWNrIGBvdmVyYCBub3QgYGNsb3Nlc3QgdG9gXG4gICAgISFjYW1wYWlnbi5zY3JvbGxUcmlnZ2VyUnVsZSAmJlxuICAgIHNjcm9sbFBlcmNlbnQgPj0gY2FtcGFpZ24uc2Nyb2xsVHJpZ2dlclJ1bGUucGVyY2VudFxuICApO1xufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZVNjcm9sbCgpIHtcbiAgY29uc3QgaW53ZWJzY3JvbGxQZXJjZW50U2hvd24gPSArc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcbiAgICBJTldFQl9TQ1JPTExfUEVSQ0VOVF9TSE9XTlxuICApO1xuICAvLyBPbmx5IGFsbG93IG9uY2UgaW4gb25lIGJyb3dzZXIgc2Vzc2lvbi5cbiAgaWYgKGlud2Vic2Nyb2xsUGVyY2VudFNob3duID4gMCkge1xuICAgIGxvZy5kZWJ1ZyhgU2Nyb2xsUGVyY2VudCBzaG93ICR7aW53ZWJzY3JvbGxQZXJjZW50U2hvd259IGJlZm9yZWApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHByZXZpb3VzUGVyY2VudCA9IGxhc3RQZXJjZW50O1xuICBjb25zdCBwZXJjZW50ID0gZ2V0U2Nyb2xsUGVyY2VudCgpO1xuICBsb2cuZGVidWcoYGhhbmRsZVNjcm9sbCAke3ByZXZpb3VzUGVyY2VudH0lLCAke3BlcmNlbnR9JWApO1xuXG4gIGlmICghTnVtYmVyLmlzRmluaXRlKHBlcmNlbnQpIHx8IE51bWJlci5pc05hTihwZXJjZW50KSkge1xuICAgIC8vIEluIGNhc2Ugd2UgZ2V0IGBJbmZpbml0eWAgb3IgYE5hTmAgZnJvbSBnZXRTY3JvbGxQZXJjZW50KClcbiAgICBsb2cud2FybihgaGFuZGxlU2Nyb2xsIGVycm9yYCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIE5vdGU6IEluIG1vYmlsZSwgbWlnaHQgZ2V0IDEwMC54eHglIGZvciBzb21lIHNjcmVlbiBzaXplLi4uXG4gIHNldExhc3RQZXJjZW50KHBlcmNlbnQpO1xuXG4gIGlmIChwcmV2aW91c1BlcmNlbnQgPj0gcGVyY2VudCkge1xuICAgIC8vIE5vdCBzY3JvbGwgZG93blxuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGlzT3BlbiA9IGF3YWl0IHRyaWdnZXJJbldlYkNhbXBhaWduKFxuICAgIGJ1aWxkUGFnZVZpZXdlZEV2ZW50KCksXG4gICAgQVBQX0lELFxuICAgICdzY3JvbGxUaHJlc2hvbGQnLFxuICAgIHNob3VsZFNjcm9sbFBlcmNlbnRNYXRjaChwZXJjZW50KVxuICApO1xuXG4gIC8vIFJlY29yZCB0aGUgZXhpdCBpbnRlbnQgaGFkIHRyaWdnZXJlZCBpbiBjdXJyZW50IGJyb3dzZXIgc2Vzc2lvblxuICBpZiAoaXNPcGVuKSB7XG4gICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcbiAgICAgIElOV0VCX1NDUk9MTF9QRVJDRU5UX1NIT1dOLFxuICAgICAgYCR7aW53ZWJzY3JvbGxQZXJjZW50U2hvd24gKyAxfWBcbiAgICApO1xuICB9XG59XG5cbmNvbnN0IHRocm90dGxlSGFuZGxlU2Nyb2xsID0gX3Rocm90dGxlKGhhbmRsZVNjcm9sbCwgMTAwKTtcblxuY29uc3QgYmluZFNjcm9sbFBlcmNlbnRIYW5kbGVyID0gKGFwcElkOiBzdHJpbmcpID0+IHtcbiAgQVBQX0lEID0gYXBwSWQ7XG5cbiAgLy8gUmVtb3ZlIHByZXZpb3VzIGV2ZW50IGhhbmRsZXIgaWYgYW55XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRocm90dGxlSGFuZGxlU2Nyb2xsKTtcblxuICAvLyBBZGQgZXZlbnQgaGFuZGxlclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aHJvdHRsZUhhbmRsZVNjcm9sbCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBiaW5kU2Nyb2xsUGVyY2VudEhhbmRsZXI7XG4iLCIvLyBAZmxvd1xuaW1wb3J0IHsgZ2V0IGFzIGdldElEQiB9IGZyb20gJ2lkYi1rZXl2YWwnO1xuaW1wb3J0IGRlbGF5IGZyb20gJy4uL3V0aWxzL2RlbGF5JztcbmltcG9ydCBsb2cgZnJvbSAnLi4vdXRpbHMvbG9nJztcbmltcG9ydCBmZXRjaEluV2ViRGF0YSBmcm9tICcuL2ZldGNoSW5XZWJEYXRhJztcbmltcG9ydCBtYXRjaEV2ZW50UGFyYW1ldGVyIGZyb20gJy4vbWF0Y2hFdmVudFBhcmFtZXRlcic7XG5pbXBvcnQgb3BlbkluV2ViUG9wdXAgZnJvbSAnLi9vcGVuSW5XZWJQb3B1cCc7XG5pbXBvcnQgeyBJREJfSU5XRUJfSElTVE9SSUVTX0tFWSB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgdHlwZSB7IFFnRXZlbnQgfSBmcm9tICcuLi90eXBlcy9xZ0V2ZW50JztcblxuaW1wb3J0IHR5cGUgeyBJbldlYkNhbXBhaWduLCBUcmlnZ2VyVHlwZSB9IGZyb20gJy4uL3R5cGVzL2luV2ViJztcblxuLyoqXG4gKiBGaW5kIHRoZSBtYXRjaGVkIGJhc2VkIG9uIHRyaWdnZXIgY29uZGl0aW9uXG4gKi9cbmZ1bmN0aW9uIGdldE1hdGNoZWRJbldlYkNhbXBhaWduKFxuICB0cmlnZ2VyVHlwZTogVHJpZ2dlclR5cGUsXG4gIGV2ZW50OiBRZ0V2ZW50LFxuICBjYW1wYWlnbnM6IEluV2ViQ2FtcGFpZ25bXSxcbiAgaW5XZWJIaXN0b3JpZXM6IHt9LFxuICBleHRyYUNvbmRpdGlvbj86IChjYW1wYWlnbjogSW5XZWJDYW1wYWlnbikgPT4gYm9vbGVhblxuKTogP0luV2ViQ2FtcGFpZ24ge1xuICByZXR1cm4gY2FtcGFpZ25zLmZpbmQoY2FtcGFpZ24gPT4ge1xuICAgIC8vIENvbnZlcnQgdG8gdW5peCB0aW1lc3RhbXBcbiAgICBjb25zdCBjdXJyZW50VGltZSA9IE1hdGguZmxvb3IoK25ldyBEYXRlKCkgLyAxMDAwKTtcblxuICAgIC8vIHNob3VsZCBtYXRjaCBhY3RpdmUgdGltZSByYW5nZVxuICAgIGlmIChjdXJyZW50VGltZSA8IGNhbXBhaWduLnN0YXJ0VGltZSB8fCBjdXJyZW50VGltZSA+IGNhbXBhaWduLmVuZFRpbWUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBzaG91bGQgbWF0Y2ggdHJpZ2dlciB0eXBlXG4gICAgaWYgKGNhbXBhaWduLnRyaWdnZXJUeXBlICE9PSB0cmlnZ2VyVHlwZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFNob3VsZCBtYXRjaCBleHRyYSBtYXRjaGVyXG4gICAgaWYgKGV4dHJhQ29uZGl0aW9uICYmICFleHRyYUNvbmRpdGlvbihjYW1wYWlnbikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCB0cmlnZ2VyQ29uZGl0aW9uID0gY2FtcGFpZ24ud2hlbkNvbmQgfHwge307XG5cbiAgICAvLyBzaG91bGQgbWF0Y2ggZXZlbnQgbmFtZVxuICAgIGlmIChldmVudC5ldmVudE5hbWUgIT09IHRyaWdnZXJDb25kaXRpb24uZXZlbnROYW1lKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gc2hvdWxkIG5vdCByZWFjaGVzIHRoZSBtYXggZGlzcGxheSBjb3VudFxuICAgIGNvbnN0IHRyaWdnZXJlZENvdW50ID1cbiAgICAgICtpbldlYkhpc3Rvcmllc1tgY2FtcC0ke2NhbXBhaWduLm5vdGlmaWNhdGlvbklkfWBdIHx8IDA7XG4gICAgY29uc3QgaGFzUmVhY2hNYXhEaXNwbGF5Q291bnQgPVxuICAgICAgY2FtcGFpZ24uc2NoZWR1bGVkVHlwZSA9PT0gJ29uY2UnXG4gICAgICAgID8gdHJpZ2dlcmVkQ291bnQgPiAwXG4gICAgICAgIDogdHJpZ2dlcmVkQ291bnQgPj0gKGNhbXBhaWduLm1heE51bVRpbWVzVG9TaG93IHx8IDApO1xuXG4gICAgaWYgKGhhc1JlYWNoTWF4RGlzcGxheUNvdW50KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gc2hvdWxkIGZ1enp5IG1hdGNoIHRoZSBjYW1wYWlnbiBpZiBjb25kaXRpb25zIGlzIGFuIGVtcHR5IGxpc3RcbiAgICBpZiAodHJpZ2dlckNvbmRpdGlvbi5jb25kaXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gc2hvdWxkIG1hdGNoIGFsbCBldmVudCBwYXJhbWV0ZXJzXG4gICAgaWYgKHRyaWdnZXJDb25kaXRpb24ub3BlcmF0b3IgPT09ICdBTkQnKSB7XG4gICAgICByZXR1cm4gdHJpZ2dlckNvbmRpdGlvbi5jb25kaXRpb25zLmV2ZXJ5KGNvbmRpdGlvbiA9PlxuICAgICAgICBtYXRjaEV2ZW50UGFyYW1ldGVyKGV2ZW50LCBjb25kaXRpb24pXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIHNob3VsZCBtYXRjaCBhbnkgZXZlbnQgcGFyYW1ldGVyXG4gICAgcmV0dXJuIHRyaWdnZXJDb25kaXRpb24uY29uZGl0aW9ucy5zb21lKGNvbmRpdGlvbiA9PlxuICAgICAgbWF0Y2hFdmVudFBhcmFtZXRlcihldmVudCwgY29uZGl0aW9uKVxuICAgICk7XG4gIH0pO1xufVxuXG4vKipcbiAqIFRyaWdnZXIgSW5XZWIgY2FtcGFpZ24gYnkgZXZlbnRcbiAqL1xuYXN5bmMgZnVuY3Rpb24gdHJpZ2dlckluV2ViQ2FtcGFpZ24oXG4gIGV2ZW50OiBRZ0V2ZW50LFxuICBhcHBJZDogc3RyaW5nLFxuICB0cmlnZ2VyVHlwZT86IFRyaWdnZXJUeXBlID0gJ3VzZXJFdmVudCcsXG4gIGV4dHJhQ29uZGl0aW9uPzogKGNhbXBhaWduOiBJbldlYkNhbXBhaWduKSA9PiBib29sZWFuXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgbG9nLmRlYnVnKFxuICAgIGBUcmlnZ2VyaW5nIGlud2ViIGNhbXBhaWducyBieSBcIiR7dHJpZ2dlclR5cGV9XCIgd2l0aCBcIiR7XG4gICAgICBldmVudC5ldmVudE5hbWVcbiAgICB9XCIgZXZlbnQuLi5gLFxuICAgIGV2ZW50XG4gICk7XG5cbiAgY29uc3QgaW5XZWJEYXRhID0gYXdhaXQgZmV0Y2hJbldlYkRhdGEoYXBwSWQpO1xuICBpZiAoIWluV2ViRGF0YSkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpO1xuICB9XG5cbiAgY29uc3QgaW5XZWJIaXN0b3JpZXMgPSAoYXdhaXQgZ2V0SURCKElEQl9JTldFQl9ISVNUT1JJRVNfS0VZKSkgfHwge307XG4gIGNvbnN0IG1hdGNoZWRDYW1wYWlnbiA9IGdldE1hdGNoZWRJbldlYkNhbXBhaWduKFxuICAgIHRyaWdnZXJUeXBlLFxuICAgIGV2ZW50LFxuICAgIGluV2ViRGF0YS5jYW1wYWlnbnMsXG4gICAgaW5XZWJIaXN0b3JpZXMsXG4gICAgZXh0cmFDb25kaXRpb25cbiAgKTtcbiAgaWYgKCFtYXRjaGVkQ2FtcGFpZ24pIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTtcbiAgfVxuXG4gIGF3YWl0IGRlbGF5KChtYXRjaGVkQ2FtcGFpZ24uZGVsYXlUaW1lIHx8IDApICogMWUzKTtcblxuICAvLyBPcGVuIGNvcnJlc3BvbmRpbmcgcG9wdXBcbiAgcmV0dXJuIG9wZW5JbldlYlBvcHVwKG1hdGNoZWRDYW1wYWlnbik7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHRyaWdnZXJJbldlYkNhbXBhaWduO1xuIiwiLy8gQGZsb3dcbmltcG9ydCBRRyBmcm9tICcuL1FHcmFwaCc7XG5pbXBvcnQgV2l0aEFwcFNka01vZGUgZnJvbSAnLi9XaXRoQXBwU2RrTW9kZSc7XG5pbXBvcnQgcnVuTWlncmF0aW9ucyBmcm9tICcuL21pZ3JhdGlvbnMvcnVuTWlncmF0aW9ucyc7XG5cbmltcG9ydCB7XG4gIGdldFBhY2thZ2VWZXJzaW9uLFxuICBnZXRTZGtWZXJzaW9uLFxuICBzZXRTZGtWZXJzaW9uLFxufSBmcm9tICcuL3V0aWxzL3ZlcnNpb24nO1xuaW1wb3J0IGxvZyBmcm9tICcuL3V0aWxzL2xvZyc7XG5pbXBvcnQgd2l0aEFwcFNkayBmcm9tICcuL3V0aWxzL3dpdGhBcHBTZGsnO1xuaW1wb3J0IFJvbGxiYXIgZnJvbSAnLi91dGlscy9yb2xsYmFyJztcblxuLyoqXG4gKiBSdW4gaW4gYnJvd3NlciAoTm90IGluIHdlYnZpZXcpXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGluaXRXZWJNb2RlKCkge1xuICAvLyBTZW5kIGV2ZW50cyBhbmQgcHJvZmlsZXMgZGF0YSBpbiBiYXRjaFxuICB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgIGlmICh3aW5kb3cuX3FnKSB7XG4gICAgICB3aW5kb3cuX3FnLmJhdGNoKCk7XG4gICAgfVxuICB9LCA1MDAwKTtcblxuICAvLyBGbHVzaCBhbGwgdGhlIHVuZXhjdXRlZCBwcm9maWxlcyBhbmQgZXZlbnRzIGJlZm9yZSBwYWdlIHVubG9hZFxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAnYmVmb3JldW5sb2FkJyxcbiAgICAoKSA9PiB7XG4gICAgICBpZiAod2luZG93Ll9xZykge1xuICAgICAgICB3aW5kb3cuX3FnLnVubG9hZEZsdXNoKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBmYWxzZVxuICApO1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gICBSdW4gbWlncmF0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgY29uc3QgY3VycmVudFZlcnNpb24gPSBhd2FpdCBnZXRTZGtWZXJzaW9uKCk7XG4gIGNvbnN0IGxhc3Rlc3RWZXJzaW9uID0gZ2V0UGFja2FnZVZlcnNpb24oKTtcblxuICBsb2cuaW5mbyhcbiAgICBgQ3VycmVudCBTREsgdmVyc2lvbjogJHtjdXJyZW50VmVyc2lvbiB8fCAnTm9uZSd9YCxcbiAgICBgbGFzdGVzdCBTREsgdmVyc2lvbjogJHtsYXN0ZXN0VmVyc2lvbn1gXG4gICk7XG5cbiAgaWYgKGN1cnJlbnRWZXJzaW9uICE9PSBsYXN0ZXN0VmVyc2lvbikge1xuICAgIGxldCBoYXNNaWdyYXRlZEZhaWxlZCA9IGZhbHNlO1xuXG4gICAgLy8gUnVuIG1pZ3JhdGlvbnMgb25seSBpZiBjdXJyZW50IHZlcnNpb24gd2FzIHN0b3JlZCBiZWZvcmVcbiAgICBpZiAoY3VycmVudFZlcnNpb24pIHtcbiAgICAgIGhhc01pZ3JhdGVkRmFpbGVkID0gIShhd2FpdCBydW5NaWdyYXRpb25zKGN1cnJlbnRWZXJzaW9uKSk7XG4gICAgfVxuXG4gICAgaWYgKCFoYXNNaWdyYXRlZEZhaWxlZCkge1xuICAgICAgc2V0U2RrVmVyc2lvbihsYXN0ZXN0VmVyc2lvbik7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogU3RhcnRzIHRvIGV4Y3V0ZSB0aGUgcXVldWUuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGluaXRTZGsoKSB7XG4gIGlmICghd2luZG93LnFnIHx8IHdpbmRvdy5fcWcpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBsb2cuc2V0RGVmYXVsdExldmVsKGxvZy5sZXZlbHMuRVJST1IpO1xuXG4gIC8vIExvZyBzZGsgZXJyb3IgdG8gUm9sbGJhclxuICBSb2xsYmFyLmNvbmZpZ3VyZSh7XG4gICAgcGF5bG9hZDoge1xuICAgICAgcGVyc29uOiB7XG4gICAgICAgIGlkOiB3aW5kb3cuUUdTZXR0aW5ncyA/IHdpbmRvdy5RR1NldHRpbmdzLmFwcElkIDogJycsXG4gICAgICB9LFxuICAgIH0sXG4gIH0pO1xuXG4gIC8vIERpc3BsYXkgbG9ncyBpbiBkZXZlbG9wbWVudCBtb2RlIG9yIGRlYnVnIHNldHRpbmcgaXMgdHJ1ZVxuICBpZiAoXG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgfHxcbiAgICAod2luZG93LlFHU2V0dGluZ3MgJiYgd2luZG93LlFHU2V0dGluZ3MuZGVidWcpXG4gICkge1xuICAgIGxvZy5lbmFibGVBbGwoKTtcbiAgfVxuXG4gIC8vIEJvb3RzdHJhcCBTREsgaW5zdGFuY2UgYnkgcGxhdGZvcm1cbiAgY29uc3QgaXNXaXRoQXBwU2RrID0gYXdhaXQgd2l0aEFwcFNkaygpO1xuICBjb25zdCBfcWcgPSBpc1dpdGhBcHBTZGsgPyBuZXcgV2l0aEFwcFNka01vZGUoKSA6IG5ldyBRRygpO1xuICB3aW5kb3cuUUcgPSB3aW5kb3cuX3FnID0gX3FnO1xuXG4gIGlmICghaXNXaXRoQXBwU2RrKSB7XG4gICAgYXdhaXQgaW5pdFdlYk1vZGUoKTtcbiAgfVxuXG4gIC8vIFN0YXJ0cyB0byBleGN1dGUgcWcgcXVldWVcbiAgaWYgKHdpbmRvdy5xZy5oYXNPd25Qcm9wZXJ0eSgncXVldWUnKSkge1xuICAgIGNvbnN0IF9xID0gd2luZG93LnFnLnF1ZXVlIHx8IFtdO1xuXG4gICAgd2hpbGUgKF9xLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGFyZ3MgPSBfcS5zaGlmdCgpO1xuICAgICAgd2luZG93Ll9xZy5jYWxsbWV0aG9kLmNhbGwoX3FnLCBhcmdzKTtcbiAgICB9XG5cbiAgICB3aW5kb3cucWcgPSBmdW5jdGlvbigpIHtcbiAgICAgIHdpbmRvdy5fcWcuY2FsbG1ldGhvZC5jYWxsKF9xZywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9XG59XG5cbmluaXRTZGsoKTtcbiIsIi8vIEBmbG93XG5pbXBvcnQgeyBzZXQgYXMgc2V0SURCIH0gZnJvbSAnaWRiLWtleXZhbCc7XG5pbXBvcnQgY29va2llIGZyb20gJy4uL3V0aWxzL2Nvb2tpZSc7XG5pbXBvcnQgbG9nIGZyb20gJy4uL3V0aWxzL2xvZyc7XG5pbXBvcnQgeyBJREJfUFVTSF9ERU5JRURfVElNRVNUQU1QLCBJREJfQ1lNUF9BQ0tFRCB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5cbi8vIEV4cG9ydCBmb3IgdW5pdCB0ZXN0XG5leHBvcnQgY29uc3QgTEVHQUNZX0NZTVBfQ09PS0lFID0gJ19xZ19jeW1wJztcblxuLyoqXG4gKiBNaWdyYXRlIGxlZ2FjeSBgX3FnX2N5bXBgIGNvb2tpZSB0byBuZXcgdHdvIGZsYWdzIGluIElEQlxuICpcbiAqIDEuIElmIGxlZ2FjeSBjb29raWUncyB2YWx1ZSBpcyB1bml4IHRpbWVzdGFtcCAtPiBjb252ZXJ0IHRvIHN0YW5kYXJkIHRpbWVzdGFtcCAoMTI6MDBhbSkgaW4gaURCXG4gKiAyLiBJZiBsZWdhY3kgY29va2llJ3MgdmFsdWUgaXMgLTEgLT4gc2V0IHRpbWVzdGFtcCB3aXRoIGN1cnJlbnQgZGF0ZSAoMTI6MDBhbSksIENZTVAgaXMgYWNrZWRcbiAqL1xuYXN5bmMgZnVuY3Rpb24gbWlncmF0ZUN5bXBDb29raWUoKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGxlZ2FjeVB1c2hEZW5pZWRVbml4VGltZSA9IGNvb2tpZS5nZXRKU09OKExFR0FDWV9DWU1QX0NPT0tJRSk7XG5cbiAgLy8gRG8gbm90aGluZyBpZiBjYW4ndCBmaW5kIGxlZ2FjeSBmbGFnXG4gIGlmICghbGVnYWN5UHVzaERlbmllZFVuaXhUaW1lICYmIGxlZ2FjeVB1c2hEZW5pZWRVbml4VGltZSAhPT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIENoZWNrIGlmIENZTVAgaXMgYWNrZWRcbiAgaWYgKGxlZ2FjeVB1c2hEZW5pZWRVbml4VGltZSA9PT0gLTEpIHtcbiAgICAvLyBDdXJyZW50IGRhdGUgaW4gMTI6MDBhbVxuICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcbiAgICBjdXJyZW50RGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcblxuICAgIGF3YWl0IHNldElEQihJREJfUFVTSF9ERU5JRURfVElNRVNUQU1QLCArY3VycmVudERhdGUpO1xuICAgIGF3YWl0IHNldElEQihJREJfQ1lNUF9BQ0tFRCwgdHJ1ZSk7XG4gICAgY29va2llLnJlbW92ZShMRUdBQ1lfQ1lNUF9DT09LSUUpOyAvLyBSZW1vdmUgbGVnYWN5IGNvb2tpZVxuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIENvbnZlcnQgdW5peCB0aW1lIHRvIHN0YW5kYXJkIHRpbWVzdGFtcCwgYW5kIGNvbnZlcnQgdG8gMTI6MDBhbVxuICBjb25zdCBwdXNoRGVuaWVkRGF0ZSA9IG5ldyBEYXRlKCtsZWdhY3lQdXNoRGVuaWVkVW5peFRpbWUgKiAxMDAwKTtcbiAgcHVzaERlbmllZERhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG5cbiAgLy8gU2V0IHB1c2ggZGVuaWVkIGRhdGVcbiAgYXdhaXQgc2V0SURCKElEQl9QVVNIX0RFTklFRF9USU1FU1RBTVAsICtwdXNoRGVuaWVkRGF0ZSk7XG5cbiAgLy8gUmVtb3ZlIGxlZ2FjeSBjb29raWVcbiAgY29va2llLnJlbW92ZShMRUdBQ1lfQ1lNUF9DT09LSUUpO1xuXG4gIGxvZy5kZWJ1ZygnTWlncmF0ZWQgbGVnYWN5IGN5bXAgY29va2llIHRvIG5ldyBkYXRhIGluIGlEQicpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBtaWdyYXRlQ3ltcENvb2tpZTtcbiIsIi8vIEBmbG93XG5pbXBvcnQgY29va2llIGZyb20gJy4uL3V0aWxzL2Nvb2tpZSc7XG5pbXBvcnQgbG9nIGZyb20gJy4uL3V0aWxzL2xvZyc7XG5pbXBvcnQgeyBXVVNFUl9JRF9LRVkgfSBmcm9tICcuLi9jb25zdGFudHMnO1xuXG4vLyBNYXRjaGVzIGBcImAgb3IgZW5jb2RlZCBkb3VibGUgcXVvdGVcbmNvbnN0IERPVUJMRV9RVU9URV9SRUdFWFAgPSBuZXcgUmVnRXhwKC9cInwlMjIvZyk7XG5cbi8qKlxuICogWFhYOlxuICogd2UgaGF2ZSBzb21lIGxlZ2FjeSB1c2VycyBoYXZlIGRvdWJsZSBxdW90ZSBsaWtlIGBcIjEyM1wiYCBhcyB2YWx1ZS5cbiAqIFdlIHNob3VsZCBzYW5pdGl6ZSBpdCBvbmNlIGFuZCBmb3IgYWxsLlxuICovXG5hc3luYyBmdW5jdGlvbiBtaWdyYXRlV1VzZXJJZCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3Qgd1VzZXJJZCA9IGNvb2tpZS5nZXQoV1VTRVJfSURfS0VZKSB8fCAnJztcblxuICBpZiAoIXdVc2VySWQgfHwgIURPVUJMRV9RVU9URV9SRUdFWFAudGVzdCh3VXNlcklkKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIFJlbW92ZSBkb3VibGUgcXVvdGUgdGhlbiBzZXQgYmFjayB0byBjb29raWVcbiAgY29uc3QgbW9kaWZpZWRXVXNlcklkID0gd1VzZXJJZC5yZXBsYWNlKERPVUJMRV9RVU9URV9SRUdFWFAsICcnKTtcbiAgY29va2llLmV4U2V0KFdVU0VSX0lEX0tFWSwgbW9kaWZpZWRXVXNlcklkKTtcblxuICBsb2cuZGVidWcoJ01pZ3JhdGVkIGxlZ2FjeSB3VXNlcklkIHRvIGNvcnJlY3QgZm9ybWF0Jyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1pZ3JhdGVXVXNlcklkO1xuIiwiLy8gQGZsb3dcbmltcG9ydCBjb21wYXJlVmVyc2lvbnMgZnJvbSAnY29tcGFyZS12ZXJzaW9ucyc7XG5pbXBvcnQgbG9nIGZyb20gJy4uL3V0aWxzL2xvZyc7XG5pbXBvcnQgeyBzZXRTZGtWZXJzaW9uIH0gZnJvbSAnLi4vdXRpbHMvdmVyc2lvbic7XG5cbi8vIE1pZ3JhdGlvbiBzY3JpcHRzXG5pbXBvcnQgbWlncmF0ZUN5bXBDb29raWUgZnJvbSAnLi9taWdyYXRlQ3ltcENvb2tpZSc7XG5pbXBvcnQgbWlncmF0ZVdVc2VySWQgZnJvbSAnLi9taWdyYXRlV1VzZXJJZCc7XG5cbi8qKlxuICogUnVuIGF2YWlsYWJsZSBtaWdyYXRpb24gc2NyaXB0c1xuICovXG5hc3luYyBmdW5jdGlvbiBydW5NaWdyYXRpb25zKGN1cnJlbnRWZXJzaW9uOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgdHJ5IHtcbiAgICAvLyBjdXJyZW50VmVyc2lvbiA8IDMuMTUuMFxuICAgIGlmIChjb21wYXJlVmVyc2lvbnMoJzMuMTUuMCcsIGN1cnJlbnRWZXJzaW9uKSA9PT0gMSkge1xuICAgICAgYXdhaXQgbWlncmF0ZUN5bXBDb29raWUoKTtcbiAgICAgIHNldFNka1ZlcnNpb24oJzMuMTUuMCcpOyAvLyBCdW1wIHZlcnNpb24gaW5jcmVtZW50YWxseVxuICAgIH1cblxuICAgIC8vIGN1cnJlbnRWZXJzaW9uIDwgMy4xOC4xXG4gICAgaWYgKGNvbXBhcmVWZXJzaW9ucygnMy4xOC4xJywgY3VycmVudFZlcnNpb24pID09PSAxKSB7XG4gICAgICBhd2FpdCBtaWdyYXRlV1VzZXJJZCgpO1xuICAgICAgc2V0U2RrVmVyc2lvbignMy4xOC4xJyk7IC8vIEJ1bXAgdmVyc2lvbiBpbmNyZW1lbnRhbGx5XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGxvZy5lcnJvcignTWlncmF0aW9uIGZhaWxlZCcsIGVycik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHJ1bk1pZ3JhdGlvbnM7XG4iLCJcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanM/P3JlZi0tNi0xIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanM/P3Bvc3Rjc3MhLi9jeW1fcHJvbXB0LmNzc1wiKTtcblxuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cbnZhciB0cmFuc2Zvcm07XG52YXIgaW5zZXJ0SW50bztcblxuXG5cbnZhciBvcHRpb25zID0ge1wiaG1yXCI6dHJ1ZX1cblxub3B0aW9ucy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm1cbm9wdGlvbnMuaW5zZXJ0SW50byA9IHVuZGVmaW5lZDtcblxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2FscztcblxuaWYobW9kdWxlLmhvdCkge1xuXHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanM/P3JlZi0tNi0xIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanM/P3Bvc3Rjc3MhLi9jeW1fcHJvbXB0LmNzc1wiLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzPz9yZWYtLTYtMSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9wb3N0Y3NzIS4vY3ltX3Byb21wdC5jc3NcIik7XG5cblx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblxuXHRcdHZhciBsb2NhbHMgPSAoZnVuY3Rpb24oYSwgYikge1xuXHRcdFx0dmFyIGtleSwgaWR4ID0gMDtcblxuXHRcdFx0Zm9yKGtleSBpbiBhKSB7XG5cdFx0XHRcdGlmKCFiIHx8IGFba2V5XSAhPT0gYltrZXldKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdGlkeCsrO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3Ioa2V5IGluIGIpIGlkeC0tO1xuXG5cdFx0XHRyZXR1cm4gaWR4ID09PSAwO1xuXHRcdH0oY29udGVudC5sb2NhbHMsIG5ld0NvbnRlbnQubG9jYWxzKSk7XG5cblx0XHRpZighbG9jYWxzKSB0aHJvdyBuZXcgRXJyb3IoJ0Fib3J0aW5nIENTUyBITVIgZHVlIHRvIGNoYW5nZWQgY3NzLW1vZHVsZXMgbG9jYWxzLicpO1xuXG5cdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHR9KTtcblxuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn0iLCIvLyBAZmxvd1xuaW1wb3J0IGxvZyBmcm9tICcuLi8uLi91dGlscy9sb2cnO1xuaW1wb3J0IHR5cGUgeyBDeW1Qcm9tcHQgfSBmcm9tICcuLi8uLi90eXBlcy9xZ1NldHRpbmdzJztcbmltcG9ydCBjc3MgZnJvbSAnLi9jeW1fcHJvbXB0LmNzcyc7XG5cbmV4cG9ydCBjb25zdCBDWU1fUFJPTVBUX0lEID0gJ3FncmFwaEZha2VQcm9tcHRDb250YWluZXInO1xuZXhwb3J0IGNvbnN0IENMT1NFX1RSQU5TSVRJT05fRFVSQVRJT04gPSA1NTA7XG5cbnR5cGUgQ3ltUHJvbXB0T3B0aW9ucyA9IHtcbiAgLyoqXG4gICAqIEEgY2FsbGJhY2sgd2hlbiB0aGUgcHJvbXB0IGlzIGFwcGVkZWQgb24gYm9keSBlbGVtZW50XG4gICAqL1xuICBvblByb21wdE9wZW5lZD86ICgpID0+IHZvaWQsXG4gIC8qKlxuICAgKiBBIGNhbGxiYWNrIHdoZW4gdGhlIHByb21wdCBpcyBjbG9zZWRcbiAgICovXG4gIG9uUHJvbXB0Q2xvc2VkPzogKCkgPT4gdm9pZCxcbn07XG5cbi8qKlxuICogQ29tcG9zZSBjeW1wJ3MgY29udGFpbmVyXG4gKi9cbmZ1bmN0aW9uIGNvbXBvc2VDeW1wQ29udGFpbmVyKFxuICBjeW1Qcm9tcHREYXRhOiBDeW1Qcm9tcHQsXG4gIGN5bVByb21wdE9wdGlvbnM6IEN5bVByb21wdE9wdGlvbnNcbikge1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoY3NzLmNvbnRhaW5lcik7XG5cbiAgLy8gQXBwbHkgY3VzdG9tIGJhY2tncm91bmQgY29sb3Igb24gY29udGFpbmVyXG4gIGlmIChjeW1Qcm9tcHREYXRhLmNvbG9yKSB7XG4gICAgY29udGFpbmVyLnN0eWxlLmJhY2tncm91bmQgPSBjeW1Qcm9tcHREYXRhLmNvbG9yO1xuICB9XG5cbiAgLy8gQXBwbHkgY3VzdG9tIHRleHQgY29sb3Igb24gY29udGFpbmVyXG4gIGlmIChjeW1Qcm9tcHREYXRhLnRleHRDb2xvcikge1xuICAgIGNvbnRhaW5lci5zdHlsZS5jb2xvciA9IGN5bVByb21wdERhdGEudGV4dENvbG9yO1xuICB9XG5cbiAgLy8gQXBwZW5kIGNvbnRhaW5lcidzIGNhcmV0XG4gIGNvbnN0IGNhcmV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICBjYXJldC5jbGFzc0xpc3QuYWRkKGNzcy5jYXJldCk7XG4gIGlmIChjeW1Qcm9tcHREYXRhLmNvbG9yKSB7XG4gICAgY2FyZXQuc3R5bGUuY29sb3IgPSBjeW1Qcm9tcHREYXRhLmNvbG9yO1xuICB9XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjYXJldCk7XG5cbiAgLy8gQXBwZW5kIG1lc3NhZ2UgKHN3aXRjaCBjb250ZW50IGluIGRpZmZlcmVudCB3aW5kb3cgc2l6ZSlcbiAgY29uc3QgbWVzc2FnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBtZXNzYWdlLmNsYXNzTGlzdC5hZGQoY3NzLm1lc3NhZ2UpO1xuICBtZXNzYWdlLmlubmVySFRNTCA9XG4gICAgd2luZG93LmlubmVyV2lkdGggPCA1MjBcbiAgICAgID8gKGN5bVByb21wdERhdGEubW9iaWxlIHx8IHt9KS5tZXNzYWdlXG4gICAgICA6IChjeW1Qcm9tcHREYXRhLmRlc2t0b3AgfHwge30pLm1lc3NhZ2U7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChtZXNzYWdlKTtcblxuICAvLyBBcHBlbmQgY2xvc2UgYnV0dG9uXG4gIGNvbnN0IGNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gIGNsb3NlQnV0dG9uLmNsYXNzTGlzdC5hZGQoY3NzWydjbG9zZS1idXR0b24nXSk7XG4gIGNsb3NlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBjbG9zZUN5bVByb21wdChjeW1Qcm9tcHRPcHRpb25zLm9uUHJvbXB0Q2xvc2VkKTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNsb3NlQnV0dG9uKTtcblxuICByZXR1cm4gY29udGFpbmVyO1xufVxuXG4vKipcbiAqIEFwcGVuZCBDWU0tUHJvbXB0IChDaGFuZ2UtWW91ci1NaW5kIFByb21wdCkgb24gYm9keSBlbGVtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvcGVuQ3ltUHJvbXB0KFxuICBjeW1Qcm9tcHREYXRhPzogQ3ltUHJvbXB0LFxuICBjeW1Qcm9tcHRPcHRpb25zPzogQ3ltUHJvbXB0T3B0aW9ucyA9IHt9XG4pIHtcbiAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKENZTV9QUk9NUFRfSUQpIHx8ICFjeW1Qcm9tcHREYXRhKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbG9nLmRlYnVnKCdTaG93aW5nIGN5bS1wcm9tcHQuLi4nKTtcblxuICBjb25zdCBjeW1Qcm9tcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY3ltUHJvbXB0LmNsYXNzTGlzdC5hZGQoY3NzWydjeW1wJ10pO1xuICBjeW1Qcm9tcHQuaWQgPSBDWU1fUFJPTVBUX0lEO1xuXG4gIGlmIChjeW1Qcm9tcHREYXRhLmh0bWwpIHtcbiAgICBjeW1Qcm9tcHQuaW5uZXJIVE1MID0gY3ltUHJvbXB0RGF0YS5odG1sO1xuICB9IGVsc2Uge1xuICAgIC8vIEFwcGVuZCBvdmVybGF5XG4gICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZChjc3Mub3ZlcmxheSk7XG4gICAgY3ltUHJvbXB0LmFwcGVuZENoaWxkKG92ZXJsYXkpO1xuXG4gICAgLy8gQXBwZW5kIGNvbnRhaW5lclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGNvbXBvc2VDeW1wQ29udGFpbmVyKGN5bVByb21wdERhdGEsIGN5bVByb21wdE9wdGlvbnMpO1xuICAgIGN5bVByb21wdC5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICB9XG5cbiAgLy8gQXBwZW5kIHRvIERPTVxuICBpZiAoZG9jdW1lbnQuYm9keSkge1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY3ltUHJvbXB0KTtcbiAgfVxuXG4gIC8vIE9wZW5lZCBjYWxsYmFja1xuICBpZiAoY3ltUHJvbXB0T3B0aW9ucy5vblByb21wdE9wZW5lZCkge1xuICAgIGN5bVByb21wdE9wdGlvbnMub25Qcm9tcHRPcGVuZWQoKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZSBDWU0tUHJvbXB0IChDaGFuZ2UtWW91ci1NaW5kIFByb21wdCkgZnJvbSBET00gdHJlZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VDeW1Qcm9tcHQob25Qcm9tcHRDbG9zZWQ/OiAoKSA9PiB2b2lkKSB7XG4gIGNvbnN0IHByb21wdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChDWU1fUFJPTVBUX0lEKTtcblxuICBpZiAocHJvbXB0RWxlbWVudCkge1xuICAgIGxvZy5kZWJ1ZygnQ2xvc2luZyBjeW0tcHJvbXB0Li4uJyk7XG4gICAgcHJvbXB0RWxlbWVudC5jbGFzc0xpc3QuYWRkKGNzc1snaXMtY2xvc2luZyddKTtcblxuICAgIC8vIENsb3NlZCBjYWxsYmFja1xuICAgIGlmIChvblByb21wdENsb3NlZCkge1xuICAgICAgb25Qcm9tcHRDbG9zZWQoKTtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgRE9NIGVsZW1lbnQgYWZ0ZXIgdHJhbnNpdGlvblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgcHJvbXB0RWxlbWVudC5yZW1vdmUoKTtcbiAgICB9LCBDTE9TRV9UUkFOU0lUSU9OX0RVUkFUSU9OKTtcbiAgfVxufVxuIiwiLy8gQGZsb3dcbmV4cG9ydCB7IG9wZW5DeW1Qcm9tcHQsIGNsb3NlQ3ltUHJvbXB0IH0gZnJvbSAnLi9jeW1fcHJvbXB0JztcbiIsIlxudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz8/cmVmLS02LTEhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cG9zdGNzcyEuL2Zha2VfcHJvbXB0LmNzc1wiKTtcblxuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cbnZhciB0cmFuc2Zvcm07XG52YXIgaW5zZXJ0SW50bztcblxuXG5cbnZhciBvcHRpb25zID0ge1wiaG1yXCI6dHJ1ZX1cblxub3B0aW9ucy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm1cbm9wdGlvbnMuaW5zZXJ0SW50byA9IHVuZGVmaW5lZDtcblxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2FscztcblxuaWYobW9kdWxlLmhvdCkge1xuXHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanM/P3JlZi0tNi0xIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanM/P3Bvc3Rjc3MhLi9mYWtlX3Byb21wdC5jc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz8/cmVmLS02LTEhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cG9zdGNzcyEuL2Zha2VfcHJvbXB0LmNzc1wiKTtcblxuXHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXG5cdFx0dmFyIGxvY2FscyA9IChmdW5jdGlvbihhLCBiKSB7XG5cdFx0XHR2YXIga2V5LCBpZHggPSAwO1xuXG5cdFx0XHRmb3Ioa2V5IGluIGEpIHtcblx0XHRcdFx0aWYoIWIgfHwgYVtrZXldICE9PSBiW2tleV0pIHJldHVybiBmYWxzZTtcblx0XHRcdFx0aWR4Kys7XG5cdFx0XHR9XG5cblx0XHRcdGZvcihrZXkgaW4gYikgaWR4LS07XG5cblx0XHRcdHJldHVybiBpZHggPT09IDA7XG5cdFx0fShjb250ZW50LmxvY2FscywgbmV3Q29udGVudC5sb2NhbHMpKTtcblxuXHRcdGlmKCFsb2NhbHMpIHRocm93IG5ldyBFcnJvcignQWJvcnRpbmcgQ1NTIEhNUiBkdWUgdG8gY2hhbmdlZCBjc3MtbW9kdWxlcyBsb2NhbHMuJyk7XG5cblx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdH0pO1xuXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufSIsIi8vIEBmbG93XG5pbXBvcnQgbG9nIGZyb20gJy4uLy4uL3V0aWxzL2xvZyc7XG5pbXBvcnQgdHlwZSB7IEZha2VQcm9tcHQgfSBmcm9tICcuLi8uLi90eXBlcy9xZ1NldHRpbmdzJztcbmltcG9ydCBjc3MgZnJvbSAnLi9mYWtlX3Byb21wdC5jc3MnO1xuXG5leHBvcnQgY29uc3QgRkFLRV9QUk9NUFRfSUQgPSAncWdyYXBoRmFrZVByb21wdENvbnRhaW5lcic7XG5leHBvcnQgY29uc3QgQ0xPU0VfVFJBTlNJVElPTl9EVVJBVElPTiA9IDU1MDtcblxuY29uc3QgZGVmYXVsdFByb21wdERhdGEgPSB7XG4gIHRpdGxlOiAnR2V0IExhdGVzdCBVcGRhdGVzJyxcbiAgbWVzc2FnZTogJ1N1YnNjcmliZSB0byBub3RpZmljYXRpb25zJyxcbiAgLy8gQSBiZWxsIGljb25cbiAgaWNvbjpcbiAgICAnZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpYVhOdkxUZzROVGt0TVNJL1Bqd2hSRTlEVkZsUVJTQnpkbWNnVUZWQ1RFbERJQ0l0THk5WE0wTXZMMFJVUkNCVFZrY2dNUzR4THk5RlRpSWdJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MMGR5WVhCb2FXTnpMMU5XUnk4eExqRXZSRlJFTDNOMlp6RXhMbVIwWkNJK1BITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjJaWEp6YVc5dVBTSXhMakVpSUdsa1BTSkRZWEJoWHpFaUlIZzlJakJ3ZUNJZ2VUMGlNSEI0SWlCM2FXUjBhRDBpTlRFeWNIZ2lJR2hsYVdkb2REMGlOVEV5Y0hnaUlIWnBaWGRDYjNnOUlqQWdNQ0ExTXpVdU5TQTFNelV1TlNJZ2MzUjViR1U5SW1WdVlXSnNaUzFpWVdOclozSnZkVzVrT201bGR5QXdJREFnTlRNMUxqVWdOVE0xTGpVN0lpQjRiV3c2YzNCaFkyVTlJbkJ5WlhObGNuWmxJajQ4Wno0OFp5QnBaRDBpYm05MGFXWnBZMkYwYVc5dWN5MXZiaUkrUEhCaGRHZ2daRDBpVFRFME1pNDRMRFV6TGpVMWJDMHpOUzQzTFRNMUxqZERORFV1T1N3Mk15NDNOU3cxTGpFc01UTTFMakUxTERBc01qRTJMamMxYURVeFF6VTJMakVzTVRRM0xqa3NPRGt1TWpVc09Ea3VNalVzTVRReUxqZ3NOVE11TlRWNklFMDBPRFF1TlN3eU1UWXVOelZvTlRFZ0lDQWdZeTAxTGpFdE9ERXVOaTAwTXk0ek5TMHhOVE10TVRBMExqVTFMVEU1T0M0NWJDMHpOUzQzTERNMUxqZERORFEyTGpJMUxEZzVMakkxTERRM09TNDBMREUwTnk0NUxEUTROQzQxTERJeE5pNDNOWG9nVFRRek15NDFMREl5T1M0MUlDQWdJR013TFRjNUxqQTFMVFV6TGpVMUxURTBNaTQ0TFRFeU55NDFMVEUyTUM0Mk5WWTFNV013TFRJd0xqUXRNVGN1T0RVdE16Z3VNalV0TXpndU1qVXRNemd1TWpWakxUSXdMalFzTUMwek9DNHlOU3d4Tnk0NE5TMHpPQzR5TlN3ek9DNHlOWFl4Tnk0NE5TQWdJQ0JETVRVMUxqVTFMRGcyTGpjc01UQXlMREUxTUM0ME5Td3hNRElzTWpJNUxqVjJNVFF3TGpJMWJDMDFNU3cxTVhZeU5TNDFhRFF6TXk0MWRpMHlOUzQxYkMwMU1TMDFNVll5TWprdU5Yb2dUVEkyTnk0M05TdzFNakl1TnpWak1pNDFOU3d3TERjdU5qVXNNQ3d4TUM0eUxEQWdJQ0FnWXpFM0xqZzFMVEl1TlRVc016QXVOaTB4TlM0ekxETTFMamN0TXpBdU5tTXlMalUxTFRVdU1UQXhMRFV1TVMweE1pNDNOU3cxTGpFdE1qQXVOR2d0TVRBeVF6SXhOaTQzTlN3ME9Ua3VPQ3d5TXprdU55dzFNakl1TnpVc01qWTNMamMxTERVeU1pNDNOWG9pSUdacGJHdzlJaU13TURaRVJqQWlMejQ4TDJjK1BDOW5QanhuUGp3dlp6NDhaejQ4TDJjK1BHYytQQzluUGp4blBqd3ZaejQ4Wno0OEwyYytQR2MrUEM5blBqeG5Qand2Wno0OFp6NDhMMmMrUEdjK1BDOW5QanhuUGp3dlp6NDhaejQ4TDJjK1BHYytQQzluUGp4blBqd3ZaejQ4Wno0OEwyYytQR2MrUEM5blBqd3ZjM1puUGc9PScsXG4gIHN1YnNjcmliZVRleHQ6ICdFbmFibGUnLFxuICBsYXRlclRleHQ6ICdOb3QgTm93Jyxcbn07XG5cbnR5cGUgRmFrZVByb21wdE9wdGlvbnMgPSB7XG4gIC8qKlxuICAgKiBBIGNhbGxiYWNrIHdoZW4gdGhlIHByb21wdCBpcyBhcHBlZGVkIG9uIGJvZHkgZWxlbWVudFxuICAgKi9cbiAgb25Qcm9tcHRPcGVuZWQ/OiAoKSA9PiB2b2lkLFxuICAvKipcbiAgICogQSBjYWxsYmFjayB3aGVuIHRoZSBwcm9tcHQgaXMgY2xvc2VkXG4gICAqL1xuICBvblByb21wdENsb3NlZD86ICgpID0+IHZvaWQsXG4gIC8qKlxuICAgKiBBIGNhbGxiYWNrIHdoZW4gdGhlIHByb21wdCBpcyBjbG9zZWRcbiAgICovXG4gIG9uUHJvbXB0Q29uZmlybWVkPzogKCkgPT4gdm9pZCxcbn07XG5cbi8qKlxuICogQ29tcG9zZSBmYWtlIHByb21wdCdzIGNvbnRhaW5lclxuICovXG5mdW5jdGlvbiBjb21wb3NlRmFrZVByb21wdENvbnRhaW5lcihcbiAgZmFrZVByb21wdERhdGE6IEZha2VQcm9tcHQsXG4gIGZha2VQcm9tcHRPcHRpb25zOiBGYWtlUHJvbXB0T3B0aW9uc1xuKSB7XG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBjb250YWluZXIuY2xhc3NMaXN0LmFkZChjc3MuY29udGFpbmVyKTtcblxuICBjb25zdCBjb250ZW50V3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBjb250ZW50V3JhcHBlci5jbGFzc0xpc3QuYWRkKGNzc1snY29udGVudC13cmFwcGVyJ10pO1xuXG4gIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY29udGVudC5jbGFzc0xpc3QuYWRkKGNzcy5jb250ZW50KTtcblxuICBjb25zdCBhY3Rpb25CdXR0b25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGFjdGlvbkJ1dHRvbnMuY2xhc3NMaXN0LmFkZChjc3NbJ2FjdGlvbi1idXR0b25zJ10pO1xuXG4gIC8vIEFwcGVuZCBpY29uIGltYWdlXG4gIGNvbnN0IGljb25JbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgaWNvbkltZy5jbGFzc0xpc3QuYWRkKGNzcy5pY29uKTtcbiAgaWNvbkltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsIGZha2VQcm9tcHREYXRhLmljb24gfHwgZGVmYXVsdFByb21wdERhdGEuaWNvbik7XG4gIGNvbnRlbnRXcmFwcGVyLmFwcGVuZENoaWxkKGljb25JbWcpO1xuXG4gIC8vIEFwcGVuZCB0aXRsZVxuICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XG4gIHRpdGxlLmlubmVySFRNTCA9IGZha2VQcm9tcHREYXRhLnRpdGxlIHx8IGRlZmF1bHRQcm9tcHREYXRhLnRpdGxlO1xuICBjb250ZW50LmFwcGVuZENoaWxkKHRpdGxlKTtcblxuICAvLyBBcHBlbmQgbWVzc2FnZVxuICBjb25zdCBtZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICBtZXNzYWdlLmlubmVySFRNTCA9IGZha2VQcm9tcHREYXRhLm1lc3NhZ2UgfHwgZGVmYXVsdFByb21wdERhdGEubWVzc2FnZTtcbiAgY29udGVudC5hcHBlbmRDaGlsZChtZXNzYWdlKTtcblxuICAvLyBBcHBlbmQgY2xvc2UgYnV0dG9uXG4gIGNvbnN0IGNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gIGNsb3NlQnV0dG9uLmNsYXNzTGlzdC5hZGQoY3NzWydjbG9zZS1idXR0b24nXSk7XG4gIGNsb3NlQnV0dG9uLmlubmVySFRNTCA9XG4gICAgZmFrZVByb21wdERhdGEubGF0ZXJUZXh0IHx8IGRlZmF1bHRQcm9tcHREYXRhLmxhdGVyVGV4dDtcbiAgY2xvc2VCdXR0b24ub25jbGljayA9ICgpID0+IGNsb3NlRmFrZVByb21wdChmYWtlUHJvbXB0T3B0aW9ucy5vblByb21wdENsb3NlZCk7XG4gIGFjdGlvbkJ1dHRvbnMuYXBwZW5kQ2hpbGQoY2xvc2VCdXR0b24pO1xuXG4gIC8vIEFwcGVuZCBjb25maXJtIGJ1dHRvblxuICBjb25zdCBjb25maXJtQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gIGNvbmZpcm1CdXR0b24uY2xhc3NMaXN0LmFkZChjc3NbJ2NvbmZpcm0tYnV0dG9uJ10pO1xuICBjb25maXJtQnV0dG9uLmlubmVySFRNTCA9XG4gICAgZmFrZVByb21wdERhdGEuc3Vic2NyaWJlVGV4dCB8fCBkZWZhdWx0UHJvbXB0RGF0YS5zdWJzY3JpYmVUZXh0O1xuICBjb25maXJtQnV0dG9uLm9uY2xpY2sgPSAoKSA9PlxuICAgIGNvbmZpcm1GYWtlUHJvbXB0KFxuICAgICAgZmFrZVByb21wdE9wdGlvbnMub25Qcm9tcHRDb25maXJtZWQsXG4gICAgICBmYWtlUHJvbXB0T3B0aW9ucy5vblByb21wdENsb3NlZFxuICAgICk7XG4gIGlmIChmYWtlUHJvbXB0RGF0YS5idXR0b25Db2xvcikge1xuICAgIGNvbmZpcm1CdXR0b24uc2V0QXR0cmlidXRlKFxuICAgICAgJ3N0eWxlJyxcbiAgICAgIGBiYWNrZ3JvdW5kOiAke2Zha2VQcm9tcHREYXRhLmJ1dHRvbkNvbG9yfTtgXG4gICAgKTtcbiAgfVxuICBhY3Rpb25CdXR0b25zLmFwcGVuZENoaWxkKGNvbmZpcm1CdXR0b24pO1xuXG4gIGNvbnRlbnRXcmFwcGVyLmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY29udGVudFdyYXBwZXIpO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYWN0aW9uQnV0dG9ucyk7XG4gIHJldHVybiBjb250YWluZXI7XG59XG5cbi8qKlxuICogQXBwZW5kIEZha2UgUHJvbXB0IG9uIGJvZHkgZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gb3BlbkZha2VQcm9tcHQoXG4gIGZha2VQcm9tcHREYXRhPzogRmFrZVByb21wdCA9IHt9LFxuICBmYWtlUHJvbXB0T3B0aW9ucz86IEZha2VQcm9tcHRPcHRpb25zID0ge31cbikge1xuICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoRkFLRV9QUk9NUFRfSUQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbG9nLmRlYnVnKCdTaG93aW5nIGZha2UgcHJvbXB0Li4uJyk7XG5cbiAgY29uc3QgZmFrZVByb21wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBmYWtlUHJvbXB0LmNsYXNzTGlzdC5hZGQoY3NzWydmYWtlLXByb21wdCddKTtcbiAgZmFrZVByb21wdC5pZCA9IEZBS0VfUFJPTVBUX0lEO1xuXG4gIC8vIEFwcGVuZCBgLmlzLW1pZGRsZWAgbW9kaWZpZXIgb24gY29udGFpbmVyJ3MgY2xhc3NcbiAgaWYgKGZha2VQcm9tcHREYXRhLmlzTWlkZGxlKSB7XG4gICAgZmFrZVByb21wdC5jbGFzc0xpc3QuYWRkKGNzc1snaXMtbWlkZGxlJ10pO1xuICB9XG5cbiAgaWYgKGZha2VQcm9tcHREYXRhLmh0bWwpIHtcbiAgICBmYWtlUHJvbXB0LmlubmVySFRNTCA9IGZha2VQcm9tcHREYXRhLmh0bWw7XG4gIH0gZWxzZSB7XG4gICAgLy8gQXBwZW5kIG92ZXJsYXlcbiAgICBpZiAoZmFrZVByb21wdERhdGEub3ZlcmxheSkge1xuICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKGNzcy5vdmVybGF5KTtcbiAgICAgIGZha2VQcm9tcHQuYXBwZW5kQ2hpbGQob3ZlcmxheSk7XG4gICAgfVxuXG4gICAgLy8gQXBwZW5kIGNvbnRhaW5lclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGNvbXBvc2VGYWtlUHJvbXB0Q29udGFpbmVyKFxuICAgICAgZmFrZVByb21wdERhdGEsXG4gICAgICBmYWtlUHJvbXB0T3B0aW9uc1xuICAgICk7XG4gICAgZmFrZVByb21wdC5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICB9XG5cbiAgLy8gQXBwZW5kIHRvIERPTVxuICBpZiAoZG9jdW1lbnQuYm9keSkge1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZmFrZVByb21wdCk7XG4gIH1cblxuICAvLyBPcGVuZWQgY2FsbGJhY2tcbiAgaWYgKGZha2VQcm9tcHRPcHRpb25zLm9uUHJvbXB0T3BlbmVkKSB7XG4gICAgZmFrZVByb21wdE9wdGlvbnMub25Qcm9tcHRPcGVuZWQoKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZSBGYWtlIFByb21wdCBmcm9tIERPTSB0cmVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZUZha2VQcm9tcHQob25Qcm9tcHRDbG9zZWQ/OiAoKSA9PiB2b2lkKSB7XG4gIGNvbnN0IHByb21wdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChGQUtFX1BST01QVF9JRCk7XG5cbiAgaWYgKHByb21wdEVsZW1lbnQpIHtcbiAgICBsb2cuZGVidWcoJ0Nsb3NpbmcgZmFrZSBwcm9tcHQuLi4nKTtcbiAgICBwcm9tcHRFbGVtZW50LmNsYXNzTGlzdC5hZGQoY3NzWydpcy1jbG9zaW5nJ10pO1xuXG4gICAgLy8gQ2xvc2VkIGNhbGxiYWNrXG4gICAgaWYgKG9uUHJvbXB0Q2xvc2VkKSB7XG4gICAgICBvblByb21wdENsb3NlZCgpO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSBET00gZWxlbWVudCBhZnRlciB0cmFuc2l0aW9uXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBwcm9tcHRFbGVtZW50LnJlbW92ZSgpO1xuICAgIH0sIENMT1NFX1RSQU5TSVRJT05fRFVSQVRJT04pO1xuICB9XG59XG5cbi8qKlxuICogQ2xvc2UgdGhlbiBmaXJlIGNvbmZpcm0gY2FsbGJhY2tcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbmZpcm1GYWtlUHJvbXB0KFxuICBvblByb21wdENvbmZpcm1lZD86ICgpID0+IHZvaWQsXG4gIG9uUHJvbXB0Q2xvc2VkPzogKCkgPT4gdm9pZFxuKSB7XG4gIGNsb3NlRmFrZVByb21wdChvblByb21wdENsb3NlZCk7XG4gIGxvZy5kZWJ1ZygnQ29uZmlybSBmYWtlIHByb21wdCcpO1xuXG4gIC8vIENvbmZpcm1lZCBjYWxsYmFja1xuICBpZiAob25Qcm9tcHRDb25maXJtZWQpIHtcbiAgICBvblByb21wdENvbmZpcm1lZCgpO1xuICB9XG59XG4iLCIvLyBAZmxvd1xuZXhwb3J0IHtcbiAgb3BlbkZha2VQcm9tcHQsXG4gIGNsb3NlRmFrZVByb21wdCxcbiAgY29uZmlybUZha2VQcm9tcHQsXG59IGZyb20gJy4vZmFrZV9wcm9tcHQnO1xuIiwiZXhwb3J0IHtcbiAgb3Blbk9uU3Vic2NyaWJlZFBvcHVwLFxuICBjbG9zZU9uU3Vic2NyaWJlZFBvcHVwLFxuICBQT1BVUF9PUEVORURfRVZFTlQsXG4gIFBPUFVQX0NMT1NFRF9FVkVOVCxcbn0gZnJvbSAnLi9vbl9zdWJzY3JpYmVkX3BvcHVwJztcbiIsIlxudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz8/cmVmLS02LTEhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cG9zdGNzcyEuL29uX3N1YnNjcmliZWRfcG9wdXAuY3NzXCIpO1xuXG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblxudmFyIHRyYW5zZm9ybTtcbnZhciBpbnNlcnRJbnRvO1xuXG5cblxudmFyIG9wdGlvbnMgPSB7XCJobXJcIjp0cnVlfVxuXG5vcHRpb25zLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVxub3B0aW9ucy5pbnNlcnRJbnRvID0gdW5kZWZpbmVkO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5cbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXG5pZihtb2R1bGUuaG90KSB7XG5cdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz8/cmVmLS02LTEhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cG9zdGNzcyEuL29uX3N1YnNjcmliZWRfcG9wdXAuY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanM/P3JlZi0tNi0xIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanM/P3Bvc3Rjc3MhLi9vbl9zdWJzY3JpYmVkX3BvcHVwLmNzc1wiKTtcblxuXHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXG5cdFx0dmFyIGxvY2FscyA9IChmdW5jdGlvbihhLCBiKSB7XG5cdFx0XHR2YXIga2V5LCBpZHggPSAwO1xuXG5cdFx0XHRmb3Ioa2V5IGluIGEpIHtcblx0XHRcdFx0aWYoIWIgfHwgYVtrZXldICE9PSBiW2tleV0pIHJldHVybiBmYWxzZTtcblx0XHRcdFx0aWR4Kys7XG5cdFx0XHR9XG5cblx0XHRcdGZvcihrZXkgaW4gYikgaWR4LS07XG5cblx0XHRcdHJldHVybiBpZHggPT09IDA7XG5cdFx0fShjb250ZW50LmxvY2FscywgbmV3Q29udGVudC5sb2NhbHMpKTtcblxuXHRcdGlmKCFsb2NhbHMpIHRocm93IG5ldyBFcnJvcignQWJvcnRpbmcgQ1NTIEhNUiBkdWUgdG8gY2hhbmdlZCBjc3MtbW9kdWxlcyBsb2NhbHMuJyk7XG5cblx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdH0pO1xuXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufSIsIi8vIEBmbG93XG5pbXBvcnQgdHlwZSB7IE9uU3Vic2NyaWJlZFBvcHVwIH0gZnJvbSAnLi4vLi4vdHlwZXMvcWdTZXR0aW5ncyc7XG5pbXBvcnQgdHlwZSB7IFBvcHVwT3B0aW9ucyB9IGZyb20gJy4uLy4uL3R5cGVzL3BvcHVwJztcbmltcG9ydCBjc3MgZnJvbSAnLi9vbl9zdWJzY3JpYmVkX3BvcHVwLmNzcyc7XG5cbmV4cG9ydCBjb25zdCBQT1BVUF9JRCA9ICdxZy1vbi1zdWJzY3JpYmVkLXBvcHVwJzsgLy8gRXhwb3J0IGZvciB1bml0IHRlc3RcbmV4cG9ydCBjb25zdCBQT1BVUF9PUEVORURfRVZFTlQgPSAnb25TdWJzY3JpYmVkUG9wdXBPcGVuZWQnO1xuZXhwb3J0IGNvbnN0IFBPUFVQX0NMT1NFRF9FVkVOVCA9ICdvblN1YnNjcmliZWRQb3B1cENsb3NlZCc7XG5cbi8qKlxuICogQXBwZW5kIE9uLVN1YnNjcmliZWQgUG9wdXAgb24gYm9keSBlbGVtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvcGVuT25TdWJzY3JpYmVkUG9wdXAoXG4gIG9uU3Vic2NyaWJlZFBvcHVwOiBPblN1YnNjcmliZWRQb3B1cCxcbiAgcG9wdXBPcHRpb25zPzogUG9wdXBPcHRpb25zXG4pIHtcbiAgaWYgKCFvblN1YnNjcmliZWRQb3B1cC5lbmFibGVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3Qge1xuICAgIHJvb3REb2N1bWVudCxcbiAgICBjb250YWluZXJJZCxcbiAgICBvblBvcHVwT3BlbmVkLFxuICAgIG9uUG9wdXBDbG9zZWQsXG4gICAgb25DbG9zZUJ1dHRvbkNsaWNrLFxuICB9ID0gcG9wdXBPcHRpb25zIHx8IHt9O1xuICBjb25zdCBwb3B1cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBwb3B1cC5jbGFzc0xpc3QuYWRkKGNzcy5wb3B1cCk7XG4gIHBvcHVwLmlkID0gUE9QVVBfSUQ7XG5cbiAgLy8gQXBwZW5kIG92ZXJsYXkgaWYgbmVjZXNzYXJ5XG4gIGlmIChvblN1YnNjcmliZWRQb3B1cC5zaG93T3ZlcmxheSkge1xuICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoY3NzLm92ZXJsYXkpO1xuICAgIHBvcHVwLmFwcGVuZENoaWxkKG92ZXJsYXkpO1xuICB9XG5cbiAgLy8gQXBwZW5kIGNsb3NlIGJ1dHRvblxuICBjb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBjbG9zZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKGNzc1snY2xvc2UtYnV0dG9uJ10pO1xuICBjbG9zZUJ1dHRvbi5vbmNsaWNrID1cbiAgICBvbkNsb3NlQnV0dG9uQ2xpY2sgfHxcbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIGNsb3NlT25TdWJzY3JpYmVkUG9wdXAob25Qb3B1cENsb3NlZCk7XG4gICAgfTtcbiAgcG9wdXAuYXBwZW5kQ2hpbGQoY2xvc2VCdXR0b24pO1xuXG4gIC8vIFByZXZlbnQgYm9keSBmcm9tIHNjcm9sbGluZyB3aXRoIGV4dHJhIHdyYXBwZXJcbiAgY29uc3QgcG91cFNjcm9sbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBwb3VwU2Nyb2xsLmNsYXNzTGlzdC5hZGQoY3NzWydwb3B1cC1zY3JvbGwnXSk7XG4gIHBvcHVwLmFwcGVuZENoaWxkKHBvdXBTY3JvbGwpO1xuXG4gIC8vIEFwcGVuZCBjb250YWluZXJcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGlmIChjb250YWluZXJJZCkge1xuICAgIGNvbnRhaW5lci5pZCA9IGNvbnRhaW5lcklkO1xuICB9XG4gIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGNzcy5jb250YWluZXIpO1xuICBjb250YWluZXIuaW5uZXJIVE1MID0gb25TdWJzY3JpYmVkUG9wdXAuaHRtbEJvZHk7XG4gIHBvdXBTY3JvbGwuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcblxuICAvLyBBcHBlbmQgdG8gRE9NXG4gIGNvbnN0IHJlbmRlcmVkRG9jdW1lbnQgPSByb290RG9jdW1lbnQgfHwgZG9jdW1lbnQ7XG4gIGlmIChyZW5kZXJlZERvY3VtZW50LmJvZHkpIHtcbiAgICByZW5kZXJlZERvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocG9wdXApO1xuICB9XG5cbiAgLy8gT3BlbmVkIGNhbGxiYWNrXG4gIGlmIChvblBvcHVwT3BlbmVkKSB7XG4gICAgb25Qb3B1cE9wZW5lZCgpO1xuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlIE9uLVN1YnNjcmliZWQgUG9wdXAgZnJvbSBET00gdHJlZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VPblN1YnNjcmliZWRQb3B1cChvblBvcHVwQ2xvc2VkPzogKCkgPT4gdm9pZCkge1xuICBjb25zdCBwb3B1cFdyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChQT1BVUF9JRCk7XG5cbiAgaWYgKHBvcHVwV3JhcHBlcikge1xuICAgIHBvcHVwV3JhcHBlci5yZW1vdmUoKTtcblxuICAgIC8vIENsb3NlZCBjYWxsYmFja1xuICAgIGlmIChvblBvcHVwQ2xvc2VkKSB7XG4gICAgICBvblBvcHVwQ2xvc2VkKCk7XG4gICAgfVxuICB9XG59XG4iLCIvLyBAZmxvd1xuZXhwb3J0IHsgb3Blbk92ZXJsYXlQcm9tcHQsIGNsb3NlT3ZlcmxheVByb21wdCB9IGZyb20gJy4vb3ZlcmxheV9wcm9tcHQnO1xuIiwiXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzPz9yZWYtLTYtMSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9wb3N0Y3NzIS4vb3ZlcmxheV9wcm9tcHQuY3NzXCIpO1xuXG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblxudmFyIHRyYW5zZm9ybTtcbnZhciBpbnNlcnRJbnRvO1xuXG5cblxudmFyIG9wdGlvbnMgPSB7XCJobXJcIjp0cnVlfVxuXG5vcHRpb25zLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVxub3B0aW9ucy5pbnNlcnRJbnRvID0gdW5kZWZpbmVkO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5cbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXG5pZihtb2R1bGUuaG90KSB7XG5cdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz8/cmVmLS02LTEhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cG9zdGNzcyEuL292ZXJsYXlfcHJvbXB0LmNzc1wiLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzPz9yZWYtLTYtMSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9wb3N0Y3NzIS4vb3ZlcmxheV9wcm9tcHQuY3NzXCIpO1xuXG5cdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cblx0XHR2YXIgbG9jYWxzID0gKGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdHZhciBrZXksIGlkeCA9IDA7XG5cblx0XHRcdGZvcihrZXkgaW4gYSkge1xuXHRcdFx0XHRpZighYiB8fCBhW2tleV0gIT09IGJba2V5XSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRpZHgrKztcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGtleSBpbiBiKSBpZHgtLTtcblxuXHRcdFx0cmV0dXJuIGlkeCA9PT0gMDtcblx0XHR9KGNvbnRlbnQubG9jYWxzLCBuZXdDb250ZW50LmxvY2FscykpO1xuXG5cdFx0aWYoIWxvY2FscykgdGhyb3cgbmV3IEVycm9yKCdBYm9ydGluZyBDU1MgSE1SIGR1ZSB0byBjaGFuZ2VkIGNzcy1tb2R1bGVzIGxvY2Fscy4nKTtcblxuXHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0fSk7XG5cblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59IiwiLy8gQGZsb3dcbmltcG9ydCBsb2cgZnJvbSAnLi4vLi4vdXRpbHMvbG9nJztcbmltcG9ydCB0eXBlIHsgT3ZlcmxheVByb21wdCB9IGZyb20gJy4uLy4uL3R5cGVzL3FnU2V0dGluZ3MnO1xuaW1wb3J0IGNzcyBmcm9tICcuL292ZXJsYXlfcHJvbXB0LmNzcyc7XG5cbmV4cG9ydCBjb25zdCBPVkVSTEFZX1BST01QVF9JRCA9ICdxZy1vdmVybGF5LXZpZXcnO1xuXG4vKipcbiAqIEdldCBET00gZWxlbWVudCBvZiBvdmVybGF5J3MgY29udGVudFxuICovXG5mdW5jdGlvbiBjb21wb3NlT3ZlcmxheUNvbnRlbnQoeyB0aXRsZSwgbWVzc2FnZSB9OiBPdmVybGF5UHJvbXB0KSB7XG4gIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY29udGVudC5jbGFzc0xpc3QuYWRkKGNzcy5jb250ZW50KTtcbiAgY29udGVudC5vbmNsaWNrID0gZSA9PiB7XG4gICAgbG9nLmRlYnVnKCdjbGlja2VkIG92ZXJsYXkgY2hpbGQnKTtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICB9O1xuXG4gIC8vIEFwcGVuZCB0aXRsZVxuICBpZiAodGl0bGUpIHtcbiAgICBjb25zdCBjb250ZW50VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoNCcpO1xuICAgIGNvbnRlbnRUaXRsZS5pbm5lckhUTUwgPSB0aXRsZTtcbiAgICBjb250ZW50LmFwcGVuZENoaWxkKGNvbnRlbnRUaXRsZSk7XG4gIH1cblxuICAvLyBBcHBlbmQgbWVzc2FnZVxuICBpZiAobWVzc2FnZSkge1xuICAgIGNvbnN0IGNvbnRlbnRNc2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoNicpO1xuICAgIGNvbnRlbnRNc2cuaW5uZXJIVE1MID0gbWVzc2FnZTtcbiAgICBjb250ZW50LmFwcGVuZENoaWxkKGNvbnRlbnRNc2cpO1xuICB9XG5cbiAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvcGVuT3ZlcmxheVByb21wdChvdmVybGF5UHJvbXB0PzogT3ZlcmxheVByb21wdCkge1xuICAvLyBEbyBub3RoaW5nIGlmIHNldHRpbmdzIGFyZSBpbnZhbGlkIG9yIHByb21wdCB3YXMgZXhpc3RlZFxuICBpZiAoXG4gICAgIW92ZXJsYXlQcm9tcHQgfHxcbiAgICAhb3ZlcmxheVByb21wdC50aXRsZSB8fFxuICAgICFvdmVybGF5UHJvbXB0Lm1lc3NhZ2UgfHxcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChPVkVSTEFZX1BST01QVF9JRClcbiAgKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoY3NzLm92ZXJsYXkpO1xuICBvdmVybGF5LmlkID0gT1ZFUkxBWV9QUk9NUFRfSUQ7XG4gIG92ZXJsYXkub25jbGljayA9IGNsb3NlT3ZlcmxheVByb21wdDtcblxuICAvLyBBcHBlbmQgY29udGVudFxuICBjb25zdCBjb250ZW50ID0gY29tcG9zZU92ZXJsYXlDb250ZW50KG92ZXJsYXlQcm9tcHQpO1xuICBvdmVybGF5LmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuXG4gIC8vIEFwcGVuZCBjbG9zZSBidXR0b25cbiAgY29uc3QgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gIGNsb3NlQnV0dG9uLmNsYXNzTGlzdC5hZGQoY3NzWydjbG9zZS1idXR0b24nXSk7XG4gIGNsb3NlQnV0dG9uLm9uY2xpY2sgPSBjbG9zZU92ZXJsYXlQcm9tcHQ7XG4gIG92ZXJsYXkuYXBwZW5kQ2hpbGQoY2xvc2VCdXR0b24pO1xuXG4gIC8vIEFwcGVuZCB0byBET01cbiAgaWYgKGRvY3VtZW50LmJvZHkpIHtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG92ZXJsYXkpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZU92ZXJsYXlQcm9tcHQoKSB7XG4gIGNvbnN0IHByb21wdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChPVkVSTEFZX1BST01QVF9JRCk7XG5cbiAgaWYgKHByb21wdEVsZW1lbnQpIHtcbiAgICBwcm9tcHRFbGVtZW50LnJlbW92ZSgpO1xuICB9XG59XG4iLCIvLyBAZmxvd1xuXG5leHBvcnQgKiBmcm9tICcuL3JlY29tbWVuZGF0aW9uJztcbiIsIi8vIEBmbG93XG5cbmltcG9ydCBtYWtlUmVxdWVzdCBmcm9tICcuLi91dGlscy9tYWtlUmVxdWVzdCc7XG5pbXBvcnQgbG9nIGZyb20gJy4uL3V0aWxzL2xvZyc7XG5cbmltcG9ydCB7IHJlbmRlclJlY29tbWVuZGF0aW9uV2lkZ2V0IH0gZnJvbSAnLi93aWRnZXQnO1xuaW1wb3J0IHR5cGUgeyBSZWNvbW1lbmRhdGlvbiwgU3R5bGVzLCBMYXlvdXQgfSBmcm9tICcuLi90eXBlcy9yZWNvbW1lbmRhdGlvbic7XG5cbnR5cGUgR2V0UmVjb21tZW5kYXRpb25PcHRpb25zID0ge1xuICBwcm9kdWN0SWQ/OiBzdHJpbmcsXG4gIGRhdGFmZWVkSWQ/OiBzdHJpbmcsXG4gIG1heEl0ZW1zPzogbnVtYmVyLFxufTtcblxudHlwZSBTaG93UmVjb21tZW5kYXRpb25PcHRpb25zID0ge1xuICBtb2RlbDpcbiAgICB8ICdhdXRvJ1xuICAgIHwgJ3VzZXJfdG9fcHJvZHVjdHMnXG4gICAgfCAndmlld19hbHNvX3ZpZXcnXG4gICAgfCAndGl0bGVfc2ltaWxhcml0eSdcbiAgICB8ICdjdXN0b21fbWl4JyxcbiAgcHJvZHVjdElkPzogc3RyaW5nLFxuICBkYXRhZmVlZElkPzogc3RyaW5nLFxuICBsYXlvdXQ/OiBMYXlvdXQsXG4gIHN0eWxlcz86IFN0eWxlcyxcbiAgcXVlcnk/OiBPYmplY3QsXG59O1xuXG5leHBvcnQgY29uc3QgZ2V0UmVjb21tZW5kYXRpb25XaXRoQXBwID0gKGFwcElkOiBzdHJpbmcpID0+IChcbiAgdHlwZTogc3RyaW5nLFxuICBvcHRpb25zOiBHZXRSZWNvbW1lbmRhdGlvbk9wdGlvbnMgPSB7fSxcbiAgY2I6ICg/RXJyb3IsID9BcnJheTxSZWNvbW1lbmRhdGlvbj4pID0+IHZvaWRcbikgPT4ge1xuICAvLyBSZXF1aXJlZCBmb3IgZmxvdyBhcyBoYXJkIHRvIGp1ZGdlIHRoZSByZXBsYWNlbWVudCBjYW4gd29yayBhbGwgdGhlIHRpbWVzLlxuICBpZiAoIXByb2Nlc3MuZW52LkNPTkZJR19TRVJWRVJfSE9TVCkge1xuICAgIGxvZy5lcnJvcignQ29uZmlnIHNlcnZlciBlbmRwb2ludCBpcyBub3Qgc2V0dXAgY29ycmVjdGx5Jyk7XG5cbiAgICByZXR1cm4gY2IobmV3IEVycm9yKCdXcm9uZyByZWNvbW1lbmRhdGlvbiBlbmRwb2ludCBzZXR0aW5ncycpKTtcbiAgfVxuXG4gIGNvbnN0IHsgcHJvZHVjdElkID0gJycsIGRhdGFmZWVkSWQgPSAnJywgbWF4SXRlbXMgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IGVuZHBvaW50ID0gYCR7XG4gICAgcHJvY2Vzcy5lbnYuQ09ORklHX1NFUlZFUl9IT1NUXG4gIH0vYXBpL3YxLjAvdXNlcl9yZWNvbW1lbmRhdGlvbj90eXBlPSR7dHlwZX0mYXBwSWQ9JHthcHBJZH0mcHJvZHVjdElkPSR7cHJvZHVjdElkfSZkYXRhZmVlZElkPSR7ZGF0YWZlZWRJZH1gO1xuXG4gIGNiID0gdHlwZW9mIGNiID09PSAnZnVuY3Rpb24nID8gY2IgOiAoKSA9PiB7fTtcblxuICBtYWtlUmVxdWVzdCh7XG4gICAgdXJsOiBlbmRwb2ludCxcbiAgICBtZXRob2Q6ICdHRVQnLFxuICB9KVxuICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICBsb2cuZGVidWcoJ2dldFJlY29tbWVuZGF0aW9uJywgcmVzKTtcblxuICAgICAgaWYgKCFyZXMgfHwgIXJlcy5qc29uIHx8ICFBcnJheS5pc0FycmF5KHJlcy5qc29uKSkge1xuICAgICAgICByZXR1cm4gY2IobmV3IEVycm9yKCdSZXRyaWV2ZWQgaW52YWxpZCByZWNvbW1lbmRhdGlvbiBmb3JtYXQnKSk7XG4gICAgICB9XG5cbiAgICAgIGNiKG51bGwsIHJlcy5qc29uLnNsaWNlKDAsIG1heEl0ZW1zIHx8IHVuZGVmaW5lZCkpO1xuICAgIH0pXG4gICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICBsb2cuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgcmVjb21tZW5kYXRpb24nLCBlcnIpO1xuICAgICAgY2IoZXJyKTtcbiAgICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBzaG93UmVjb21tZW5kYXRpb25XaXRoQXBwID0gKGFwcElkOiBzdHJpbmcpID0+IChcbiAgaWQ6IHN0cmluZyxcbiAgb3B0aW9uczogU2hvd1JlY29tbWVuZGF0aW9uT3B0aW9ucyA9IHtcbiAgICBtb2RlbDogJ2F1dG8nLFxuICB9LFxuICBjYjogKFxuICAgID9FcnJvcixcbiAgICA/e1xuICAgICAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgICAgIHJlY29tbWVuZGF0aW9uczogQXJyYXk8UmVjb21tZW5kYXRpb24+LFxuICAgIH1cbiAgKSA9PiB2b2lkID0gKCkgPT4ge31cbikgPT4ge1xuICAvLyBUT0RPOiBJZiBubyBnaXZlbiBjb2x1bW5zIGZyb20gdXNlciwgdGhlIGNvbHVtbnMgdmFsdWUgc2hvdWxkIGJlIGNhbGN1bGF0ZWRcbiAgLy8gYnkgaW50cmluc2ljIGxheW91dCBzaXplLiBlLmcuIGRlc2lyYWJsZSBpdGVtIHdpZHRoIGlzIDE4MHB4LiBXaXRoIGEgZ2l2ZW5cbiAgLy8gY29tcHV0ZWQgYXZhaWxhYmxlIHdpZHRoOiA2MDBweCwgdGhlIGNvbHVtbnMgc2hvdWxkIGJlIDMuXG4gIGNvbnN0IGRlZmF1bHRPcHRzID0ge1xuICAgIG1vZGVsOiAnYXV0bycsXG4gICAgcHJvZHVjdElkOiAnJyxcbiAgICBkYXRhZmVlZElkOiAnJyxcbiAgICBsYXlvdXQ6IHtcbiAgICAgIHR5cGU6ICdyb3cnLFxuICAgICAgZ2FwOiAyMCxcbiAgICAgIGNvbHVtbnM6IDUsXG4gICAgICByYXRpbzogMSAvIDEsXG4gICAgfSxcbiAgICBzdHlsZXM6IHt9LFxuICAgIHF1ZXJ5OiB7fSxcbiAgfTtcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICBpZiAoIWNvbnRhaW5lciB8fCAhKGNvbnRhaW5lciBpbnN0YW5jZW9mIEhUTUxEaXZFbGVtZW50KSkge1xuICAgIGxvZy5lcnJvcignQ2Fubm90IGZpbmQgdGhlIHRhcmdldCB3aWRnZXQgY29udGFpbmVyJywgaWQpO1xuXG4gICAgcmV0dXJuIGNiKG5ldyBFcnJvcignQ29udGFpbmVyIGVsZW1lbnQgZm9yIHJlY29tbWVuZGF0aW9uIGlzIG5vdCBmb3VuZCcpKTtcbiAgfVxuXG4gIGNvbnN0IHsgcHJvZHVjdElkLCBkYXRhZmVlZElkLCBsYXlvdXQgPSB7fSB9ID0gb3B0aW9ucztcbiAgY29uc3QgZ2xvYmFsUGFyYW1zID0gSlNPTi5wYXJzZSgod2luZG93Ll9BSVFfUkVDX1BBUkFNUyB8fCB7fSlbaWRdIHx8ICd7fScpO1xuICBjb25zdCBtYXhJdGVtcyA9XG4gICAgbGF5b3V0Lm1heEl0ZW1zIHx8IChnbG9iYWxQYXJhbXMubGF5b3V0ICYmIGdsb2JhbFBhcmFtcy5sYXlvdXQubWF4SXRlbXMpO1xuICBsb2cuZGVidWcoJ3Nob3dSZWNvbW1lbmRhdGlvbicsIGdsb2JhbFBhcmFtcywgb3B0aW9ucyk7XG5cbiAgZ2V0UmVjb21tZW5kYXRpb25XaXRoQXBwKGFwcElkKShcbiAgICBvcHRpb25zLm1vZGVsIHx8IGdsb2JhbFBhcmFtcy5tb2RlbCB8fCBkZWZhdWx0T3B0cy5tb2RlbCxcbiAgICB7XG4gICAgICBwcm9kdWN0SWQsXG4gICAgICBkYXRhZmVlZElkLFxuICAgICAgbWF4SXRlbXMsXG4gICAgfSxcbiAgICAoZXJyLCByZXN1bHQgPSBbXSkgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gY2IoZXJyKTtcbiAgICAgIH1cbiAgICAgIGlmICghcmVzdWx0IHx8IHJlc3VsdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGNiKG5ldyBFcnJvcignTm8gcmVjb21tZW5kYXRpb24gZm91bmQnKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFwcGVuZCBxdWVyeSBwYWlycyB0byBleGlzdGluZyB1cmxcbiAgICAgIGlmIChnbG9iYWxQYXJhbXMucXVlcnkgfHwgb3B0aW9ucy5xdWVyeSkge1xuICAgICAgICByZXN1bHQgPSByZXN1bHQubWFwKGl0ZW0gPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IGhyZWYsIHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChpdGVtLnVybCk7XG4gICAgICAgICAgICBjb25zdCBxcyA9IHtcbiAgICAgICAgICAgICAgLi4uKGdsb2JhbFBhcmFtcy5xdWVyeSB8fCB7fSksXG4gICAgICAgICAgICAgIC4uLihvcHRpb25zLnF1ZXJ5IHx8IHt9KSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHFzKS5mb3JFYWNoKGsgPT4ge1xuICAgICAgICAgICAgICBzZWFyY2hQYXJhbXMuc2V0KGssIHFzW2tdKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpdGVtLnVybCA9IGAke2hyZWZ9PyR7c2VhcmNoUGFyYW1zLnRvU3RyaW5nKCl9YDtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuXG4gICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZW5kZXJSZWNvbW1lbmRhdGlvbldpZGdldChcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICByZXN1bHQsXG4gICAgICAgIHtcbiAgICAgICAgICAuLi5kZWZhdWx0T3B0cy5sYXlvdXQsXG4gICAgICAgICAgLi4uKGdsb2JhbFBhcmFtcy5sYXlvdXQgfHwge30pLFxuICAgICAgICAgIC4uLihvcHRpb25zLmxheW91dCB8fCB7fSksXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAuLi5kZWZhdWx0T3B0cy5zdHlsZXMsXG4gICAgICAgICAgLi4uKGdsb2JhbFBhcmFtcy5zdHlsZXMgfHwge30pLFxuICAgICAgICAgIC4uLihvcHRpb25zLnN0eWxlcyB8fCB7fSksXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGNiKG51bGwsIHtcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IHJlc3VsdCxcbiAgICAgIH0pO1xuICAgIH1cbiAgKTtcbn07XG4iLCJcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanM/P3JlZi0tNi0xIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanM/P3Bvc3Rjc3MhLi93aWRnZXQuY3NzXCIpO1xuXG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblxudmFyIHRyYW5zZm9ybTtcbnZhciBpbnNlcnRJbnRvO1xuXG5cblxudmFyIG9wdGlvbnMgPSB7XCJobXJcIjp0cnVlfVxuXG5vcHRpb25zLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVxub3B0aW9ucy5pbnNlcnRJbnRvID0gdW5kZWZpbmVkO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5cbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXG5pZihtb2R1bGUuaG90KSB7XG5cdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz8/cmVmLS02LTEhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cG9zdGNzcyEuL3dpZGdldC5jc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz8/cmVmLS02LTEhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cG9zdGNzcyEuL3dpZGdldC5jc3NcIik7XG5cblx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblxuXHRcdHZhciBsb2NhbHMgPSAoZnVuY3Rpb24oYSwgYikge1xuXHRcdFx0dmFyIGtleSwgaWR4ID0gMDtcblxuXHRcdFx0Zm9yKGtleSBpbiBhKSB7XG5cdFx0XHRcdGlmKCFiIHx8IGFba2V5XSAhPT0gYltrZXldKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdGlkeCsrO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3Ioa2V5IGluIGIpIGlkeC0tO1xuXG5cdFx0XHRyZXR1cm4gaWR4ID09PSAwO1xuXHRcdH0oY29udGVudC5sb2NhbHMsIG5ld0NvbnRlbnQubG9jYWxzKSk7XG5cblx0XHRpZighbG9jYWxzKSB0aHJvdyBuZXcgRXJyb3IoJ0Fib3J0aW5nIENTUyBITVIgZHVlIHRvIGNoYW5nZWQgY3NzLW1vZHVsZXMgbG9jYWxzLicpO1xuXG5cdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHR9KTtcblxuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn0iLCIvLyBAZmxvd1xuXG5pbXBvcnQgdHlwZSB7XG4gIFJlY29tbWVuZGF0aW9uLFxuICBMYXlvdXQsXG4gIFN0eWxlUnVsZXMsXG4gIFN0eWxlcyxcbn0gZnJvbSAnLi4vdHlwZXMvcmVjb21tZW5kYXRpb24nO1xuXG5pbXBvcnQgY3NzIGZyb20gJy4vd2lkZ2V0LmNzcyc7XG5cbmNvbnN0IGFwcGx5U3R5bGVSdWxlcyA9IChlbGVtOiBIVE1MRWxlbWVudCwgc3R5bGVzOiA/U3R5bGVSdWxlcykgPT4ge1xuICBpZiAoIXN0eWxlcykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIE9iamVjdC5rZXlzKHN0eWxlcykuZm9yRWFjaChydWxlID0+IHtcbiAgICAvLyAkRmxvd0ZpeE1lIE5vIHdheSB0byBjb3ZlciB0aGUgdHlwZSBjaGVja2luZyBidXQgcmVzcGVjdCB0aGUgaW5wdXQgZnJvbSB1c2VyJ3MgcGFyYW1ldGVycy5cbiAgICBlbGVtLnN0eWxlW3J1bGVdID0gc3R5bGVzW3J1bGVdO1xuICB9KTtcbn07XG5cbi8vIFRPRE86IEVuY2Fwc3VsYXRlIHJlY29tbWVuZGF0aW9uIGludG8gYSBjbGFzcyB0byBjb250YWluIGNvbmZpZ3VyYXRlZCBjb250ZXh0IGluc3RlYWRcbi8vIG9mIHNpbmdsZSByZW5kZXIgZnVuY3Rpb24uXG5leHBvcnQgY29uc3QgcmVuZGVyUmVjb21tZW5kYXRpb25XaWRnZXQgPSAoXG4gIGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQsXG4gIHJlY29tbWVuZGF0aW9uczogQXJyYXk8UmVjb21tZW5kYXRpb24+LFxuICBsYXlvdXQ6IExheW91dCxcbiAgc3R5bGVzOiBTdHlsZXNcbikgPT4ge1xuICBjb25zdCB7IHR5cGUsIGdhcCwgY29sdW1ucywgcmF0aW8gfSA9IGxheW91dDtcblxuICAvLyBUT0RPOiBJZiBubyBzcGVjaWZpZWQgY29sdW1ucyBmcm9tIGNhbGwgc2l0ZSwgd2UgY2FuIGxldmVyYWdlIG9ucmVzaXplXG4gIC8vIGV2ZW50IHRvIGRlY2lkZSBiZXR0ZXIgY29sdW1uIG51bWJlciBmb3IgcmVzcG9uc2l2ZW5lc3MuXG4gIGNvbnN0IGRpc3BsYXlDb2x1bW5zID0gY29sdW1ucyArICh0eXBlID09PSAncm93JyA/IDAuMiA6IDApO1xuICBjb25zdCBjYWxjV2lkdGhTdHlsZSA9IGBjYWxjKDEwMCUgLyAke2Rpc3BsYXlDb2x1bW5zfSAtICR7Z2FwfXB4KWA7XG4gIGNvbnN0IGNhbGNSYXRpb1N0eWxlID0gYGNhbGMoMTAwJSAqIDEgLyAke3JhdGlvfSlgO1xuXG4gIGNvbnN0IG91dGVyRnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICAvLyBUT0RPOiBRR1JBUEgtMTE0NjogU2VuZCBmZWVkYmFjayBldmVudCBvZiBpbXByZXNzaW9uIGFuZCBjbGlja1xuICByZWNvbW1lbmRhdGlvbnMuZm9yRWFjaChyZWMgPT4ge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG5cbiAgICBjb25zdCB0aHVtYm5haWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCBwcm9kdWN0VGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IHByaWNlVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IHJldGFpbFByaWNlVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgdGh1bWJuYWlsLmNsYXNzTGlzdC5hZGQoY3NzLnRodW1ibmFpbHMpO1xuICAgIHRodW1ibmFpbC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKFwiJHtyZWMuaW1hZ2V9XCIpYDtcbiAgICB0aHVtYm5haWwuc3R5bGUucGFkZGluZ1RvcCA9IGNhbGNSYXRpb1N0eWxlO1xuXG4gICAgcHJvZHVjdFRleHQudGV4dENvbnRlbnQgPSByZWMudGl0bGU7XG4gICAgcHJvZHVjdFRleHQuY2xhc3NMaXN0LmFkZChjc3MudGV4dCk7XG4gICAgcHJvZHVjdFRleHQuY2xhc3NMaXN0LmFkZChjc3MudGl0bGUpO1xuICAgIGFwcGx5U3R5bGVSdWxlcyhwcm9kdWN0VGV4dCwgc3R5bGVzLnRpdGxlKTtcblxuICAgIHByaWNlVGV4dC50ZXh0Q29udGVudCA9XG4gICAgICBuZXcgSW50bC5OdW1iZXJGb3JtYXQoJ2VuJywge1xuICAgICAgICBzdHlsZTogJ2RlY2ltYWwnLFxuICAgICAgICBjdXJyZW5jeTogcmVjLmN1cnJlbmN5LFxuICAgICAgfSkuZm9ybWF0KCtyZWMuY3VycmVudFByaWNlKSB8fCAnJztcbiAgICBwcmljZVRleHQuY2xhc3NMaXN0LmFkZChjc3MudGV4dCk7XG4gICAgYXBwbHlTdHlsZVJ1bGVzKHByaWNlVGV4dCwgc3R5bGVzLnByaWNlKTtcblxuICAgIHJldGFpbFByaWNlVGV4dC50ZXh0Q29udGVudCA9XG4gICAgICBuZXcgSW50bC5OdW1iZXJGb3JtYXQoJ2VuJywge1xuICAgICAgICBzdHlsZTogJ2RlY2ltYWwnLFxuICAgICAgICBjdXJyZW5jeTogcmVjLmN1cnJlbmN5LFxuICAgICAgfSkuZm9ybWF0KCtyZWMucmV0YWlsUHJpY2UpIHx8ICcnO1xuICAgIHJldGFpbFByaWNlVGV4dC5jbGFzc0xpc3QuYWRkKGNzcy50ZXh0KTtcbiAgICByZXRhaWxQcmljZVRleHQuY2xhc3NMaXN0LmFkZChjc3MucmV0YWlsUHJpY2UpO1xuICAgIGFwcGx5U3R5bGVSdWxlcyhyZXRhaWxQcmljZVRleHQsIHN0eWxlcy5yZXRhaWxQcmljZSk7XG5cbiAgICB3cmFwcGVyLmFwcGVuZCh0aHVtYm5haWwsIHByb2R1Y3RUZXh0LCBwcmljZVRleHQsIHJldGFpbFByaWNlVGV4dCk7XG4gICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKGNzcy53cmFwcGVyKTtcbiAgICB3cmFwcGVyLnRpdGxlID0gcmVjLnRpdGxlO1xuICAgIHdyYXBwZXIuc3R5bGUubWluV2lkdGggPSBjYWxjV2lkdGhTdHlsZTtcbiAgICB3cmFwcGVyLnN0eWxlLm1heFdpZHRoID0gY2FsY1dpZHRoU3R5bGU7XG4gICAgd3JhcHBlci5zdHlsZS5wYWRkaW5nID0gYCR7Z2FwfXB4ICR7Z2FwIC8gMn1weGA7XG4gICAgd3JhcHBlci5ocmVmID0gcmVjLnVybDtcblxuICAgIG91dGVyRnJhZy5hcHBlbmRDaGlsZCh3cmFwcGVyKTtcbiAgfSk7XG5cbiAgLy8gUmVtb3ZlIGV4aXN0aW5nIGNoaWxkcmVuIHVuZGVyIHRhcmdldCBlbGVtZW50LlxuICB3aGlsZSAoY29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyLmZpcnN0Q2hpbGQpO1xuICB9XG5cbiAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoY3NzLmNvbnRhaW5lcik7XG5cbiAgLy8gT3ZlcnJpZGUgdGhlIGRlZmF1bHQgc3R5bGUgYWNjb3JkaW5nbHkgYnkgbGF5b3V0IHR5cGVzXG4gIGlmICh0eXBlID09PSAnZ3JpZCcpIHtcbiAgICBjb250YWluZXIuc3R5bGUuZmxleFdyYXAgPSAnd3JhcCc7XG4gIH1cbiAgaWYgKHR5cGUgPT09ICdyb3cnKSB7XG4gICAgY29udGFpbmVyLnN0eWxlLm92ZXJmbG93WCA9ICdhdXRvJztcbiAgfVxuXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChvdXRlckZyYWcpO1xufTtcbiIsIi8qKlxuICogR2V0IHZpZXdwb3J0IGhlaWdodCBldmVuIHRoZSBgRE9DVFlQRWAgaXMgbm90IHNwZWNpZmllZC5cbiAqL1xuZnVuY3Rpb24gZ2V0Vmlld3BvcnRIZWlnaHQoKSB7XG4gIGlmIChkb2N1bWVudC5jb21wYXRNb2RlID09PSAnQmFja0NvbXBhdCcpIHtcbiAgICAvKipcbiAgICAgKiBJbiBRdWlya3MgbW9kZSwgaGF2ZSBhbiBpc3N1ZSBgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCA9PT0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodGBcbiAgICAgKi9cblxuICAgIC8vIFRyeSB0byBnZXQgZnJvbSBpbm5lckhlaWdodCBlc3BlY2lhbGx5IGZvciBtb2JpbGUgZGV2aWNlIGNhc2UgKEVYOiBPUFBPIEEzLCBib2R5LmNsaWVudEhlaWdodCB3aWxsIGJlIHRvbyBzbWFsbC4uLilcbiAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNzY2ODYxL2ZpbmQtdGhlLWV4YWN0LWhlaWdodC1hbmQtd2lkdGgtb2YtdGhlLXZpZXdwb3J0LWluLWEtY3Jvc3MtYnJvd3Nlci13YXktbm8tcHJvdG9cbiAgICBpZiAodHlwZW9mIHdpbmRvdy5pbm5lckhlaWdodCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgfVxuXG4gICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTgyODQwODcvaWYtZG9jdHlwZS1pcy1ub3Qtc3BlY2lmaWVkLW9uLWNocm9tZS1maXJlZm94LW9yLXNhZmFyaS1pcy10aGVyZS1hLXdheS10by1maW5cbiAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQ7XG4gIH1cblxuICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcbn1cblxuLyoqXG4gKiBDcm9zcyBicm93c2VyIG1ldGhvZCB0byBkZXRlcm1pbmUgdmVydGljYWwgc2Nyb2xsIHBlcmNlbnRhZ2UuXG4gKiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yMzg3MTM2L2Nyb3NzLWJyb3dzZXItbWV0aG9kLXRvLWRldGVybWluZS12ZXJ0aWNhbC1zY3JvbGwtcGVyY2VudGFnZS1pbi1qYXZhc2NyaXB0XG4gKi9cbmZ1bmN0aW9uIGdldFNjcm9sbFBlcmNlbnQoKSB7XG4gIGNvbnN0IGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gIGNvbnN0IGIgPSBkb2N1bWVudC5ib2R5O1xuICBjb25zdCBzdCA9ICdzY3JvbGxUb3AnO1xuICBjb25zdCBzaCA9ICdzY3JvbGxIZWlnaHQnO1xuICByZXR1cm4gKChoW3N0XSB8fCBiW3N0XSkgLyAoKGhbc2hdIHx8IGJbc2hdKSAtIGdldFZpZXdwb3J0SGVpZ2h0KCkpKSAqIDEwMDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZ2V0U2Nyb2xsUGVyY2VudDtcbiIsIi8qKlxuICogRGV0ZWN0IGlmIHRoZSBicm93c2VyIGlzIHJ1bm5pbmcgaW4gUHJpdmF0ZSBtb2RlXG4gKiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9qaGVyYXgvYTgxYzhjMTMyZDA5Y2MzNTRhMGUyY2I5MTE4NDFmZjFcbiAqXG4gKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAqL1xuZnVuY3Rpb24gaXNQcml2YXRlTW9kZSgpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIGNvbnN0IG9uID0gKCkgPT4gcmVzb2x2ZSh0cnVlKTsgLy8gaXMgaW4gcHJpdmF0ZSBtb2RlXG4gICAgY29uc3Qgb2ZmID0gKCkgPT4gcmVzb2x2ZShmYWxzZSk7IC8vIG5vdCBwcml2YXRlIG1vZGVcbiAgICBjb25zdCB0ZXN0TG9jYWxTdG9yYWdlID0gKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5sZW5ndGgpIG9mZigpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBsb2NhbFN0b3JhZ2UueCA9IDE7XG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3gnKTtcbiAgICAgICAgICBvZmYoKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBTYWZhcmkgb25seSBlbmFibGVzIGNvb2tpZSBpbiBwcml2YXRlIG1vZGVcbiAgICAgICAgLy8gaWYgY29va2llIGlzIGRpc2FibGVkLCB0aGVuIGFsbCBjbGllbnQgc2lkZSBzdG9yYWdlIGlzIGRpc2FibGVkXG4gICAgICAgIC8vIGlmIGFsbCBjbGllbnQgc2lkZSBzdG9yYWdlIGlzIGRpc2FibGVkLCB0aGVuIHRoZXJlIGlzIG5vIHBvaW50XG4gICAgICAgIC8vIGluIHVzaW5nIHByaXZhdGUgbW9kZVxuICAgICAgICBuYXZpZ2F0b3IuY29va2llRW5hYmxlZCA/IG9uKCkgOiBvZmYoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIC8vIENocm9tZSAmIE9wZXJhXG4gICAgaWYgKHdpbmRvdy53ZWJraXRSZXF1ZXN0RmlsZVN5c3RlbSkge1xuICAgICAgcmV0dXJuIHZvaWQgd2luZG93LndlYmtpdFJlcXVlc3RGaWxlU3lzdGVtKDAsIDAsIG9mZiwgb24pO1xuICAgIH1cbiAgICAvLyBGaXJlZm94XG4gICAgaWYgKCdNb3pBcHBlYXJhbmNlJyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUpIHtcbiAgICAgIGlmIChpbmRleGVkREIgPT09IG51bGwpIHJldHVybiBvbigpO1xuICAgICAgY29uc3QgZGIgPSBpbmRleGVkREIub3BlbigndGVzdCcpO1xuICAgICAgZGIub25lcnJvciA9IG9uO1xuICAgICAgZGIub25zdWNjZXNzID0gb2ZmO1xuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9XG4gICAgLy8gU2FmYXJpXG4gICAgY29uc3QgaXNTYWZhcmkgPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9WZXJzaW9uXFwvKFswLTkuX10rKS4qU2FmYXJpLyk7XG4gICAgaWYgKGlzU2FmYXJpKSB7XG4gICAgICBjb25zdCB2ZXJzaW9uID0gcGFyc2VJbnQoaXNTYWZhcmlbMV0sIDEwKTtcbiAgICAgIGlmICh2ZXJzaW9uIDwgMTEpIHJldHVybiB0ZXN0TG9jYWxTdG9yYWdlKCk7XG4gICAgICB0cnkge1xuICAgICAgICB3aW5kb3cub3BlbkRhdGFiYXNlKG51bGwsIG51bGwsIG51bGwsIG51bGwpO1xuICAgICAgICByZXR1cm4gb2ZmKCk7XG4gICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgIHJldHVybiBvbigpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBJRTEwKyAmIEVkZ2UgSW5Qcml2YXRlXG4gICAgaWYgKCF3aW5kb3cuaW5kZXhlZERCICYmICh3aW5kb3cuUG9pbnRlckV2ZW50IHx8IHdpbmRvdy5NU1BvaW50ZXJFdmVudCkpIHtcbiAgICAgIHJldHVybiBvbigpO1xuICAgIH1cbiAgICAvLyBkZWZhdWx0IG5hdmlnYXRpb24gbW9kZVxuICAgIHJldHVybiBvZmYoKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGlzUHJpdmF0ZU1vZGU7XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSAqL1xuKGZ1bmN0aW9uKHdpbmRvdywgdW5kZWZpbmVkKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgdmFyIExJQlZFUlNJT04gPSAnMC43LjEwJyxcbiAgICBFTVBUWSA9ICcnLFxuICAgIFVOS05PV04gPSAnPycsXG4gICAgRlVOQ19UWVBFID0gJ2Z1bmN0aW9uJyxcbiAgICBVTkRFRl9UWVBFID0gJ3VuZGVmaW5lZCcsXG4gICAgT0JKX1RZUEUgPSAnb2JqZWN0JyxcbiAgICBTVFJfVFlQRSA9ICdzdHJpbmcnLFxuICAgIE1BSk9SID0gJ21ham9yJyxcbiAgICBNT0RFTCA9ICdtb2RlbCcsXG4gICAgTkFNRSA9ICduYW1lJyxcbiAgICBUWVBFID0gJ3R5cGUnLFxuICAgIFZFTkRPUiA9ICd2ZW5kb3InLFxuICAgIFZFUlNJT04gPSAndmVyc2lvbicsXG4gICAgQVJDSElURUNUVVJFID0gJ2FyY2hpdGVjdHVyZScsXG4gICAgQ09OU09MRSA9ICdjb25zb2xlJyxcbiAgICBNT0JJTEUgPSAnbW9iaWxlJyxcbiAgICBUQUJMRVQgPSAndGFibGV0JyxcbiAgICBTTUFSVFRWID0gJ3NtYXJ0dHYnLFxuICAgIFdFQVJBQkxFID0gJ3dlYXJhYmxlJyxcbiAgICBFTUJFRERFRCA9ICdlbWJlZGRlZCc7XG4gIHZhciB1dGlsID0ge1xuICAgIGV4dGVuZDogZnVuY3Rpb24ocmVnZXhlcywgZXh0ZW5zaW9ucykge1xuICAgICAgdmFyIG1hcmdlZFJlZ2V4ZXMgPSB7fTtcbiAgICAgIGZvciAodmFyIGkgaW4gcmVnZXhlcykge1xuICAgICAgICBpZiAoZXh0ZW5zaW9uc1tpXSAmJiBleHRlbnNpb25zW2ldLmxlbmd0aCAlIDIgPT09IDApIHtcbiAgICAgICAgICBtYXJnZWRSZWdleGVzW2ldID0gZXh0ZW5zaW9uc1tpXS5jb25jYXQocmVnZXhlc1tpXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWFyZ2VkUmVnZXhlc1tpXSA9IHJlZ2V4ZXNbaV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBtYXJnZWRSZWdleGVzO1xuICAgIH0sXG4gICAgaGFzOiBmdW5jdGlvbihzdHIxLCBzdHIyKSB7XG4gICAgICBpZiAodHlwZW9mIHN0cjEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBzdHIyLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzdHIxLnRvTG93ZXJDYXNlKCkpICE9PSAtMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGxvd2VyaXplOiBmdW5jdGlvbihzdHIpIHtcbiAgICAgIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKTtcbiAgICB9LFxuICAgIG1ham9yOiBmdW5jdGlvbih2ZXJzaW9uKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZlcnNpb24gPT09IFNUUl9UWVBFID8gdmVyc2lvbi5zcGxpdCgnLicpWzBdIDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH07XG4gIHZhciBtYXBwZXIgPSB7XG4gICAgcmd4OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZXN1bHQsXG4gICAgICAgIGkgPSAwLFxuICAgICAgICBqLFxuICAgICAgICBrLFxuICAgICAgICBwLFxuICAgICAgICBxLFxuICAgICAgICBtYXRjaGVzLFxuICAgICAgICBtYXRjaCxcbiAgICAgICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHdoaWxlIChpIDwgYXJncy5sZW5ndGggJiYgIW1hdGNoZXMpIHtcbiAgICAgICAgdmFyIHJlZ2V4ID0gYXJnc1tpXSxcbiAgICAgICAgICBwcm9wcyA9IGFyZ3NbaSArIDFdO1xuICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gVU5ERUZfVFlQRSkge1xuICAgICAgICAgIHJlc3VsdCA9IHt9O1xuICAgICAgICAgIGZvciAocCBpbiBwcm9wcykge1xuICAgICAgICAgICAgaWYgKHByb3BzLmhhc093blByb3BlcnR5KHApKSB7XG4gICAgICAgICAgICAgIHEgPSBwcm9wc1twXTtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBxID09PSBPQkpfVFlQRSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtxWzBdXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbcV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaiA9IGsgPSAwO1xuICAgICAgICB3aGlsZSAoaiA8IHJlZ2V4Lmxlbmd0aCAmJiAhbWF0Y2hlcykge1xuICAgICAgICAgIG1hdGNoZXMgPSByZWdleFtqKytdLmV4ZWModGhpcy5nZXRVQSgpKTtcbiAgICAgICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICAgICAgZm9yIChwID0gMDsgcCA8IHByb3BzLmxlbmd0aDsgcCsrKSB7XG4gICAgICAgICAgICAgIG1hdGNoID0gbWF0Y2hlc1srK2tdO1xuICAgICAgICAgICAgICBxID0gcHJvcHNbcF07XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgcSA9PT0gT0JKX1RZUEUgJiYgcS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHEubGVuZ3RoID09IDIpIHtcbiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcVsxXSA9PT0gRlVOQ19UWVBFKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtxWzBdXSA9IHFbMV0uY2FsbCh0aGlzLCBtYXRjaCk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbcVswXV0gPSBxWzFdO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocS5sZW5ndGggPT0gMykge1xuICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBxWzFdID09PSBGVU5DX1RZUEUgJiYgIShxWzFdLmV4ZWMgJiYgcVsxXS50ZXN0KSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbcVswXV0gPSBtYXRjaFxuICAgICAgICAgICAgICAgICAgICAgID8gcVsxXS5jYWxsKHRoaXMsIG1hdGNoLCBxWzJdKVxuICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3FbMF1dID0gbWF0Y2hcbiAgICAgICAgICAgICAgICAgICAgICA/IG1hdGNoLnJlcGxhY2UocVsxXSwgcVsyXSlcbiAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHEubGVuZ3RoID09IDQpIHtcbiAgICAgICAgICAgICAgICAgIHJlc3VsdFtxWzBdXSA9IG1hdGNoXG4gICAgICAgICAgICAgICAgICAgID8gcVszXS5jYWxsKHRoaXMsIG1hdGNoLnJlcGxhY2UocVsxXSwgcVsyXSkpXG4gICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbcV0gPSBtYXRjaCB8fCB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaSArPSAyO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuICAgIHN0cjogZnVuY3Rpb24oc3RyLCBtYXApIHtcbiAgICAgIGZvciAodmFyIGkgaW4gbWFwKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbWFwW2ldID09PSBPQkpfVFlQRSAmJiBtYXBbaV0ubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWFwW2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBpZiAodXRpbC5oYXMobWFwW2ldW2pdLCBzdHIpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBpID09PSBVTktOT1dOID8gdW5kZWZpbmVkIDogaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodXRpbC5oYXMobWFwW2ldLCBzdHIpKSB7XG4gICAgICAgICAgcmV0dXJuIGkgPT09IFVOS05PV04gPyB1bmRlZmluZWQgOiBpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gc3RyO1xuICAgIH0sXG4gIH07XG4gIHZhciBtYXBzID0ge1xuICAgIGJyb3dzZXI6IHtcbiAgICAgIG9sZHNhZmFyaToge1xuICAgICAgICB2ZXJzaW9uOiB7XG4gICAgICAgICAgJzEuMCc6ICcvOCcsXG4gICAgICAgICAgMS4yOiAnLzEnLFxuICAgICAgICAgIDEuMzogJy8zJyxcbiAgICAgICAgICAnMi4wJzogJy80MTInLFxuICAgICAgICAgICcyLjAuMic6ICcvNDE2JyxcbiAgICAgICAgICAnMi4wLjMnOiAnLzQxNycsXG4gICAgICAgICAgJzIuMC40JzogJy80MTknLFxuICAgICAgICAgICc/JzogJy8nLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICAgIGRldmljZToge1xuICAgICAgYW1hem9uOiB7IG1vZGVsOiB7ICdGaXJlIFBob25lJzogWydTRCcsICdLRiddIH0gfSxcbiAgICAgIHNwcmludDoge1xuICAgICAgICBtb2RlbDogeyAnRXZvIFNoaWZ0IDRHJzogJzczNzNLVCcgfSxcbiAgICAgICAgdmVuZG9yOiB7IEhUQzogJ0FQQScsIFNwcmludDogJ1NwcmludCcgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBvczoge1xuICAgICAgd2luZG93czoge1xuICAgICAgICB2ZXJzaW9uOiB7XG4gICAgICAgICAgTUU6ICc0LjkwJyxcbiAgICAgICAgICAnTlQgMy4xMSc6ICdOVDMuNTEnLFxuICAgICAgICAgICdOVCA0LjAnOiAnTlQ0LjAnLFxuICAgICAgICAgIDIwMDA6ICdOVCA1LjAnLFxuICAgICAgICAgIFhQOiBbJ05UIDUuMScsICdOVCA1LjInXSxcbiAgICAgICAgICBWaXN0YTogJ05UIDYuMCcsXG4gICAgICAgICAgNzogJ05UIDYuMScsXG4gICAgICAgICAgODogJ05UIDYuMicsXG4gICAgICAgICAgOC4xOiAnTlQgNi4zJyxcbiAgICAgICAgICAxMDogWydOVCA2LjQnLCAnTlQgMTAuMCddLFxuICAgICAgICAgIFJUOiAnQVJNJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfTtcbiAgdmFyIHJlZ2V4ZXMgPSB7XG4gICAgYnJvd3NlcjogW1xuICAgICAgW1xuICAgICAgICAvKG9wZXJhXFxzbWluaSlcXC8oW1xcd1xcLi1dKykvaSxcbiAgICAgICAgLyhvcGVyYVxcc1ttb2JpbGV0YWJdKykuK3ZlcnNpb25cXC8oW1xcd1xcLi1dKykvaSxcbiAgICAgICAgLyhvcGVyYSkuK3ZlcnNpb25cXC8oW1xcd1xcLl0rKS9pLFxuICAgICAgICAvKG9wZXJhKVtcXC9cXHNdKyhbXFx3XFwuXSspL2ksXG4gICAgICBdLFxuICAgICAgW05BTUUsIFZFUlNJT05dLFxuICAgICAgWy8oT1BpT1MpW1xcL1xcc10rKFtcXHdcXC5dKykvaV0sXG4gICAgICBbW05BTUUsICdPcGVyYSBNaW5pJ10sIFZFUlNJT05dLFxuICAgICAgWy9cXHMob3ByKVxcLyhbXFx3XFwuXSspL2ldLFxuICAgICAgW1tOQU1FLCAnT3BlcmEnXSwgVkVSU0lPTl0sXG4gICAgICBbXG4gICAgICAgIC8oa2luZGxlKVxcLyhbXFx3XFwuXSspL2ksXG4gICAgICAgIC8obHVuYXNjYXBlfG1heHRob258bmV0ZnJvbnR8amFzbWluZXxibGF6ZXIpW1xcL1xcc10/KFtcXHdcXC5dKykqL2ksXG4gICAgICAgIC8oYXZhbnRcXHN8aWVtb2JpbGV8c2xpbXxiYWlkdSkoPzpicm93c2VyKT9bXFwvXFxzXT8oW1xcd1xcLl0qKS9pLFxuICAgICAgICAvKD86bXN8XFwoKShpZSlcXHMoW1xcd1xcLl0rKS9pLFxuICAgICAgICAvKHJla29ucSlcXC8oW1xcd1xcLl0rKSovaSxcbiAgICAgICAgLyhjaHJvbWl1bXxmbG9ja3xyb2NrbWVsdHxtaWRvcml8ZXBpcGhhbnl8c2lsa3xza3lmaXJlfG92aWJyb3dzZXJ8Ym9sdHxpcm9ufHZpdmFsZGl8aXJpZGl1bXxwaGFudG9tanMpXFwvKFtcXHdcXC4tXSspL2ksXG4gICAgICBdLFxuICAgICAgW05BTUUsIFZFUlNJT05dLFxuICAgICAgWy8odHJpZGVudCkuK3J2WzpcXHNdKFtcXHdcXC5dKykuK2xpa2VcXHNnZWNrby9pXSxcbiAgICAgIFtbTkFNRSwgJ0lFJ10sIFZFUlNJT05dLFxuICAgICAgWy8oZWRnZSlcXC8oKFxcZCspP1tcXHdcXC5dKykvaV0sXG4gICAgICBbTkFNRSwgVkVSU0lPTl0sXG4gICAgICBbLyh5YWJyb3dzZXIpXFwvKFtcXHdcXC5dKykvaV0sXG4gICAgICBbW05BTUUsICdZYW5kZXgnXSwgVkVSU0lPTl0sXG4gICAgICBbLyhjb21vZG9fZHJhZ29uKVxcLyhbXFx3XFwuXSspL2ldLFxuICAgICAgW1tOQU1FLCAvXy9nLCAnICddLCBWRVJTSU9OXSxcbiAgICAgIFtcbiAgICAgICAgLyhjaHJvbWV8b21uaXdlYnxhcm9yYXxbdGl6ZW5va2FdezV9XFxzP2Jyb3dzZXIpXFwvdj8oW1xcd1xcLl0rKS9pLFxuICAgICAgICAvKHFxYnJvd3NlcilbXFwvXFxzXT8oW1xcd1xcLl0rKS9pLFxuICAgICAgXSxcbiAgICAgIFtOQU1FLCBWRVJTSU9OXSxcbiAgICAgIFtcbiAgICAgICAgLyh1Y1xccz9icm93c2VyKVtcXC9cXHNdPyhbXFx3XFwuXSspL2ksXG4gICAgICAgIC91Y3dlYi4rKHVjYnJvd3NlcilbXFwvXFxzXT8oW1xcd1xcLl0rKS9pLFxuICAgICAgICAvSlVDLisodWN3ZWIpW1xcL1xcc10/KFtcXHdcXC5dKykvaSxcbiAgICAgIF0sXG4gICAgICBbW05BTUUsICdVQ0Jyb3dzZXInXSwgVkVSU0lPTl0sXG4gICAgICBbLyhkb2xmaW4pXFwvKFtcXHdcXC5dKykvaV0sXG4gICAgICBbW05BTUUsICdEb2xwaGluJ10sIFZFUlNJT05dLFxuICAgICAgWy8oKD86YW5kcm9pZC4rKWNybW98Y3Jpb3MpXFwvKFtcXHdcXC5dKykvaV0sXG4gICAgICBbW05BTUUsICdDaHJvbWUnXSwgVkVSU0lPTl0sXG4gICAgICBbL1hpYW9NaVxcL01pdWlCcm93c2VyXFwvKFtcXHdcXC5dKykvaV0sXG4gICAgICBbVkVSU0lPTiwgW05BTUUsICdNSVVJIEJyb3dzZXInXV0sXG4gICAgICBbL2FuZHJvaWQuK3ZlcnNpb25cXC8oW1xcd1xcLl0rKVxccysoPzptb2JpbGVcXHM/c2FmYXJpfHNhZmFyaSkvaV0sXG4gICAgICBbVkVSU0lPTiwgW05BTUUsICdBbmRyb2lkIEJyb3dzZXInXV0sXG4gICAgICBbL0ZCQVZcXC8oW1xcd1xcLl0rKTsvaV0sXG4gICAgICBbVkVSU0lPTiwgW05BTUUsICdGYWNlYm9vayddXSxcbiAgICAgIFsvZnhpb3NcXC8oW1xcd1xcLi1dKykvaV0sXG4gICAgICBbVkVSU0lPTiwgW05BTUUsICdGaXJlZm94J11dLFxuICAgICAgWy92ZXJzaW9uXFwvKFtcXHdcXC5dKykuKz9tb2JpbGVcXC9cXHcrXFxzKHNhZmFyaSkvaV0sXG4gICAgICBbVkVSU0lPTiwgW05BTUUsICdNb2JpbGUgU2FmYXJpJ11dLFxuICAgICAgWy92ZXJzaW9uXFwvKFtcXHdcXC5dKykuKz8obW9iaWxlXFxzP3NhZmFyaXxzYWZhcmkpL2ldLFxuICAgICAgW1ZFUlNJT04sIE5BTUVdLFxuICAgICAgWy93ZWJraXQuKz8obW9iaWxlXFxzP3NhZmFyaXxzYWZhcmkpKFxcL1tcXHdcXC5dKykvaV0sXG4gICAgICBbTkFNRSwgW1ZFUlNJT04sIG1hcHBlci5zdHIsIG1hcHMuYnJvd3Nlci5vbGRzYWZhcmkudmVyc2lvbl1dLFxuICAgICAgWy8oa29ucXVlcm9yKVxcLyhbXFx3XFwuXSspL2ksIC8od2Via2l0fGtodG1sKVxcLyhbXFx3XFwuXSspL2ldLFxuICAgICAgW05BTUUsIFZFUlNJT05dLFxuICAgICAgWy8obmF2aWdhdG9yfG5ldHNjYXBlKVxcLyhbXFx3XFwuLV0rKS9pXSxcbiAgICAgIFtbTkFNRSwgJ05ldHNjYXBlJ10sIFZFUlNJT05dLFxuICAgICAgW1xuICAgICAgICAvKHN3aWZ0Zm94KS9pLFxuICAgICAgICAvKGljZWRyYWdvbnxpY2V3ZWFzZWx8Y2FtaW5vfGNoaW1lcmF8ZmVubmVjfG1hZW1vXFxzYnJvd3NlcnxtaW5pbW98Y29ua2Vyb3IpW1xcL1xcc10/KFtcXHdcXC5cXCtdKykvaSxcbiAgICAgICAgLyhmaXJlZm94fHNlYW1vbmtleXxrLW1lbGVvbnxpY2VjYXR8aWNlYXBlfGZpcmViaXJkfHBob2VuaXgpXFwvKFtcXHdcXC4tXSspL2ksXG4gICAgICAgIC8obW96aWxsYSlcXC8oW1xcd1xcLl0rKS4rcnZcXDouK2dlY2tvXFwvXFxkKy9pLFxuICAgICAgICAvKHBvbGFyaXN8bHlueHxkaWxsb3xpY2FifGRvcmlzfGFtYXlhfHczbXxuZXRzdXJmfHNsZWlwbmlyKVtcXC9cXHNdPyhbXFx3XFwuXSspL2ksXG4gICAgICAgIC8obGlua3MpXFxzXFwoKFtcXHdcXC5dKykvaSxcbiAgICAgICAgLyhnb2Jyb3dzZXIpXFwvPyhbXFx3XFwuXSspKi9pLFxuICAgICAgICAvKGljZVxccz9icm93c2VyKVxcL3Y/KFtcXHdcXC5fXSspL2ksXG4gICAgICAgIC8obW9zYWljKVtcXC9cXHNdKFtcXHdcXC5dKykvaSxcbiAgICAgIF0sXG4gICAgICBbTkFNRSwgVkVSU0lPTl0sXG4gICAgXSxcbiAgICBjcHU6IFtcbiAgICAgIFsvKD86KGFtZHx4KD86KD86ODZ8NjQpW18tXSk/fHdvd3x3aW4pNjQpWztcXCldL2ldLFxuICAgICAgW1tBUkNISVRFQ1RVUkUsICdhbWQ2NCddXSxcbiAgICAgIFsvKGlhMzIoPz07KSkvaV0sXG4gICAgICBbW0FSQ0hJVEVDVFVSRSwgdXRpbC5sb3dlcml6ZV1dLFxuICAgICAgWy8oKD86aVszNDZdfHgpODYpWztcXCldL2ldLFxuICAgICAgW1tBUkNISVRFQ1RVUkUsICdpYTMyJ11dLFxuICAgICAgWy93aW5kb3dzXFxzKGNlfG1vYmlsZSk7XFxzcHBjOy9pXSxcbiAgICAgIFtbQVJDSElURUNUVVJFLCAnYXJtJ11dLFxuICAgICAgWy8oKD86cHBjfHBvd2VycGMpKD86NjQpPykoPzpcXHNtYWN8O3xcXCkpL2ldLFxuICAgICAgW1tBUkNISVRFQ1RVUkUsIC9vd2VyLywgJycsIHV0aWwubG93ZXJpemVdXSxcbiAgICAgIFsvKHN1bjRcXHcpWztcXCldL2ldLFxuICAgICAgW1tBUkNISVRFQ1RVUkUsICdzcGFyYyddXSxcbiAgICAgIFtcbiAgICAgICAgLygoPzphdnIzMnxpYTY0KD89OykpfDY4ayg/PVxcKSl8YXJtKD86NjR8KD89dlxcZCs7KSl8KD89YXRtZWxcXHMpYXZyfCg/OmlyaXh8bWlwc3xzcGFyYykoPzo2NCk/KD89Oyl8cGEtcmlzYykvaSxcbiAgICAgIF0sXG4gICAgICBbW0FSQ0hJVEVDVFVSRSwgdXRpbC5sb3dlcml6ZV1dLFxuICAgIF0sXG4gICAgZGV2aWNlOiBbXG4gICAgICBbL1xcKChpcGFkfHBsYXlib29rKTtbXFx3XFxzXFwpOy1dKyhyaW18YXBwbGUpL2ldLFxuICAgICAgW01PREVMLCBWRU5ET1IsIFtUWVBFLCBUQUJMRVRdXSxcbiAgICAgIFsvYXBwbGVjb3JlbWVkaWFcXC9bXFx3XFwuXSsgXFwoKGlwYWQpL10sXG4gICAgICBbTU9ERUwsIFtWRU5ET1IsICdBcHBsZSddLCBbVFlQRSwgVEFCTEVUXV0sXG4gICAgICBbLyhhcHBsZVxcc3swLDF9dHYpL2ldLFxuICAgICAgW1tNT0RFTCwgJ0FwcGxlIFRWJ10sIFtWRU5ET1IsICdBcHBsZSddXSxcbiAgICAgIFtcbiAgICAgICAgLyhhcmNob3MpXFxzKGdhbWVwYWQyPykvaSxcbiAgICAgICAgLyhocCkuKyh0b3VjaHBhZCkvaSxcbiAgICAgICAgLyhraW5kbGUpXFwvKFtcXHdcXC5dKykvaSxcbiAgICAgICAgL1xccyhub29rKVtcXHdcXHNdK2J1aWxkXFwvKFxcdyspL2ksXG4gICAgICAgIC8oZGVsbClcXHMoc3RyZWFba3ByXFxzXFxkXSpbXFxka29dKS9pLFxuICAgICAgXSxcbiAgICAgIFtWRU5ET1IsIE1PREVMLCBbVFlQRSwgVEFCTEVUXV0sXG4gICAgICBbLyhrZltBLXpdKylcXHNidWlsZFxcL1tcXHdcXC5dKy4qc2lsa1xcLy9pXSxcbiAgICAgIFtNT0RFTCwgW1ZFTkRPUiwgJ0FtYXpvbiddLCBbVFlQRSwgVEFCTEVUXV0sXG4gICAgICBbLyhzZHxrZilbMDM0OWhpam9yc3R1d10rXFxzYnVpbGRcXC9bXFx3XFwuXSsuKnNpbGtcXC8vaV0sXG4gICAgICBbXG4gICAgICAgIFtNT0RFTCwgbWFwcGVyLnN0ciwgbWFwcy5kZXZpY2UuYW1hem9uLm1vZGVsXSxcbiAgICAgICAgW1ZFTkRPUiwgJ0FtYXpvbiddLFxuICAgICAgICBbVFlQRSwgTU9CSUxFXSxcbiAgICAgIF0sXG4gICAgICBbL1xcKChpcFtob25lZHxcXHNcXHcqXSspOy4rKGFwcGxlKS9pXSxcbiAgICAgIFtNT0RFTCwgVkVORE9SLCBbVFlQRSwgTU9CSUxFXV0sXG4gICAgICBbL1xcKChpcFtob25lZHxcXHNcXHcqXSspOy9pXSxcbiAgICAgIFtNT0RFTCwgW1ZFTkRPUiwgJ0FwcGxlJ10sIFtUWVBFLCBNT0JJTEVdXSxcbiAgICAgIFtcbiAgICAgICAgLyhibGFja2JlcnJ5KVtcXHMtXT8oXFx3KykvaSxcbiAgICAgICAgLyhibGFja2JlcnJ5fGJlbnF8cGFsbSg/PVxcLSl8c29ueWVyaWNzc29ufGFjZXJ8YXN1c3xkZWxsfGh1YXdlaXxtZWl6dXxtb3Rvcm9sYXxwb2x5dHJvbilbXFxzXy1dPyhbXFx3LV0rKSovaSxcbiAgICAgICAgLyhocClcXHMoW1xcd1xcc10rXFx3KS9pLFxuICAgICAgICAvKGFzdXMpLT8oXFx3KykvaSxcbiAgICAgIF0sXG4gICAgICBbVkVORE9SLCBNT0RFTCwgW1RZUEUsIE1PQklMRV1dLFxuICAgICAgWy9cXChiYjEwO1xccyhcXHcrKS9pXSxcbiAgICAgIFtNT0RFTCwgW1ZFTkRPUiwgJ0JsYWNrQmVycnknXSwgW1RZUEUsIE1PQklMRV1dLFxuICAgICAgWy9hbmRyb2lkLisodHJhbnNmb1twcmltZVxcc117NCwxMH1cXHNcXHcrfGVlZXBjfHNsaWRlclxcc1xcdyt8bmV4dXMgNykvaV0sXG4gICAgICBbTU9ERUwsIFtWRU5ET1IsICdBc3VzJ10sIFtUWVBFLCBUQUJMRVRdXSxcbiAgICAgIFsvKHNvbnkpXFxzKHRhYmxldFxcc1twc10pXFxzYnVpbGRcXC8vaSwgLyhzb255KT8oPzpzZ3AuKylcXHNidWlsZFxcLy9pXSxcbiAgICAgIFtbVkVORE9SLCAnU29ueSddLCBbTU9ERUwsICdYcGVyaWEgVGFibGV0J10sIFtUWVBFLCBUQUJMRVRdXSxcbiAgICAgIFsvKD86c29ueSk/KD86KD86KD86Y3xkKVxcZHs0fSl8KD86c29bLWxdLispKVxcc2J1aWxkXFwvL2ldLFxuICAgICAgW1tWRU5ET1IsICdTb255J10sIFtNT0RFTCwgJ1hwZXJpYSBQaG9uZSddLCBbVFlQRSwgTU9CSUxFXV0sXG4gICAgICBbL1xccyhvdXlhKVxccy9pLCAvKG5pbnRlbmRvKVxccyhbd2lkczN1XSspL2ldLFxuICAgICAgW1ZFTkRPUiwgTU9ERUwsIFtUWVBFLCBDT05TT0xFXV0sXG4gICAgICBbL2FuZHJvaWQuKztcXHMoc2hpZWxkKVxcc2J1aWxkL2ldLFxuICAgICAgW01PREVMLCBbVkVORE9SLCAnTnZpZGlhJ10sIFtUWVBFLCBDT05TT0xFXV0sXG4gICAgICBbLyhwbGF5c3RhdGlvblxcc1szNHBvcnRhYmxldmldKykvaV0sXG4gICAgICBbTU9ERUwsIFtWRU5ET1IsICdTb255J10sIFtUWVBFLCBDT05TT0xFXV0sXG4gICAgICBbLyhzcHJpbnRcXHMoXFx3KykpL2ldLFxuICAgICAgW1xuICAgICAgICBbVkVORE9SLCBtYXBwZXIuc3RyLCBtYXBzLmRldmljZS5zcHJpbnQudmVuZG9yXSxcbiAgICAgICAgW01PREVMLCBtYXBwZXIuc3RyLCBtYXBzLmRldmljZS5zcHJpbnQubW9kZWxdLFxuICAgICAgICBbVFlQRSwgTU9CSUxFXSxcbiAgICAgIF0sXG4gICAgICBbLyhsZW5vdm8pXFxzPyhTKD86NTAwMHw2MDAwKSsoPzpbLV1bXFx3K10pKS9pXSxcbiAgICAgIFtWRU5ET1IsIE1PREVMLCBbVFlQRSwgVEFCTEVUXV0sXG4gICAgICBbXG4gICAgICAgIC8oaHRjKVs7X1xccy1dKyhbXFx3XFxzXSsoPz1cXCkpfFxcdyspKi9pLFxuICAgICAgICAvKHp0ZSktKFxcdyspKi9pLFxuICAgICAgICAvKGFsY2F0ZWx8Z2Vla3NwaG9uZXxodWF3ZWl8bGVub3ZvfG5leGlhbnxwYW5hc29uaWN8KD89O1xccylzb255KVtfXFxzLV0/KFtcXHctXSspKi9pLFxuICAgICAgXSxcbiAgICAgIFtWRU5ET1IsIFtNT0RFTCwgL18vZywgJyAnXSwgW1RZUEUsIE1PQklMRV1dLFxuICAgICAgWy8obmV4dXNcXHM5KS9pXSxcbiAgICAgIFtNT0RFTCwgW1ZFTkRPUiwgJ0hUQyddLCBbVFlQRSwgVEFCTEVUXV0sXG4gICAgICBbL1tcXHNcXCg7XSh4Ym94KD86XFxzb25lKT8pW1xcc1xcKTtdL2ldLFxuICAgICAgW01PREVMLCBbVkVORE9SLCAnTWljcm9zb2Z0J10sIFtUWVBFLCBDT05TT0xFXV0sXG4gICAgICBbLyhraW5cXC5bb25ldHddezN9KS9pXSxcbiAgICAgIFtbTU9ERUwsIC9cXC4vZywgJyAnXSwgW1ZFTkRPUiwgJ01pY3Jvc29mdCddLCBbVFlQRSwgTU9CSUxFXV0sXG4gICAgICBbXG4gICAgICAgIC9cXHMobWlsZXN0b25lfGRyb2lkKD86WzItNHhdfFxccyg/OmJpb25pY3x4Mnxwcm98cmF6cikpPyg6P1xcczRnKT8pW1xcd1xcc10rYnVpbGRcXC8vaSxcbiAgICAgICAgL21vdFtcXHMtXT8oXFx3KykqL2ksXG4gICAgICAgIC8oWFRcXGR7Myw0fSkgYnVpbGRcXC8vaSxcbiAgICAgICAgLyhuZXh1c1xcc1s2XSkvaSxcbiAgICAgIF0sXG4gICAgICBbTU9ERUwsIFtWRU5ET1IsICdNb3Rvcm9sYSddLCBbVFlQRSwgTU9CSUxFXV0sXG4gICAgICBbL2FuZHJvaWQuK1xccyhtejYwXFxkfHhvb21bXFxzMl17MCwyfSlcXHNidWlsZFxcLy9pXSxcbiAgICAgIFtNT0RFTCwgW1ZFTkRPUiwgJ01vdG9yb2xhJ10sIFtUWVBFLCBUQUJMRVRdXSxcbiAgICAgIFtcbiAgICAgICAgL2FuZHJvaWQuKygoc2NoLWlbODldMFxcZHxzaHctbTM4MHN8Z3QtcFxcZHs0fXxndC1uODAwMHxzZ2gtdDhbNTZdOXxuZXh1cyAxMCkpL2ksXG4gICAgICAgIC8oKFNNLVRcXHcrKSkvaSxcbiAgICAgIF0sXG4gICAgICBbW1ZFTkRPUiwgJ1NhbXN1bmcnXSwgTU9ERUwsIFtUWVBFLCBUQUJMRVRdXSxcbiAgICAgIFtcbiAgICAgICAgLygoc1tjZ3BdaC1cXHcrfGd0LVxcdyt8Z2FsYXh5XFxzbmV4dXN8c20tbjkwMCkpL2ksXG4gICAgICAgIC8oc2FtW3N1bmddKilbXFxzLV0qKFxcdystP1tcXHctXSopKi9pLFxuICAgICAgICAvc2VjLSgoc2doXFx3KykpL2ksXG4gICAgICBdLFxuICAgICAgW1tWRU5ET1IsICdTYW1zdW5nJ10sIE1PREVMLCBbVFlQRSwgTU9CSUxFXV0sXG4gICAgICBbLyhzYW1zdW5nKTtzbWFydHR2L2ldLFxuICAgICAgW1ZFTkRPUiwgTU9ERUwsIFtUWVBFLCBTTUFSVFRWXV0sXG4gICAgICBbL1xcKGR0dltcXCk7XS4rKGFxdW9zKS9pXSxcbiAgICAgIFtNT0RFTCwgW1ZFTkRPUiwgJ1NoYXJwJ10sIFtUWVBFLCBTTUFSVFRWXV0sXG4gICAgICBbL3NpZS0oXFx3KykqL2ldLFxuICAgICAgW01PREVMLCBbVkVORE9SLCAnU2llbWVucyddLCBbVFlQRSwgTU9CSUxFXV0sXG4gICAgICBbLyhtYWVtb3xub2tpYSkuKihuOTAwfGx1bWlhXFxzXFxkKykvaSwgLyhub2tpYSlbXFxzXy1dPyhbXFx3LV0rKSovaV0sXG4gICAgICBbW1ZFTkRPUiwgJ05va2lhJ10sIE1PREVMLCBbVFlQRSwgTU9CSUxFXV0sXG4gICAgICBbL2FuZHJvaWRcXHMzXFwuW1xcc1xcdzstXXsxMH0oYVxcZHszfSkvaV0sXG4gICAgICBbTU9ERUwsIFtWRU5ET1IsICdBY2VyJ10sIFtUWVBFLCBUQUJMRVRdXSxcbiAgICAgIFsvYW5kcm9pZFxcczNcXC5bXFxzXFx3Oy1dezEwfShsZz8pLShbMDZjdjldezMsNH0pL2ldLFxuICAgICAgW1tWRU5ET1IsICdMRyddLCBNT0RFTCwgW1RZUEUsIFRBQkxFVF1dLFxuICAgICAgWy8obGcpIG5ldGNhc3RcXC50di9pXSxcbiAgICAgIFtWRU5ET1IsIE1PREVMLCBbVFlQRSwgU01BUlRUVl1dLFxuICAgICAgWy8obmV4dXNcXHNbNDVdKS9pLCAvbGdbZTtcXHNcXC8tXSsoXFx3KykqL2ldLFxuICAgICAgW01PREVMLCBbVkVORE9SLCAnTEcnXSwgW1RZUEUsIE1PQklMRV1dLFxuICAgICAgWy9hbmRyb2lkLisoaWRlYXRhYlthLXowLTlcXC1cXHNdKykvaV0sXG4gICAgICBbTU9ERUwsIFtWRU5ET1IsICdMZW5vdm8nXSwgW1RZUEUsIFRBQkxFVF1dLFxuICAgICAgWy9saW51eDsuKygoam9sbGEpKTsvaV0sXG4gICAgICBbVkVORE9SLCBNT0RFTCwgW1RZUEUsIE1PQklMRV1dLFxuICAgICAgWy8oKHBlYmJsZSkpYXBwXFwvW1xcZFxcLl0rXFxzL2ldLFxuICAgICAgW1ZFTkRPUiwgTU9ERUwsIFtUWVBFLCBXRUFSQUJMRV1dLFxuICAgICAgWy9hbmRyb2lkLis7XFxzKGdsYXNzKVxcc1xcZC9pXSxcbiAgICAgIFtNT0RFTCwgW1ZFTkRPUiwgJ0dvb2dsZSddLCBbVFlQRSwgV0VBUkFCTEVdXSxcbiAgICAgIFtcbiAgICAgICAgL2FuZHJvaWQuKyhcXHcrKVxccytidWlsZFxcL2htXFwxL2ksXG4gICAgICAgIC9hbmRyb2lkLisoaG1bXFxzXFwtX10qbm90ZT9bXFxzX10qKD86XFxkXFx3KT8pXFxzK2J1aWxkL2ksXG4gICAgICAgIC9hbmRyb2lkLisobWlbXFxzXFwtX10qKD86b25lfG9uZVtcXHNfXXBsdXMpP1tcXHNfXSooPzpcXGRcXHcpPylcXHMrYnVpbGQvaSxcbiAgICAgIF0sXG4gICAgICBbW01PREVMLCAvXy9nLCAnICddLCBbVkVORE9SLCAnWGlhb21pJ10sIFtUWVBFLCBNT0JJTEVdXSxcbiAgICAgIFsvXFxzKHRhYmxldClbO1xcL1xcc10vaSwgL1xccyhtb2JpbGUpWztcXC9cXHNdL2ldLFxuICAgICAgW1tUWVBFLCB1dGlsLmxvd2VyaXplXSwgVkVORE9SLCBNT0RFTF0sXG4gICAgXSxcbiAgICBlbmdpbmU6IFtcbiAgICAgIFsvd2luZG93cy4rXFxzZWRnZVxcLyhbXFx3XFwuXSspL2ldLFxuICAgICAgW1ZFUlNJT04sIFtOQU1FLCAnRWRnZUhUTUwnXV0sXG4gICAgICBbXG4gICAgICAgIC8ocHJlc3RvKVxcLyhbXFx3XFwuXSspL2ksXG4gICAgICAgIC8od2Via2l0fHRyaWRlbnR8bmV0ZnJvbnR8bmV0c3VyZnxhbWF5YXxseW54fHczbSlcXC8oW1xcd1xcLl0rKS9pLFxuICAgICAgICAvKGtodG1sfHRhc21hbnxsaW5rcylbXFwvXFxzXVxcKD8oW1xcd1xcLl0rKS9pLFxuICAgICAgICAvKGljYWIpW1xcL1xcc10oWzIzXVxcLltcXGRcXC5dKykvaSxcbiAgICAgIF0sXG4gICAgICBbTkFNRSwgVkVSU0lPTl0sXG4gICAgICBbL3J2XFw6KFtcXHdcXC5dKykuKihnZWNrbykvaV0sXG4gICAgICBbVkVSU0lPTiwgTkFNRV0sXG4gICAgXSxcbiAgICBvczogW1xuICAgICAgWy9taWNyb3NvZnRcXHMod2luZG93cylcXHModmlzdGF8eHApL2ldLFxuICAgICAgW05BTUUsIFZFUlNJT05dLFxuICAgICAgW1xuICAgICAgICAvKHdpbmRvd3MpXFxzbnRcXHM2XFwuMjtcXHMoYXJtKS9pLFxuICAgICAgICAvKHdpbmRvd3NcXHNwaG9uZSg/Olxcc29zKSp8d2luZG93c1xcc21vYmlsZXx3aW5kb3dzKVtcXHNcXC9dPyhbbnRjZVxcZFxcLlxcc10rXFx3KS9pLFxuICAgICAgXSxcbiAgICAgIFtOQU1FLCBbVkVSU0lPTiwgbWFwcGVyLnN0ciwgbWFwcy5vcy53aW5kb3dzLnZlcnNpb25dXSxcbiAgICAgIFsvKHdpbig/PTN8OXxuKXx3aW5cXHM5eFxccykoW250XFxkXFwuXSspL2ldLFxuICAgICAgW1tOQU1FLCAnV2luZG93cyddLCBbVkVSU0lPTiwgbWFwcGVyLnN0ciwgbWFwcy5vcy53aW5kb3dzLnZlcnNpb25dXSxcbiAgICAgIFsvXFwoKGJiKSgxMCk7L2ldLFxuICAgICAgW1tOQU1FLCAnQmxhY2tCZXJyeSddLCBWRVJTSU9OXSxcbiAgICAgIFtcbiAgICAgICAgLyhibGFja2JlcnJ5KVxcdypcXC8/KFtcXHdcXC5dKykqL2ksXG4gICAgICAgIC8odGl6ZW4pW1xcL1xcc10oW1xcd1xcLl0rKS9pLFxuICAgICAgICAvKGFuZHJvaWR8d2Vib3N8cGFsbVxcc29zfHFueHxiYWRhfHJpbVxcc3RhYmxldFxcc29zfG1lZWdvfGNvbnRpa2kpW1xcL1xccy1dPyhbXFx3XFwuXSspKi9pLFxuICAgICAgICAvbGludXg7Lisoc2FpbGZpc2gpOy9pLFxuICAgICAgXSxcbiAgICAgIFtOQU1FLCBWRVJTSU9OXSxcbiAgICAgIFsvKHN5bWJpYW5cXHM/b3N8c3ltYm9zfHM2MCg/PTspKVtcXC9cXHMtXT8oW1xcd1xcLl0rKSovaV0sXG4gICAgICBbW05BTUUsICdTeW1iaWFuJ10sIFZFUlNJT05dLFxuICAgICAgWy9cXCgoc2VyaWVzNDApOy9pXSxcbiAgICAgIFtOQU1FXSxcbiAgICAgIFsvbW96aWxsYS4rXFwobW9iaWxlOy4rZ2Vja28uK2ZpcmVmb3gvaV0sXG4gICAgICBbW05BTUUsICdGaXJlZm94IE9TJ10sIFZFUlNJT05dLFxuICAgICAgW1xuICAgICAgICAvKG5pbnRlbmRvfHBsYXlzdGF0aW9uKVxccyhbd2lkczM0cG9ydGFibGV2dV0rKS9pLFxuICAgICAgICAvKG1pbnQpW1xcL1xcc1xcKF0/KFxcdyspKi9pLFxuICAgICAgICAvKG1hZ2VpYXx2ZWN0b3JsaW51eClbO1xcc10vaSxcbiAgICAgICAgLyhqb2xpfFtreGxuXT91YnVudHV8ZGViaWFufFtvcGVuXSpzdXNlfGdlbnRvb3woPz1cXHMpYXJjaHxzbGFja3dhcmV8ZmVkb3JhfG1hbmRyaXZhfGNlbnRvc3xwY2xpbnV4b3N8cmVkaGF0fHplbndhbGt8bGlucHVzKVtcXC9cXHMtXT8oW1xcd1xcLi1dKykqL2ksXG4gICAgICAgIC8oaHVyZHxsaW51eClcXHM/KFtcXHdcXC5dKykqL2ksXG4gICAgICAgIC8oZ251KVxccz8oW1xcd1xcLl0rKSovaSxcbiAgICAgIF0sXG4gICAgICBbTkFNRSwgVkVSU0lPTl0sXG4gICAgICBbLyhjcm9zKVxcc1tcXHddK1xccyhbXFx3XFwuXStcXHcpL2ldLFxuICAgICAgW1tOQU1FLCAnQ2hyb21pdW0gT1MnXSwgVkVSU0lPTl0sXG4gICAgICBbLyhzdW5vcylcXHM/KFtcXHdcXC5dK1xcZCkqL2ldLFxuICAgICAgW1tOQU1FLCAnU29sYXJpcyddLCBWRVJTSU9OXSxcbiAgICAgIFsvXFxzKFtmcmVudG9wYy1dezAsNH1ic2R8ZHJhZ29uZmx5KVxccz8oW1xcd1xcLl0rKSovaV0sXG4gICAgICBbTkFNRSwgVkVSU0lPTl0sXG4gICAgICBbLyhpcFtob25lYWRdKykoPzouKm9zXFxzKFtcXHddKykqXFxzbGlrZVxcc21hY3w7XFxzb3BlcmEpL2ldLFxuICAgICAgW1tOQU1FLCAnaU9TJ10sIFtWRVJTSU9OLCAvXy9nLCAnLiddXSxcbiAgICAgIFsvKG1hY1xcc29zXFxzeClcXHM/KFtcXHdcXHNcXC5dK1xcdykqL2ksIC8obWFjaW50b3NofG1hYyg/PV9wb3dlcnBjKVxccykvaV0sXG4gICAgICBbW05BTUUsICdNYWMgT1MnXSwgW1ZFUlNJT04sIC9fL2csICcuJ11dLFxuICAgICAgW1xuICAgICAgICAvKCg/Om9wZW4pP3NvbGFyaXMpW1xcL1xccy1dPyhbXFx3XFwuXSspKi9pLFxuICAgICAgICAvKGhhaWt1KVxccyhcXHcrKS9pLFxuICAgICAgICAvKGFpeClcXHMoKFxcZCkoPz1cXC58XFwpfFxccylbXFx3XFwuXSopKi9pLFxuICAgICAgICAvKHBsYW5cXHM5fG1pbml4fGJlb3N8b3NcXC8yfGFtaWdhb3N8bW9ycGhvc3xyaXNjXFxzb3N8b3BlbnZtcykvaSxcbiAgICAgICAgLyh1bml4KVxccz8oW1xcd1xcLl0rKSovaSxcbiAgICAgIF0sXG4gICAgICBbTkFNRSwgVkVSU0lPTl0sXG4gICAgXSxcbiAgfTtcbiAgdmFyIFVBUGFyc2VyID0gZnVuY3Rpb24odWFzdHJpbmcsIGV4dGVuc2lvbnMpIHtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVUFQYXJzZXIpKSB7XG4gICAgICByZXR1cm4gbmV3IFVBUGFyc2VyKHVhc3RyaW5nLCBleHRlbnNpb25zKS5nZXRSZXN1bHQoKTtcbiAgICB9XG4gICAgdmFyIHVhID1cbiAgICAgIHVhc3RyaW5nIHx8XG4gICAgICAod2luZG93ICYmIHdpbmRvdy5uYXZpZ2F0b3IgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnRcbiAgICAgICAgPyB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudFxuICAgICAgICA6IEVNUFRZKTtcbiAgICB2YXIgcmd4bWFwID0gZXh0ZW5zaW9ucyA/IHV0aWwuZXh0ZW5kKHJlZ2V4ZXMsIGV4dGVuc2lvbnMpIDogcmVnZXhlcztcbiAgICB0aGlzLmdldEJyb3dzZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBicm93c2VyID0gbWFwcGVyLnJneC5hcHBseSh0aGlzLCByZ3htYXAuYnJvd3Nlcik7XG4gICAgICBicm93c2VyLm1ham9yID0gdXRpbC5tYWpvcihicm93c2VyLnZlcnNpb24pO1xuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfTtcbiAgICB0aGlzLmdldENQVSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG1hcHBlci5yZ3guYXBwbHkodGhpcywgcmd4bWFwLmNwdSk7XG4gICAgfTtcbiAgICB0aGlzLmdldERldmljZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG1hcHBlci5yZ3guYXBwbHkodGhpcywgcmd4bWFwLmRldmljZSk7XG4gICAgfTtcbiAgICB0aGlzLmdldEVuZ2luZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG1hcHBlci5yZ3guYXBwbHkodGhpcywgcmd4bWFwLmVuZ2luZSk7XG4gICAgfTtcbiAgICB0aGlzLmdldE9TID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbWFwcGVyLnJneC5hcHBseSh0aGlzLCByZ3htYXAub3MpO1xuICAgIH07XG4gICAgdGhpcy5nZXRSZXN1bHQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVhOiB0aGlzLmdldFVBKCksXG4gICAgICAgIGJyb3dzZXI6IHRoaXMuZ2V0QnJvd3NlcigpLFxuICAgICAgICBlbmdpbmU6IHRoaXMuZ2V0RW5naW5lKCksXG4gICAgICAgIG9zOiB0aGlzLmdldE9TKCksXG4gICAgICAgIGRldmljZTogdGhpcy5nZXREZXZpY2UoKSxcbiAgICAgICAgY3B1OiB0aGlzLmdldENQVSgpLFxuICAgICAgfTtcbiAgICB9O1xuICAgIHRoaXMuZ2V0VUEgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB1YTtcbiAgICB9O1xuICAgIHRoaXMuc2V0VUEgPSBmdW5jdGlvbih1YXN0cmluZykge1xuICAgICAgdWEgPSB1YXN0cmluZztcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIFVBUGFyc2VyLlZFUlNJT04gPSBMSUJWRVJTSU9OO1xuICBVQVBhcnNlci5CUk9XU0VSID0geyBOQU1FOiBOQU1FLCBNQUpPUjogTUFKT1IsIFZFUlNJT046IFZFUlNJT04gfTtcbiAgVUFQYXJzZXIuQ1BVID0geyBBUkNISVRFQ1RVUkU6IEFSQ0hJVEVDVFVSRSB9O1xuICBVQVBhcnNlci5ERVZJQ0UgPSB7XG4gICAgTU9ERUw6IE1PREVMLFxuICAgIFZFTkRPUjogVkVORE9SLFxuICAgIFRZUEU6IFRZUEUsXG4gICAgQ09OU09MRTogQ09OU09MRSxcbiAgICBNT0JJTEU6IE1PQklMRSxcbiAgICBTTUFSVFRWOiBTTUFSVFRWLFxuICAgIFRBQkxFVDogVEFCTEVULFxuICAgIFdFQVJBQkxFOiBXRUFSQUJMRSxcbiAgICBFTUJFRERFRDogRU1CRURERUQsXG4gIH07XG4gIFVBUGFyc2VyLkVOR0lORSA9IHsgTkFNRTogTkFNRSwgVkVSU0lPTjogVkVSU0lPTiB9O1xuICBVQVBhcnNlci5PUyA9IHsgTkFNRTogTkFNRSwgVkVSU0lPTjogVkVSU0lPTiB9O1xuICBpZiAodHlwZW9mIGV4cG9ydHMgIT09IFVOREVGX1RZUEUpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gVU5ERUZfVFlQRSAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgICAgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gVUFQYXJzZXI7XG4gICAgfVxuICAgIGV4cG9ydHMuVUFQYXJzZXIgPSBVQVBhcnNlcjtcbiAgfSBlbHNlIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gRlVOQ19UWVBFICYmIGRlZmluZS5hbWQpIHtcbiAgICAgIGRlZmluZSgndWEtcGFyc2VyLWpzJywgW10sIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gVUFQYXJzZXI7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgd2luZG93LlVBUGFyc2VyID0gVUFQYXJzZXI7XG4gICAgfVxuICB9XG4gIHZhciAkID0gd2luZG93LmpRdWVyeSB8fCB3aW5kb3cuWmVwdG87XG4gIGlmICh0eXBlb2YgJCAhPT0gVU5ERUZfVFlQRSkge1xuICAgIHZhciBwYXJzZXIgPSBuZXcgVUFQYXJzZXIoKTtcbiAgICAkLnVhID0gcGFyc2VyLmdldFJlc3VsdCgpO1xuICAgICQudWEuZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gcGFyc2VyLmdldFVBKCk7XG4gICAgfTtcbiAgICAkLnVhLnNldCA9IGZ1bmN0aW9uKHVhc3RyaW5nKSB7XG4gICAgICBwYXJzZXIuc2V0VUEodWFzdHJpbmcpO1xuICAgICAgdmFyIHJlc3VsdCA9IHBhcnNlci5nZXRSZXN1bHQoKTtcbiAgICAgIGZvciAodmFyIHByb3AgaW4gcmVzdWx0KSB7XG4gICAgICAgICQudWFbcHJvcF0gPSByZXN1bHRbcHJvcF07XG4gICAgICB9XG4gICAgfTtcbiAgfVxufSkodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgPyB3aW5kb3cgOiB0aGlzKTtcbiIsIi8vIEBmbG93XG5pbXBvcnQgeyBnZXQgYXMgZ2V0SURCLCBzZXQgYXMgc2V0SURCIH0gZnJvbSAnaWRiLWtleXZhbCc7XG5pbXBvcnQgbG9nIGZyb20gJy4uL3V0aWxzL2xvZyc7XG5pbXBvcnQge1xuICBJREJfQVRUUklCVVRJT05fS0VZLFxuICBTRUFSQ0hfUEFSQU1TX0FUVFJJQlVUSU9OX0tFWSxcbn0gZnJvbSAnLi4vY29uc3RhbnRzJztcblxudHlwZSBFdmVudCA9IE9iamVjdDtcbnR5cGUgQWN0aW9uID0gJ3ZpZXcnIHwgJ2NsaWNrJztcbnR5cGUgQXR0cmlidXRpb24gPSB7XG4gIGFjdGlvbjogQWN0aW9uLFxuICBub3RpZmljYXRpb25JZDogbnVtYmVyLFxuICB0czogbnVtYmVyLFxufTtcblxuLyoqXG4gKiBDaGVjayBpZiBhdHRyaWJ1dGlvbiBpcyBub3QgZXhwaXJlZCB5ZXRcbiAqXG4gKiAtIFwiY2xpY2tcIiBldmVudCBsYXN0cyBmb3IgMjQgaG91cnNcbiAqIC0gXCJ2aWV3XCIgZXZlbnQgbGFzdHMgZm9yIDEgaG91clxuICovXG5mdW5jdGlvbiBzaG91bGRBdHRyaWJ1dGlvblZhbGlkKGF0dHI6IEF0dHJpYnV0aW9uKSB7XG4gIGNvbnN0IHRpbWVEaWZmID0gK25ldyBEYXRlKCkgLSBhdHRyLnRzO1xuXG4gIHN3aXRjaCAoYXR0ci5hY3Rpb24pIHtcbiAgICBjYXNlICdjbGljayc6XG4gICAgICByZXR1cm4gTWF0aC5tYXgoMzYwMCAqIDI0ICogMWUzIC0gdGltZURpZmYsIDApID4gMDtcbiAgICBjYXNlICd2aWV3JzpcbiAgICAgIHJldHVybiBNYXRoLm1heCgzNjAwICogMSAqIDFlMyAtIHRpbWVEaWZmLCAwKSA+IDA7XG4gICAgZGVmYXVsdDoge1xuICAgICAgbG9nLndhcm4oJ0ludmFsaWQgYXR0cmlidXRpb24nLCBhdHRyKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgYXR0cmlidXRpb24gZGF0YSBmcm9tIGluZGV4ZWREQlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QXR0cmlidXRpb24oKTogUHJvbWlzZTw/QXR0cmlidXRpb24+IHtcbiAgY29uc3QgYXR0cjogP0F0dHJpYnV0aW9uID0gYXdhaXQgZ2V0SURCKElEQl9BVFRSSUJVVElPTl9LRVkpO1xuXG4gIGlmIChhdHRyICYmIHNob3VsZEF0dHJpYnV0aW9uVmFsaWQoYXR0cikpIHtcbiAgICByZXR1cm4gYXR0cjtcbiAgfVxuXG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogQ29tcG9zZSBhbmQgc2V0IGF0dHJpYnV0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXRBdHRyaWJ1dGlvbihcbiAgYWN0aW9uOiBBY3Rpb24sXG4gIG5vdGlmaWNhdGlvbklkOiBudW1iZXJcbik6IFByb21pc2U8QXR0cmlidXRpb24+IHtcbiAgY29uc3QgYXR0cmlidXRpb24gPSB7XG4gICAgYWN0aW9uLFxuICAgIG5vdGlmaWNhdGlvbklkLFxuICAgIHRzOiArbmV3IERhdGUoKSxcbiAgfTtcblxuICBsb2cuZGVidWcoJ1NldCBhdHRyaWJ1dGlvbiBpbnRvIGluZGV4ZWREQicsIGF0dHJpYnV0aW9uKTtcbiAgYXdhaXQgc2V0SURCKElEQl9BVFRSSUJVVElPTl9LRVksIGF0dHJpYnV0aW9uKTtcbiAgcmV0dXJuIGF0dHJpYnV0aW9uO1xufVxuXG4vKipcbiAqIFJlYWQgYXR0cmlidXRpb24gZnJvbSB1cmwncyBxdWVyeSBzdHJpbmcgYW5kXG4gKiBzZXQgdGhlbSBpbnRvIGluZGV4ZWREQi5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNldEF0dHJpYnV0aW9uVmlhVXJsKHVybDogVVJMKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgYXR0cmlidXRpb25TdHIgPSB1cmwuc2VhcmNoUGFyYW1zLmdldChTRUFSQ0hfUEFSQU1TX0FUVFJJQlVUSU9OX0tFWSk7XG5cbiAgICBpZiAoYXR0cmlidXRpb25TdHIpIHtcbiAgICAgIGNvbnN0IGF0dHJpYnV0aW9uT2JqID0gSlNPTi5wYXJzZShhdHRyaWJ1dGlvblN0cik7XG5cbiAgICAgIC8vIE9ubHkga2VlcCB0aGUgZmllbGRzIHRoYXQgd2UgaGF2ZVxuICAgICAgY29uc3QgYXR0cmlidXRpb246IEF0dHJpYnV0aW9uID0ge1xuICAgICAgICBhY3Rpb246IGF0dHJpYnV0aW9uT2JqLmFjdGlvbixcbiAgICAgICAgbm90aWZpY2F0aW9uSWQ6IGF0dHJpYnV0aW9uT2JqLm5vdGlmaWNhdGlvbklkLFxuICAgICAgICB0czogK2F0dHJpYnV0aW9uT2JqLnRzLFxuICAgICAgfTtcblxuICAgICAgbG9nLmRlYnVnKCdHZXQgYXR0cmlidXRpb24gYW5kIHNldCBpbnRvIGluZGV4ZWREQicsIGF0dHJpYnV0aW9uKTtcbiAgICAgIGF3YWl0IHNldElEQihJREJfQVRUUklCVVRJT05fS0VZLCBhdHRyaWJ1dGlvbik7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBsb2cuZXJyb3IoJ0ZhaWxlZCB0byBzZXQgYXR0cmlidXRpb24gdmlhIHVybCcsIGVycik7XG4gIH1cbn1cblxuLyoqXG4gKiBTZXQgYXR0cmlidXRpb24gb24gdGFyZ2V0IHVybCdzIHNlYXJjaCBwYXJhbXMsIHRoZW4gbmF2aWdhdGUgdG8gdGhhdCBwYWdlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbmF2aWdhdGVXaXRoQXR0cmlidXRpb24odXJsU3RyOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHVybFN0ciwgbG9jYXRpb24uaHJlZik7XG4gICAgY29uc3QgYXR0cmlidXRpb24gPSBhd2FpdCBnZXRBdHRyaWJ1dGlvbigpO1xuXG4gICAgLy8gU2V0IGF0dHJpYnV0aW9uIGludG8gc2VhcmNoIHBhcmFtZXRlcnNcbiAgICBpZiAoYXR0cmlidXRpb24pIHtcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFxuICAgICAgICBTRUFSQ0hfUEFSQU1TX0FUVFJJQlVUSU9OX0tFWSxcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoYXR0cmlidXRpb24pXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIE5hdmlnYXRlIHRvIGEgbmV3IHBhZ2VcbiAgICBsb2cuZGVidWcoJ05hdmlnYXRlIHRvIG5ldyBwYWdlIHdpdGggYXR0cmlidXRpb24nLCB1cmwudG9TdHJpbmcoKSk7XG4gICAgd2luZG93LmxvY2F0aW9uLmFzc2lnbih1cmwudG9TdHJpbmcoKSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGxvZy5lcnJvcignRmFpbGVkIHRvIG5hdmlnYXRlIHdpdGggYXR0cmlidXRpb24nLCBlcnIpO1xuICB9XG59XG5cbi8qKlxuICogQ29tcG9zZSB0aGUgYXR0cmlidXRpb24gZGF0YSAobGlrZSBub3RpZmljYXRpb25JZClcbiAqIGludG8gZWFjaCBldmVudCByZWNvcmQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb21wb3NlQXR0cmlidXRpb25FdmVudHMoXG4gIGV2ZW50czogRXZlbnRbXVxuKTogUHJvbWlzZTxBcnJheTxFdmVudCAmIHsgbm90aWZpY2F0aW9uSWQ/OiBudW1iZXIsIGxhc3RDbGtkTm90SWQ/OiBudW1iZXIgfT4+IHtcbiAgY29uc3QgYXR0cmlidXRpb24gPSBhd2FpdCBnZXRBdHRyaWJ1dGlvbigpO1xuXG4gIGlmIChhdHRyaWJ1dGlvbikge1xuICAgIGNvbnN0IHsgbm90aWZpY2F0aW9uSWQsIGFjdGlvbiB9ID0gYXR0cmlidXRpb247XG4gICAgY29uc3QgbGFzdENsa2ROb3RJZCA9IGFjdGlvbiA9PT0gJ2NsaWNrJyA/IG5vdGlmaWNhdGlvbklkIDogdW5kZWZpbmVkO1xuXG4gICAgcmV0dXJuIGV2ZW50cy5tYXAoZXZlbnQgPT4gKHtcbiAgICAgIC4uLmV2ZW50LFxuICAgICAgbm90aWZpY2F0aW9uSWQsXG4gICAgICBsYXN0Q2xrZE5vdElkLFxuICAgIH0pKTtcbiAgfVxuXG4gIHJldHVybiBldmVudHM7XG59XG4iLCIvLyBAZmxvd1xuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5pbXBvcnQganNDb29raWUgZnJvbSAnanMtY29va2llJztcbmltcG9ydCB0b3BEb21haW4gZnJvbSAnLi90b3BEb21haW4nO1xuXG50eXBlIENvb2tpZU9wdGlvbnMgPSB7XG4gIG1heGFnZT86IG51bWJlcixcbiAgcGF0aD86IHN0cmluZyxcbiAgZG9tYWluPzogc3RyaW5nLFxufTtcblxuY29uc3QgZG9tYWluID0gJy4nICsgdG9wRG9tYWluKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbmNvbnN0IERFRkFVTFRfT1BUSU9OUzogQ29va2llT3B0aW9ucyA9IHtcbiAgbWF4YWdlOiAzMTUzNjAwMDAwMCwgLy8gZGVmYXVsdCB0byBhIHllYXJcbiAgcGF0aDogJy8nLFxuICBkb21haW46IGRvbWFpbiAhPT0gJy4nID8gZG9tYWluIDogdW5kZWZpbmVkLFxufTtcblxuLyoqXG4gKiBBZGQgZnVuY3Rpb24gZXhTZXQgZm9yIFNldCBhIGBrZXlgIGFuZCBgdmFsdWVgIHdpdGggZGVmYXVsdCBvcHRpb25zIGluIG91ciBjb29raWUuXG4gKi9cbmNvbnN0IGV4U2V0ID0gKGtleTogc3RyaW5nLCB2YWx1ZTogYW55LCBvcHRpb25zOiBDb29raWVPcHRpb25zID0ge30pID0+IHtcbiAgLy8gQnVpbGQgZXhwaXJlcyBieSBtYXhhZ2VcbiAgY29uc3QgeyBtYXhhZ2UsIC4uLmF0dHIgfSA9IHsgLi4uREVGQVVMVF9PUFRJT05TLCAuLi5vcHRpb25zIH07XG4gIGpzQ29va2llLnNldChrZXksIHZhbHVlLCB7XG4gICAgLi4uYXR0cixcbiAgICBleHBpcmVzOiBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSArIG1heGFnZSksXG4gIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICAuLi5qc0Nvb2tpZSxcbiAgZXhTZXQsXG59O1xuIiwiLy8gQGZsb3dcblxuLyoqXG4gKiBHZXQgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0d28gZGF0ZXMgaW4gZGF5c1xuICpcbiAqIEBzZWUgaHR0cHM6Ly93d3cudzNyZXNvdXJjZS5jb20vamF2YXNjcmlwdC1leGVyY2lzZXMvamF2YXNjcmlwdC1kYXRlLWV4ZXJjaXNlLTgucGhwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaWZmRGF0ZXNJbkRheXMoZnJvbURhdGU6IERhdGUsIHRvRGF0ZTogRGF0ZSk6IG51bWJlciB7XG4gIHJldHVybiBNYXRoLmZsb29yKFxuICAgIChEYXRlLlVUQyh0b0RhdGUuZ2V0RnVsbFllYXIoKSwgdG9EYXRlLmdldE1vbnRoKCksIHRvRGF0ZS5nZXREYXRlKCkpIC1cbiAgICAgIERhdGUuVVRDKFxuICAgICAgICBmcm9tRGF0ZS5nZXRGdWxsWWVhcigpLFxuICAgICAgICBmcm9tRGF0ZS5nZXRNb250aCgpLFxuICAgICAgICBmcm9tRGF0ZS5nZXREYXRlKClcbiAgICAgICkpIC9cbiAgICAgICgxMDAwICogNjAgKiA2MCAqIDI0KVxuICApO1xufVxuIiwiLy8gQGZsb3dcblxuLyoqXG4gKiBEZWxheSBmb3IgYSBkdXJhdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaWxsaXNlY29uZHMgVGhlIGRlbGF5XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGRlbGF5KG1pbGxpc2Vjb25kczogbnVtYmVyKSB7XG4gIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtaWxsaXNlY29uZHMpKTtcbn1cbiIsIi8vIEBmbG93XG5pbXBvcnQgY29va2llIGZyb20gJy4vY29va2llJztcblxuLy8gRXhwb3J0IGZvciB1bml0IHRlc3RcbmV4cG9ydCBjb25zdCBGSVJTVF9USU1FX0NPT0tJRSA9ICdfcWdfZnRzJztcblxuLyoqXG4gKiBHZXQgZmlyc3QgdGltZSBjb29raWUgaW4gRGF0ZSBmb3JtYXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZpcnN0VGltZUNvb2tpZSgpOiA/RGF0ZSB7XG4gIGNvbnN0IGZpcnN0VGltZSA9IGNvb2tpZS5nZXQoRklSU1RfVElNRV9DT09LSUUpO1xuXG4gIGlmICghZmlyc3RUaW1lKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBEdWUgbGVnYWN5IGlzc3VlLCBjb252ZXJ0IHVuaXggdGltZXN0YW1wIHRvIHN0YW5kYXJkIHRpbWVzdGFtcFxuICByZXR1cm4gbmV3IERhdGUoK2ZpcnN0VGltZSAqIDEwMDApO1xufVxuXG4vKipcbiAqIFNldCBmaXJzdCB0aW1lIGNvb2tpZVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0Rmlyc3RUaW1lQ29va2llKCk6IHZvaWQge1xuICAvLyBBdm9pZCBkdXBsaWNhdGVkIGNvb2tpZSBzZXRcbiAgaWYgKGNvb2tpZS5nZXQoRklSU1RfVElNRV9DT09LSUUpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gRHVlIGxlZ2FjeSBpc3N1ZSwgY29udmVydCB0aW1lc3RhbXAgdG8gdW5peCBmb3JtYXRcbiAgY29uc3QgdW5peFRpbWVzdGFtcCA9IHBhcnNlSW50KCtuZXcgRGF0ZSgpIC8gMTAwMCk7XG4gIGNvb2tpZS5leFNldChGSVJTVF9USU1FX0NPT0tJRSwgdW5peFRpbWVzdGFtcCk7XG59XG4iLCJpbXBvcnQgKiBhcyBsb2cgZnJvbSAnbG9nbGV2ZWwnO1xuXG4vLyBFeHBvcnQgbG9nZ2VyIHdpdGggZ2l2aW5nIG5hbWUgdG8gYXZvaWQgbGV2ZWwgc2V0dGluZ3MgY29uZmxpY3Qgd2l0aCBjdXN0b21lcidzLlxuLy8gKEluIGNhc2UgdGhleSBhcmUgdXNpbmcgbG9nbGV2ZWwgdG9vKVxuY29uc3QgbG9nZ2VyID0gbG9nLmdldExvZ2dlcignYWlxdWEtc2RrJyk7XG5cbmNvbnN0IG9yaWdpbmFsRmFjdG9yeSA9IGxvZ2dlci5tZXRob2RGYWN0b3J5O1xubG9nZ2VyLm1ldGhvZEZhY3RvcnkgPSBmdW5jdGlvbiguLi5hcmdzKSB7XG4gIC8vIFRyYWNlIGVycm9yIGxvZyBvbiBSb2xsYmFyXG4gIGlmIChhcmdzWzBdID09PSAnZXJyb3InKSB7XG4gICAgcmV0dXJuICguLi5tc2dzKSA9PiB7XG4gICAgICAvKipcbiAgICAgICAqIFNpbmNlIHJvbGxiYXIgd2lsbCB0cnkgdG8gYWNjZXNzIHdpbmRvdyB0byB0cmFjayB0aGUgdW5jYXVnaHQgZXJyb3JzLlxuICAgICAgICogQnV0IHRoZXJlIHdpbGwgbm90IGhhdmUgd2luZG93IG9iamVjdCBpbiB3ZWIgd29ya2VyLCB3ZSBzaG91bGQgc2ltcGx5XG4gICAgICAgKiBjaGVjayB0aGUgZ2xvYmFsIHN0YXRlIGJlZm9yZSB1c2luZyBpdC5cbiAgICAgICAqL1xuICAgICAgaWYgKHdpbmRvdykge1xuICAgICAgICBjb25zdCBSb2xsYmFyID0gcmVxdWlyZSgnLi9yb2xsYmFyJykuZGVmYXVsdDtcbiAgICAgICAgUm9sbGJhci5lcnJvciguLi5tc2dzKTtcbiAgICAgIH1cblxuICAgICAgb3JpZ2luYWxGYWN0b3J5KC4uLmFyZ3MpKC4uLm1zZ3MpO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gb3JpZ2luYWxGYWN0b3J5KC4uLmFyZ3MpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgbG9nZ2VyO1xuIiwiLy8gQGZsb3dcbmltcG9ydCBsb2cgZnJvbSAnLi9sb2cnO1xuXG50eXBlIFJlcXVlc3RPcHRzID0ge1xuICB1cmw6IHN0cmluZyxcbiAgbWV0aG9kOiBzdHJpbmcsIC8vICdHRVQnLCAnUE9TVCcgb3IgZXRjXG4gIGRhdGE/OiBhbnksXG4gIGhlYWRlcnM/OiBPYmplY3QsXG59O1xuXG50eXBlIFJlc3BvbnNlRGF0YSA9IHtcbiAgc3RhdHVzOiBzdHJpbmcsXG4gIGpzb24/OiBhbnksXG4gIHRleHQ/OiBzdHJpbmcsXG59O1xuXG4vKipcbiAqIFNlbmRpbmcgYSBIVFRQIHJlcXVlc3Qgd2l0aCBYSFJcbiAqL1xuZnVuY3Rpb24gbWFrZVJlcXVlc3QoXG4gIG9wdHM6IFJlcXVlc3RPcHRzLFxuICBydW5JblN5bmM/OiBib29sZWFuXG4pOiBQcm9taXNlPFJlc3BvbnNlRGF0YT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHhoci5vcGVuKG9wdHMubWV0aG9kLCBvcHRzLnVybCwgIXJ1bkluU3luYyk7XG4gICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG5cbiAgICAvLyBTZXQgdGltZW91dCBpbiBhc3luYyBjYWxsXG4gICAgaWYgKCFydW5JblN5bmMpIHtcbiAgICAgIHhoci50aW1lb3V0ID0gODAwMDtcbiAgICB9XG5cbiAgICBpZiAob3B0cy5oZWFkZXJzKSB7XG4gICAgICAvLyBEZXN0cnVjdCBpdCBmaXJzdCB0byBhdm9pZCBmbG93IGVycm9yXG4gICAgICBjb25zdCB7IGhlYWRlcnMgfSA9IG9wdHM7XG4gICAgICBPYmplY3Qua2V5cyhoZWFkZXJzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgaGVhZGVyc1trZXldKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCAzMDApIHtcbiAgICAgICAgY29uc3QgcmVzcERhdGE6IFJlc3BvbnNlRGF0YSA9IHtcbiAgICAgICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoeGhyLnJlc3BvbnNlVGV4dCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXNwRGF0YS5qc29uID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGxvZy53YXJuKGVycik7XG4gICAgICAgICAgICByZXNwRGF0YS50ZXh0ID0geGhyLnJlc3BvbnNlVGV4dDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZShyZXNwRGF0YSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLXByb21pc2UtcmVqZWN0LWVycm9yc1xuICAgICAgICByZWplY3Qoe1xuICAgICAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXG4gICAgICAgICAgc3RhdHVzVGV4dDogeGhyLnN0YXR1c1RleHQsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1wcm9taXNlLXJlamVjdC1lcnJvcnNcbiAgICAgIHJlamVjdCh7XG4gICAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXG4gICAgICAgIHN0YXR1c1RleHQ6IHhoci5zdGF0dXNUZXh0LFxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGlmIChvcHRzLmRhdGEpIHtcbiAgICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KG9wdHMuZGF0YSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB4aHIuc2VuZCgpO1xuICAgIH1cbiAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1ha2VSZXF1ZXN0O1xuIiwiLy8gQGZsb3dcblxuLyoqXG4gKiBWYWxpZCB1dG0gcGFyYW1ldGVyc1xuICpcbiAqIEBzZWUgaHR0cHM6Ly9zdXBwb3J0Lmdvb2dsZS5jb20vYW5hbHl0aWNzL2Fuc3dlci8xMDMzODYzI3BhcmFtZXRlcnNcbiAqL1xuY29uc3QgVVRNX1BBUkFNUyA9IFtcbiAgJ3V0bV9zb3VyY2UnLFxuICAndXRtX21lZGl1bScsXG4gICd1dG1fY2FtcGFpZ24nLFxuICAndXRtX3Rlcm0nLFxuICAndXRtX2NvbnRlbnQnLFxuXTtcblxuLyoqXG4gKiBQYXJzZSB1dG0gcGFyYW1ldGVycyBmcm9tIFVSTCBxdWVyeXN0cmluZ1xuICovXG5mdW5jdGlvbiBwYXJzZVV0bVBhcmFtcyh1cmw6IFVSTCkge1xuICBpZiAoIXVybC5zZWFyY2gpIHtcbiAgICByZXR1cm4ge307XG4gIH1cblxuICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHVybC5zZWFyY2gpO1xuICBjb25zdCB1dG1QYXJhbXMgPSB7fTtcblxuICBVVE1fUEFSQU1TLmZvckVhY2gocGFyYW0gPT4ge1xuICAgIGNvbnN0IHV0bVBhcmFtID0gc2VhcmNoUGFyYW1zLmdldChwYXJhbSk7XG5cbiAgICBpZiAodXRtUGFyYW0pIHtcbiAgICAgIHV0bVBhcmFtc1twYXJhbV0gPSB1dG1QYXJhbTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiB1dG1QYXJhbXM7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHBhcnNlVXRtUGFyYW1zO1xuIiwiLy8gQGZsb3dcbmltcG9ydCBSb2xsYmFySW5zdGFuY2UgZnJvbSAncm9sbGJhcic7XG5pbXBvcnQgeyBnZXRQYWNrYWdlVmVyc2lvbiB9IGZyb20gJy4vdmVyc2lvbic7XG5cbmNvbnN0IFNES19FTlYgPSBwcm9jZXNzLmVudi5TREtfRU5WIHx8ICdsb2NhbCc7XG5sZXQgc2VudEV4Y2VwdGlvbnMgPSBbXTtcblxuLyoqXG4gKiBDaGVjayBpZiBuZXcgZXhjZXB0aW9uIGlzIHJlcGVhdGVkLlxuICogSWYgbm90LCBwdXQgaXQgaW50byBhbiBhcnJheSBmb3IgZHVwbGljYXRlZCBjaGVjay5cbiAqL1xuZnVuY3Rpb24gc2hvdWxkSWdub3JlTmV3RXhjZXB0aW9uKGV4Y2VwdGlvbjogc3RyaW5nKTogYm9vbGVhbiB7XG4gIC8vIElnbm9yZSBkdXBsaWNhdGVkIGV4Y2VwdGlvblxuICBpZiAoc2VudEV4Y2VwdGlvbnMuaW5jbHVkZXMoZXhjZXB0aW9uKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gTG9nIHRoZSBrbm93biBleGNlcHRpb25cbiAgc2VudEV4Y2VwdGlvbnMucHVzaChleGNlcHRpb24pO1xuICByZXR1cm4gZmFsc2U7XG59XG5cbmNvbnN0IFJvbGxiYXIgPSBuZXcgUm9sbGJhckluc3RhbmNlKHtcbiAgLy8gT25seSBlbmFibGUgb24gc3RhZ2luZyBvciBwcm9kdWN0aW9uIGVudlxuICBlbmFibGVkOiBTREtfRU5WID09PSAnc3RhZ2luZycgfHwgU0RLX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxuICBhY2Nlc3NUb2tlbjogcHJvY2Vzcy5lbnYuUk9MTEJBUl9UT0tFTixcbiAgY2FwdHVyZVVuY2F1Z2h0OiB0cnVlLFxuICBjYXB0dXJlVW5oYW5kbGVkUmVqZWN0aW9uczogdHJ1ZSxcbiAgdmVyYm9zZTogdHJ1ZSxcbiAgYXV0b0luc3RydW1lbnQ6IHtcbiAgICBsb2c6IGZhbHNlLFxuICB9LFxuICBwYXlsb2FkOiB7XG4gICAgZW52aXJvbm1lbnQ6IFNES19FTlYsXG4gICAgY2xpZW50OiB7XG4gICAgICBqYXZhc2NyaXB0OiB7XG4gICAgICAgIGNvZGVfdmVyc2lvbjogZ2V0UGFja2FnZVZlcnNpb24oKSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcbiAgY2hlY2tJZ25vcmUoaXNVbmNhdWdodCwgYXJncywgcGF5bG9hZCkge1xuICAgIC8qKlxuICAgICAqIFNob3VsZCBjb250YWlucyBhbnkgY29udGVudFxuICAgICAqL1xuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIHVuY2F1Z2h0IGVycm9yXG4gICAgICovXG4gICAgaWYgKGlzVW5jYXVnaHQpIHtcbiAgICAgIGNvbnN0IGVyciA9IGFyZ3NbMV07XG5cbiAgICAgIC8vIElnbm9yZSBpZiBlcnJvciBpbnN0YW5jZSBpcyBub3QgZm91bmRcbiAgICAgIGlmICghKGVyciBpbnN0YW5jZW9mIEVycm9yKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gSWdub3JlIHVuY2F1Z2h0IGVycm9yIHRoYXQgbm90IGNhdXNlZCBieSBvdXIgU0RLXG4gICAgICBpZiAoIWVyci5zdGFjay5pbmNsdWRlcygnYWlxdWEuanMnKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNob3VsZElnbm9yZU5ld0V4Y2VwdGlvbihlcnIubWVzc2FnZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJ5IHRvIGdldCBlcnJvciBtZXNzYWdlIGZyb20gZmlyc3QgYXJndW1lbnRcbiAgICAgKi9cbiAgICB0cnkge1xuICAgICAgY29uc3QgZXJyTXNnID0gYCR7YXJnc1swXX1gIHx8ICcnO1xuICAgICAgcmV0dXJuIHNob3VsZElnbm9yZU5ld0V4Y2VwdGlvbihlcnJNc2cpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIHNob3VsZElnbm9yZU5ld0V4Y2VwdGlvbihlcnIubWVzc2FnZSk7XG4gICAgfVxuICB9LFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IFJvbGxiYXI7XG4iLCIvLyBAZmxvd1xuXG4vKipcbiAqIENvdmVyIEphdmFTY3JpcHQgZGF0ZVRpbWUgdG8gVW5peCB0aW1lc3RhbXBcbiAqIEBwYXJhbSB7TnVtYmVyfSBkYXRlVGltZSBUaGUgbnVtZXJpYyB2YWx1ZSBvZiB0aGUgc3BlY2lmaWVkIGRhdGUgYXMgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgSmFudWFyeSAxLCAxOTcwLCAwMDowMDowMCBVVENcbiAqL1xuZXhwb3J0IGNvbnN0IHRvVW5peFRpbWVzdGFtcCA9IChkYXRlVGltZTogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIE1hdGguZmxvb3IoZGF0ZVRpbWUgLyAxZTMpO1xufTtcblxuLyoqXG4gKiBDb3ZlciBVbml4IHRpbWVzdGFtcCB0byBKYXZhU2NyaXB0IGRhdGVUaW1lLlxuICogZGF0ZVRpbWU6IFRoZSBudW1lcmljIHZhbHVlIG9mIHRoZSBzcGVjaWZpZWQgZGF0ZSBhcyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSBKYW51YXJ5IDEsIDE5NzAsIDAwOjAwOjAwIFVUQ1xuICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVzdGFtcCBUaGUgVW5peCB0aW1lc3RhbXBcbiAqL1xuZXhwb3J0IGNvbnN0IHRvRGF0ZVRpbWUgPSAodW5peFRpbWVzdGFtcDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIHVuaXhUaW1lc3RhbXAgKiAxZTM7XG59O1xuIiwiaW1wb3J0IGpzQ29va2llIGZyb20gJ2pzLWNvb2tpZSc7XG5pbXBvcnQgeyBwYXJzZSB9IGZyb20gJ3VybCc7XG5cbi8qKlxuICogZ2V0TGV2ZWxzIHJldHVybnMgYWxsIGxldmVscyBvZiB0aGUgZ2l2ZW4gdXJsLlxuICpcbiAqIEV4YW1wbGUgbGV2ZWxzOlxuICpcbiAqICAgICAgZ2V0TGV2ZWxzKCdodHRwOi8vd3d3Lmdvb2dsZS5jby51aycpO1xuICogICAgICAvLyA9PiBbXCJjby51a1wiLCBcImdvb2dsZS5jby51a1wiLCBcInd3dy5nb29nbGUuY28udWtcIl1cbiAqXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHJldHVybiB7QXJyYXl9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmNvbnN0IGdldExldmVscyA9IHVybCA9PiB7XG4gIGNvbnN0IGhvc3QgPSBwYXJzZSh1cmwpLmhvc3RuYW1lO1xuICBjb25zdCBwYXJ0cyA9IGhvc3Quc3BsaXQoJy4nKTtcbiAgY29uc3QgbGFzdCA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xuICBjb25zdCBsZXZlbHMgPSBbXTtcblxuICAvLyBJcCBhZGRyZXNzLlxuICBjb25zdCBudW1MYXN0ID0gcGFyc2VJbnQobGFzdCwgMTApO1xuICBpZiAocGFydHMubGVuZ3RoID09PSA0ICYmICFpc05hTihudW1MYXN0KSAmJiBgJHtudW1MYXN0fWAgPT09IGxhc3QpIHtcbiAgICByZXR1cm4gbGV2ZWxzO1xuICB9XG5cbiAgLy8gTG9jYWxob3N0LlxuICBpZiAocGFydHMubGVuZ3RoIDw9IDEpIHtcbiAgICByZXR1cm4gbGV2ZWxzO1xuICB9XG5cbiAgLy8gQ3JlYXRlIGxldmVscy5cbiAgZm9yICh2YXIgaSA9IHBhcnRzLmxlbmd0aCAtIDI7IGkgPj0gMDsgLS1pKSB7XG4gICAgbGV2ZWxzLnB1c2gocGFydHMuc2xpY2UoaSkuam9pbignLicpKTtcbiAgfVxuXG4gIHJldHVybiBsZXZlbHM7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgdG9wIGRvbWFpbi5cbiAqXG4gKiBUaGUgZnVuY3Rpb24gY29uc3RydWN0cyB0aGUgbGV2ZWxzIG9mIGRvbWFpblxuICogYW5kIGF0dGVtcHRzIHRvIHNldCBhIGdsb2JhbCBjb29raWUgb24gZWFjaCBvbmVcbiAqIHdoZW4gaXQgc3VjY2VlZHMgaXQgcmV0dXJucyB0aGUgdG9wIGxldmVsIGRvbWFpbi5cbiAqXG4gKiBUaGUgbWV0aG9kIHJldHVybnMgYW4gZW1wdHkgc3RyaW5nIHdoZW4gdGhlIGhvc3RuYW1lXG4gKiBpcyBhbiBpcCBvciBgbG9jYWxob3N0YC5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgICAgdG9wRG9tYWluKCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYmF6Jyk7XG4gKiAgICAgIC8vID0+ICcnXG4gKiAgICAgIHRvcERvbWFpbignaHR0cDovL2RldjozMDAwL2JheicpO1xuICogICAgICAvLyA9PiAnJ1xuICogICAgICB0b3BEb21haW4oJ2h0dHA6Ly8xMjcuMC4wLjE6MzAwMC9iYXonKTtcbiAqICAgICAgLy8gPT4gJydcbiAqICAgICAgdG9wRG9tYWluKCdodHRwOi8vc2VnbWVudC5pby9iYXonKTtcbiAqICAgICAgLy8gPT4gJ3NlZ21lbnQuaW8nXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5jb25zdCB0b3BEb21haW4gPSB1cmwgPT4ge1xuICBjb25zdCBsZXZlbHMgPSBnZXRMZXZlbHModXJsKTtcblxuICAvLyBMb29rdXAgdGhlIHJlYWwgdG9wIGxldmVsIG9uZS5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZXZlbHMubGVuZ3RoOyArK2kpIHtcbiAgICBjb25zdCBjbmFtZSA9ICdRRzp0ZXN0JztcbiAgICBjb25zdCBkb21haW4gPSBsZXZlbHNbaV07XG4gICAgY29uc3Qgb3B0cyA9IHsgZG9tYWluOiAnLicgKyBkb21haW4gfTtcblxuICAgIC8vIGh0dHA6Ly9jdXJsLmhheHguc2UvcmZjL2Nvb2tpZV9zcGVjLmh0bWxcbiAgICAvLyBodHRwczovL3B1YmxpY3N1ZmZpeC5vcmcvbGlzdC9lZmZlY3RpdmVfdGxkX25hbWVzLmRhdFxuICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80NzQxOTg5N1xuICAgIC8vXG4gICAgLy8gdHJ5IHNldHRpbmcgYSBkdW1teSBjb29raWUgd2l0aCB0aGUgb3B0aW9uc1xuICAgIC8vIGlmIHRoZSBjb29raWUgaXNuJ3Qgc2V0LCBpdCBwcm9iYWJseSBtZWFuc1xuICAgIC8vIHRoYXQgdGhlIGRvbWFpbiBpcyBvbiB0aGUgcHVibGljIHN1ZmZpeCBsaXN0XG4gICAgLy8gbGlrZSBteWFwcC5oZXJva3VhcHAuY29tIG9yIGxvY2FsaG9zdCAvIGlwLlxuICAgIGpzQ29va2llLnNldChjbmFtZSwgdHJ1ZSwgb3B0cyk7XG4gICAgaWYgKGpzQ29va2llLmdldEpTT04oY25hbWUpKSB7XG4gICAgICBqc0Nvb2tpZS5yZW1vdmUoY25hbWUsIG9wdHMpO1xuICAgICAgcmV0dXJuIGRvbWFpbjtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gJyc7XG59O1xuXG4vKipcbiAqIEV4cG9zZSBgdG9wRG9tYWluYFxuICovXG5leHBvcnQgZGVmYXVsdCB0b3BEb21haW47XG5cbmV4cG9ydCB7IGdldExldmVscyB9O1xuIiwiLy8gQGZsb3dcbmltcG9ydCBjb29raWUgZnJvbSAnLi4vdXRpbHMvY29va2llJztcbmltcG9ydCB7IFdVU0VSX0lEX0tFWSB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5cbi8qKlxuICogR2VuZXJhdGUgYSByYW5kb20gbnVtYmVyIHN0cmluZyAoMTYgY2hhcmFjdGVycykgYXMgYHdVc2VySWRgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBUT0RPOiBSZXdyaXRlIHRoaXMgZnVuY3Rpb24uXG4gKiAgICAgICBDdXJyZW50bHksIGl0IHdpbGwgbm90IGd1YXJhbnRlZSB0aGUgbGVuZ3RoIG9mIHJldHVybiB2YWx1ZS5cbiAqICAgICAgIEVYOiBXaGVuIE1hdGgucmFuZG9tKCkgcmV0dXJuIDBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlVXNlcklkKCk6IHN0cmluZyB7XG4gIHJldHVybiAoXG4gICAgKE1hdGgucmFuZG9tKCkgKyAnICcpLnN1YnN0cmluZygyLCAxMCkgK1xuICAgIChNYXRoLnJhbmRvbSgpICsgJyAnKS5zdWJzdHJpbmcoMiwgMTApICtcbiAgICAoTWF0aC5yYW5kb20oKSArICcgJykuc3Vic3RyaW5nKDIsIDIpXG4gICk7XG59XG5cbi8qKlxuICogR2V0IHVzZXIgaWQgZnJvbSBjb29raWVzXG4gKiAoVXNlIGZvciB1c2VyIGV2ZW50cyAmIGlud2ViIHJlcXVlc3QpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRXVXNlcklkKCk6IHN0cmluZyB7XG4gIHJldHVybiAoY29va2llLmdldEpTT04oV1VTRVJfSURfS0VZKSB8fCAnJykudG9TdHJpbmcoKTtcbn1cblxuLyoqXG4gKiBTZXQgdXNlciBpZCBpbnRvIGNvb2tpZXNcbiAqXG4gKiBUT0RPOiBgUUdVc2VySWRgIHRoYXQgc3RvcmVkIGluc2lkZSBjb29raWVzIGlzIHRoZVxuICogICAgICAgYWxpYXMgb2YgYHdVc2VySWRgIHdlIHVzaW5nIGluIHNlcnZlciwgbWF5IHJlbmFtZVxuICogICAgICAgaXQgdG8gYHdVc2VySWRgIHRvIHByZXZlbnQgY29uZnVzaW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0V1VzZXJJZCgpOiBzdHJpbmcge1xuICBjb25zdCB1c2VySWQgPSBnZW5lcmF0ZVVzZXJJZCgpO1xuXG4gIGNvb2tpZS5leFNldChXVVNFUl9JRF9LRVksIHVzZXJJZCk7XG4gIHJldHVybiB1c2VySWQ7XG59XG4iLCIvLyBAZmxvd1xuaW1wb3J0IHsgZ2V0IGFzIGdldElEQiwgc2V0IGFzIHNldElEQiB9IGZyb20gJ2lkYi1rZXl2YWwnO1xuaW1wb3J0IGxvZyBmcm9tICcuL2xvZyc7XG5pbXBvcnQgd2l0aEFwcFNkayBmcm9tICcuL3dpdGhBcHBTZGsnO1xuaW1wb3J0IHsgSURCX1ZFUlNJT05fS0VZIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcblxuLyoqXG4gKiBHZXQgc2RrIHZlcnNpb24gYmFzZWQgb24gcGFja2FnZS5qc29uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQYWNrYWdlVmVyc2lvbigpOiBzdHJpbmcge1xuICByZXR1cm4gcHJvY2Vzcy5lbnYuVkVSU0lPTiB8fCAnJztcbn1cblxuLyoqXG4gKiBHZXQgc2RrIHZlcnNpb24gZnJvbSBpbmRleGVkREJcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNka1ZlcnNpb24oKTogUHJvbWlzZTxzdHJpbmcgfCB0eXBlb2YgdW5kZWZpbmVkPiB7XG4gIGNvbnN0IHZlcnNpb24gPSBhd2FpdCBnZXRJREIoSURCX1ZFUlNJT05fS0VZKTtcbiAgcmV0dXJuIHZlcnNpb247XG59XG5cbi8qKlxuICogU2F2ZSBsYXRlc3Qgc2RrIHZlcnNpb24gaW50byBpbmRleGVkREJcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNldFNka1ZlcnNpb24odmVyc2lvbjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIGF3YWl0IHNldElEQihJREJfVkVSU0lPTl9LRVksIHZlcnNpb24pO1xuICBsb2cuaW5mbyhgVXBkYXRlZCBTREsgdmVyc2lvbiB0byAke3ZlcnNpb259YCk7XG59XG5cbi8qKlxuICogTG9nIEFuZHJvaWQgb3IgaU9TIHNkayB2ZXJzaW9uIG9uIGNvbnNvbGVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ01vYmlsZVNka1ZlcnNpb24oKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGlzV2l0aEFwcFNkayA9IGF3YWl0IHdpdGhBcHBTZGsoKTtcblxuICBpZiAoIWlzV2l0aEFwcFNkaykge1xuICAgIGxvZy5kZWJ1ZygnQUlRVUEgQXBwIFNESyBpcyBub3QgaW5zdGFsbGVkJyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgeyBnZXRQbGF0Zm9ybSwgZ2V0VmVyc2lvbiB9ID0gd2luZG93LmFpcU1vYmlsZVNkayB8fCB7fTtcblxuICAvLyBHZXQgQW5kcm9pZCBzZGsgdmVyc2lvblxuICBpZiAodHlwZW9mIGdldFBsYXRmb3JtID09PSAnZnVuY3Rpb24nICYmIGdldFBsYXRmb3JtKCkgPT09ICdhbmRyb2lkJykge1xuICAgIGNvbnN0IGFuZHJvaWRTZGtWZXJzaW9uID0gZ2V0VmVyc2lvbigpO1xuICAgIGxvZy5kZWJ1ZygnQW5kcm9pZCBTREsgdmVyaW9uLCB2JywgYW5kcm9pZFNka1ZlcnNpb24pO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEdldCBpT1Mgc2RrIHZlcnNpb25cbiAgLy8gTm90ZTogaU9TIHNkayB3b3VsZCd0IGluamVjdCBnZXRQbGF0Zm9ybSgpIG1ldGhvZFxuICBjb25zdCBpb3NTZGtWZXJzaW9uID0gYXdhaXQgZ2V0VmVyc2lvbigpO1xuICBsb2cuZGVidWcoJ2lPUyBTREsgdmVyaW9uLCB2JywgaW9zU2RrVmVyc2lvbik7XG59XG4iLCIvLyBAZmxvd1xuXG4vKipcbiAqIFRlc3QgaXQgaXMgaW4gQXBwJ3Mgd2VidmlldyB3aXRoIG91ciBBcHAtU0RLIG9yIG5vdFxuICovXG5jb25zdCB3aXRoQXBwU2RrID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCB7IGFpcU1vYmlsZVNkaywgUmVhY3ROYXRpdmVXZWJWaWV3IH0gPSB3aW5kb3c7XG5cbiAgLy8gRG8gaGFuZHNoYWtpbmcgd2hlbiBSZWFjdE5hdGl2ZVdlYlZpZXcgcHJlc2VudCBpbiBnbG9iYWwuIFRoZSBXZWJTZGtcbiAgLy8gaW5zaWRlIFdlYlZpZXcgd2lsbCB0cnkgdG8gc2VuZCBoYW5kc2hha2UgbWVzc2FnZSB0byByZWFjaCBvdXRcbiAgLy8gb3VyIG1lc3NhZ2UgbGlzdGVuZXIgb24gUmVhY3QgTmF0aXZlIFdlYlZpZXcuIElmIHdlIGRvbid0IHJlY2VpdmVcbiAgLy8gdGhlIHJlc3BvbnNlIGluIDIwMG1zLCB3ZSBhc3N1bWUgdGhlIFdlYlBhZ2UgaXMgbm90IGluc2lkZSByZWFjdCBuYXRpdmVcbiAgLy8gYXBwLiBIYW5kc2hha2UgaXMgcmVxdWlyZWQgdG8gYXZvaWQgcmFjaW5nIGlzc3VlIG9mIEpTIGluamVjdGlvbiBpbiB0aGVcbiAgLy8gd2VidmlldyBhbmQgV2ViU2RrIGluaXQuXG4gIGlmIChSZWFjdE5hdGl2ZVdlYlZpZXcpIHtcbiAgICBsZXQgaGFuZHNoYWtlUmVzb2x2ZXI7XG5cbiAgICBjb25zdCBtc2dIYW5kbGVyID0gKHsgZGF0YSB9KSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIG1zZ0hhbmRsZXIpO1xuXG4gICAgICBpZiAodHlwZW9mIGhhbmRzaGFrZVJlc29sdmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGhhbmRzaGFrZVJlc29sdmVyKGRhdGEgPT09ICdhaXFfYWNrJyk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBpc1dpdGhpblJOID0gYXdhaXQgUHJvbWlzZS5yYWNlKFtcbiAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBoYW5kc2hha2VSZXNvbHZlciA9IHJlc29sdmU7XG5cbiAgICAgICAgUmVhY3ROYXRpdmVXZWJWaWV3LnBvc3RNZXNzYWdlKFxuICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIHR5cGU6ICdoYW5kc2hha2UnLFxuICAgICAgICAgICAgc291cmNlOiAnYWlxJyxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbXNnSGFuZGxlciwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgfSksXG4gICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIC8vIFJlbW92ZSBtZXNzYWdlIGhhbmRsZXIgd2hlbiB0aW1lb3V0XG4gICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBtc2dIYW5kbGVyKTtcblxuICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9LCAyMDApXG4gICAgICApLFxuICAgIF0pO1xuXG4gICAgaWYgKGlzV2l0aGluUk4pIHtcbiAgICAgIHJldHVybiBpc1dpdGhpblJOO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBhaXFNb2JpbGVTZGsgJiYgYWlxTW9iaWxlU2RrLmxvZ0V2ZW50ICYmIGFpcU1vYmlsZVNkay5nZXRWZXJzaW9uO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgd2l0aEFwcFNkaztcbiIsIi8vIEBmbG93XG5pbXBvcnQgbG9hZE5vdGlmeUlmcmFtZSBmcm9tICcuL2xvYWROb3RpZnlJZnJhbWUnO1xuaW1wb3J0IGxvZyBmcm9tICcuLi91dGlscy9sb2cnO1xuXG5pbXBvcnQgdHlwZSB7IFFHU2V0dGluZ3MgfSBmcm9tICcuLi90eXBlcy9xZ1NldHRpbmdzJztcblxuLyoqXG4gKiBJbml0aWFsaXplIHdlYiBwdXNoIGludGVncmF0aW9uIGluIFwic2ltcGxlXCIgd2F5XG4gKlxuICogI1RPRE86IFtRR1JBUEgtMjA3N10gbW9yZSBjb2RlcyBoZXJlIFRFRUhFRX5cbiAqL1xuZnVuY3Rpb24gaW5pdFNpbXBsZVB1c2gocWdTZXR0aW5nczogUUdTZXR0aW5ncykge1xuICB0cnkge1xuICAgIGxvZy5kZWJ1ZygnSW5pdGlhbGl6aW5nIHNpbXBsZSB3ZWIgcHVzaCBpbnRlZ3JhdGlvbi4uLicpO1xuXG4gICAgLy8gQXBwZW5kIGlmcmFtZVxuICAgIGxvYWROb3RpZnlJZnJhbWUocWdTZXR0aW5ncy5xZ2VuZHBvaW50KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgbG9nLmVycm9yKCdTaW1wbGUgUHVzaCBJbnRlZ3JhdGlvbicsIGVycik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgaW5pdFNpbXBsZVB1c2g7XG4iLCIvLyBAZmxvd1xuZXhwb3J0IGNvbnN0IE1BTklGRVNUX0xJTktfSUQgPSAncWctbWFuaWZlc3QnO1xuXG4vKipcbiAqIExvYWQgbWFuaWZlc3QuanNvbiBpbiBjbGllbnQgd2Vic2l0ZVxuICogKEZvciBwdXNoIG5vdGlmaWNhdGlvbiBzdWJzY3JpcHRpb24pXG4gKi9cbmZ1bmN0aW9uIGxvYWRNYW5pZmVzdChhc3NldHNSb290Pzogc3RyaW5nKTogdm9pZCB7XG4gIC8vIE5vdCBuZWVkIHRvIGFwcGVuZCBhZ2FpblxuICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoTUFOSUZFU1RfTElOS19JRCkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBFbnN1cmUgbGVhZGluZyBhbmQgdHJhaWxpbmcgc2xhc2ggaW4gcGF0aFxuICBjb25zdCBtb2RpZmllZEFzc2V0c1Jvb3QgPSAoYXNzZXRzUm9vdCB8fCAnLycpXG4gICAgLnJlcGxhY2UoL15cXC8qLywgJy8nKVxuICAgIC5yZXBsYWNlKC8kfFxcLyskLywgJy8nKTtcblxuICBjb25zdCBsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpO1xuICBsLnNldEF0dHJpYnV0ZSgncmVsJywgJ21hbmlmZXN0Jyk7XG4gIGwuc2V0QXR0cmlidXRlKCdpZCcsIE1BTklGRVNUX0xJTktfSUQpO1xuICBsLnNldEF0dHJpYnV0ZSgnaHJlZicsIGAke21vZGlmaWVkQXNzZXRzUm9vdH1tYW5pZmVzdC5qc29uYCk7XG4gIGwuc2V0QXR0cmlidXRlKCdjcm9zc29yaWdpbicsICd1c2UtY3JlZGVudGlhbHMnKTsgLy8gRW5hYmxlIENST1NcblxuICAvLyBJZiBgPGhlYWQ+YCBpcyBub3QgYXZhaWxhYmxlLCBhcHBlbmQgbWFuaWZlc3Qgb24gZG9jdW1lbnQgcm9vdFxuICBpZiAoIWRvY3VtZW50LmhlYWQpIHtcbiAgICBkb2N1bWVudC5hcHBlbmRDaGlsZChsKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBjaGlsZHMgPSBkb2N1bWVudC5oZWFkLmNoaWxkcmVuO1xuICBpZiAoY2hpbGRzLmxlbmd0aCA+IDApIHtcbiAgICBkb2N1bWVudC5oZWFkLmluc2VydEJlZm9yZShsLCBjaGlsZHNbMF0pO1xuICB9IGVsc2Uge1xuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbG9hZE1hbmlmZXN0O1xuIiwiLy8gQGZsb3dcbmltcG9ydCBsb2cgZnJvbSAnLi4vdXRpbHMvbG9nJztcblxuLy8gRXhwb3J0IGZvciB1bml0IHRlc3RcbmV4cG9ydCBjb25zdCBJRlJBTUVfSUQgPSAnUUdBJztcblxuLyoqXG4gKiBMb2FkIGlmcmFtZSB0byBlbmFibGUgc2VydmljZSB3b3JrZXIgYW5kXG4gKiBhc2sgcHVzaCBwZXJtaXNzaW9uIGF0IHNwZWNpZmljIGN1c3RvbSBkb21haW4uXG4gKi9cbmZ1bmN0aW9uIGxvYWROb3RpZnlJZnJhbWUocWdlbmRwb2ludD86IHN0cmluZyk6IHZvaWQge1xuICBpZiAoIXFnZW5kcG9pbnQpIHtcbiAgICBsb2cuZXJyb3IoJ0ZhaWxlZCB0byBhZGQgaWZyYW1lLCBgcWdlbmRwb2ludGAgc2V0dGluZyBpcyBtaXNzaW5nJyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gQXBwZW5kIGFuIGlmcmFtZSB0byBhc2sgcHVzaCBwZXJtaXNzaW9uXG4gIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICBjb25zdCBpZnJhbWVVcmwgPSBxZ2VuZHBvaW50LnN0YXJ0c1dpdGgoJ2h0dHBzOicpXG4gICAgPyBxZ2VuZHBvaW50LnJlcGxhY2UoLyR8XFwvKyQvLCAnJykgLy8gUmVtb3ZlIHRyYWlsaW5nIHNsYXNoXG4gICAgOiBgaHR0cHM6Ly8ke3FnZW5kcG9pbnR9Ly5xZ3IucGhgO1xuICBpZnJhbWUuaWQgPSAnUUdBJztcbiAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnc3JjJywgaWZyYW1lVXJsKTtcbiAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAndmlzaWJpbGl0eTogaGlkZGVuOyB3aWR0aDogMDtoZWlnaHQ6IDA7Jyk7XG5cbiAgaWYgKGRvY3VtZW50LmJvZHkpIHtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlmcmFtZSk7XG4gIH0gZWxzZSBpZiAoZG9jdW1lbnQuaGVhZCkge1xuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcbiAgfVxuXG4gIC8vIEdldCBhIHNpZ25hbCB0aGF0IHVzZXIgYWxsb3dlZC9kaXNhbGxvd2VkIHRoZSBwdXNoIG5vdGlmaWNhdGluIGluIGlmcmFtZVxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsICh7IGRhdGEsIG9yaWdpbiB9KSA9PiB7XG4gICAgaWYgKG9yaWdpbiAhPT0gaWZyYW1lVXJsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHdpbmRvdy5xZygnbWVzc2FnZS1yZWNlaXZlZCcsIGRhdGEpO1xuICB9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgbG9hZE5vdGlmeUlmcmFtZTtcbiIsIi8vIEBmbG93XG5pbXBvcnQgbG9nIGZyb20gJy4uL3V0aWxzL2xvZyc7XG5cbmxldCBjYWNoZWRTd1JlZ2lzdHJhdGlvbjogU2VydmljZVdvcmtlclJlZ2lzdHJhdGlvbiB8IG51bGwgPSBudWxsO1xuXG4vKipcbiAqIENoZWNrIGlmIG91ciBzZXJ2aWNlIHdvcmtlciB3YXMgcmVnaXN0ZXJlZCBvbiByZWxhdGl2ZSBzY29wZXMsXG4gKiB1bnJlZ2lzdGVyIHRoZW0gYWxsIGV4Y2VwdCBvZiB0YXJnZXQncyBzY29wZSBvbmUuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHVucmVnaXN0ZXJFeGlzdGVkU2VydmljZVdvcmtlcnMoXG4gIHNjb3BlUGF0aDogc3RyaW5nXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgaWYgKCFuYXZpZ2F0b3Iuc2VydmljZVdvcmtlcikge1xuICAgIHRocm93IG5ldyBFcnJvcignU2VydmljZSB3b3JrZXJzIGFyZSBub3Qgc3VwcG9ydGVkLicpO1xuICB9XG5cbiAgY29uc3QgcmVnaXN0cmF0aW9ucyA9IGF3YWl0IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmdldFJlZ2lzdHJhdGlvbnMoKTtcbiAgY29uc3QgdW5yZWdpc3RlclJlc3VsdHMgPSByZWdpc3RyYXRpb25zXG4gICAgLy8gT25seSBpZiBjdXJyZW50IHJlZ2lzdHJhdGlvbiBjb250YWlucyBvdXIgc2VydmljZSB3b3JrZXJcbiAgICAuZmlsdGVyKHJlZ2lzdHJhdGlvbiA9PiB7XG4gICAgICAvLyBEbyBub3QgdW5yZWdpc3RlciBzZXJ2aWNlIHdvcmtlciB3aGljaCBvbiB0YXJnZXQgc2NvcGVcbiAgICAgIGlmIChuZXcgVVJMKHJlZ2lzdHJhdGlvbi5zY29wZSkucGF0aG5hbWUgPT09IHNjb3BlUGF0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIChyZWdpc3RyYXRpb24uYWN0aXZlICYmXG4gICAgICAgICAgcmVnaXN0cmF0aW9uLmFjdGl2ZS5zY3JpcHRVUkwuaW5jbHVkZXMoJ3FnLXN3JykpIHx8XG4gICAgICAgIChyZWdpc3RyYXRpb24uaW5zdGFsbGluZyAmJlxuICAgICAgICAgIHJlZ2lzdHJhdGlvbi5pbnN0YWxsaW5nLnNjcmlwdFVSTC5pbmNsdWRlcygncWctc3cnKSlcbiAgICAgICk7XG4gICAgfSlcbiAgICAubWFwKGFzeW5jIHJlZ2lzdHJhdGlvbiA9PiB7XG4gICAgICAvLyBVbnJlZ2lzdGVyIG91ciBzZXJ2aWNlIHdvcmtlciBpbiBvdGhlciBzY29wZShzKVxuICAgICAgY29uc3QgdW5yZWdpc3RlclJlc3VsdCA9IGF3YWl0IHJlZ2lzdHJhdGlvbi51bnJlZ2lzdGVyKCk7XG4gICAgICBpZiAoIXVucmVnaXN0ZXJSZXN1bHQpIHtcbiAgICAgICAgbG9nLmVycm9yKFxuICAgICAgICAgICdGYWlsZWQgdG8gdW5yZWdpc3RlciBleGlzdGVkIHNlcnZpY2Ugd29ya2VyJyxcbiAgICAgICAgICByZWdpc3RyYXRpb24uc2NvcGVcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBsb2cuZGVidWcoJ1VucmVnaXN0ZWQgZXhpc3RlZCBzZXJ2aWNlIHdvcmtlcicsIHJlZ2lzdHJhdGlvbi5zY29wZSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcblxuICByZXR1cm4gKGF3YWl0IFByb21pc2UuYWxsKHVucmVnaXN0ZXJSZXN1bHRzKSkuZXZlcnkoQm9vbGVhbik7XG59XG5cbi8qKlxuICogUmVnaXN0ZXIgYSBuZXcgc2VydmljZSB3b3JrZXIgb24gZGVmYXVsdCBzY29wZSxcbiAqIGFuZCB0cnkgdG8gdW5yZWdpc3RlciBleGlzdGVkIHNlcnZpY2Ugd29ya2VyIHdoaWNoIGluc3RhbGxlZCBhdCBvdGhlciBzY29wZShzKS5cbiAqL1xuZnVuY3Rpb24gcmVnaXN0ZXJTZXJ2aWNlV29ya2VyKFxuICBzY3JpcHRVcmw6IHN0cmluZyxcbiAgc2NvcGU6IHN0cmluZ1xuKTogUHJvbWlzZTxTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uPiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEJ5IHBhc3MgaWYgY3VycmVudCBicm93c2VyIGlzIG5vdCBzdXBwb3J0aW5nIHNlcnZpY2Ugd29ya2VyXG4gICAgICBpZiAoISgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSkge1xuICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBFcnJvcignU2VydmljZSB3b3JrZXJzIGFyZSBub3Qgc3VwcG9ydGVkLicpKTtcbiAgICAgIH1cblxuICAgICAgLy8gJEZsb3dGaXhNZSAtIENoZWNrZWQgZXhpc3RlbmNlIGFib3ZlXG4gICAgICBjb25zdCBzZXJ2aWNlV29ya2VyOiBTZXJ2aWNlV29ya2VyQ29udGFpbmVyID0gbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXI7XG5cbiAgICAgIC8vIFF1aWNrIHJlc29sdmUgcmVnaXN0ZXJlZCB3b3JrZXJcbiAgICAgIGlmIChjYWNoZWRTd1JlZ2lzdHJhdGlvbikge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZShjYWNoZWRTd1JlZ2lzdHJhdGlvbik7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogVHJ5IHRvIHVucmVnaXN0ZXIgZXhpc3RlZCBzZXJ2aWNlIHdvcmtlcnMgYmVmb3JlIHJlZ2lzdGVyIGEgbmV3IG9uZVxuICAgICAgICovXG4gICAgICBjb25zdCBhcmVBbGxFeGlzdGVkU1dVbnJlZ2lzdGVyZWQgPSBhd2FpdCB1bnJlZ2lzdGVyRXhpc3RlZFNlcnZpY2VXb3JrZXJzKFxuICAgICAgICBzY29wZVxuICAgICAgKTtcbiAgICAgIGlmICghYXJlQWxsRXhpc3RlZFNXVW5yZWdpc3RlcmVkKSB7XG4gICAgICAgIHJldHVybiByZWplY3QoXG4gICAgICAgICAgbmV3IEVycm9yKCdGYWlsZWQgdG8gdW5yZWdpc3RlciBleGlzdGVkIHNlcnZpY2Ugd29ya2VyKHMpJylcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBSZWdpc3RlciBhIG5ldyBzZXJ2aWNlIHdvcmtlciBvbiBzcGVjaWZpYyBzY29wZVxuICAgICAgICovXG4gICAgICBjb25zdCBuZXdSZWdpc3RyYXRpb24gPSBhd2FpdCBzZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKHNjcmlwdFVybCwge1xuICAgICAgICBzY29wZSxcbiAgICAgICAgdHlwZTogJ2NsYXNzaWMnLFxuICAgICAgICB1cGRhdGVWaWFDYWNoZTogJ25vbmUnLFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChcbiAgICAgICAgbmV3UmVnaXN0cmF0aW9uLmFjdGl2ZSAmJlxuICAgICAgICBuZXdSZWdpc3RyYXRpb24uYWN0aXZlLnN0YXRlID09PSAnYWN0aXZhdGVkJ1xuICAgICAgKSB7XG4gICAgICAgIGxvZy5kZWJ1ZygnR290IGFjdGl2YXRlZCBzZXJ2aWNlIHdvcmtlcicsIG5ld1JlZ2lzdHJhdGlvbik7XG4gICAgICAgIGNhY2hlZFN3UmVnaXN0cmF0aW9uID0gbmV3UmVnaXN0cmF0aW9uO1xuICAgICAgICByZXR1cm4gcmVzb2x2ZShuZXdSZWdpc3RyYXRpb24pO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFdhaXRpbmcgZm9yIHRoZSBuZXcgd29ya2VyIGlzIGJlZW4gZnVsbHkgYWN0aXZhdGVkXG4gICAgICAgKi9cbiAgICAgIG5ld1JlZ2lzdHJhdGlvbi5hZGRFdmVudExpc3RlbmVyKCd1cGRhdGVmb3VuZCcsICgpID0+IHtcbiAgICAgICAgY29uc3QgaW5zdGFsbGluZ1dvcmtlciA9IG5ld1JlZ2lzdHJhdGlvbi5pbnN0YWxsaW5nO1xuXG4gICAgICAgIGlmICghaW5zdGFsbGluZ1dvcmtlcikgcmV0dXJuO1xuXG4gICAgICAgIC8vIFdhaXRpbmcgaWYgdGhlIHNlcnZpY2Ugd29ya2VyIGlzIGJlZW4gYWN0aXZhdGVkXG4gICAgICAgIGluc3RhbGxpbmdXb3JrZXIub25zdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBuZXdSZWdpc3RyYXRpb24uYWN0aXZlICYmXG4gICAgICAgICAgICBuZXdSZWdpc3RyYXRpb24uYWN0aXZlLnN0YXRlID09PSAnYWN0aXZhdGVkJ1xuICAgICAgICAgICkge1xuICAgICAgICAgICAgbG9nLmRlYnVnKFxuICAgICAgICAgICAgICAnUmVnaXN0ZXJlZCBhbmQgYWN0aXZhdGVkIG5ldyBzZXJ2aWNlIHdvcmtlcicsXG4gICAgICAgICAgICAgIG5ld1JlZ2lzdHJhdGlvblxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNhY2hlZFN3UmVnaXN0cmF0aW9uID0gbmV3UmVnaXN0cmF0aW9uO1xuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUobmV3UmVnaXN0cmF0aW9uKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiByZWplY3QoZXJyKTtcbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCByZWdpc3RlclNlcnZpY2VXb3JrZXI7XG4iLCIvLyBAZmxvd1xuaW1wb3J0IGxvZyBmcm9tICcuLi91dGlscy9sb2cnO1xuaW1wb3J0IHR5cGUgeyBRR1NldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMvcWdTZXR0aW5ncyc7XG5cbi8qKlxuICogQ2hlY2sgYXZhaWxhYmlsaXR5IG9mIHB1c2ggcmVsYXRlZCBmdW5jdGlvbnMgd2hpY2hcbiAqIGRlcGVuZHMgb24gUUdTZXR0aW5ncy5cbiAqL1xuZnVuY3Rpb24gc2hvdWxkRW5hYmxlUHVzaChxZ1NldHRpbmdzPzogUUdTZXR0aW5ncykge1xuICBjb25zdCB7IHB1c2gsIG9yaWdpbiB9ID0gcWdTZXR0aW5ncyB8fCB7fTtcblxuICBpZiAoIXB1c2gpIHtcbiAgICBsb2cud2FybignV2ViIHB1c2ggZnVuY3Rpb25zIGFyZSBkaXNhYmxlZCBieSB1c2VyIHNldHRpbmdzLicpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIENoZWNrIGlmIHB1c2ggZnVuY3Rpb25zIGFyZSByZXN0cmljdGVkIGJ5IHNhbWUgb3JpZ2luXG4gIGlmIChwdXNoLnJlc3RyaWN0T3JpZ2luICYmIG9yaWdpbikge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBvcmlnaW5VcmwgPSBuZXcgVVJMKG9yaWdpbik7XG4gICAgICBjb25zdCBpc1NhbWVPcmlnaW4gPSBvcmlnaW5Vcmwub3JpZ2luID09PSB3aW5kb3cubG9jYXRpb24ub3JpZ2luO1xuXG4gICAgICAvLyBTaG93IHdhcm5pbmcgb24gY29uc29sZVxuICAgICAgaWYgKCFpc1NhbWVPcmlnaW4pIHtcbiAgICAgICAgbG9nLndhcm4oXG4gICAgICAgICAgYFdlYiBwdXNoIGNhbiBvbmx5IGJlIHVzZWQgb24gJHtcbiAgICAgICAgICAgIG9yaWdpblVybC5vcmlnaW5cbiAgICAgICAgICB9LCBidXQgY3VycmVudCBvcmlnaW4gaXMgJHt3aW5kb3cubG9jYXRpb24ub3JpZ2lufS5gXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpc1NhbWVPcmlnaW47XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgbG9nLmVycm9yKCdJbnZhbGlkIG9yaWdpbiBVUkwnLCBvcmlnaW4pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5leHBvcnQgZGVmYXVsdCBzaG91bGRFbmFibGVQdXNoO1xuIiwiLyogZ2xvYmFscyBfX3dlYnBhY2tfYW1kX29wdGlvbnNfXyAqL1xyXG5tb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19hbWRfb3B0aW9uc19fO1xyXG4iLCJ2YXIgZztcclxuXHJcbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXHJcbmcgPSAoZnVuY3Rpb24oKSB7XHJcblx0cmV0dXJuIHRoaXM7XHJcbn0pKCk7XHJcblxyXG50cnkge1xyXG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxyXG5cdGcgPSBnIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSB8fCAoMSwgZXZhbCkoXCJ0aGlzXCIpO1xyXG59IGNhdGNoIChlKSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcclxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcclxufVxyXG5cclxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxyXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xyXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGc7XHJcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obW9kdWxlKSB7XHJcblx0aWYgKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XHJcblx0XHRtb2R1bGUuZGVwcmVjYXRlID0gZnVuY3Rpb24oKSB7fTtcclxuXHRcdG1vZHVsZS5wYXRocyA9IFtdO1xyXG5cdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XHJcblx0XHRpZiAoIW1vZHVsZS5jaGlsZHJlbikgbW9kdWxlLmNoaWxkcmVuID0gW107XHJcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCBcImxvYWRlZFwiLCB7XHJcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXHJcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuIG1vZHVsZS5sO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsIFwiaWRcIiwge1xyXG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxyXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiBtb2R1bGUuaTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcclxuXHR9XHJcblx0cmV0dXJuIG1vZHVsZTtcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNsRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O0FDOU5BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0ZBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ1JBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNsQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2JBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0ZBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0ZBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0ZBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNsQkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2xCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDYkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDTEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUNMQTs7Ozs7Ozs7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNydEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQSxXQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDMUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3pLQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0ZBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0RBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0RBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0RBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNKQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0pBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMxQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNMQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDUEE7QUFDQTs7Ozs7Ozs7Ozs7O0FDREE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ1BBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3BFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDckJBOzs7Ozs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNqQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDeENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDWkE7Ozs7Ozs7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ05BOzs7Ozs7Ozs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3BDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQzVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDM0VBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQy9EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDcEtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDdGJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQSxhQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUN6UEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDcE5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUMxR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUNoSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQSxVQWFBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUNwaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ25GQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ3BGQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDSEE7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQ0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDL1lBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3hGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7OztBQ3hkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUMzdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ2pkQTtBQUVBOzs7Ozs7O0FBTUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDakNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFNQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUF6REE7QUEyREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBRUE7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7Ozs7O0FBUUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQU5BO0FBT0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFPQTtBQWxCQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBc0JBOzs7OztBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBWkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBbEJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQW1CQTtBQUNBO0FBcEJBO0FBc0JBO0FBSUE7QUExQkE7QUFBQTtBQUNBO0FBREE7QUErQkE7QUFDQTtBQUNBO0FBakNBO0FBbUNBO0FBQ0E7QUFwQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFzQ0E7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFHQTs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFEQTtBQUFBO0FBT0E7QUFDQTtBQUVBO0FBQ0E7QUFYQTtBQUFBO0FBY0E7QUFDQTtBQWZBO0FBY0E7QUFDQTtBQWZBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUE4QkE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF2Q0E7QUFBQTtBQXlDQTtBQURBO0FBQ0E7QUF6Q0E7QUF3Q0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFEQTtBQXJFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQXdFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQURBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBL0ZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7O0FBa0dBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQU1BO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQU1BO0FBQ0E7QUFPQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUhBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUxBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFtQkE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBcEJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQXlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBR0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBVEE7QUFBQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFNQTtBQUNBO0FBTUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFRQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQVFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDMXBDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUFBO0FBQUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTFCQTtBQTRCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQXpDQTtBQUNBO0FBMENBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7Ozs7OztBQ3BJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7QUMzQkE7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzdCQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7Ozs7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFIQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFlQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXpCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7OztBQTRCQTtBQUNBO0FBRUE7OztBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDL0RBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7Ozs7QUFHQTtBQUtBO0FBR0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFKQTtBQUFBO0FBQUE7QUFBQTtBQU9BO0FBRUE7Ozs7OztBQUlBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU1BO0FBTkE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBT0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWpCQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBMEJBO0FBQ0E7QUEzQkE7QUFnQ0E7QUFFQTtBQUNBO0FBSEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQXREQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUF1REE7Ozs7Ozs7Ozs7OztBQ3hHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUdBO0FBRUE7QUFGQTtBQUlBO0FBUEE7QUFTQTtBQUNBO0FBRUE7QUFNQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN6REE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDaEJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7QUFTQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFNQTtBQUVBOzs7OztBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE1Q0E7QUE4Q0E7Ozs7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2xKQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNaQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTs7OztBQUdBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQTFDQTtBQTRDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3JRQTtBQUFBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBeEJBO0FBMEJBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMxQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBdEJBO0FBQ0E7QUF1QkE7QUFBQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBREE7QUFHQTtBQVJBO0FBVUE7Ozs7O0FBR0E7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQURBO0FBR0E7QUFWQTtBQVpBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFnQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQWRBO0FBaENBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7OztBQTBEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQy9HQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUdBO0FBRUE7QUFGQTtBQUtBO0FBUkE7QUFVQTtBQUFBO0FBQUE7QUFDQTs7OztBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBS0E7QUFOQTtBQUNBO0FBREE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQWJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFjQTtBQUNBO0FBaEJBO0FBQ0E7QUFEQTtBQW1CQTtBQUNBO0FBQ0E7QUFyQkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBMkJBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBekNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7O0FBMkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNqRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBOzs7QUFHQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFFQTs7Ozs7QUFHQTs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBRUE7QUFOQTtBQUFBO0FBQ0E7QUFEQTtBQWFBO0FBQ0E7QUFkQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQWtCQTtBQUNBO0FBQ0E7QUFwQkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7O0FBb0NBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDckhBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFHQTs7O0FBNkNBOzs7Ozs7OztBQTdDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUF0QkE7QUFBQTtBQUNBO0FBREE7QUF1QkE7QUFDQTtBQUVBO0FBQ0E7QUEzQkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQStCQTtBQUNBO0FBakNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQW9DQTtBQUNBO0FBckNBO0FBdUNBO0FBQ0E7QUFDQTtBQUNBO0FBMUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7O0FBZ0RBOzs7Ozs7O0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFEQTtBQURBO0FBQ0E7QUFRQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBeEJBO0FBQUE7QUFDQTtBQURBO0FBeUJBO0FBQ0E7QUFDQTtBQUNBO0FBNUJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQWlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE5Q0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7QUFnREE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDaEhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBOzs7Ozs7O0FBTUE7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFaQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBZ0JBO0FBQ0E7QUFqQkE7QUFDQTtBQURBO0FBb0JBO0FBQ0E7QUFDQTtBQUNBO0FBdkJBO0FBQUE7QUFDQTtBQURBO0FBMkJBO0FBQ0E7QUFFQTtBQUNBO0FBL0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7O0FBaUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMvQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBOzs7Ozs7QUFLQTs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBT0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQVpBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7O0FBY0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzFCQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7OztBQUdBOzs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBTkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFXQTtBQUNBO0FBWkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBZ0JBO0FBaEJBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7OztBQXFCQTs7Ozs7Ozs7Ozs7QUNqQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbEJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBWUE7OztBQUdBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTs7Ozs7QUFHQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDN0hBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbEJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFQQTtBQUNBO0FBd0JBOzs7QUFHQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFHQTtBQUdBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUdBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzFMQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7O0FDREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2hCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUVBOzs7O0FBR0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN2RkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNsQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBRUE7QUFFQTs7OztBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN2RUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNBQTtBQUNBO0FBRUE7QUF1QkE7QUFBQTtBQUlBO0FBQUE7QUFDQTtBQUFBO0FBQ0EsaUJBSUE7QUFDQTtBQVBBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFTQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFwQ0E7QUFzQ0E7QUFBQTtBQVlBO0FBVEE7QUFEQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBWEE7QUFhQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQXZCQTtBQUFBO0FBQUE7QUFBQTtBQXlCQTtBQUNBO0FBRUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFlQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7QUFuR0E7Ozs7Ozs7Ozs7O0FDbEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ1ZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBREE7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3RHQTtBQUFBOzs7QUFHQTtBQUNBO0FBQ0E7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2xDQTtBQUFBOzs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQzNEQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFvQkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBeEJBO0FBMEJBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBL0VBO0FBaUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBREE7QUFEQTtBQWNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFGQTtBQUZBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBREE7QUFEQTtBQXRCQTtBQXdDQTtBQUNBO0FBMkVBO0FBa0JBO0FBeUhBO0FBYUE7QUFwT0E7QUFDQTtBQXlSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQVdBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDOWhCQTtBQUNBO0FBQ0E7QUFDQTtBQVlBOzs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQVVBO0FBRUE7Ozs7O0FBR0E7QUFBQTtBQUFBO0FBVUE7Ozs7Ozs7QUFWQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7O0FBYUE7QUFBQTtBQUFBO0FBZUE7Ozs7Ozs7O0FBZkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBVkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7QUFtQkE7QUFBQTtBQUFBO0FBc0JBOzs7Ozs7O0FBdEJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUhBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBZEE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFrQkE7QUFDQTtBQW5CQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7OztBQXlCQTtBQUFBO0FBQUE7QUFxQkE7Ozs7Ozs7O0FBckJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFGQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBaUJBO0FBQ0E7QUFsQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7QUF5QkE7QUFBQTtBQUFBO0FBQ0E7Ozs7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFKQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBS0E7QUFDQTtBQVBBO0FBU0E7QUFFQTtBQUNBO0FBSEE7QUFBQTtBQUNBO0FBVkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDekhBOzs7QUFHQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBSEE7QUFNQTs7OztBQUdBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUZBOzs7Ozs7Ozs7Ozs7QUM5QkE7QUFBQTtBQUFBOzs7OztBQUtBO0FBQ0E7QUFTQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNmQTs7OztBQUlBO0FBQUE7QUFBQTtBQUNBOzs7O0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7QUNMQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBRUE7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2hDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDM0JBO0FBQUE7QUFBQTtBQUNBO0FBY0E7OztBQUdBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDOUVBO0FBQUE7Ozs7O0FBS0E7QUFRQTs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDcENBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUZBO0FBUUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdERBO0FBeURBOzs7Ozs7Ozs7Ozs7QUM3RUE7QUFBQTtBQUFBO0FBQUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7O0FBS0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNqQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBOzs7Ozs7Ozs7Ozs7OztBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUEwQkE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBR0E7Ozs7Ozs7Ozs7Ozs7QUNqR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBOzs7Ozs7Ozs7QUFRQTtBQUNBO0FBS0E7QUFFQTs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7QUFPQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3ZDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBR0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFHQTtBQUFBO0FBQUE7QUFLQTs7Ozs7OztBQUxBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7QUFRQTtBQUFBO0FBQUE7QUFLQTs7Ozs7OztBQUxBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFIQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7OztBQVFBO0FBQUE7QUFBQTtBQUNBOzs7O0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFKQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVdBO0FBQ0E7QUFiQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQW1CQTtBQUNBO0FBQ0E7QUFyQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzlCQTs7O0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBV0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbkJBO0FBQUE7QUFxQkE7QUFFQTtBQUVBO0FBQ0E7QUFGQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQU5BO0FBQ0E7QUFqQ0E7QUFtQkE7QUFDQTtBQXBCQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBaURBOzs7Ozs7Ozs7Ozs7QUN0REE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBR0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDckJBO0FBQUE7QUFBQTtBQUVBOzs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDckNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUVBOzs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdkNBO0FBRUE7QUFFQTs7Ozs7QUFJQTs7O0FBeUNBOzs7Ozs7Ozs7QUF6Q0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBT0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFkQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBZUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUhBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUpBO0FBQ0E7QUFEQTtBQVdBO0FBWEE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFoQkE7QUFBQTtBQUFBO0FBQUE7QUFSQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7O0FBNkNBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBT0E7QUFDQTtBQUNBO0FBVEE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBa0JBO0FBQ0E7QUFuQkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUErQkE7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQS9CQTtBQThCQTtBQUNBO0FBL0JBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUF1Q0E7QUFDQTtBQXpDQTtBQUNBO0FBREE7QUE2Q0E7OztBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW5FQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBd0VBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbklBO0FBQUE7QUFBQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUN6Q0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0EiLCJzb3VyY2VSb290IjoiIn0=